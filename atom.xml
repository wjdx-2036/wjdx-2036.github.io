<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>zhishengçš„åšå®¢</title>
  
  <subtitle>å‘è¦ä¸€ä¸ªä¸ªå¡«ï¼Œè·¯è¦ä¸€æ­¥æ­¥èµ°ï¼</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-02-08T03:34:35.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>zhisheng</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SpringBoot RocketMQ æ•´åˆä½¿ç”¨å’Œç›‘æ§</title>
    <link href="http://yoursite.com/2018/02/07/SpringBoot-RocketMQ/"/>
    <id>http://yoursite.com/2018/02/07/SpringBoot-RocketMQ/</id>
    <published>2018-02-06T16:00:00.000Z</published>
    <updated>2018-02-08T03:34:35.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fo8vqfuapwj31hc0zhtro.jpg" alt="photoshop-2845779_1920"></p><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>é€šè¿‡å‰é¢ä¸¤ç¯‡æ–‡ç« å¯ä»¥ç®€å•çš„äº†è§£ RocketMQ å’Œ å®‰è£… RocketMQ ï¼Œä»Šå¤©å°±å°† SpringBoot å’Œ RocketMQ æ•´åˆèµ·æ¥ä½¿ç”¨ã€‚<br><a id="more"></a></p><h3 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h3><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/01/05/SpringBoot-Kafka/" target="_blank" rel="noopener">SpringBoot Kafka æ•´åˆä½¿ç”¨</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/01/26/SpringBoot-RabbitMQ/" target="_blank" rel="noopener">SpringBoot RabbitMQ æ•´åˆä½¿ç”¨</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2018/01/27/SpringBoot-ActiveMQ/" target="_blank" rel="noopener">SpringBoot ActiveMQ æ•´åˆä½¿ç”¨</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2018/01/04/Kafka/" target="_blank" rel="noopener">Kafka å®‰è£…åŠå¿«é€Ÿå…¥é—¨</a></p><p>5ã€<a href="http://www.54tianzhisheng.cn/2018/01/28/RabbitMQ/" target="_blank" rel="noopener">SpringBoot RabbitMQ æ•´åˆè¿›é˜¶ç‰ˆ</a></p><p>6ã€<a href="http://www.54tianzhisheng.cn/2018/02/05/RocketMQ/" target="_blank" rel="noopener">RocketMQ åˆæ¢</a></p><p>7ã€<a href="http://www.54tianzhisheng.cn/2018/02/06/RocketMQ-install/" target="_blank" rel="noopener">RocketMQ å®‰è£…åŠå¿«é€Ÿå…¥é—¨</a></p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/02/07/SpringBoot-RocketMQ/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/02/07/SpringBoot-RocketMQ/</a></p><h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><p>åœ¨ IDEA åˆ›å»ºä¸€ä¸ª SpringBoot é¡¹ç›®ï¼Œé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fo8vq6ufg3j30pe0yoacc.jpg" alt="rocketmq01"></p><h4 id="pom-æ–‡ä»¶"><a href="#pom-æ–‡ä»¶" class="headerlink" title="pom æ–‡ä»¶"></a>pom æ–‡ä»¶</h4><p>å¼•å…¥ RocketMQ çš„ä¸€äº›ç›¸å…³ä¾èµ–ï¼Œæœ€åçš„ pom æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zhisheng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>rocketmq<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>rocketmq<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot RocketMQ<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.rocketmq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>rocketmq-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.rocketmq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>rocketmq-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h4><p>application.properties ä¸­å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># æ¶ˆè´¹è€…çš„ç»„å</span><br><span class="line">apache.rocketmq.consumer.PushConsumer=PushConsumer</span><br><span class="line"># ç”Ÿäº§è€…çš„ç»„å</span><br><span class="line">apache.rocketmq.producer.producerGroup=Producer</span><br><span class="line"># NameServeråœ°å€</span><br><span class="line">apache.rocketmq.namesrvAddr=localhost:9876</span><br></pre></td></tr></table></figure><h4 id="ç”Ÿäº§è€…"><a href="#ç”Ÿäº§è€…" class="headerlink" title="ç”Ÿäº§è€…"></a>ç”Ÿäº§è€…</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhisheng.rocketmq.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.producer.DefaultMQProducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.common.message.Message;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.remoting.common.RemotingHelper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StopWatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhisheng_tian on 2018/2/6</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RocketMQClient</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿäº§è€…çš„ç»„å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;apache.rocketmq.producer.producerGroup&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String producerGroup;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * NameServer åœ°å€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;apache.rocketmq.namesrvAddr&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String namesrvAddr;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">defaultMQProducer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ç”Ÿäº§è€…çš„ç»„å</span></span><br><span class="line">        DefaultMQProducer producer = <span class="keyword">new</span> DefaultMQProducer(producerGroup);</span><br><span class="line">        <span class="comment">//æŒ‡å®šNameServeråœ°å€ï¼Œå¤šä¸ªåœ°å€ä»¥ ; éš”å¼€</span></span><br><span class="line">        producer.setNamesrvAddr(namesrvAddr);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * Producerå¯¹è±¡åœ¨ä½¿ç”¨ä¹‹å‰å¿…é¡»è¦è°ƒç”¨startåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–ä¸€æ¬¡å³å¯</span></span><br><span class="line"><span class="comment">             * æ³¨æ„ï¼šåˆ‡è®°ä¸å¯ä»¥åœ¨æ¯æ¬¡å‘é€æ¶ˆæ¯æ—¶ï¼Œéƒ½è°ƒç”¨startæ–¹æ³•</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            producer.start();</span><br><span class="line"></span><br><span class="line">           <span class="comment">//åˆ›å»ºä¸€ä¸ªæ¶ˆæ¯å®ä¾‹ï¼ŒåŒ…å« topicã€tag å’Œ æ¶ˆæ¯ä½“</span></span><br><span class="line">             <span class="comment">//å¦‚ä¸‹ï¼štopic ä¸º "TopicTest"ï¼Œtag ä¸º "push"</span></span><br><span class="line">            Message message = <span class="keyword">new</span> Message(<span class="string">"TopicTest"</span>, <span class="string">"push"</span>, <span class="string">"å‘é€æ¶ˆæ¯----zhisheng-----"</span>.getBytes(RemotingHelper.DEFAULT_CHARSET));</span><br><span class="line"></span><br><span class="line">            StopWatch stop = <span class="keyword">new</span> StopWatch();</span><br><span class="line">            stop.start();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">                SendResult result = producer.send(message);</span><br><span class="line">                System.out.println(<span class="string">"å‘é€å“åº”ï¼šMsgId:"</span> + result.getMsgId() + <span class="string">"ï¼Œå‘é€çŠ¶æ€:"</span> + result.getSendStatus());</span><br><span class="line">            &#125;</span><br><span class="line">            stop.stop();</span><br><span class="line">            System.out.println(<span class="string">"----------------å‘é€ä¸€ä¸‡æ¡æ¶ˆæ¯è€—æ—¶ï¼š"</span> + stop.getTotalTimeMillis());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            producer.shutdown();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¶ˆè´¹è€…"><a href="#æ¶ˆè´¹è€…" class="headerlink" title="æ¶ˆè´¹è€…"></a>æ¶ˆè´¹è€…</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhisheng.rocketmq.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.consumer.DefaultMQPushConsumer;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.consumer.listener.ConsumeConcurrentlyStatus;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.consumer.listener.MessageListenerConcurrently;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.common.consumer.ConsumeFromWhere;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.common.message.MessageExt;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.remoting.common.RemotingHelper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhisheng_tian on 2018/2/6</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RocketMQServer</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆè´¹è€…çš„ç»„å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;apache.rocketmq.consumer.PushConsumer&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String consumerGroup;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * NameServer åœ°å€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;apache.rocketmq.namesrvAddr&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String namesrvAddr;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">defaultMQPushConsumer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ¶ˆè´¹è€…çš„ç»„å</span></span><br><span class="line">        DefaultMQPushConsumer consumer = <span class="keyword">new</span> DefaultMQPushConsumer(consumerGroup);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŒ‡å®šNameServeråœ°å€ï¼Œå¤šä¸ªåœ°å€ä»¥ ; éš”å¼€</span></span><br><span class="line">        consumer.setNamesrvAddr(namesrvAddr);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//è®¢é˜…PushTopicä¸‹Tagä¸ºpushçš„æ¶ˆæ¯</span></span><br><span class="line">            consumer.subscribe(<span class="string">"TopicTest"</span>, <span class="string">"push"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è®¾ç½®Consumerç¬¬ä¸€æ¬¡å¯åŠ¨æ˜¯ä»é˜Ÿåˆ—å¤´éƒ¨å¼€å§‹æ¶ˆè´¹è¿˜æ˜¯é˜Ÿåˆ—å°¾éƒ¨å¼€å§‹æ¶ˆè´¹</span></span><br><span class="line">            <span class="comment">//å¦‚æœéç¬¬ä¸€æ¬¡å¯åŠ¨ï¼Œé‚£ä¹ˆæŒ‰ç…§ä¸Šæ¬¡æ¶ˆè´¹çš„ä½ç½®ç»§ç»­æ¶ˆè´¹</span></span><br><span class="line">            consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);</span><br><span class="line">            consumer.registerMessageListener((MessageListenerConcurrently) (list, context) -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">for</span> (MessageExt messageExt : list) &#123;</span><br><span class="line"></span><br><span class="line">                        System.out.println(<span class="string">"messageExt: "</span> + messageExt);<span class="comment">//è¾“å‡ºæ¶ˆæ¯å†…å®¹</span></span><br><span class="line"></span><br><span class="line">                        String messageBody = <span class="keyword">new</span> String(messageExt.getBody(), RemotingHelper.DEFAULT_CHARSET);</span><br><span class="line"></span><br><span class="line">                        System.out.println(<span class="string">"æ¶ˆè´¹å“åº”ï¼šmsgId : "</span> + messageExt.getMsgId() + <span class="string">",  msgBody : "</span> + messageBody);<span class="comment">//è¾“å‡ºæ¶ˆæ¯å†…å®¹</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    <span class="keyword">return</span> ConsumeConcurrentlyStatus.RECONSUME_LATER; <span class="comment">//ç¨åå†è¯•</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS; <span class="comment">//æ¶ˆè´¹æˆåŠŸ</span></span><br><span class="line">            &#125;);</span><br><span class="line">            consumer.start();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨ç±»"><a href="#å¯åŠ¨ç±»" class="headerlink" title="å¯åŠ¨ç±»"></a>å¯åŠ¨ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhisheng.rocketmq;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RocketmqApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(RocketmqApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="RocketMQ"><a href="#RocketMQ" class="headerlink" title="RocketMQ"></a>RocketMQ</h3><p>ä»£ç å·²ç»éƒ½å†™å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å°†ä¸ RocketMQ æœ‰å…³çš„å¯åŠ¨èµ·æ¥ã€‚</p><h4 id="å¯åŠ¨-Name-Server"><a href="#å¯åŠ¨-Name-Server" class="headerlink" title="å¯åŠ¨ Name Server"></a>å¯åŠ¨ Name Server</h4><p>åœ¨å‰é¢æ–‡ç« ä¸­å·²ç»å†™è¿‡æ€ä¹ˆå¯åŠ¨ï¼Œ<a href="http://www.54tianzhisheng.cn/2018/02/06/RocketMQ-install/#%E5%90%AF%E5%8A%A8-NameServer" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/02/06/RocketMQ-install/#%E5%90%AF%E5%8A%A8-NameServer</a></p><p>è¿›å…¥åˆ°ç›®å½• ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd distribution/target/apache-rocketmq</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nohup sh bin/mqnamesrv &amp;</span><br><span class="line"></span><br><span class="line">tail -f ~/logs/rocketmqlogs/namesrv.log //é€šè¿‡æ—¥å¿—æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨-Broker"><a href="#å¯åŠ¨-Broker" class="headerlink" title="å¯åŠ¨ Broker"></a>å¯åŠ¨ Broker</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nohup sh bin/mqbroker -n localhost:9876 &amp;</span><br><span class="line"></span><br><span class="line">tail -f ~/logs/rocketmqlogs/broker.log//é€šè¿‡æ—¥å¿—æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ</span><br></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œå¯åŠ¨ç±»ï¼Œè¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fo8vqiq0jvj31kw0x1x6m.jpg" alt="2018-02-07_22-21-14"></p><h3 id="ç›‘æ§"><a href="#ç›‘æ§" class="headerlink" title="ç›‘æ§"></a>ç›‘æ§</h3><p>RocketMQæœ‰ä¸€ä¸ªå¯¹å…¶æ‰©å±•çš„å¼€æºé¡¹ç›® ocketmq-console ï¼Œå¦‚ä»Šä¹Ÿæäº¤ç»™äº† Apache ï¼Œåœ°å€åœ¨ï¼š<a href="">https://github.com/apache/rocketmq-externals/tree/master/rocketmq-console</a> ï¼Œå®˜æ–¹ä¹Ÿç»™å‡ºäº†å…¶æ”¯æŒçš„åŠŸèƒ½çš„ä¸­æ–‡æ–‡æ¡£ï¼š<a href="">https://github.com/apache/rocketmq-externals/blob/master/rocketmq-console/doc/1_0_0/UserGuide_CN.md</a> ï¼Œ é‚£ä¹ˆè¯¥å¦‚ä½•å®‰è£…ï¼Ÿ</p><h4 id="Docker-å®‰è£…"><a href="#Docker-å®‰è£…" class="headerlink" title="Docker å®‰è£…"></a>Docker å®‰è£…</h4><p>1ã€è·å– Docker é•œåƒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull styletang/rocketmq-console-ng</span><br></pre></td></tr></table></figure><p>2ã€è¿è¡Œï¼Œæ³¨æ„å°†ä½ è‡ªå·±çš„ NameServer åœ°å€æ›¿æ¢ä¸‹é¢çš„ 127.0.0.1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -e &quot;JAVA_OPTS=-Drocketmq.namesrv.addr=127.0.0.1:9876 -Dcom.rocketmq.sendMessageWithVIPChannel=false&quot; -p 8080:8080 -t styletang/rocketmq-console-ng</span><br></pre></td></tr></table></figure><h4 id="é-Docker-å®‰è£…"><a href="#é-Docker-å®‰è£…" class="headerlink" title="é Docker å®‰è£…"></a>é Docker å®‰è£…</h4><p>æˆ‘ä»¬ git clone ä¸€ä»½ä»£ç åˆ°æœ¬åœ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/apache/rocketmq-externals.git</span><br><span class="line"></span><br><span class="line">cd rocketmq-externals/rocketmq-console/</span><br></pre></td></tr></table></figure><p>éœ€è¦ jdk 1.7 ä»¥ä¸Šã€‚  æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn spring-boot:run</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package -Dmaven.test.skip=true</span><br><span class="line"></span><br><span class="line">java -jar target/rocketmq-console-ng-1.0.0.jar</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><p>1ã€å¦‚æœä½ ä¸‹è½½ä¾èµ–ç¼“æ…¢ï¼Œä½ å¯ä»¥é‡æ–°è®¾ç½® maven çš„ mirror ä¸ºé˜¿é‡Œäº‘çš„é•œåƒ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2ã€å¦‚æœä½ ä½¿ç”¨çš„ RocketMQ ç‰ˆæœ¬å°äº 3.5.8ï¼Œå¦‚æœæ‚¨ä½¿ç”¨ rocketmq &lt; 3.5.8ï¼Œè¯·åœ¨å¯åŠ¨ rocketmq-console-ng æ—¶æ·»åŠ  <code>-Dcom.rocketmq.sendMessageWithVIPChannel = false</code>ï¼ˆæˆ–è€…æ‚¨å¯ä»¥åœ¨ ops é¡µé¢ä¸­æ›´æ”¹å®ƒï¼‰</p><p>3ã€æ›´æ”¹ resource / application.properties ä¸­çš„ rocketmq.config.namesrvAddrï¼ˆæˆ–è€…å¯ä»¥åœ¨opsé¡µé¢ä¸­æ›´æ”¹å®ƒï¼‰</p><h3 id="é”™è¯¯è§£å†³æ–¹æ³•"><a href="#é”™è¯¯è§£å†³æ–¹æ³•" class="headerlink" title="é”™è¯¯è§£å†³æ–¹æ³•"></a>é”™è¯¯è§£å†³æ–¹æ³•</h3><p>1ã€Docker å¯åŠ¨é¡¹ç›®æŠ¥é”™</p><p><code>org.apache.rocketmq.remoting.exception.RemotingConnectException: connect to &lt;null&gt; failed</code></p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fo8vqhpxcrj31kw0qc4ln.jpg" alt="2018-02-07_23-28-51"></p><p>å°† Docker å¯åŠ¨å‘½ä»¤æ”¹æˆå¦‚ä¸‹ä»¥åï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -e &quot;JAVA_OPTS=-Drocketmq.config.namesrvAddr=127.0.0.1:9876 -Drocketmq.config.isVIPChannel=false&quot; -p 8080:8080 -t styletang/rocketmq-console-ng</span><br></pre></td></tr></table></figure><p>æŠ¥é”™ä¿¡æ¯æ”¹å˜äº†ï¼Œæ–°çš„æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ERROR op=global_exception_handler_print_error</span><br><span class="line"></span><br><span class="line">org.apache.rocketmq.console.exception.ServiceException: This date have&apos;t data!</span><br></pre></td></tr></table></figure><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fo8vql4zvij31kw0vz1kx.jpg" alt="2018-02-08_00-23-15"></p><p>çœ‹åˆ°ç½‘ä¸Šæœ‰äººä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œä»–ä»¬éƒ½é€šè¿‡è‡ªå·±çš„æ–¹å¼è§£å†³äº†ï¼Œä½†æ˜¯æ–¹æ³•æˆ‘éƒ½è¯•äº†ï¼Œä¸é€‚åˆæˆ‘ã€‚ä¸å¾—ä¸è¯´ï¼Œé˜¿é‡Œï¼Œä½ èƒ½å†ç”¨å¿ƒç‚¹å—ï¼Ÿæ—¢ç„¶æŠŠ RocketMQ æç»™ Apache äº†ï¼Œè¿™äº›æ–‡æ¡£å•¥çš„éƒ½å¿…é¡»æ›´æ–°å•Šï¼Œä¸è¦è¿˜æ»åç€å‘¢ï¼Œä¸ç„¶å°‘ä¸äº†è¢«åæ§½ï¼</p><p> æäº†å¾ˆä¹…è¿™ç§æ–¹æ³•æ²¡æˆåŠŸï¼Œæš‚æ—¶æ”¾å¼ƒï¼mmp</p><p>2ã€é Docker å®‰è£…ï¼Œåªå¥½æŠŠæºç ç¼–è¯‘æ‰“åŒ…äº†ã€‚</p><p>1) æ³¨æ„éœ€è¦ä¿®æ”¹å¦‚ä¸‹å›¾ä¸­çš„é…ç½®ï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fo8vq7xv71j31kw0nktmi.jpg" alt="2018-02-08_10-26-03"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rocketmq.config.namesrvAddr=localhost:9876//æ³¨æ„æ›¿æ¢ä½ è‡ªå·±çš„ip</span><br><span class="line"></span><br><span class="line">#å¦‚æœä½  rocketmq ç‰ˆæœ¬å°äº 3.5.8 æ‰éœ€è®¾ç½® `rocketmq.config.isVIPChannel` ä¸º falseï¼Œé»˜è®¤æ˜¯ true, è¿™ä¸ªå¯ä»¥åœ¨æºç ä¸­å¯ä»¥çœ‹åˆ°çš„</span><br><span class="line">rocketmq.config.isVIPChannel=</span><br></pre></td></tr></table></figure><p>2) æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package -Dmaven.test.skip=true</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘æˆåŠŸï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fo8vqk3r9ej31kw0tsh2z.jpg" alt="2018-02-08_10-41-35"></p><p>å¯ä»¥çœ‹åˆ°å·²ç»æ‰“å¥½äº† jar åŒ…ï¼š</p><p>è¿è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar rocketmq-console-ng-1.0.0.jar</span><br></pre></td></tr></table></figure><p>æˆåŠŸï¼Œä¸æŠ¥é”™äº†ï¼Œå¼€å¿ƒğŸ˜„ï¼Œè®¿é—® <a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a></p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fo8vqdzp1kj31kw0vyqap.jpg" alt="2018-02-08_11-06-26"></p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fo8vqlthfqj31e20liwgz.jpg" alt="2018-02-08_11-08-01"></p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fo8vqgsrl8j31kw09pjur.jpg" alt="2018-02-08_11-09-16"></p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fo8vqaazsyj31kw0p8qce.jpg" alt="2018-02-08_11-09-31"></p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fo8vqbosxvj31kw0vowp0.jpg" alt="2018-02-08_11-09-47"></p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fo8vqet48yj31kw0bsmzk.jpg" alt="2018-02-08_11-10-03"></p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fo8vq8q3v9j31kw0dfn0m.jpg" alt="2018-02-08_11-10-22"></p><p>æ•´ä¸ªç›‘æ§å¤§æ¦‚å°±æ˜¯è¿™äº›äº†ã€‚</p><p>ç„¶åæˆ‘è¿è¡Œä¹‹å‰çš„ SpringBoot æ•´åˆé¡¹ç›®ï¼ŒæŸ¥çœ‹ç›‘æ§ä¿¡æ¯å¦‚ä¸‹ï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fo8vqcyj00j31kw0up46m.jpg" alt="2018-02-08_11-22-11"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æ•´ç¯‡æ–‡ç« è®²è¿°äº† SpringBoot ä¸ RocketMQ æ•´åˆå’Œ RocketMQ ç›‘æ§å¹³å°çš„æ­å»ºã€‚</p><h3 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h3><p>1ã€<a href="">http://www.ymq.io/2018/02/02/spring-boot-rocketmq-example/#%E6%96%B0%E5%8A%A0%E9%A1%B9%E7%9B%AE</a></p><p>2ã€GitHub å®˜æ–¹ README</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws2.sinaimg.cn/large/006tNc79gy1fo8vqfuapwj31hc0zhtro.jpg&quot; alt=&quot;photoshop-2845779_1920&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‰æ&quot;&gt;&lt;a href=&quot;#å‰æ&quot; class=&quot;headerlink&quot; title=&quot;å‰æ&quot;&gt;&lt;/a&gt;å‰æ&lt;/h3&gt;&lt;p&gt;é€šè¿‡å‰é¢ä¸¤ç¯‡æ–‡ç« å¯ä»¥ç®€å•çš„äº†è§£ RocketMQ å’Œ å®‰è£… RocketMQ ï¼Œä»Šå¤©å°±å°† SpringBoot å’Œ RocketMQ æ•´åˆèµ·æ¥ä½¿ç”¨ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="RocketMQ" scheme="http://yoursite.com/tags/RocketMQ/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>RocketMQ ç®€å•çš„æ¶ˆæ¯ç¤ºä¾‹</title>
    <link href="http://yoursite.com/2018/02/07/rocketmq-example/"/>
    <id>http://yoursite.com/2018/02/07/rocketmq-example/</id>
    <published>2018-02-06T16:00:00.000Z</published>
    <updated>2018-02-06T15:22:02.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fo6h2isc2lj31hc0vhaqg.jpg" alt="father-and-son-2258681_1920"></p><p>ä½¿ç”¨ RocketMQ ä»¥ä¸‰ç§æ–¹å¼å‘é€æ¶ˆæ¯ï¼šå¯é çš„åŒæ­¥ï¼Œå¯é çš„å¼‚æ­¥å’Œå•å‘ä¼ è¾“ã€‚<br><a id="more"></a></p><h3 id="å¯é çš„åŒæ­¥ä¼ è¾“"><a href="#å¯é çš„åŒæ­¥ä¼ è¾“" class="headerlink" title="å¯é çš„åŒæ­¥ä¼ è¾“"></a>å¯é çš„åŒæ­¥ä¼ è¾“</h3><p>åº”ç”¨ï¼šå¯é çš„åŒæ­¥ä¼ è¾“å¹¿æ³›åº”ç”¨äºé‡è¦é€šçŸ¥æ¶ˆæ¯ï¼ŒçŸ­ä¿¡é€šçŸ¥ï¼ŒçŸ­ä¿¡è¥é”€ç³»ç»Ÿç­‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SyncProducer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//Instantiate with a producer group name.</span></span><br><span class="line">        DefaultMQProducer producer = <span class="keyword">new</span></span><br><span class="line">            DefaultMQProducer(<span class="string">"please_rename_unique_group_name"</span>);</span><br><span class="line">        <span class="comment">//Launch the instance.</span></span><br><span class="line">        producer.start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//Create a message instance, specifying topic, tag and message body.</span></span><br><span class="line">            Message msg = <span class="keyword">new</span> Message(<span class="string">"TopicTest"</span> <span class="comment">/* Topic */</span>,</span><br><span class="line">                <span class="string">"TagA"</span> <span class="comment">/* Tag */</span>,</span><br><span class="line">                (<span class="string">"Hello RocketMQ "</span> +</span><br><span class="line">                    i).getBytes(RemotingHelper.DEFAULT_CHARSET) <span class="comment">/* Message body */</span></span><br><span class="line">            );</span><br><span class="line">            <span class="comment">//Call send message to deliver message to one of brokers.</span></span><br><span class="line">            SendResult sendResult = producer.send(msg);</span><br><span class="line">            System.out.printf(<span class="string">"%s%n"</span>, sendResult);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Shut down once the producer instance is not longer in use.</span></span><br><span class="line">        producer.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¯é çš„å¼‚æ­¥ä¼ è¾“"><a href="#å¯é çš„å¼‚æ­¥ä¼ è¾“" class="headerlink" title="å¯é çš„å¼‚æ­¥ä¼ è¾“"></a>å¯é çš„å¼‚æ­¥ä¼ è¾“</h3><p>åº”ç”¨ï¼šå¼‚æ­¥ä¼ è¾“ä¸€èˆ¬ç”¨äºå“åº”æ—¶é—´æ•æ„Ÿçš„ä¸šåŠ¡åœºæ™¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AsyncProducer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//Instantiate with a producer group name.</span></span><br><span class="line">        DefaultMQProducer producer = <span class="keyword">new</span> DefaultMQProducer(<span class="string">"ExampleProducerGroup"</span>);</span><br><span class="line">        <span class="comment">//Launch the instance.</span></span><br><span class="line">        producer.start();</span><br><span class="line">        producer.setRetryTimesWhenSendAsyncFailed(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">final</span> <span class="keyword">int</span> index = i;</span><br><span class="line">                <span class="comment">//Create a message instance, specifying topic, tag and message body.</span></span><br><span class="line">                Message msg = <span class="keyword">new</span> Message(<span class="string">"TopicTest"</span>,</span><br><span class="line">                    <span class="string">"TagA"</span>,</span><br><span class="line">                    <span class="string">"OrderID188"</span>,</span><br><span class="line">                    <span class="string">"Hello world"</span>.getBytes(RemotingHelper.DEFAULT_CHARSET));</span><br><span class="line">                producer.send(msg, <span class="keyword">new</span> SendCallback() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(SendResult sendResult)</span> </span>&#123;</span><br><span class="line">                        System.out.printf(<span class="string">"%-10d OK %s %n"</span>, index,</span><br><span class="line">                            sendResult.getMsgId());</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onException</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">                        System.out.printf(<span class="string">"%-10d Exception %s %n"</span>, index, e);</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Shut down once the producer instance is not longer in use.</span></span><br><span class="line">        producer.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å•å‘ä¼ è¾“"><a href="#å•å‘ä¼ è¾“" class="headerlink" title="å•å‘ä¼ è¾“"></a>å•å‘ä¼ è¾“</h3><p>åº”ç”¨ï¼šå•å‘ä¼ è¾“ç”¨äºéœ€è¦ä¸­ç­‰å¯é æ€§çš„æƒ…å†µï¼Œä¾‹å¦‚æ—¥å¿—æ”¶é›†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OnewayProducer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">//Instantiate with a producer group name.</span></span><br><span class="line">        DefaultMQProducer producer = <span class="keyword">new</span> DefaultMQProducer(<span class="string">"ExampleProducerGroup"</span>);</span><br><span class="line">        <span class="comment">//Launch the instance.</span></span><br><span class="line">        producer.start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//Create a message instance, specifying topic, tag and message body.</span></span><br><span class="line">            Message msg = <span class="keyword">new</span> Message(<span class="string">"TopicTest"</span> <span class="comment">/* Topic */</span>,</span><br><span class="line">                <span class="string">"TagA"</span> <span class="comment">/* Tag */</span>,</span><br><span class="line">                (<span class="string">"Hello RocketMQ "</span> +</span><br><span class="line">                    i).getBytes(RemotingHelper.DEFAULT_CHARSET) <span class="comment">/* Message body */</span></span><br><span class="line">            );</span><br><span class="line">            <span class="comment">//Call send message to deliver message to one of brokers.</span></span><br><span class="line">            producer.sendOneway(msg);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Shut down once the producer instance is not longer in use.</span></span><br><span class="line">        producer.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æœ¬æ–‡æ˜¯ RocketMQ çš„ä¸‰ç§å‘é€æ¶ˆæ¯çš„æ–¹å¼ã€‚</p><p>è½¬å‘è¯·æ³¨æ˜åœ°å€ï¼š<a href="http://www.54tianzhisheng.cn/2018/02/07/rocketmq-example/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/02/07/rocketmq-example/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws4.sinaimg.cn/large/006tKfTcgy1fo6h2isc2lj31hc0vhaqg.jpg&quot; alt=&quot;father-and-son-2258681_1920&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ RocketMQ ä»¥ä¸‰ç§æ–¹å¼å‘é€æ¶ˆæ¯ï¼šå¯é çš„åŒæ­¥ï¼Œå¯é çš„å¼‚æ­¥å’Œå•å‘ä¼ è¾“ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="RocketMQ" scheme="http://yoursite.com/tags/RocketMQ/"/>
    
  </entry>
  
  <entry>
    <title>RocketMQ å®‰è£…åŠå¿«é€Ÿå…¥é—¨</title>
    <link href="http://yoursite.com/2018/02/06/RocketMQ-install/"/>
    <id>http://yoursite.com/2018/02/06/RocketMQ-install/</id>
    <published>2018-02-05T16:00:00.000Z</published>
    <updated>2018-02-07T14:01:51.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fo5pxy3w8oj31hc0u0b29.jpg" alt="tree-3097419_1920"></p><p>å¦‚æœä½ å¯¹ RocketMQ è¿˜æ²¡äº†è§£ï¼Œå»ºè®®å…ˆçœ‹ä¸‹ä¸Šä¸€ç¯‡æ–‡ç« ï¼š<a href="http://www.54tianzhisheng.cn/2018/02/05/RocketMQ/" target="_blank" rel="noopener">RocketMQ åˆæ¢</a></p><a id="more"></a><h3 id="å®‰è£…æ¡ä»¶"><a href="#å®‰è£…æ¡ä»¶" class="headerlink" title="å®‰è£…æ¡ä»¶"></a>å®‰è£…æ¡ä»¶</h3><ol><li>64ä½æ“ä½œç³»ç»Ÿï¼Œå»ºè®®ä½¿ç”¨ Linux / Unix / Mac;</li><li>64ä½JDK 1.8+;</li><li>Maven 3.2.x</li></ol><h3 id="ä¸‹è½½å’Œæ„å»º"><a href="#ä¸‹è½½å’Œæ„å»º" class="headerlink" title="ä¸‹è½½å’Œæ„å»º"></a>ä¸‹è½½å’Œæ„å»º</h3><p>ä» <a href="https://www.apache.org/dyn/closer.cgi?path=rocketmq/4.2.0/rocketmq-all-4.2.0-source-release.zip" target="_blank" rel="noopener">https://www.apache.org/dyn/closer.cgi?path=rocketmq/4.2.0/rocketmq-all-4.2.0-source-release.zip</a> ä¸‹è½½ 4.2.0 çš„æºç ç‰ˆæœ¬ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥è§£å‹4.2.0æºç ç‰ˆæœ¬å¹¶æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">unzip rocketmq-all-4.2.0-source-release.zip</span><br><span class="line"></span><br><span class="line">cd rocketmq-all-4.2.0/</span><br><span class="line"></span><br><span class="line">mvn -Prelease-all -DskipTests clean install -U</span><br></pre></td></tr></table></figure><p>æ„å»ºæˆåŠŸå¦‚ä¸‹ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fo7ukit9wbj31kw14o7l8.jpg" alt="2018-02-07_14-04-25"></p><p>è¿›å…¥åˆ°ç›®å½• ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd distribution/target/apache-rocketmq</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨-NameServer"><a href="#å¯åŠ¨-NameServer" class="headerlink" title="å¯åŠ¨ NameServer"></a>å¯åŠ¨ NameServer</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nohup sh bin/mqnamesrv &amp;</span><br><span class="line"></span><br><span class="line">tail -f ~/logs/rocketmqlogs/namesrv.log</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹å°±ä»£è¡¨å¯åŠ¨æˆåŠŸäº†ï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fo5pxzbap2j31kw0h413p.jpg" alt="rocketmq01"></p><h3 id="å¯åŠ¨-Broker"><a href="#å¯åŠ¨-Broker" class="headerlink" title="å¯åŠ¨ Broker"></a>å¯åŠ¨ Broker</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nohup sh bin/mqbroker -n localhost:9876 &amp;</span><br><span class="line"></span><br><span class="line">tail -f ~/logs/rocketmqlogs/broker.log</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹å°±ä»£è¡¨å¯åŠ¨æˆåŠŸäº†ï¼šä»æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ° broker æ³¨å†Œåˆ°äº† nameserver ä¸Šäº†ï¼ˆlocalhost:9876ï¼‰</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fo5pxt2wavj31kw0jeqi0.jpg" alt="rocketmq02"></p><h3 id="å‘é€å’Œæ¥æ”¶æ¶ˆæ¯"><a href="#å‘é€å’Œæ¥æ”¶æ¶ˆæ¯" class="headerlink" title="å‘é€å’Œæ¥æ”¶æ¶ˆæ¯"></a>å‘é€å’Œæ¥æ”¶æ¶ˆæ¯</h3><p>åœ¨å‘é€/æ¥æ”¶æ¶ˆæ¯ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰å®¢æˆ·åç§°æœåŠ¡å™¨çš„ä½ç½®ã€‚RocketMQ æä¾›äº†å¤šç§æ–¹æ³•æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä½¿ç”¨ç¯å¢ƒå˜é‡<code>NAMESRV_ADDR</code></p><h4 id="å‘é€æ¶ˆæ¯"><a href="#å‘é€æ¶ˆæ¯" class="headerlink" title="å‘é€æ¶ˆæ¯"></a>å‘é€æ¶ˆæ¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export NAMESRV_ADDR=localhost:9876</span><br><span class="line"></span><br><span class="line">sh bin/tools.sh org.apache.rocketmq.example.quickstart.Producer</span><br></pre></td></tr></table></figure><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fo5py0e7lgj31kw0d47j2.jpg" alt="rocketmq03"></p><h4 id="æ¥æ”¶æ¶ˆæ¯"><a href="#æ¥æ”¶æ¶ˆæ¯" class="headerlink" title="æ¥æ”¶æ¶ˆæ¯"></a>æ¥æ”¶æ¶ˆæ¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh bin/tools.sh org.apache.rocketmq.example.quickstart.Consumer</span><br></pre></td></tr></table></figure><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fo5pxwox08j31kw0rib29.jpg" alt="rocketmq04"></p><h3 id="å…³é—­æœåŠ¡å™¨"><a href="#å…³é—­æœåŠ¡å™¨" class="headerlink" title="å…³é—­æœåŠ¡å™¨"></a>å…³é—­æœåŠ¡å™¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sh bin/mqshutdown broker//åœæ­¢ broker</span><br><span class="line"></span><br><span class="line">sh bin/mqshutdown namesrv//åœæ­¢ nameserver</span><br></pre></td></tr></table></figure><p> å…³é—­æˆåŠŸåå¦‚ä¸‹ï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fo5pxsgyywj31kw0b5dov.jpg" alt="rocketmq05"></p><h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><p>ä¸Šé¢å‡ ä¸ªå¯åŠ¨å’Œå…³é—­ name server å’Œ broker çš„å°±ä¸å†è¯´äº†ï¼Œ</p><ul><li>æŸ¥çœ‹é›†ç¾¤æƒ…å†µ  <code>./mqadmin clusterList -n 127.0.0.1:9876</code></li><li>æŸ¥çœ‹ broker çŠ¶æ€   <code>./mqadmin brokerStatus -n 127.0.0.1:9876 -b 172.20.1.138:10911</code>   (æ³¨æ„æ¢æˆä½ çš„ broker åœ°å€)</li><li>æŸ¥çœ‹ topic åˆ—è¡¨    <code>./mqadmin topicList -n 127.0.0.1:9876</code></li><li>æŸ¥çœ‹ topic çŠ¶æ€    <code>./mqadmin topicStatus -n 127.0.0.1:9876 -t  MyTopic</code>  (æ¢æˆä½ æƒ³æŸ¥è¯¢çš„ topic)</li><li>æŸ¥çœ‹ topic è·¯ç”±    <code>./mqadmin topicRoute  -n 127.0.0.1:9876 -t  MyTopic</code></li></ul><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æœ¬æ–‡æ˜¯ RocketMQ çš„å®‰è£…åŠå¿«é€Ÿå…¥é—¨æ¡ˆä¾‹ã€‚</p><p>è½¬å‘è¯·æ³¨æ˜åœ°å€ï¼š<a href="http://www.54tianzhisheng.cn/2018/02/06/RocketMQ-install/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/02/06/RocketMQ-install/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws3.sinaimg.cn/large/006tKfTcgy1fo5pxy3w8oj31hc0u0b29.jpg&quot; alt=&quot;tree-3097419_1920&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ å¯¹ RocketMQ è¿˜æ²¡äº†è§£ï¼Œå»ºè®®å…ˆçœ‹ä¸‹ä¸Šä¸€ç¯‡æ–‡ç« ï¼š&lt;a href=&quot;http://www.54tianzhisheng.cn/2018/02/05/RocketMQ/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;RocketMQ åˆæ¢&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="RocketMQ" scheme="http://yoursite.com/tags/RocketMQ/"/>
    
  </entry>
  
  <entry>
    <title>RocketMQ åˆæ¢</title>
    <link href="http://yoursite.com/2018/02/05/RocketMQ/"/>
    <id>http://yoursite.com/2018/02/05/RocketMQ/</id>
    <published>2018-02-04T16:00:00.000Z</published>
    <updated>2018-02-05T09:58:52.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fo4vbrj17mj31hc0zj7hb.jpg" alt="gooafoss-1840758_1920"></p><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>RocketMQ æ˜¯é˜¿é‡Œå¼€æºçš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå‰ä¸ä¹…æçŒ®ç»™äº† Apache ã€‚æ­£å¦‚<a href="http://rocketmq.apache.org/" target="_blank" rel="noopener">å®˜ç½‘</a>ä»‹ç»å¦‚ä¸‹ï¼šå®ƒæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼æ¶ˆæ¯ä¼ é€’å’Œæµå¼æ•°æ®å¹³å°ã€‚</p><a id="more"></a><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fo4vbtu01lj31kw0jbjzw.jpg" alt="rocketmq01"></p><p>ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fo4vbvbgisj31kw0yw7c9.jpg" alt="rocketmq02"></p><h3 id="äº§å“å‘å±•å†å²"><a href="#äº§å“å‘å±•å†å²" class="headerlink" title="äº§å“å‘å±•å†å²"></a>äº§å“å‘å±•å†å²</h3><p>å¤§çº¦ç»å†äº†ä¸‰ä¸ªä¸»è¦ç‰ˆæœ¬è¿­ä»£</p><p><strong>ä¸€ã€Metaqï¼ˆMetamorphosisï¼‰1.x</strong></p><p>ç”±å¼€æºç¤¾åŒºkillme2008ç»´æŠ¤ï¼Œå¼€æºç¤¾åŒºéå¸¸æ´»è·ƒã€‚</p><p><strong>äºŒã€Metaq 2.x</strong></p><p>äº2012å¹´10æœˆä»½ä¸Šçº¿ï¼Œåœ¨æ·˜å®å†…éƒ¨è¢«å¹¿æ³›ä½¿ç”¨ã€‚</p><p><strong>ä¸‰ã€RocketMQ 3.x</strong></p><p>åŸºäºå…¬å¸å†…éƒ¨å¼€æºå…±å»ºåŸåˆ™ï¼ŒRocketMQ é¡¹ç›®åªç»´æŠ¤æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸”å»é™¤äº†æ‰€æœ‰å…¶ä»–è¿è¡Œæ—¶ä¾èµ–ï¼Œæ ¸å¿ƒåŠŸèƒ½æœ€ç®€åŒ–ã€‚æ¯ä¸ª BU çš„ä¸ªæ€§åŒ–éœ€æ±‚éƒ½åœ¨ RocketMQ é¡¹ç›®ä¹‹ä¸Šè¿›è¡Œæ·±åº¦å®šåˆ¶ã€‚RocketMQ å‘å…¶ä»– BU æä¾›çš„ä»…ä»…æ˜¯ Jar åŒ…ï¼Œä¾‹å¦‚è¦å®šåˆ¶ä¸€ä¸ª Brokerï¼Œé‚£ä¹ˆåªéœ€è¦ä¾èµ– rocketmq-broker è¿™ä¸ª jar åŒ…å³å¯ï¼Œå¯é€šè¿‡ API è¿›è¡Œäº¤äº’ï¼Œå¦‚æœå®šåˆ¶ clientï¼Œåˆ™ä¾èµ– rocketmq-client è¿™ä¸ª jar åŒ…ï¼Œå¯¹å…¶æä¾›çš„ api è¿›è¡Œå†å°è£…ã€‚</p><p>åœ¨ RocketMQ é¡¹ç›®åŸºç¡€ä¸Šè¡ç”Ÿçš„é¡¹ç›®å¦‚ä¸‹</p><ul><li><p>com.taobao.metaq v3.0 = RocketMQ + æ·˜å®ä¸ªæ€§åŒ–éœ€æ±‚</p><p>ä¸º<strong>æ·˜å®</strong>åº”ç”¨æä¾›æ¶ˆæ¯æœåŠ¡</p></li><li><p>com.alipay.zpullmsg v1.0 =RocketMQ + æ”¯ä»˜å®ä¸ªæ€§åŒ–éœ€æ±‚</p><p>ä¸º<strong>æ”¯ä»˜å®</strong>åº”ç”¨æä¾›æ¶ˆæ¯æœåŠ¡</p></li><li><p>com.alibaba.commonmq v1.0 = Notify + RocketMQ + B2Bä¸ªæ€§åŒ–éœ€æ±‚</p><p>ä¸º <strong>B2B</strong> åº”ç”¨æä¾›æ¶ˆæ¯æœåŠ¡</p></li></ul><p><strong>å››ã€RocketMQ 3.x</strong></p><p>ç›®å‰å®ƒçš„æœ€æ–°ç‰ˆæœ¬æ˜¯ 4.2 ç‰ˆæœ¬ã€‚</p><h3 id="æ¦‚å¿µä¸“ä¸šæœ¯è¯­"><a href="#æ¦‚å¿µä¸“ä¸šæœ¯è¯­" class="headerlink" title="æ¦‚å¿µä¸“ä¸šæœ¯è¯­"></a>æ¦‚å¿µä¸“ä¸šæœ¯è¯­</h3><p><strong>Producer</strong></p><p>æ¶ˆæ¯ç”Ÿäº§è€…ï¼Œè´Ÿè´£äº§ç”Ÿæ¶ˆæ¯ï¼Œä¸€èˆ¬ç”±ä¸šåŠ¡ç³»ç»Ÿè´Ÿè´£äº§ç”Ÿæ¶ˆæ¯ã€‚</p><p><strong>Consumer</strong></p><p>æ¶ˆæ¯æ¶ˆè´¹è€…ï¼Œè´Ÿè´£æ¶ˆè´¹æ¶ˆæ¯ï¼Œä¸€èˆ¬æ˜¯åå°ç³»ç»Ÿè´Ÿè´£å¼‚æ­¥æ¶ˆè´¹ã€‚</p><p><strong>Push Consumer</strong></p><p>Consumer çš„ä¸€ç§ï¼Œåº”ç”¨é€šå¸¸å‘ Consumer å¯¹è±¡æ³¨å†Œä¸€ä¸ª Listener æ¥å£ï¼Œä¸€æ—¦æ”¶åˆ°æ¶ˆæ¯ï¼ŒConsumer å¯¹è±¡ç«‹åˆ»å›è°ƒ Listener æ¥å£æ–¹æ³•ã€‚</p><p><strong>Pull Consumer</strong></p><p>Consumer çš„ä¸€ç§ï¼Œåº”ç”¨é€šå¸¸ä¸»åŠ¨è°ƒç”¨ Consumer çš„æ‹‰æ¶ˆæ¯æ–¹æ³•ä» Broker æ‹‰æ¶ˆæ¯ï¼Œä¸»åŠ¨æƒç”±åº”ç”¨æ§åˆ¶ã€‚</p><p><strong>Producer Group</strong></p><p>ä¸€ç±» Producer çš„é›†åˆåç§°ï¼Œè¿™ç±» Producer é€šå¸¸å‘é€ä¸€ç±»æ¶ˆæ¯ï¼Œä¸”å‘é€é€»è¾‘ä¸€è‡´ã€‚</p><p><strong>Consumer Group</strong></p><p>ä¸€ç±» Consumer çš„é›†åˆåç§°ï¼Œè¿™ç±» Consumer é€šå¸¸æ¶ˆè´¹ä¸€ç±»æ¶ˆæ¯ï¼Œä¸”æ¶ˆè´¹é€»è¾‘ä¸€è‡´ã€‚</p><p><strong>Broker</strong></p><p>æ¶ˆæ¯ä¸­è½¬è§’è‰²ï¼Œè´Ÿè´£å­˜å‚¨æ¶ˆæ¯ï¼Œè½¬å‘æ¶ˆæ¯ï¼Œä¸€èˆ¬ä¹Ÿç§°ä¸º Serverã€‚åœ¨ JMS è§„èŒƒä¸­ç§°ä¸º Providerã€‚</p><h3 id="æ¶æ„"><a href="#æ¶æ„" class="headerlink" title="æ¶æ„"></a>æ¶æ„</h3><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fo4vbs0dn7j30r30c23zl.jpg" alt="rmq-basic-arc"></p><p>ä»è¿™æ¶æ„å›¾ä¸­å¯ä»¥çœ‹åˆ°å®ƒä¸»è¦ç”±å››éƒ¨åˆ†ç»„æˆï¼šProducerï¼ˆç”Ÿäº§è€…ï¼‰ã€NameServerã€Brokerã€Consumerï¼ˆæ¶ˆè´¹è€…ï¼‰ã€‚</p><h3 id="Producer"><a href="#Producer" class="headerlink" title="Producer"></a>Producer</h3><p>ç”Ÿäº§è€…æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ã€‚åˆ†å¸ƒå¼ç”Ÿäº§è€…é€šè¿‡å¤šç§è´Ÿè½½å‡è¡¡æ¨¡å¼å‘ Broker é›†ç¾¤å‘é€æ¶ˆæ¯ã€‚å‘é€è¿‡ç¨‹æ”¯æŒå¿«é€Ÿå¤±è´¥å¹¶å…·æœ‰ä½å»¶è¿Ÿã€‚</p><h4 id="NameServer"><a href="#NameServer" class="headerlink" title="NameServer"></a>NameServer</h4><p>å®ƒæä¾›è½»é‡çº§æœåŠ¡å‘ç°å’Œè·¯ç”±ï¼Œæ¯ä¸ª Name Server è®°å½•å®Œæ•´çš„è·¯ç”±ä¿¡æ¯ï¼Œæä¾›ç›¸åº”çš„è¯»å†™æœåŠ¡ï¼Œæ”¯æŒå¿«é€Ÿå­˜å‚¨æ‰©å±•ã€‚ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªåŠŸèƒ½ï¼š</p><ul><li>ä»£ç†ç®¡ç†ï¼Œ  <strong>NameServer</strong> æ¥å—æ¥è‡ª Broker é›†ç¾¤çš„æ³¨å†Œï¼Œå¹¶æä¾›æ£€æµ‹ä»£ç†æ˜¯å¦å­˜åœ¨çš„å¿ƒè·³æœºåˆ¶ã€‚</li><li>è·¯ç”±ç®¡ç†ï¼Œæ¯ä¸ª NameServer å°†ä¿å­˜æœ‰å…³ä»£ç†ç¾¤é›†çš„å…¨éƒ¨è·¯ç”±ä¿¡æ¯ä»¥åŠå®¢æˆ·ç«¯æŸ¥è¯¢çš„<strong>é˜Ÿåˆ—</strong>ä¿¡æ¯ã€‚</li></ul><p>æˆ‘ä»¬çŸ¥é“ï¼ŒRocketMQå®¢æˆ·ç«¯ï¼ˆç”Ÿäº§è€…/æ¶ˆè´¹è€…ï¼‰å°†ä»NameServeræŸ¥è¯¢é˜Ÿåˆ—è·¯ç”±ä¿¡æ¯ï¼Œä½†å®¢æˆ·ç«¯å¦‚ä½•æ‰¾åˆ°NameServeråœ°å€ï¼Ÿ</p><p>å°†NameServeråœ°å€åˆ—è¡¨æä¾›ç»™å®¢æˆ·ç«¯æœ‰å››ç§æ–¹æ³•ï¼š</p><ul><li>ç¼–ç¨‹æ–¹å¼ï¼Œå°±åƒ<code>producer.setNamesrvAddr(&quot;ip:port&quot;)</code>ã€‚</li><li>Javaé€‰é¡¹ï¼Œä½¿ç”¨<code>rocketmq.namesrv.addr</code>ã€‚</li><li>ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨<code>NAMESRV_ADDR</code>ã€‚</li><li>HTTP ç«¯ç‚¹ã€‚</li></ul><h4 id="Broker"><a href="#Broker" class="headerlink" title="Broker"></a>Broker</h4><p>Broker é€šè¿‡æä¾›è½»é‡çº§çš„ Topic å’Œ Queue æœºåˆ¶æ¥ç…§é¡¾æ¶ˆæ¯å­˜å‚¨ã€‚å®ƒä»¬æ”¯æŒ Push å’Œ Pull æ¨¡å¼ï¼ŒåŒ…å«å®¹é”™æœºåˆ¶ï¼ˆ2ä¸ªæ‹·è´æˆ–è€…3ä¸ªæ‹·è´ï¼‰ï¼Œå¹¶ä¸”æä¾›äº†å¼ºå¤§çš„å³°å€¼å¡«å……å’Œä»¥åŸå§‹æ—¶é—´é¡ºåºç´¯è®¡æ•°åƒäº¿æ¡æ¶ˆæ¯çš„èƒ½åŠ›ã€‚æ­¤å¤–ï¼Œbroker è¿˜æä¾›ç¾éš¾æ¢å¤ï¼Œä¸°å¯Œçš„æŒ‡æ ‡ç»Ÿè®¡æ•°æ®å’Œè­¦æŠ¥æœºåˆ¶ï¼Œè€Œä¼ ç»Ÿçš„æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿéƒ½ç¼ºä¹è¿™äº›æœºåˆ¶ã€‚</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fo4vbpoxtej30r30dsdgs.jpg" alt="rmq-basic-component"></p><p>å¦‚ä¸Šå›¾ï¼šBroker æœåŠ¡å™¨é‡è¦çš„å­æ¨¡å—ï¼š</p><ul><li>è¿œç¨‹å¤„ç†æ¨¡å—æ˜¯ broker çš„å…¥å£ï¼Œå¤„ç†æ¥è‡ªå®¢æˆ·çš„è¯·æ±‚ã€‚</li><li>Client managerï¼Œç®¡ç†å®¢æˆ·ï¼ˆç”Ÿäº§è€…/æ¶ˆè´¹è€…ï¼‰å¹¶ç»´æŠ¤æ¶ˆè´¹è€…çš„ä¸»é¢˜è®¢é˜…ã€‚</li><li>Store Serviceï¼Œæä¾›ç®€å•çš„ API æ¥å­˜å‚¨æˆ–æŸ¥è¯¢ç‰©ç†ç£ç›˜ä¸­çš„æ¶ˆæ¯ã€‚</li><li>HA æœåŠ¡ï¼Œæä¾›ä¸»ä»£ç†å’Œä»ä»£ç†ä¹‹é—´çš„æ•°æ®åŒæ­¥åŠŸèƒ½ã€‚</li><li>ç´¢å¼•æœåŠ¡ï¼Œé€šè¿‡æŒ‡å®šé”®ä¸ºæ¶ˆæ¯å»ºç«‹ç´¢å¼•ï¼Œå¹¶æä¾›å¿«é€Ÿçš„æ¶ˆæ¯æŸ¥è¯¢ã€‚</li></ul><h4 id="Consumer"><a href="#Consumer" class="headerlink" title="Consumer"></a>Consumer</h4><p>æ¶ˆè´¹è€…ä¹Ÿæ”¯æŒ Push å’Œ Pull æ¨¡å‹ä¸­çš„åˆ†å¸ƒå¼éƒ¨ç½²ã€‚å®ƒè¿˜æ”¯æŒç¾¤é›†æ¶ˆè´¹å’Œæ¶ˆæ¯å¹¿æ’­ã€‚å®ƒæä¾›äº†å®æ—¶çš„æ¶ˆæ¯è®¢é˜…æœºåˆ¶ï¼Œå¯ä»¥æ»¡è¶³å¤§å¤šæ•°æ¶ˆè´¹è€…çš„éœ€æ±‚ã€‚</p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æœ¬æ–‡æ˜¯å¯¹ RocketMQ çš„ç®€å•ç‚¹äº†è§£ï¼Œå‚è€ƒäº†å®˜ç½‘ä»‹ç»ã€‚</p><p>è½¬è½½è¯·æ³¨æ˜åœ°å€ï¼š<a href="http://www.54tianzhisheng.cn/2018/02/05/RocketMQ/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/02/05/RocketMQ/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws3.sinaimg.cn/large/006tKfTcgy1fo4vbrj17mj31hc0zj7hb.jpg&quot; alt=&quot;gooafoss-1840758_1920&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ä»‹ç»&quot;&gt;&lt;/a&gt;ä»‹ç»&lt;/h3&gt;&lt;p&gt;RocketMQ æ˜¯é˜¿é‡Œå¼€æºçš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå‰ä¸ä¹…æçŒ®ç»™äº† Apache ã€‚æ­£å¦‚&lt;a href=&quot;http://rocketmq.apache.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å®˜ç½‘&lt;/a&gt;ä»‹ç»å¦‚ä¸‹ï¼šå®ƒæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼æ¶ˆæ¯ä¼ é€’å’Œæµå¼æ•°æ®å¹³å°ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="RocketMQ" scheme="http://yoursite.com/tags/RocketMQ/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot RabbitMQ æ•´åˆè¿›é˜¶ç‰ˆ</title>
    <link href="http://yoursite.com/2018/01/28/RabbitMQ/"/>
    <id>http://yoursite.com/2018/01/28/RabbitMQ/</id>
    <published>2018-01-27T16:00:00.000Z</published>
    <updated>2018-01-26T18:11:42.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fnu3cojj9rj31hc0u079o.jpg" alt="sea-2561397_1920"></p><h3 id="æ¶ˆæ¯ä¸­é—´ä»¶"><a href="#æ¶ˆæ¯ä¸­é—´ä»¶" class="headerlink" title="æ¶ˆæ¯ä¸­é—´ä»¶"></a>æ¶ˆæ¯ä¸­é—´ä»¶</h3><p>RabbitMQ æ˜¯æ¶ˆæ¯ä¸­é—´ä»¶çš„ä¸€ç§, æ¶ˆæ¯ä¸­é—´ä»¶å³åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®Œæˆæ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶çš„åŸºç¡€è½¯ä»¶. è¿™äº›è½¯ä»¶æœ‰å¾ˆå¤š, åŒ…æ‹¬ ActiveMQ ( apache å…¬å¸çš„), RocketMQ (é˜¿é‡Œå·´å·´å…¬å¸çš„, ç°å·²ç»è½¬è®©ç»™ apache), è¿˜æœ‰æ€§èƒ½æé«˜çš„ Kafkaã€‚</p><a id="more"></a><p>æ¶ˆæ¯ä¸­é—´ä»¶çš„å·¥ä½œè¿‡ç¨‹å¯ä»¥ç”¨<strong>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</strong>æ¥è¡¨ç¤º. å³ç”Ÿäº§è€…ä¸æ–­çš„å‘æ¶ˆæ¯é˜Ÿåˆ—å‘é€ä¿¡æ¯, è€Œæ¶ˆè´¹è€…ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ¶ˆè´¹ä¿¡æ¯. å…·ä½“è¿‡ç¨‹å¦‚ä¸‹:</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fnuk4o5optj30pz07xdg7.jpg" alt="972319-20170311160512014-1914425149"></p><p>ä»ä¸Šå›¾å¯çœ‹å‡º, å¯¹äºæ¶ˆæ¯é˜Ÿåˆ—æ¥è¯´, ç”Ÿäº§è€…,æ¶ˆæ¯é˜Ÿåˆ—,æ¶ˆè´¹è€… æ˜¯æœ€é‡è¦çš„ä¸‰ä¸ªæ¦‚å¿µã€‚ç”Ÿäº§è€…å‘æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­å»,  æ¶ˆè´¹è€…ç›‘å¬æŒ‡å®šçš„æ¶ˆæ¯é˜Ÿåˆ—, å¹¶ä¸”å½“æ¶ˆæ¯é˜Ÿåˆ—æ”¶åˆ°æ¶ˆæ¯ä¹‹å, æ¥æ”¶æ¶ˆæ¯é˜Ÿåˆ—ä¼ æ¥çš„æ¶ˆæ¯, å¹¶ä¸”ç»™äºˆç›¸åº”çš„å¤„ç†. æ¶ˆæ¯é˜Ÿåˆ—å¸¸ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´äº’ç›¸ä¿¡æ¯çš„ä¼ é€’.</p><h3 id="RabbitMQ-å·¥ä½œåŸç†"><a href="#RabbitMQ-å·¥ä½œåŸç†" class="headerlink" title="RabbitMQ å·¥ä½œåŸç†"></a>RabbitMQ å·¥ä½œåŸç†</h3><p>å¯¹äº RabbitMQ æ¥è¯´, é™¤äº†è¿™ä¸‰ä¸ªåŸºæœ¬æ¨¡å—ä»¥å¤–, è¿˜æ·»åŠ äº†ä¸€ä¸ªæ¨¡å—, å³äº¤æ¢æœº(Exchange). å®ƒä½¿å¾—ç”Ÿäº§è€…å’Œæ¶ˆæ¯é˜Ÿåˆ—ä¹‹é—´äº§ç”Ÿäº†éš”ç¦», ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€ç»™äº¤æ¢æœº,è€Œäº¤æ¢æœºåˆ™æ ¹æ®è°ƒåº¦ç­–ç•¥æŠŠç›¸åº”çš„æ¶ˆæ¯è½¬å‘ç»™å¯¹åº”çš„æ¶ˆæ¯é˜Ÿåˆ—. é‚£ä¹ˆ RabitMQ çš„å·¥ä½œæµç¨‹å¦‚ä¸‹æ‰€ç¤º:</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79ly1fnuk4ohjbmj30dd08zjrw.jpg" alt="972319-20170311161512951-1006030113"></p><p>è¯´ä¸€ä¸‹äº¤æ¢æœº: äº¤æ¢æœºçš„ä¸»è¦ä½œç”¨æ˜¯æ¥æ”¶ç›¸åº”çš„æ¶ˆæ¯å¹¶ä¸”ç»‘å®šåˆ°æŒ‡å®šçš„é˜Ÿåˆ—. äº¤æ¢æœºæœ‰å››ç§ç±»å‹, åˆ†åˆ«ä¸ºDirect, topic, headers, Fanout.</p><p>Direct æ˜¯ RabbitMQ é»˜è®¤çš„äº¤æ¢æœºæ¨¡å¼,ä¹Ÿæ˜¯æœ€ç®€å•çš„æ¨¡å¼.å³åˆ›å»ºæ¶ˆæ¯é˜Ÿåˆ—çš„æ—¶å€™,æŒ‡å®šä¸€ä¸ª BindingKey. å½“å‘é€è€…å‘é€æ¶ˆæ¯çš„æ—¶å€™, æŒ‡å®šå¯¹åº”çš„ Key. å½“ Key å’Œæ¶ˆæ¯é˜Ÿåˆ—çš„ BindingKey ä¸€è‡´çš„æ—¶å€™,æ¶ˆæ¯å°†ä¼šè¢«å‘é€åˆ°è¯¥æ¶ˆæ¯é˜Ÿåˆ—ä¸­.</p><p>topic è½¬å‘ä¿¡æ¯ä¸»è¦æ˜¯ä¾æ®é€šé…ç¬¦, é˜Ÿåˆ—å’Œäº¤æ¢æœºçš„ç»‘å®šä¸»è¦æ˜¯ä¾æ®ä¸€ç§æ¨¡å¼(é€šé…ç¬¦+å­—ç¬¦ä¸²), è€Œå½“å‘é€æ¶ˆæ¯çš„æ—¶å€™, åªæœ‰æŒ‡å®šçš„ Key å’Œè¯¥æ¨¡å¼ç›¸åŒ¹é…çš„æ—¶å€™, æ¶ˆæ¯æ‰ä¼šè¢«å‘é€åˆ°è¯¥æ¶ˆæ¯é˜Ÿåˆ—ä¸­.</p><p>headers ä¹Ÿæ˜¯æ ¹æ®ä¸€ä¸ªè§„åˆ™è¿›è¡ŒåŒ¹é…, åœ¨æ¶ˆæ¯é˜Ÿåˆ—å’Œäº¤æ¢æœºç»‘å®šçš„æ—¶å€™ä¼šæŒ‡å®šä¸€ç»„é”®å€¼å¯¹è§„åˆ™, è€Œå‘é€æ¶ˆæ¯çš„æ—¶å€™ä¹Ÿä¼šæŒ‡å®šä¸€ç»„é”®å€¼å¯¹è§„åˆ™, å½“ä¸¤ç»„é”®å€¼å¯¹è§„åˆ™ç›¸åŒ¹é…çš„æ—¶å€™, æ¶ˆæ¯ä¼šè¢«å‘é€åˆ°åŒ¹é…çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­.</p><p>Fanout æ˜¯è·¯ç”±å¹¿æ’­çš„å½¢å¼, å°†ä¼šæŠŠæ¶ˆæ¯å‘ç»™ç»‘å®šå®ƒçš„å…¨éƒ¨é˜Ÿåˆ—, å³ä¾¿è®¾ç½®äº† key, ä¹Ÿä¼šè¢«å¿½ç•¥.</p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/01/28/RabbitMQ/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/01/28/RabbitMQ/</a></p><h3 id="SpringBoot-æ•´åˆ-RabbitMQï¼ˆTopic-è½¬å‘æ¨¡å¼ï¼‰"><a href="#SpringBoot-æ•´åˆ-RabbitMQï¼ˆTopic-è½¬å‘æ¨¡å¼ï¼‰" class="headerlink" title="SpringBoot æ•´åˆ RabbitMQï¼ˆTopic è½¬å‘æ¨¡å¼ï¼‰"></a>SpringBoot æ•´åˆ RabbitMQï¼ˆTopic è½¬å‘æ¨¡å¼ï¼‰</h3><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå°† SpringBoot å’Œ RabbitMQ æ•´åˆè¿‡ï¼Œä¸è¿‡é‚£æ˜¯ä½¿ç”¨ Direct æ¨¡å¼ï¼Œæ–‡ç« åœ°å€æ˜¯ï¼š<a href="http://www.54tianzhisheng.cn/2018/01/26/SpringBoot-RabbitMQ/" target="_blank" rel="noopener">SpringBoot RabbitMQ æ•´åˆä½¿ç”¨</a></p><h3 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h3><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/01/05/SpringBoot-Kafka/" target="_blank" rel="noopener">SpringBoot Kafka æ•´åˆä½¿ç”¨</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/01/26/SpringBoot-RabbitMQ/" target="_blank" rel="noopener">SpringBoot RabbitMQ æ•´åˆä½¿ç”¨</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2018/01/27/SpringBoot-ActiveMQ/" target="_blank" rel="noopener">SpringBoot ActiveMQ æ•´åˆä½¿ç”¨</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2018/01/04/Kafka/" target="_blank" rel="noopener">Kafka å®‰è£…åŠå¿«é€Ÿå…¥é—¨</a></p><h3 id="æ•´åˆ"><a href="#æ•´åˆ" class="headerlink" title="æ•´åˆ"></a>æ•´åˆ</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘è¦å¸¦å¤§å®¶ç»§ç»­æ•´åˆï¼ˆTopic è½¬å‘æ¨¡å¼ï¼‰ï¼š</p><p>1ã€é…ç½®æ–‡ä»¶å’Œ pom.xml è¿™äº›è¿˜éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬ä¸ç”¨å†ä¿®æ”¹</p><p>2ã€å¯åŠ¨ç±»ä¸­åˆ›å»º Queue å’Œ Exchangeï¼Œå¹¶æŠŠ Queue æŒ‰ç…§ç›¸åº”çš„è§„åˆ™ç»‘å®šåˆ°äº¤æ¢æœºQueue ä¸Šã€‚ä»£ç å¦‚ä¸‹å›¾ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Queue <span class="title">queue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Queue(<span class="string">"rpc-queue-zhisheng"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> TopicExchange <span class="title">exchange</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> TopicExchange(<span class="string">"rpc-exchange-zhisheng"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Binding <span class="title">binding</span><span class="params">(Queue queue, TopicExchange exchange)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> BindingBuilder.bind(queue).to(exchange).with(<span class="string">"rpc-zhisheng"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œåˆ›å»ºä¸€ä¸ª Queue å’Œ Exchange ï¼Œç„¶åç»‘å®šã€‚</p><p>æ³¨æ„ï¼šä¸Šé¢ä»£ç ä¸­çš„ with(â€œrpc-zhishengâ€)  è¿™ä¸ª â€œzhishengâ€ æ˜¯ routingkeyï¼ŒRabbitMQ å°†ä¼šæ ¹æ®è¿™ä¸ªå‚æ•°å»å¯»æ‰¾æœ‰æ²¡æœ‰åŒ¹é…æ­¤è§„åˆ™çš„é˜Ÿåˆ—ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ä¼šæŠŠæ¶ˆæ¯å‘é€ç»™å®ƒï¼Œå¦‚æœä¸æ­¢æœ‰ä¸€ä¸ªï¼Œåˆ™ä¼šæŠŠæ¶ˆæ¯åˆ†å‘ç»™æ‰€æœ‰åŒ¹é…çš„é˜Ÿåˆ—ã€‚</p><p>3ã€æ¶ˆæ¯å‘é€ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhisheng.rabbitmq.rpc.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.TopicExchange;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.core.RabbitTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhisheng_tian on 2018/1/25</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RabbitMQClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RabbitTemplate rabbitTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TopicExchange exchange;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        rabbitTemplate.convertAndSend(exchange.getName(), <span class="string">"rpc-zhisheng"</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¯å‘é€æ¶ˆæ¯çš„ä»£ç ï¼Œâ€œrpc-zhishengâ€ å°±æ˜¯ä¸Šé¢æˆ‘ä»¬è®¾ç½®çš„ routingkeyã€‚</p><p>4ã€æ¶ˆæ¯æ¥æ”¶ç«¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhisheng.rabbitmq.rpc.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhisheng_tian on 2018/1/25</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RabbitMQServer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener</span>(queues = <span class="string">"rpc-queue-zhisheng"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"--------receive ------- "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5ã€å¯åŠ¨ç±»ä¸­æ³¨å…¥ å‘é€æ¶ˆæ¯ç±»ï¼Œç„¶åè°ƒç”¨ send æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> RabbitMQClient client;</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostConstruct</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  StopWatch stopWatch = <span class="keyword">new</span> StopWatch();</span><br><span class="line">  stopWatch.start();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">  client.send(<span class="string">"  zhisheng, ---------  send "</span> + i);</span><br><span class="line">  &#125;</span><br><span class="line">  stopWatch.stop();</span><br><span class="line">  System.out.println(<span class="string">"æ€»å…±è€—æ—¶ï¼š"</span> +      stopWatch.getTotalTimeMillis());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ­¤ SpringBoot é¡¹ç›®ï¼Œåˆ™å¯ä»¥å‘ç°ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79ly1fnu3cn8zwjj31kw0y9kfi.jpg" alt="Snip20180126_2"></p><p>è¿™é‡Œæµ‹è¯•çš„æ˜¯åŒ¹é…ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„æƒ…å†µï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥æµ‹è¯•ä¸‹åŒ¹é…å¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„ã€‚</p><h3 id="SpringBoot-æ•´åˆ-RabbitMQ-Fanout-Exchange-å½¢å¼"><a href="#SpringBoot-æ•´åˆ-RabbitMQ-Fanout-Exchange-å½¢å¼" class="headerlink" title="SpringBoot æ•´åˆ RabbitMQ( Fanout Exchange å½¢å¼)"></a>SpringBoot æ•´åˆ RabbitMQ( Fanout Exchange å½¢å¼)</h3><p>Fanout Exchange å½¢å¼åˆå«å¹¿æ’­å½¢å¼ã€‚</p><p>ä»»ä½•å‘é€åˆ° Fanout Exchange çš„æ¶ˆæ¯éƒ½ä¼šè¢«è½¬å‘åˆ°ä¸è¯¥ Exchange ç»‘å®š(Binding)çš„æ‰€æœ‰ Queue ä¸Šã€‚</p><ul><li>è¿™ç§æ¨¡å¼éœ€è¦æå‰å°† Exchange ä¸ Queue è¿›è¡Œç»‘å®šï¼Œä¸€ä¸ª Exchange å¯ä»¥ç»‘å®šå¤šä¸ª Queueï¼Œä¸€ä¸ª Queue å¯ä»¥åŒå¤šä¸ª Exchange è¿›è¡Œç»‘å®š</li><li>è¿™ç§æ¨¡å¼ä¸éœ€è¦ RoutingKey</li><li>å¦‚æœæ¥å—åˆ°æ¶ˆæ¯çš„ Exchange æ²¡æœ‰ä¸ä»»ä½• Queue ç»‘å®šï¼Œåˆ™æ¶ˆæ¯ä¼šè¢«æŠ›å¼ƒã€‚</li></ul><p>1ã€æ¶ˆæ¯å‘é€ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhisheng.rabbitmq.rpc.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.core.RabbitTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhisheng_tian on 2018/1/25</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RabbitMQClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RabbitTemplate rabbitTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send2</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        rabbitTemplate.convertAndSend(<span class="string">"fanout-exchange"</span>, <span class="string">""</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯ä»¥ä¸è®¾ç½® routingkey äº†ã€‚</p><p>2ã€å¯åŠ¨ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhisheng.rabbitmq.rpc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zhisheng.rabbitmq.rpc.client.RabbitMQClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.Binding;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.BindingBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.FanoutExchange;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.Queue;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.support.converter.Jackson2JsonMessageConverter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RabbitmqRpcApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RabbitMQClient client;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        client.send2(<span class="string">"zhisheng ++++++++++ send2 "</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(RabbitmqRpcApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span>(name = <span class="string">"queue"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Queue <span class="title">queue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Queue(<span class="string">"rpc.queue"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span>(name = <span class="string">"queue2"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Queue <span class="title">queue2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Queue(<span class="string">"rpc.queue2"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span>(name = <span class="string">"queue3"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Queue <span class="title">queue3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Queue(<span class="string">"rpc.queue3"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FanoutExchange <span class="title">exchange</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> FanoutExchange(<span class="string">"fanout-exchange"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Binding <span class="title">binding</span><span class="params">(@Qualifier(<span class="string">"queue"</span>)</span> Queue queue, FanoutExchange exchange) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(queue).to(exchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Binding <span class="title">binding2</span><span class="params">(@Qualifier(<span class="string">"queue2"</span>)</span> Queue queue, FanoutExchange exchange) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(queue).to(exchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Binding <span class="title">binding3</span><span class="params">(@Qualifier(<span class="string">"queue3"</span>)</span> Queue queue, FanoutExchange exchange) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(queue).to(exchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Jackson2JsonMessageConverter <span class="title">messageConverter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Jackson2JsonMessageConverter();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å¯åŠ¨ç±»ä¸­æˆ‘åˆ›å»ºä¸‰ä¸ª Queueï¼š <code>rpc.queue</code>,  <code>rpc.queue2</code> , <code>rpc.queue3</code></p><p>ä¹Ÿåˆ›å»ºä¸€ä¸ª FanoutExchangeï¼Œå¹¶æŠŠè¿™ä¸‰ä¸ª Queue ç»‘å®šåœ¨åŒä¸€ä¸ªäº¤æ¢æœº <code>fanout-exchange</code> ä¸Šé¢</p><p>æ³¨æ„ï¼šè¿™ä¸ª <code>fanout-exchange</code> äº¤æ¢æœºä¸çŸ¥ä¸ºå•¥ï¼Œæˆ‘è‡ªå·±åœ¨åº”ç”¨ç¨‹åºé‡Œåˆ›å»ºï¼Œè¿è¡Œç¨‹åºä¼šå‡ºé”™ï¼Œä¸‹é¢è®²è®²æˆ‘æ˜¯æ€ä¹ˆè§£å†³çš„ã€‚</p><p>æˆ‘æ˜¯ä» RabbitMQ ç®¡ç†ç•Œé¢ç›´æ¥æ·»åŠ ä¸ª exchange çš„ã€‚</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fnu3co30lkj31hy1bun4z.jpg" alt="Snip20180126_3"></p><p>3ã€æ¶ˆæ¯æ¥æ”¶ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhisheng.rabbitmq.rpc.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhisheng_tian on 2018/1/25</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RabbitMQServer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener</span>(queues = <span class="string">"rpc.queue"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"--------receive ------- "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener</span>(queues = <span class="string">"rpc.queue2"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive2</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"--------receive2 ------- "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener</span>(queues = <span class="string">"rpc.queue3"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive3</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"--------receive3 ------- "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›‘å¬æ¯ä¸ª Queueï¼Œå¹¶æœ‰ä¸€ä¸ªæ–¹æ³•è¾“å‡ºå¯¹åº”æ¥æ”¶åˆ°çš„æ¶ˆæ¯ã€‚</p><p>4ã€è¿è¡Œé¡¹ç›®</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fnu3cmf22dj31kw0zoh6u.jpg" alt="Snip20180126_4"></p><p>ç»“æœå¦‚ä¸Šï¼Œæ¯ä¸ªé˜Ÿåˆ—éƒ½æ‰“å°å‡ºè‡ªå·±æ”¶åˆ°çš„ç»“æœï¼ŒåŒæ—¶æˆ‘ä»¬çœ‹çœ‹è¿™ä¸‰ä¸ª Queue æ˜¯ä¸æ˜¯ç»‘å®šåˆ° Exchange ä¸Šå‘¢ï¼Ÿ</p><p>å¯ä»¥çœ‹åˆ°ä¸‰ä¸ª Queue éƒ½ç»‘å®šåœ¨ Exchange ä¸Šäº†ã€‚</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fnu3clys6lj31kw1ajjy9.jpg" alt="Snip20180126_5"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>RabbitMQ ä¸ SpringBoot æ•´åˆå°±åˆ°è¿™é‡Œä¸ºæ­¢äº†ï¼Œåé¢å¦‚æœæœ‰æ—¶é—´ä¼šæ·±åº¦ç ”ç©¶ RabbitMQ çš„ã€‚</p><p>è¿˜è¯·ç»§ç»­å…³æ³¨æˆ‘çš„åšå®¢ï¼š<a href="http://www.54tianzhisheng.cn/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws4.sinaimg.cn/large/006tNc79ly1fnu3cojj9rj31hc0u079o.jpg&quot; alt=&quot;sea-2561397_1920&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;æ¶ˆæ¯ä¸­é—´ä»¶&quot;&gt;&lt;a href=&quot;#æ¶ˆæ¯ä¸­é—´ä»¶&quot; class=&quot;headerlink&quot; title=&quot;æ¶ˆæ¯ä¸­é—´ä»¶&quot;&gt;&lt;/a&gt;æ¶ˆæ¯ä¸­é—´ä»¶&lt;/h3&gt;&lt;p&gt;RabbitMQ æ˜¯æ¶ˆæ¯ä¸­é—´ä»¶çš„ä¸€ç§, æ¶ˆæ¯ä¸­é—´ä»¶å³åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®Œæˆæ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶çš„åŸºç¡€è½¯ä»¶. è¿™äº›è½¯ä»¶æœ‰å¾ˆå¤š, åŒ…æ‹¬ ActiveMQ ( apache å…¬å¸çš„), RocketMQ (é˜¿é‡Œå·´å·´å…¬å¸çš„, ç°å·²ç»è½¬è®©ç»™ apache), è¿˜æœ‰æ€§èƒ½æé«˜çš„ Kafkaã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="RabbitMQ" scheme="http://yoursite.com/tags/RabbitMQ/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot ActiveMQ æ•´åˆä½¿ç”¨</title>
    <link href="http://yoursite.com/2018/01/27/SpringBoot-ActiveMQ/"/>
    <id>http://yoursite.com/2018/01/27/SpringBoot-ActiveMQ/</id>
    <published>2018-01-26T16:00:00.000Z</published>
    <updated>2018-01-25T03:58:37.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1fns53btbl0j31hc0zldyz.jpg" alt="busan-night-scene-1747130_1920"></p><h3 id="ä»‹ç»-ActiveMQ"><a href="#ä»‹ç»-ActiveMQ" class="headerlink" title="ä»‹ç» ActiveMQ"></a>ä»‹ç» ActiveMQ</h3><p>å®ƒæ˜¯ Apache å‡ºå“ï¼Œæœ€æµè¡Œçš„ï¼Œèƒ½åŠ›å¼ºåŠ²çš„å¼€æºæ¶ˆæ¯æ€»çº¿ã€‚ActiveMQ  æ˜¯ä¸€ä¸ªå®Œå…¨æ”¯æŒ JMS1.1 å’Œ J2EE 1.4 è§„èŒƒçš„ JMS Provider å®ç°ï¼Œå°½ç®¡ JMS è§„èŒƒå‡ºå°å·²ç»æ˜¯å¾ˆä¹…çš„äº‹æƒ…äº†ï¼Œä½†æ˜¯ JMS åœ¨å½“ä»Šçš„J2EEåº”ç”¨ä¸­é—´ä»ç„¶æ‰®æ¼”ç€ç‰¹æ®Šçš„åœ°ä½ã€‚â€”â€” æ‘˜è‡ªç™¾åº¦ç™¾ç§‘ï¼Œå·äº†ä¸ªæ‡’ã€‚</p><a id="more"></a><h3 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h3><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/01/05/SpringBoot-Kafka/" target="_blank" rel="noopener">SpringBoot Kafka æ•´åˆä½¿ç”¨</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/01/26/SpringBoot-RabbitMQ/" target="_blank" rel="noopener">SpringBoot RabbitMQ æ•´åˆä½¿ç”¨</a></p><h3 id="å®‰è£…-ActiveMQ"><a href="#å®‰è£…-ActiveMQ" class="headerlink" title="å®‰è£… ActiveMQ"></a>å®‰è£… ActiveMQ</h3><p>åŒä¹‹å‰ä¸€æ ·ï¼Œç›´æ¥åœ¨ Docker é‡Œé¢ç©å§ã€‚å‘½ä»¤ä¹Ÿæ˜¯ä¸€è¡Œè§£å†³ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8161:8161 -p 61616:61616 -e ACTIVEMQ_ADMIN_LOGIN=admin -e ACTIVEMQ_ADMIN_PASSWORD=admin --name activemq webcenter/activemq</span><br></pre></td></tr></table></figure><p>ç®€å•è§£é‡Šä¸‹ï¼š</p><ul><li>8186: è¡¨ç¤º ActiveMQ æ§åˆ¶å°ç«¯å£å·ï¼Œå®ƒå’Œ RabbitMQ ä¸€æ ·éƒ½æ˜¯æœ‰æ§åˆ¶å°çš„ï¼Œå¯ä»¥ç™»é™†æ§åˆ¶å°è¿›è¡Œæ“ä½œçš„</li><li>61616 ï¼š è¡¨ç¤º ActiveMQ æ‰€ç›‘å¬çš„ TCP ç«¯å£å·ï¼Œåº”ç”¨ç¨‹åºå¯é€šè¿‡è¯¥ç«¯å£å·ä¸ ActiveMQ å»ºç«‹ TCP è¿æ¥</li><li>CTIVEMQ_ADMIN_LOGIN ï¼šç™»é™†æ§åˆ¶å°çš„ç”¨æˆ·å</li><li>ACTIVEMQ_ADMIN_PASSWORD ï¼šç™»é™†æ§åˆ¶å°çš„å¯†ç </li></ul><p>æ‰§è¡Œåï¼Œå¯åœ¨æµè§ˆå™¨è¾“å…¥ <a href="http://localhost:8161/" target="_blank" rel="noopener">http://localhost:8161/</a>   æŸ¥çœ‹æ§åˆ¶å°ï¼Œ</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1fns4zm1yqfj31kw0djn3k.jpg" alt="Snip20180124_1"></p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1fns4zmk78ej31kw0ladq0.jpg" alt="Snip20180124_2"></p><p>è§£é‡Šä¸‹ä¸Šé¢å›¾ç‰‡ä¸­æ§åˆ¶å°è¿™äº›æŒ‰é’®çš„åŸºæœ¬ä¿¡æ¯ï¼š</p><ul><li>Homeï¼šæŸ¥çœ‹ ActiveMQ çš„å¸¸è§ä¿¡æ¯</li><li>Queuesï¼šæŸ¥çœ‹ ActiveMQ çš„é˜Ÿåˆ—ä¿¡æ¯</li><li>Topicsï¼šæŸ¥çœ‹ ActiveMQ çš„ä¸»é¢˜ä¿¡æ¯</li><li>Subscribersï¼šæŸ¥çœ‹ä¸»é¢˜çš„è®¢é˜…è€…ä¿¡æ¯</li><li>Connectionsï¼šæŸ¥çœ‹ ActiveMQ å®¢æˆ·ç«¯çš„è¿æ¥ä¿¡æ¯</li><li>Networkï¼šæŸ¥çœ‹ ActiveMQ çš„ç½‘ç»œä¿¡æ¯</li><li>Scheduledï¼šæŸ¥çœ‹ ActiveMQ çš„å®šæ—¶ä»»åŠ¡</li><li>Sendï¼šç”¨äºé€šè¿‡è¡¨å•æ–¹å¼å‘é˜Ÿåˆ—æˆ–è€…ä¸»é¢˜å‘é€å…·ä½“çš„æ¶ˆæ¯</li></ul><h3 id="æ•´åˆ"><a href="#æ•´åˆ" class="headerlink" title="æ•´åˆ"></a>æ•´åˆ</h3><p>IDEA åˆ›å»º SpringBoot é¡¹ç›®ï¼Œå› ä¸º SpringBoot å·²ç»å†…ç½®äº†å¯¹ ActiveMQ çš„æ”¯æŒï¼Œæ‰€ä»¥ç›´æ¥å¼•å…¥ä¾èµ– <code>spring-boot-starter-activemq</code> å°±è¡Œã€‚æ•´ä½“é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1fns4zkpkhvj30os0tkwg8.jpg" alt="Snip20180124_3"></p><p>1ã€<strong>pom.xml æ–‡ä»¶</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zhisheng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>activemq<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>activemq<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot ActiveMQ<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-activemq<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2ã€<strong>é…ç½®æ–‡ä»¶</strong>  application.properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.activemq.broker-url=tcp://localhost:61616</span><br><span class="line">spring.activemq.user=admin</span><br><span class="line">spring.activemq.password=admin</span><br></pre></td></tr></table></figure><p>3ã€<strong>å‘é€æ¶ˆæ¯ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhisheng.activemq.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jms.core.JmsTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActiveMQClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JmsTemplate jmsTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        jmsTemplate.convertAndSend(<span class="string">"zhisheng"</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ ·ï¼Œå’Œ RabbitMQ ç±»ä¼¼ï¼Œä¸å¤šè¯´äº†ã€‚</p><p>4ã€<strong>æ¶ˆæ¯æ¥æ”¶ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhisheng.activemq.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.jms.annotation.JmsListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActiveMQServer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@JmsListener</span>(destination = <span class="string">"zhisheng"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ”¶åˆ°çš„ message æ˜¯ï¼š"</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5ã€<strong>æ³¨æ„</strong></p><p>è¿™ä¸ªé˜Ÿåˆ—æ˜¯ä¸éœ€è¦æˆ‘ä»¬æå‰å®šä¹‰å¥½çš„ï¼Œå®ƒå’Œ RabbitMQ ä¸ä¸€æ ·ï¼Œå®ƒä¼šåœ¨æˆ‘ä»¬éœ€è¦çš„æ—¶å€™åŠ¨æ€çš„åˆ›å»ºã€‚</p><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhisheng.activemq;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zhisheng.activemq.client.ActiveMQClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StopWatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActivemqApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">    ActiveMQClient client;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        StopWatch stopWatch = <span class="keyword">new</span> StopWatch();</span><br><span class="line">        stopWatch.start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">            client.send(<span class="string">"å‘é€æ¶ˆæ¯----zhisheng-----"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        stopWatch.stop();</span><br><span class="line">        System.out.println(<span class="string">"å‘é€æ¶ˆæ¯è€—æ—¶: "</span> + stopWatch.getTotalTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(ActivemqApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘é€ä¸€ä¸‡æ¡æ¶ˆæ¯è¿è¡Œåéœ€è¦çš„æ—¶é—´æŒºä¹…çš„ï¼š73180 ms</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1fns4zlmbg7j31kw0wutop.jpg" alt="Snip20180124_4"></p><p>æ¯” RabbitMQ å‘é€ 10000 æ¡æ¶ˆæ¯è€—æ—¶ 215 ms ä¸çŸ¥é“é«˜å‡ºå¤šå°‘å€äº†ï¼Œå¯è§å…¶æ€§èƒ½å¹¶ä¸é«˜çš„ã€‚</p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/01/27/SpringBoot-ActiveMQ/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/01/27/SpringBoot-ActiveMQ/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/006tKfTcly1fns53btbl0j31hc0zldyz.jpg&quot; alt=&quot;busan-night-scene-1747130_1920&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä»‹ç»-ActiveMQ&quot;&gt;&lt;a href=&quot;#ä»‹ç»-ActiveMQ&quot; class=&quot;headerlink&quot; title=&quot;ä»‹ç» ActiveMQ&quot;&gt;&lt;/a&gt;ä»‹ç» ActiveMQ&lt;/h3&gt;&lt;p&gt;å®ƒæ˜¯ Apache å‡ºå“ï¼Œæœ€æµè¡Œçš„ï¼Œèƒ½åŠ›å¼ºåŠ²çš„å¼€æºæ¶ˆæ¯æ€»çº¿ã€‚ActiveMQ  æ˜¯ä¸€ä¸ªå®Œå…¨æ”¯æŒ JMS1.1 å’Œ J2EE 1.4 è§„èŒƒçš„ JMS Provider å®ç°ï¼Œå°½ç®¡ JMS è§„èŒƒå‡ºå°å·²ç»æ˜¯å¾ˆä¹…çš„äº‹æƒ…äº†ï¼Œä½†æ˜¯ JMS åœ¨å½“ä»Šçš„J2EEåº”ç”¨ä¸­é—´ä»ç„¶æ‰®æ¼”ç€ç‰¹æ®Šçš„åœ°ä½ã€‚â€”â€” æ‘˜è‡ªç™¾åº¦ç™¾ç§‘ï¼Œå·äº†ä¸ªæ‡’ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
      <category term="ActiveMQ" scheme="http://yoursite.com/tags/ActiveMQ/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot  RabbitMQ æ•´åˆä½¿ç”¨</title>
    <link href="http://yoursite.com/2018/01/26/SpringBoot-RabbitMQ/"/>
    <id>http://yoursite.com/2018/01/26/SpringBoot-RabbitMQ/</id>
    <published>2018-01-25T16:00:00.000Z</published>
    <updated>2018-01-26T03:01:26.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180107/6DFKcmCgC7.png-1" alt="mark"></p><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>ä¸Šæ¬¡å†™äº†ç¯‡æ–‡ç« ï¼Œ<a href="http://www.54tianzhisheng.cn/2018/01/05/SpringBoot-Kafka/" target="_blank" rel="noopener">ã€ŠSpringBoot Kafka æ•´åˆä½¿ç”¨ã€‹</a>ï¼Œé˜…è¯»é‡è¿˜æŒºé«˜çš„ï¼Œäºæ˜¯æƒ³æƒ³è¿˜æ˜¯æŠŠå…¶ä»–å‡ ç§ MQ ä¹Ÿå’Œ SpringBoot æ•´åˆä½¿ç”¨ä¸‹ã€‚</p><a id="more"></a><p>ä¸‹é¢æ˜¯å››ç§æ¯”è¾ƒæµè¡Œçš„ MQ ï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fnrqdwnlsej30fw07274m.jpg" alt="rabbitmq-1"></p><p>åé¢éƒ½å†™å†™å’Œ SpringBoot æ•´åˆçš„æ–‡ç« ã€‚</p><h3 id="å®‰è£…-RabbitMQ"><a href="#å®‰è£…-RabbitMQ" class="headerlink" title="å®‰è£… RabbitMQ"></a>å®‰è£… RabbitMQ</h3><p>ç”±äºæ¢ Mac äº†ï¼Œæ‰€ä»¥ä¸€äº›ç¯å¢ƒå°±ç›´æ¥åœ¨ Mac æï¼Œä½†æ˜¯åƒå®‰è£… RabbitMQ è¿™äº›åˆä¼šæŠŠè‡ªå·±ç”µè„‘ç³»ç»Ÿç»™æçš„å¤ªä¹±ï¼Œæ‰€ä»¥èƒ½åœ¨ Docker é‡Œé¢å®‰è£…å°±å®‰è£…åœ¨ Dockerï¼Œè¿™æ¬¡ RabbitMQ æˆ‘ä¹Ÿç›´æ¥åœ¨ Docker é‡Œå®‰è£…ã€‚</p><p>å¯åŠ¨ Docker for Macï¼Œå¦‚æœæ²¡å®‰è£…è¿‡çš„è¯·çœ‹æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ï¼š<a href="http://www.54tianzhisheng.cn/2018/01/25/Docker-install/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/01/25/Docker-install/</a></p><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨è‡ªå·±çš„ Linux æœåŠ¡å™¨æˆ–è€…è™šæ‹Ÿæœºé‡Œå¯åŠ¨å®‰è£… RabbitMQ ã€‚</p><p>Docker å®‰è£…çš„è¯å¾ˆç®€å•ï¼Œå› ä¸º RabbitMQ å®˜æ–¹å·²ç»æä¾›äº†è‡ªå·±çš„ Docker å®¹å™¨ï¼Œåªéœ€è¦ä¸€è¡Œå‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d  -p 15672:15672  -p  5672:5672  -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_DEFAULT_PASS=admin --name rabbitmq rabbitmq:3-management</span><br></pre></td></tr></table></figure><p>è¯¥é•œåƒæ‹¥æœ‰ä¸€ä¸ªåŸºäº web çš„æ§åˆ¶å°å’Œ Http APIã€‚Http API å¯ä»¥åœ¨åœ°å€çœ‹åˆ°å¦‚ä½•ä½¿ç”¨ï¼š<code>http://localhost:15672/api/</code></p><p>è®²è§£ä¸‹ä¸Šé¢å‘½ä»¤è¡Œï¼š</p><ul><li>15672 ï¼šè¡¨ç¤º RabbitMQ æ§åˆ¶å°ç«¯å£å·ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­é€šè¿‡æ§åˆ¶å°æ¥æ‰§è¡Œ RabbitMQ çš„ç›¸å…³æ“ä½œã€‚</li><li>5672 : è¡¨ç¤º RabbitMQ æ‰€ç›‘å¬çš„ TCP ç«¯å£å·ï¼Œåº”ç”¨ç¨‹åºå¯é€šè¿‡è¯¥ç«¯å£ä¸ RabbitMQ å»ºç«‹ TCP è¿æ¥ï¼Œå¹¶å®Œæˆåç»­çš„å¼‚æ­¥æ¶ˆæ¯é€šä¿¡</li><li>RABBITMQ_DEFAULT_USERï¼šç”¨äºè®¾ç½®ç™»é™†æ§åˆ¶å°çš„ç”¨æˆ·åï¼Œè¿™é‡Œæˆ‘è®¾ç½® admin</li><li>RABBITMQ_DEFAULT_PASSï¼šç”¨äºè®¾ç½®ç™»é™†æ§åˆ¶å°çš„å¯†ç ï¼Œè¿™é‡Œæˆ‘è®¾ç½® admin</li></ul><p>å®¹å™¨å¯åŠ¨æˆåŠŸåï¼Œå¯ä»¥åœ¨æµè§ˆå™¨è¾“å…¥åœ°å€ï¼š<a href="http://localhost:15672/" target="_blank" rel="noopener">http://localhost:15672/</a>  è®¿é—®æ§åˆ¶å°</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fnrqdzkxzoj30js0980t7.jpg" alt="rabbitmq-2"></p><p>ç™»é™†åï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fnrqohaja0j31kw0vr0z3.jpg" alt="rabbitmq-3"></p><p>ç®€å•æè¿°ä¸‹ä¸Šå›¾ä¸­ä¸­æ§åˆ¶å°çš„åˆ—è¡¨çš„ä½œç”¨ï¼š</p><ul><li>Overview ï¼šç”¨äºæŸ¥çœ‹ RabbitMQ çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ã€æ¶ˆæ¯å‘é€é€Ÿç‡ã€èŠ‚ç‚¹ã€ç«¯å£å’Œä¸Šä¸‹æ–‡ä¿¡æ¯ç­‰ï¼‰</li><li>Connectionsï¼šç”¨äºæŸ¥çœ‹ RabbitMQ å®¢æˆ·ç«¯çš„è¿æ¥ä¿¡æ¯</li><li>Channelsï¼šç”¨æˆ·æŸ¥çœ‹ RabbitMQ çš„é€šé“ä¿¡æ¯</li><li>Exchangeï¼šç”¨äºæŸ¥çœ‹ RabbitMQ äº¤æ¢æœº</li><li>Queuesï¼šç”¨äºæŸ¥çœ‹ RabbitMQ çš„é˜Ÿåˆ—</li><li>Adminï¼šç”¨äºç®¡ç†ç”¨æˆ·ï¼Œå¯å¢åŠ ç”¨æˆ·</li></ul><h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><p>åœ¨ IDEA ä¸­åˆ›å»ºä¸€ä¸ª SpringBoot é¡¹ç›®ç»“æ„ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fnrqp4fi3cj30pk12qtcc.jpg" alt="Snip20180124_5"></p><p>SpringBoot æ¡†æ¶ä¸­å·²ç»å†…ç½®äº†å¯¹ RabbitMQ çš„æ”¯æŒï¼Œå¦‚æœä½ çœ‹è¿‡å®˜æ–¹æ–‡æ¡£çš„è¯ï¼Œå°±å¯ä»¥çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¾èµ– spring-boot-starter-amqp å¼•å…¥å°±è¡Œã€‚</p><p>1ã€ <strong>pom.xml</strong> å¼•å…¥ä¾èµ–åå¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zhisheng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>rabbitmq<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>rabbitmq<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot RabbitMQ<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2ã€<strong>application.properties</strong>  é…ç½®ä¿®æ”¹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.rabbitmq.addresses=localhost:5672</span><br><span class="line">spring.rabbitmq.username=admin</span><br><span class="line">spring.rabbitmq.password=admin</span><br></pre></td></tr></table></figure><p>3ã€<strong>æ¶ˆæ¯å‘é€ç±»</strong> RabbitMQClient.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhisheng.rabbitmq.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.core.RabbitTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhisheng_tian on 2018/1/23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RabbitMQClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RabbitTemplate rabbitTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        rabbitTemplate.convertAndSend(<span class="string">"zhisheng"</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°±è¿™æ ·ï¼Œå‘é€æ¶ˆæ¯ä»£ç å°±å®ç°äº†ã€‚</p><p>è¿™é‡Œå…³é”®çš„ä»£ç ä¸º rabbitTemplate.convertAndSend() æ–¹æ³•ï¼Œ<code>zhisheng</code> è¿™ä¸ªæ˜¯è·¯ç”±è§„åˆ™ï¼ˆroutingKeyï¼‰ï¼Œå®ƒçš„å€¼è¡¨æ˜å°†æ¶ˆæ¯å‘é€åˆ°æŒ‡å®šçš„é˜Ÿåˆ— <code>zhisheng</code> ä¸­å»ï¼Œè¿™é‡Œè·Ÿäº†ä¸‹æºç ï¼Œå‘ç° convertAndSend() æ–¹æ³•æœ€åè°ƒç”¨çš„æ–¹æ³•å…¶å®æ˜¯ä¸€ä¸ª doSend() æ–¹æ³•ã€‚</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fnrqpy395kj31kw0wkn75.jpg" alt="Snip20180124_7"></p><p>4ã€<strong>æ¶ˆæ¯æ¥æ”¶ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhisheng.rabbitmq.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhisheng_tian on 2018/1/23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RabbitMQServer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener</span>(queues = <span class="string">"zhisheng"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ”¶åˆ°çš„ message æ˜¯ï¼š"</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½ çœ‹ï¼Œè¿™é‡Œå°±æœ‰ä¸ª <code>RabbitListener</code> ä¸€ç›´åœ¨ç›‘å¬ç€é˜Ÿåˆ— <code>zhisheng</code> ã€‚</p><p>å½“ç„¶è¿™ä¸ªé˜Ÿåˆ—æ˜¯å¿…é¡»è¦æˆ‘ä»¬è‡ªå·±åœ¨åº”ç”¨ç¨‹åºä¸­åˆ›å»ºå¥½ï¼Œå®ƒä¸ä¼šåƒæˆ‘ä¹‹å‰å†™çš„æ–‡ç«  <a href="http://www.54tianzhisheng.cn/2018/01/05/SpringBoot-Kafka/" target="_blank" rel="noopener">ã€ŠSpringBoot Kafka æ•´åˆä½¿ç”¨ã€‹</a>  ä¸­çš„ Kafka ä¸€æ ·ï¼ŒKafka å®ƒä¼šåœ¨ç”¨åˆ°é˜Ÿåˆ—çš„æ—¶å€™åŠ¨æ€çš„åˆ›å»ºï¼Œä¸éœ€è¦æˆ‘ä»¬æå‰åˆ›å»ºå¥½ã€‚</p><p>é‚£ä¹ˆåœ¨ RabbitMQ ä¸­è¯¥å¦‚ä½•åˆ›å»ºé˜Ÿåˆ—å‘¢ï¼Ÿ</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fnrqqcykkoj31kw0roajh.jpg" alt="Snip20180124_8"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šè¿™æ ·æˆ‘ä»¬å°±åˆ›å»ºå¥½äº†ä¸€ä¸ª <code>zhisheng</code> çš„é˜Ÿåˆ—ï¼Œå½“ç¨‹åºå¼€å§‹è¿è¡Œæ—¶ï¼Œæ¶ˆæ¯æ¥æ”¶ç±»ä¼šæŒç»­ç›‘å¬é˜Ÿåˆ— <code>zhisheng</code> ä¸­å³å°†åˆ°æ¥çš„æ¶ˆæ¯ã€‚</p><p>5ã€<strong>è¿è¡Œé¡¹ç›®</strong></p><p>éœ€è¦åœ¨å¯åŠ¨ç±»ä¸­æ³¨å…¥å‘é€æ¶ˆæ¯çš„ç±»ï¼Œå¹¶ä¸”æä¾› init æ–¹æ³•ï¼Œåœ¨ init æ–¹æ³•ä¸­è°ƒç”¨å‘é€æ¶ˆæ¯ç±»çš„ send()  æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostConstruct</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">rabbitMQClient.send(<span class="string">"å‘é€æ¶ˆæ¯----zhisheng-----"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šinit() æ–¹æ³•å¸¦æœ‰ @PostConstruct æ³¨è§£ï¼Œè¢« @PostConstruct ä¿®é¥°çš„æ–¹æ³•ä¼šåœ¨æ„é€ å‡½æ•°ä¹‹åæ‰§è¡Œã€‚</p><p>å¯åŠ¨é¡¹ç›®å°±å¯ä»¥å‘ç°æ§åˆ¶å°å·²ç»æ¥æ”¶åˆ°æ¶ˆæ¯äº†ã€‚</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fnrqqqr9zlj31kw10qdv6.jpg" alt="Snip20180124_9"></p><p>6ã€<strong>å•çº¿ç¨‹æµ‹è¯•æ€§èƒ½</strong></p><p>çœ‹åˆ°ä¸Šé¢å›¾ç‰‡ä¸­æ³¨é‡Šæ‰çš„ä»£ç æ²¡ï¼Ÿé‚£å°±æ˜¯ç”¨æ¥æµ‹è¯•æ¶ˆæ¯å‘é€çš„æ€§èƒ½çš„ï¼Œæˆ‘å‘é€ 10000 æ¡æ¶ˆæ¯çœ‹çœ‹æ€»å…±è€—æ—¶å¤šå°‘ã€‚</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fnrqr3c0wnj31kw0tctgm.jpg" alt="Snip20180124_10"></p><p>10000 æ¡æ¶ˆæ¯å‘é€è€—æ—¶ï¼š215msã€‚   è¿™æ˜¯åœ¨å•çº¿ç¨‹ä¸‹ï¼Œä¸‹æ¬¡å¯ä»¥å’Œå…¶ä»–çš„ MQ æµ‹è¯•å¯¹æ¯”ä¸‹ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹æµ‹è¯•æ€§èƒ½ã€‚</p><p>åŒæ—¶ä»æ§åˆ¶å°å¯ä»¥çœ‹åˆ°å‘é€çš„é€Ÿç‡ï¼š</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fnrqrd94g6j31kw0s1tim.jpg" alt="Snip20180124_11"></p><p>7ã€<strong>å¤šçº¿ç¨‹æµ‹è¯•æ€§èƒ½</strong></p><p>å¼€äº†10 ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å‘é€ 10000 æ¡æ¶ˆæ¯ã€‚</p><p>init  æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        StopWatch stopWatch = <span class="keyword">new</span> StopWatch();</span><br><span class="line">        stopWatch.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> threads = <span class="number">10</span>;</span><br><span class="line">        ExecutorService executorService = Executors.newFixedThreadPool(threads);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> CountDownLatch start = <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">final</span> CountDownLatch end = <span class="keyword">new</span> CountDownLatch(threads);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; threads; i++) &#123;</span><br><span class="line">            executorService.execute(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    start.await();</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> i1 = <span class="number">0</span>; i1 &lt; <span class="number">10000</span>; i1++) &#123;</span><br><span class="line">                        rabbitMQClient.send(<span class="string">"å‘é€æ¶ˆæ¯----zhisheng-----"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    end.countDown();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        start.countDown();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            end.await();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            executorService.shutdown();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        stopWatch.stop();</span><br><span class="line">        System.out.println(<span class="string">"å‘é€æ¶ˆæ¯è€—æ—¶ï¼š"</span> + stopWatch.getTotalTimeMillis());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è€—æ—¶ï¼š4063ms</p><p>æ§åˆ¶å°æ˜¾ç¤ºå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fnrqrt6ngfj31kw0ul47b.jpg" alt="Snip20180124_12"></p><p>8ã€<strong>æ³¨æ„</strong></p><p>è¿™é‡Œæµ‹è¯•å‘é€çš„æ¶ˆæ¯ç›´æ¥æ˜¯ String ç±»å‹çš„ï¼Œä½ ä¹Ÿå¯ä»¥æµ‹è¯•ä¸‹ Bean ç±»ï¼Œè¿™éœ€è¦æ³¨æ„éœ€è¦åºåˆ—åŒ–ã€‚</p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/01/26/SpringBoot-RabbitMQ/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/01/26/SpringBoot-RabbitMQ/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ohfk1r827.bkt.clouddn.com/blog/180107/6DFKcmCgC7.png-1&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‰æ&quot;&gt;&lt;a href=&quot;#å‰æ&quot; class=&quot;headerlink&quot; title=&quot;å‰æ&quot;&gt;&lt;/a&gt;å‰æ&lt;/h3&gt;&lt;p&gt;ä¸Šæ¬¡å†™äº†ç¯‡æ–‡ç« ï¼Œ&lt;a href=&quot;http://www.54tianzhisheng.cn/2018/01/05/SpringBoot-Kafka/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ã€ŠSpringBoot Kafka æ•´åˆä½¿ç”¨ã€‹&lt;/a&gt;ï¼Œé˜…è¯»é‡è¿˜æŒºé«˜çš„ï¼Œäºæ˜¯æƒ³æƒ³è¿˜æ˜¯æŠŠå…¶ä»–å‡ ç§ MQ ä¹Ÿå’Œ SpringBoot æ•´åˆä½¿ç”¨ä¸‹ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="RabbitMQ" scheme="http://yoursite.com/tags/RabbitMQ/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Mac å®‰è£… Docker åŠå¸¸ç”¨å‘½ä»¤</title>
    <link href="http://yoursite.com/2018/01/25/Docker-install/"/>
    <id>http://yoursite.com/2018/01/25/Docker-install/</id>
    <published>2018-01-24T16:00:00.000Z</published>
    <updated>2018-01-24T09:25:34.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180107/mALkf4CKA2.png-1" alt="mark"></p><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>å¾®æœåŠ¡ + å®¹å™¨ï¼Œå®Œç¾çš„ä¸€å¯¹ï¼å¿…é¡»å¾—å¥½å¥½å­¦ä¹ å­¦ä¹ ã€‚</p><a id="more"></a><h3 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h3><p>Mac ä¸‹ Docker çš„å®‰è£…çœŸå¿ƒå»ºè®®è·Ÿç€å®˜æ–¹çš„æ–‡æ¡£èµ°ä¸€éï¼Œå®˜ç½‘å·²ç»è®²çš„å¾ˆè¯¦ç»†äº†ã€‚</p><p><a href="https://docs.docker.com/docker-for-mac/install/#what-to-know-before-you-install" target="_blank" rel="noopener">https://docs.docker.com/docker-for-mac/install/#what-to-know-before-you-install</a></p><h3 id="ä½¿ç”¨-Docker-for-Mac"><a href="#ä½¿ç”¨-Docker-for-Mac" class="headerlink" title="ä½¿ç”¨ Docker for Mac"></a>ä½¿ç”¨ Docker for Mac</h3><p><a href="https://docs.docker.com/docker-for-mac/#check-versions-of-docker-engine-compose-and-machine" target="_blank" rel="noopener">https://docs.docker.com/docker-for-mac/#check-versions-of-docker-engine-compose-and-machine</a></p><h3 id="é…ç½®-Docker-åŠ é€Ÿå™¨"><a href="#é…ç½®-Docker-åŠ é€Ÿå™¨" class="headerlink" title="é…ç½® Docker åŠ é€Ÿå™¨"></a>é…ç½® Docker åŠ é€Ÿå™¨</h3><p>Docker åŠ é€Ÿå™¨æ˜¯ä»€ä¹ˆï¼Œæˆ‘éœ€è¦ä½¿ç”¨å—ï¼Ÿ</p><p>ä½¿ç”¨ Docker çš„æ—¶å€™ï¼Œéœ€è¦ç»å¸¸ä»å®˜æ–¹è·å–é•œåƒï¼Œä½†æ˜¯ç”±äºæ˜¾è€Œæ˜“è§çš„ç½‘ç»œåŸå› ï¼Œæ‹‰å–é•œåƒçš„è¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œä¸¥é‡å½±å“ä½¿ç”¨ Docker çš„ä½“éªŒã€‚å› æ­¤ DaoCloud æ¨å‡ºäº†åŠ é€Ÿå™¨å·¥å…·è§£å†³è¿™ä¸ªéš¾é¢˜ï¼Œé€šè¿‡æ™ºèƒ½è·¯ç”±å’Œç¼“å­˜æœºåˆ¶ï¼Œæå¤§æå‡äº†å›½å†…ç½‘ç»œè®¿é—® Docker Hub çš„é€Ÿåº¦ï¼Œç›®å‰å·²ç»æ‹¥æœ‰äº†å¹¿æ³›çš„ç”¨æˆ·ç¾¤ä½“ï¼Œå¹¶å¾—åˆ°äº† Docker å®˜æ–¹çš„å¤§åŠ›æ¨èã€‚å¦‚æœæ‚¨æ˜¯åœ¨å›½å†…çš„ç½‘ç»œç¯å¢ƒä½¿ç”¨ Dockerï¼Œé‚£ä¹ˆ Docker åŠ é€Ÿå™¨ä¸€å®šèƒ½å¸®åŠ©åˆ°æ‚¨ã€‚</p><p>æ³¨å†Œ <a href="">daocloud</a>ï¼Œç„¶ååœ¨ mac æ ‡ç­¾é¡µå¤åˆ¶åŠ é€Ÿå™¨ urlã€‚</p><p><img src="https://upload-images.jianshu.io/upload_images/5225109-54fdf15443d355fd.png?imageMogr2/auto-orient/" alt=""></p><p><img src="https://upload-images.jianshu.io/upload_images/5225109-8dd1076f952fda33.png?imageMogr2/auto-orient/" alt=""></p><h3 id="å…¥é—¨æ¡ˆä¾‹"><a href="#å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="å…¥é—¨æ¡ˆä¾‹"></a>å…¥é—¨æ¡ˆä¾‹</h3><p>è·Ÿç€ä¸‹é¢çš„æ–‡ç« è¿›è¡Œæ•²ä¸€éï¼Œç†Ÿæ‚‰ä¸‹ Docker æ•´ä¸ªçš„ä½¿ç”¨ã€‚</p><p><a href="https://www.jianshu.com/p/cf6e7248b6c7" target="_blank" rel="noopener">https://www.jianshu.com/p/cf6e7248b6c7</a></p><h3 id="Docker-å¸¸ç”¨å‘½ä»¤"><a href="#Docker-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="Docker å¸¸ç”¨å‘½ä»¤"></a>Docker å¸¸ç”¨å‘½ä»¤</h3><p>ä¸‹é¢åˆ—å‡ºäº›è‡ªå·±å¸¸ç”¨çš„å‘½ä»¤ï¼Œç›®çš„å°±æ˜¯è®°å½•ä¸‹æ¥ï¼Œä»¥åå¿˜è®°äº†ï¼Œå†æ‹¿æ¥è·Ÿç€æ•²å°±è¡Œï¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">docker run -i -t &lt;image_name/continar_id&gt; /bin/bash  å¯åŠ¨å®¹å™¨å¹¶å¯åŠ¨bashï¼ˆäº¤äº’æ–¹å¼ï¼‰</span><br><span class="line"></span><br><span class="line">docker run -d -it  image_name   å¯åŠ¨å®¹å™¨ä»¥åå°æ–¹å¼è¿è¡Œ(æ›´é€šç”¨çš„æ–¹å¼ï¼‰</span><br><span class="line"></span><br><span class="line">docker ps   åˆ—å‡ºå½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„container</span><br><span class="line"></span><br><span class="line">docker ps -a  åˆ—å‡ºæ‰€æœ‰çš„container</span><br><span class="line"></span><br><span class="line">docker ps -l   åˆ—å‡ºæœ€è¿‘ä¸€æ¬¡å¯åŠ¨çš„container</span><br><span class="line"></span><br><span class="line">docker images  åˆ—å‡ºæœ¬åœ°æ‰€æœ‰çš„é•œåƒ</span><br><span class="line"></span><br><span class="line">docker rmi imagesID   åˆ é™¤æŒ‡å®šçš„é•œåƒid</span><br><span class="line"></span><br><span class="line">docker rm CONTAINER ID   åˆ é™¤æŒ‡å®šçš„CONTAINER id</span><br><span class="line"></span><br><span class="line">docker diff é•œåƒå    æŸ¥çœ‹å®¹å™¨çš„ä¿®æ”¹éƒ¨åˆ†</span><br><span class="line"></span><br><span class="line">docker kill CONTAINER ID   æ€æ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br><span class="line"></span><br><span class="line">docker logs å®¹å™¨ID/name   å¯ä»¥æŸ¥çœ‹åˆ°å®¹å™¨ä¸»ç¨‹åºçš„è¾“å‡º</span><br><span class="line"></span><br><span class="line">docker pull image_name    ä¸‹è½½image</span><br><span class="line"></span><br><span class="line">docker push image_name   å‘å¸ƒdockeré•œåƒ</span><br><span class="line"></span><br><span class="line">docker version   æŸ¥çœ‹dockerç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">docker info   æŸ¥çœ‹dockerç³»ç»Ÿçš„ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">docker inspect å®¹å™¨çš„id å¯ä»¥æŸ¥çœ‹æ›´è¯¦ç»†çš„å…³äºæŸä¸€ä¸ªå®¹å™¨çš„ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">docker run -d  image-name   åå°è¿è¡Œé•œåƒ</span><br><span class="line"></span><br><span class="line">docker search é•œåƒå    æŸ¥æ‰¾å…¬å…±çš„å¯ç”¨é•œåƒ</span><br><span class="line"></span><br><span class="line">docker stop å®¹å™¨å/å®¹å™¨ ID      ç»ˆæ­¢è¿è¡Œçš„å®¹å™¨</span><br><span class="line"></span><br><span class="line">docker restart å®¹å™¨å/å®¹å™¨ ID    é‡å¯å®¹å™¨</span><br><span class="line"></span><br><span class="line">docker commit  æäº¤ï¼Œåˆ›å»ºä¸ªæ–°é•œåƒ</span><br><span class="line"></span><br><span class="line">docker build [OPTIONS] PATH | URL | -   åˆ©ç”¨ Dockerfile åˆ›å»ºæ–°é•œåƒ</span><br></pre></td></tr></table></figure><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>è½¬è½½è¯·æ³¨æ˜åœ°å€ï¼š<a href="http://www.54tianzhisheng.cn/2018/01/25/Docker-install/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/01/25/Docker-install/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ohfk1r827.bkt.clouddn.com/blog/180107/mALkf4CKA2.png-1&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h3&gt;&lt;p&gt;å¾®æœåŠ¡ + å®¹å™¨ï¼Œå®Œç¾çš„ä¸€å¯¹ï¼å¿…é¡»å¾—å¥½å¥½å­¦ä¹ å­¦ä¹ ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Docker" scheme="http://yoursite.com/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>MacBook Pro åˆä½“éªŒ</title>
    <link href="http://yoursite.com/2018/01/24/mac/"/>
    <id>http://yoursite.com/2018/01/24/mac/</id>
    <published>2018-01-23T16:00:00.000Z</published>
    <updated>2018-01-23T16:14:26.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180107/kFhlh5gA23.png-1" alt="mark"></p><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><a id="more"></a><p>åœ¨ Mac åˆ°æ‰‹ä¹‹å‰å°±åœ¨å„ç§ç¾¤é‡Œçœ‹åˆ°äººè¯´ Mac å¤šå¥½ç”¨ï¼Œä¹Ÿæœ‰å¾ˆå¤šäººé¼“å¹è¿‡ Mac çš„å¥½å¤„ï¼Œæœ€åä¹Ÿåšå®šæˆ‘çš„å¹´å‰ç›®æ ‡äº† â€”â€” å°±æ˜¯ä¹°å° Macï¼Œä¹‹å‰è¯·åŸè°…æˆ‘è¿™ä¸ªç©·é¬¼ï¼Œä¹°ä¸èµ·ï¼Œç°åœ¨ä¹°äº† Mac åæ›´åŠ å¾—ä½“è°…æˆ‘è¿™ä¸ªç©·é¬¼äº†ï¼Œæ¯•ç«Ÿåœ¨ä¸Šæµ·è¿™ä¸ªåŸå¸‚ï¼Œé ç€å®ä¹ å·¥èµ„ä¹°è¿™ç§å¥¢ä¾ˆå“ï¼Œä¸å®¹æ˜“å•ŠğŸ˜„ ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œå¦‚æœæ„¿æ„æ”¯æŒæˆ‘çš„ï¼Œè¯·åœ¨æ–‡ç« åº•éƒ¨æ‰«æäºŒç»´ç ï¼Œåœ¨æ­¤å…ˆè°¢è°¢äº†ã€‚</p><h3 id="å¦‚ä½•æŒ‘é€‰ï¼Ÿ"><a href="#å¦‚ä½•æŒ‘é€‰ï¼Ÿ" class="headerlink" title="å¦‚ä½•æŒ‘é€‰ï¼Ÿ"></a>å¦‚ä½•æŒ‘é€‰ï¼Ÿ</h3><p>MacBook ä¸»è¦åˆ†ä¸¤ç³»åˆ—ï¼šMacBook Air å’Œ MacBook Proã€‚</p><p>Air çš„è¯ä¸ªäººæ„Ÿè§‰é…ç½®ä¸é«˜ï¼Œå¦‚æœæ˜¯å¼€å‘è¿˜æ˜¯å»ºè®®ä¹° Pro ç³»åˆ—çš„ã€‚å¦‚ä»Šä¹°çš„è¯ï¼Œå¯èƒ½è¿˜ä¼šåˆ† 2015 æ¬¾ã€2016 æ¬¾ã€2017 æ¬¾ã€‚æ¯æ¬¾ä¸­åˆåˆ† å†…å­˜å¤§å°ï¼ˆ8/16gï¼‰ã€ç¡¬ç›˜å¤§å°ï¼ˆ128/256/512gï¼‰ã€CPUã€å¤„ç†å™¨ï¼ˆi5/i7ï¼‰ã€æ˜¯å¦æœ‰TouchBarã€æ˜¾å¡ç­‰ã€‚ä¸åŒé…ç½®å¯¹åº”ç”µè„‘çš„å‹å·ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚ä¸‹é¢ç›´æ¥ä¸Šä¸€å¼ åœ¨æˆ‘çš„ç‰¹æ®Šæ¸ é“é‡Œçš„æŠ¥ä»·è¡¨æˆªå›¾å§ã€‚ï¼ˆæƒ³äº†è§£çš„å¯ä»¥æ‰¾æˆ‘ï¼‰</p><p><img src="http://ohfk1r827.bkt.clouddn.com/mac-1.jpg-1" alt="mac-1"></p><p>å…‰è¿™å‹å·ï¼Œä¸æ‡‚çš„äººè¿˜çœŸä¸ä¼šæŒ‘ã€‚</p><p>ä¸å¾—ä¸è¯´ï¼Œè‹¹æœç”µè„‘çœŸå°¼ç›éš¾æŒ‘å•Šï¼Œå¦‚æœä½ æ˜¯åœŸè±ªï¼Œé‚£ä¸ç”¨æŒ‘äº†ï¼Œç›´æ¥ä¸Šæœ€é«˜ä»·é’±çš„å§ã€‚</p><p>ç„¶åå¯ä»¥ä»é…ç½®ä¸­å‘ç° 2016 æ¬¾å’Œ 2017 æ¬¾å˜åŒ–çœŸå¿ƒä¸å¤§ï¼Œåœ¨åŒç­‰é…ç½®ä¸‹ï¼Œ2017 æ¬¾å‡ ä¹æ¯” 2016 æ¬¾ä»·æ ¼é«˜ä¸ª 3000 æ¥å—ã€‚</p><p>ç„¶åå°±æ˜¯ 512 G ç¡¬ç›˜æ¯” 256 G ä¹Ÿå‡ ä¹è´µä¸ª 2000 å¤šã€‚</p><p>16G é‚£æ˜¯å¿…é¡»çš„ä¸Šå•Šï¼Œæ ‡é…äº†ï¼Œ8G å°±ä¸è¯´äº†ï¼Œå¤ªå°äº†ã€‚</p><p>å« TouchBarï¼Œè™½ç„¶ç¡®å®ç”¨å¤„ä¸å¤§ï¼Œä¸è¿‡è°ƒéŸ³ä¸¤è¿˜æ˜¯ä¸é”™çš„ã€‚é«˜é…éƒ½æœ‰ TouchBar çš„ã€‚</p><p>å‡ºäº <strong>qiong</strong> ï¼Œæˆ‘ä¹°äº† 2016 æ¬¾ï¼Œé…ç½®æ˜¯ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/mac-2.jpg-1" alt="mac-2"></p><p>ä¸è¿‡ç°åœ¨ 2016 æ¬¾å¥½åƒåœäº§äº†ã€‚</p><h3 id="åˆ°æ‰‹"><a href="#åˆ°æ‰‹" class="headerlink" title="åˆ°æ‰‹"></a>åˆ°æ‰‹</h3><p>2018.01.11 ä¸‹åˆå…­ç‚¹å¿«é€’é€åˆ°çš„ï¼Œå¾ˆå¼€å¿ƒã€‚æ™šä¸Šæ‹¿å›å®¶æ‹†ç®±ï¼Œç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯æ£€æŸ¥åºåˆ—å·å•Šï¼Œä¸Šé¢çš„å›¾ç‰‡æ‰“ç æ‰çš„å°±æ˜¯åºåˆ—å·ï¼Œè¿™ä¸ªåºåˆ—å·åœ¨ç”µè„‘æœºèº«ã€ç³»ç»Ÿã€å¤–ç‰›çš®ç™£ç›’éƒ½æœ‰çš„ï¼Œå¯ä»¥åœ¨å®˜ç½‘æŸ¥è¯¢è¿™ä¸ªåºåˆ—å·ï¼Œè·å¾—ç”µè„‘çš„æ¿€æ´»æ—¥æœŸå’Œå‰©ä½™ä¿ä¿®æ—¶é—´çš„ã€‚å†å°±æ˜¯æŸ¥è¯¢ç”µè„‘çš„ç”µæ± å¾ªç¯æ¬¡æ•°äº†ï¼Œæˆ‘çš„æ˜¯ä¸€æ¬¡ï¼Œä¸€èˆ¬å¥½åƒæ˜¯å‡ æ¬¡ä¹‹å†…éƒ½æ˜¯ç¬¦åˆçš„ã€‚è¯æ˜ä¹‹å‰æ²¡è¢«åˆ«äººç”¨è¿‡ï¼Œè¿™ä¸ªæ•°å­—æˆ‘ä¹Ÿå¿˜è®°äº†ã€‚</p><h3 id="ç†Ÿæ‚‰ç³»ç»Ÿ"><a href="#ç†Ÿæ‚‰ç³»ç»Ÿ" class="headerlink" title="ç†Ÿæ‚‰ç³»ç»Ÿ"></a>ç†Ÿæ‚‰ç³»ç»Ÿ</h3><p>Mac ç³»ç»Ÿæ˜¯ç±» Unix ç³»ç»Ÿï¼Œå…¶å®æˆ‘è§‰å¾—åˆ°å’Œ Ubuntu ç³»ç»ŸæŒºåƒçš„ï¼Œæ—¢æœ‰å›¾å½¢åŒ–ç•Œé¢ï¼Œä¹Ÿå¯ä»¥å‘½ä»¤è¡Œæ“ä½œã€‚ç†Ÿæ‚‰è¿‡ Linux çš„åº”è¯¥ä¸Šæ‰‹å¾ˆå¿«çš„ã€‚</p><h3 id="å®‰è£…è½¯ä»¶"><a href="#å®‰è£…è½¯ä»¶" class="headerlink" title="å®‰è£…è½¯ä»¶"></a>å®‰è£…è½¯ä»¶</h3><p>å¯ä»¥åœ¨ Appstore é‡Œé¢ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸€äº›è½¯ä»¶çš„å®˜ç½‘ç›´æ¥ä¸‹è½½ mac ç‰ˆçš„ã€‚å®‰è£…ä¹ŸæŒºç®€å•çš„ã€‚å¦‚æœä½ ä¸çŸ¥é“æœ‰ä»€ä¹ˆè½¯ä»¶å¯ä»¥å®‰è£…ï¼Œé‚£ä¹ˆæˆ‘è¿™é‡Œç»™ä½ ä»½ Mac è½¯ä»¶å‚è€ƒåˆ—è¡¨ï¼š<a href="https://github.com/jaywcjlove/awesome-mac/blob/master/README-zh.md" target="_blank" rel="noopener">https://github.com/jaywcjlove/awesome-mac/blob/master/README-zh.md</a></p><p>å½“ç„¶äº†ï¼Œä¸Šé¢çš„ä¸ä¸€å®šå…¨ï¼Œå…·ä½“ç”¨åˆ°å…¶ä»–çš„è¿˜æ˜¯çš„è‡ªå·±å»æ‰¾å¯¹åº”çš„è½¯ä»¶ã€‚</p><p>è¿˜æœ‰å°±æ˜¯å¥½å¤šè½¯ä»¶æ˜¯æ”¶è´¹çš„ï¼Œåœ¨ Mac ä¸Šå¦‚æœè¦ä¸‹è½½çš„è¯ï¼Œè¿˜çš„è´¹ç‚¹å¿ƒæ€å»ç ´è§£ï¼Œæ¯”å¦‚ Officeã€IDEAã€Adobe ç³»åˆ—ç­‰ï¼Œå½“ç„¶ä¹Ÿä¸æ˜¯é¼“å¹å¤§å®¶å»ç ´è§£ï¼Œæˆ‘ä»¬è‡ªå·±ç”¨ç”¨å°±è¡Œï¼Œè™½è¯´ç°åœ¨æ²¡é’±æ”¯æŒï¼Œä½†æ˜¯æœ‰é’±çš„è¯è¿˜æ˜¯æ”¯æŒä¸‹ã€‚æˆ‘ä¸€ä¸ªå†™åšå®¢çš„çŸ¥é“å†™åšå®¢çš„ä¸å®¹æ˜“ï¼Œé‚£å†™è½¯ä»¶çš„æ›´ä¸å®¹æ˜“äº†ï¼Œèƒ½æ”¯æŒä¸€ä¸¤å—ä¹ŸæŒºå¥½çš„ã€‚</p><p>ç„¶åå°±æ˜¯ç¾åŒ–ä¸‹æˆ‘ä»¬çš„ä¸€äº›è½¯ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„ç»ˆç«¯ä¹‹ç±»çš„ã€å°½é‡ä½¿ç”¨ Homebrew å®‰è£…è½¯ä»¶ã€‚å½“ç„¶è¿™ç¯‡æ–‡ç« ä¸ä¼šå†™è¿™äº›çš„ï¼Œæ”¹å¤©ä¸“é—¨å†™ç¯‡æ–‡ç« å†™è¿™ä¸ªè¯é¢˜ã€‚</p><p>è¿˜æœ‰å°±æ˜¯åœ¨ Mac ä¸Šä»æ–°æ‰“é€ ä¸€ä¸ªé€‚åˆè‡ªå·±çš„æ–°å†™ä½œç¯å¢ƒï¼ˆè½¯ä»¶ã€Hexo å†™åšå®¢ç¯å¢ƒï¼‰ã€‚</p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>ä½“éªŒäº† Mac ä¹Ÿæœ‰ä¸€ä¸ªå¤šç¤¼æ‹œäº†ï¼Œæ•´ä½“æ•ˆæœè¿˜æ˜¯ä¸é”™çš„ï¼Œæ¯•ç«ŸèŠ±äº†å·¨èµ„å‘¢ï¼Œä¹Ÿç®—æ˜¯å®Œæˆäº†è‡ªå·±å¹´å‰çš„å°ç›®æ ‡ã€‚å…ˆ bb åˆ°è¿™é‡Œå§ã€‚æœ‰æ—¶é—´å†å†™ç‚¹å…³äº Mac ä¸Šçš„ä¸œè¥¿ï¼Œè¿™æ¬¡å†™çš„æ¯”è¾ƒç®€å•ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯åœ¨ Mac ä¸Šå†™çš„ç¬¬ä¸€ç¯‡æ–‡ç« ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ohfk1r827.bkt.clouddn.com/blog/180107/kFhlh5gA23.png-1&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h3&gt;
    
    </summary>
    
    
      <category term="Mac" scheme="http://yoursite.com/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot Admin ä½¿ç”¨æŒ‡å—</title>
    <link href="http://yoursite.com/2018/01/17/SpringBoot-Admin/"/>
    <id>http://yoursite.com/2018/01/17/SpringBoot-Admin/</id>
    <published>2018-01-16T16:00:00.000Z</published>
    <updated>2018-01-21T11:25:12.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180107/m1b2jfCc9I.png-1" alt="mark"></p><h3 id="ä»€ä¹ˆæ˜¯-SpringBoot-Adminï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-SpringBoot-Adminï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ SpringBoot Adminï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ SpringBoot Adminï¼Ÿ</h3><p>Spring Boot Admin æ˜¯ä¸€ä¸ªç®¡ç†å’Œç›‘æ§ä½ çš„ Spring Boot åº”ç”¨ç¨‹åºçš„åº”ç”¨ç¨‹åºã€‚ è¿™äº›åº”ç”¨ç¨‹åºé€šè¿‡ Spring Boot Admin Clientï¼ˆé€šè¿‡ HTTPï¼‰æ³¨å†Œæˆ–è€…ä½¿ç”¨ Spring Cloudï¼ˆä¾‹å¦‚ Eurekaï¼‰å‘ç°ã€‚ UIåªæ˜¯ Spring Boot Actuator ç«¯ç‚¹ä¸Šçš„ä¸€ä¸ª AngularJs åº”ç”¨ç¨‹åºã€‚<br><a id="more"></a></p><h3 id="å¿«é€Ÿå¼€å§‹"><a href="#å¿«é€Ÿå¼€å§‹" class="headerlink" title="å¿«é€Ÿå¼€å§‹"></a>å¿«é€Ÿå¼€å§‹</h3><p>é¦–å…ˆåœ¨ IDEA åˆ›å»ºä¸€ä¸ª SpringBoot é¡¹ç›®ï¼ŒæŠŠå®ƒå½“ä½œ server ç«¯ï¼Œå·¥ç¨‹å¦‚ä¸‹ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/hIKaIkCE8a.png-1" alt="mark"></p><p>ç„¶ååœ¨ pom.xml ä¸­å¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>de.codecentric<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-admin-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>de.codecentric<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-admin-server-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç»§ç»­åœ¨å¯åŠ¨ç±» SpringbootAdminApplication.java ä¸­å¼•å…¥æ³¨è§£ <strong>@EnableAdminServer</strong> ï¼Œç„¶åè¿è¡Œé¡¹ç›®ï¼š</p><p>è®¿é—® <a href="http://localhost:8084/" target="_blank" rel="noopener">http://localhost:8084/</a>  å³å¯ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/C55mBbf8LH.png-1" alt="mark"></p><p>æ­¤æ—¶ä¼šå‘ç°æ²¡æœ‰ä»»ä½•åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ–°å»ºä¸€ä¸ª SpringBoot é¡¹ç›®ï¼ŒæŠŠå®ƒå½“ä½œå®¢æˆ·ç«¯ç¨‹åºï¼Œå·¥ç¨‹å¦‚ä¸‹ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/9EGaFH3Gb7.png-1" alt="mark"></p><p>åœ¨ pom.xml ä¸­æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>de.codecentric<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-admin-starter-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ application.yml ä¸­è®¾ç½®ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/3AL0J6I16b.png-1" alt="mark"></p><p>spring.boot.admin.url=http:localhost:8094 ç”¨äºå°†å½“å‰åº”ç”¨æ³¨å†Œåˆ° Spring Boot Adminã€‚</p><p>è¿˜å¯ä»¥è®¾ç½®ï¼Œspring.boot.admin.client.name: ï¼ˆåº”ç”¨ç¨‹åºçš„åå­—ï¼‰ä¸è®¾ç½®çš„è¯ä¼šæœ‰é»˜è®¤çš„åå­—</p><p>æ­¤æ—¶æŠŠä¸¤ä¸ªé¡¹ç›®è¿è¡Œèµ·æ¥ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/IGEBDm4eJ7.png-1" alt="mark"></p><p>ç‚¹å‡»å›¾ä¸­çš„ <strong>detail</strong> æŒ‰é’®ï¼šå¯ä»¥çœ‹åˆ°åº”ç”¨ç¨‹åºçš„å¥åº·å€¼ã€å†…å­˜ã€JVMã€GC ç­‰ä¿¡æ¯ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/GJBjGF512G.png-1" alt="mark"></p><p><strong>metrics</strong> ä¿¡æ¯ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/gdbj21Fk19.png-1" alt="mark"></p><p><strong>ç¯å¢ƒ</strong> ä¿¡æ¯ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/eglbcgE9C5.png-1" alt="mark"></p><p><strong>log</strong> ä¿¡æ¯ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/IkeJkaEGcI.png-1" alt="mark"></p><p><strong>JMX</strong> ä¿¡æ¯ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/e3Ei3l6ieF.png-1" alt="mark"></p><p><strong>çº¿ç¨‹</strong> ä¿¡æ¯ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/ClFekkJKB8.png-1" alt="mark"></p><p><strong>Trace</strong> è¿½è¸ªä¿¡æ¯ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/J6m9b43F8d.png-1" alt="mark"></p><p>è¿˜å¯ä»¥ä¸‹è½½ Heapdump æ–‡ä»¶ã€‚</p><p>åˆšæ‰é¦–é¡µçš„åº”ç”¨åˆ—è¡¨åé¢æœ‰ä¸ªçº¢è‰²çš„ Ã—ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ³¨å†Œä¸Šå»çš„åº”ç”¨ç§»é™¤ï¼Œä½†æ˜¯åªè¦ä½ ä¸æŠŠç¨‹åºåœæ‰ï¼Œå®ƒç«‹é©¬åˆä¼šæ³¨å†Œä¸Šå»ã€‚</p><p>è¿˜æœ‰å°±æ˜¯åº”ç”¨åˆ—è¡¨çš„ version å’Œ info ä¸Šé¢çš„å›¾ä¸­ä¸ºç©ºï¼Œä¸‹é¢çœ‹çœ‹æ€ä¹ˆæŠŠå®ƒå˜å‡ºæ¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">info.groupId: @project.groupId@</span><br><span class="line">info.artifactId: @project.artifactId@</span><br><span class="line">info.version: @project.version@</span><br></pre></td></tr></table></figure><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/3E5hlG7heJ.png-1" alt="mark"></p><p>é‡æ–°è¿è¡Œå®¢æˆ·ç«¯ç¨‹åºï¼Œåˆ·æ–°é¡µé¢å¯ä»¥å‘ç°ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/A0FBLLK9LE.png-1" alt="mark"></p><p>è¿˜å¯ä»¥æŸ¥è¯¢åº”ç”¨ç¨‹åºçš„äº‹ä»¶å˜åŒ–ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/E9LfBJGaB3.png-1" alt="mark"></p><h3 id="å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº"><a href="#å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº" class="headerlink" title="å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº"></a>å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº</h3><h4 id="JMX-beanç®¡ç†"><a href="#JMX-beanç®¡ç†" class="headerlink" title="JMX beanç®¡ç†"></a>JMX beanç®¡ç†</h4><p>è¦åœ¨ç®¡ç†ç•Œé¢ä¸­ä¸JMX-beansè¿›è¡Œäº¤äº’ï¼Œæ‚¨å¿…é¡»åœ¨å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸­åŒ…å« Jolokia,</p><p>pom.xml åŠ å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jolokia<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jolokia-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é‡å¯å®¢æˆ·ç«¯ç¨‹åºåï¼Œå°±å¯ä»¥åœ¨è¿™é‡Œä¸ JMX åšäº¤äº’äº†ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180117/g82cD16kBf.png-1" alt="mark"></p><p>è¿˜æœ‰å¾ˆå¤š SpringBoot Admin å®¢æˆ·ç«¯é…ç½®é€‰é¡¹ï¼š</p><p><a href="http://codecentric.github.io/spring-boot-admin/1.5.6/#spring-boot-admin-client" target="_blank" rel="noopener">http://codecentric.github.io/spring-boot-admin/1.5.6/#spring-boot-admin-client</a></p><h3 id="æœåŠ¡ç«¯ç¨‹åº"><a href="#æœåŠ¡ç«¯ç¨‹åº" class="headerlink" title="æœåŠ¡ç«¯ç¨‹åº"></a>æœåŠ¡ç«¯ç¨‹åº</h3><p>ä¹Ÿæœ‰äº› SpringBoot Admin æœåŠ¡ç«¯ç¨‹åºé…ç½®é€‰é¡¹ï¼š</p><p><a href="http://codecentric.github.io/spring-boot-admin/1.5.6/#spring-boot-admin-server" target="_blank" rel="noopener">http://codecentric.github.io/spring-boot-admin/1.5.6/#spring-boot-admin-server</a></p><p>å®˜æ–¹æ–‡æ¡£é‡Œé¢è¿˜æœ‰äº›å…³äºæœåŠ¡ä¸‹çº¿æ¶ˆæ¯é€šçŸ¥çš„çŸ¥è¯†ï¼Œæƒ³äº†è§£çš„å¯ä»¥æŸ¥çœ‹ï¼š</p><p><a href="http://codecentric.github.io/spring-boot-admin/1.5.6/#_notifications" target="_blank" rel="noopener">http://codecentric.github.io/spring-boot-admin/1.5.6/#_notifications</a></p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><h3 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h3><p><a href="">http://codecentric.github.io/spring-boot-admin/1.5.6/</a></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>è½¬è½½è¯·æ³¨æ˜æ–‡ç« åŸå§‹åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/01/17/SpringBoot-Admin/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/01/17/SpringBoot-Admin/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ohfk1r827.bkt.clouddn.com/blog/180107/m1b2jfCc9I.png-1&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä»€ä¹ˆæ˜¯-SpringBoot-Adminï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯-SpringBoot-Adminï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ SpringBoot Adminï¼Ÿ&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ SpringBoot Adminï¼Ÿ&lt;/h3&gt;&lt;p&gt;Spring Boot Admin æ˜¯ä¸€ä¸ªç®¡ç†å’Œç›‘æ§ä½ çš„ Spring Boot åº”ç”¨ç¨‹åºçš„åº”ç”¨ç¨‹åºã€‚ è¿™äº›åº”ç”¨ç¨‹åºé€šè¿‡ Spring Boot Admin Clientï¼ˆé€šè¿‡ HTTPï¼‰æ³¨å†Œæˆ–è€…ä½¿ç”¨ Spring Cloudï¼ˆä¾‹å¦‚ Eurekaï¼‰å‘ç°ã€‚ UIåªæ˜¯ Spring Boot Actuator ç«¯ç‚¹ä¸Šçš„ä¸€ä¸ª AngularJs åº”ç”¨ç¨‹åºã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Lombok çœ‹è¿™ç¯‡å°±å¤Ÿäº†</title>
    <link href="http://yoursite.com/2018/01/09/lombok/"/>
    <id>http://yoursite.com/2018/01/09/lombok/</id>
    <published>2018-01-08T16:00:00.000Z</published>
    <updated>2018-01-21T13:10:23.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180107/7JfK07cCbh.png-1" alt="mark"></p><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>è‡ªä»è¿›å…¬å¸å®ä¹ åï¼Œé¡¹ç›®ä»£ç ä¸­èƒ½ç”¨ Lombok çš„éƒ½ç”¨äº†ï¼Œæ¯•ç«Ÿè¿™ä¹ˆå¥½çš„è½®å­è¦å……åˆ†åˆ©ç”¨å¥½ã€‚ä¹Ÿå¯ä»¥å‡å°‘ä¸€äº› get/set/toString æ–¹æ³•çš„ç¼–å†™ï¼Œè™½è¯´ IDEA çš„æ’ä»¶å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ get/set/toString æ–¹æ³•ï¼Œä½†æ˜¯ä½¿ç”¨ Lombok å¯ä»¥è®©ä»£ç æ›´ç®€æ´ã€‚<br><a id="more"></a><br>ä¸‹é¢çœ‹çœ‹å¦‚ä½•åœ¨ IDEAã€€ä¸­å¦‚ä½•å®‰è£… Lombokï¼š</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>æ‰“å¼€ IDEA çš„ Settings é¢æ¿ï¼Œå¹¶é€‰æ‹© Plugins é€‰é¡¹ï¼Œç„¶åç‚¹å‡» â€œBrowse repositoriesâ€</p><p>åœ¨è¾“å…¥æ¡†è¾“å…¥â€lombokâ€ï¼Œå¾—åˆ°æœç´¢ç»“æœï¼Œç‚¹å‡»å®‰è£…ï¼Œç„¶åå®‰è£…æç¤ºé‡å¯ IDEAï¼Œå®‰è£…æˆåŠŸ;</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180106/C33FG37Gk4.png-1" alt="mark"></p><h3 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h3><p>åœ¨è‡ªå·±çš„é¡¹ç›®é‡Œæ·»åŠ  lombok çš„ç¼–è¯‘æ”¯æŒï¼Œåœ¨ pom æ–‡ä»¶é‡Œé¢æ·»åŠ  dependency</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.16.18&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="æ€ä¹ˆä½¿ç”¨ï¼Ÿ"><a href="#æ€ä¹ˆä½¿ç”¨ï¼Ÿ" class="headerlink" title="æ€ä¹ˆä½¿ç”¨ï¼Ÿ"></a>æ€ä¹ˆä½¿ç”¨ï¼Ÿ</h3><p>åœ¨å®ä½“ç±»ä¸Šå¼•å…¥ç›¸å…³çš„æ³¨è§£å°±è¡Œï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180106/aCEc8ileJg.png-1" alt="mark"></p><h3 id="æœ‰å“ªäº›æ³¨è§£ï¼Ÿ"><a href="#æœ‰å“ªäº›æ³¨è§£ï¼Ÿ" class="headerlink" title="æœ‰å“ªäº›æ³¨è§£ï¼Ÿ"></a>æœ‰å“ªäº›æ³¨è§£ï¼Ÿ</h3><ul><li>@Data</li><li>@Setter</li><li>@Getter</li><li>@Slf4j</li><li>@AllArgsConstructor</li><li>@NoArgsConstructor</li><li>@EqualsAndHashCode</li><li>@NonNull</li><li>@Cleanup</li><li>@ToString</li><li>@RequiredArgsConstructor</li><li>@Value</li><li>@SneakyThrows</li><li>@Synchronized</li></ul><h3 id="æ³¨è§£è¯¦è§£"><a href="#æ³¨è§£è¯¦è§£" class="headerlink" title="æ³¨è§£è¯¦è§£"></a>æ³¨è§£è¯¦è§£</h3><p><strong>@Data</strong></p><p>æ³¨è§£åœ¨ <strong>ç±»</strong> ä¸Šï¼›æä¾›ç±»æ‰€æœ‰å±æ€§çš„ get å’Œ set æ–¹æ³•ï¼Œæ­¤å¤–è¿˜æä¾›äº†equalsã€canEqualã€hashCodeã€toString æ–¹æ³•ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180107/mHj1eak6fJ.png-1" alt="mark"></p><p><strong>@Setter</strong></p><p>æ³¨è§£åœ¨ <strong>å±æ€§</strong> ä¸Šï¼›ä¸ºå•ä¸ªå±æ€§æä¾› set æ–¹æ³•; æ³¨è§£åœ¨ <strong>ç±»</strong> ä¸Šï¼Œä¸ºè¯¥ç±»æ‰€æœ‰çš„å±æ€§æä¾› set æ–¹æ³•ï¼Œ éƒ½æä¾›é»˜è®¤æ„é€ æ–¹æ³•ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180107/lkkff2b6Dc.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180107/J9mC8FGfc0.png-1" alt="mark"></p><p><strong>@Getter</strong></p><p>æ³¨è§£åœ¨ <strong>å±æ€§</strong> ä¸Šï¼›ä¸ºå•ä¸ªå±æ€§æä¾› get æ–¹æ³•; æ³¨è§£åœ¨ <strong>ç±»</strong> ä¸Šï¼Œä¸ºè¯¥ç±»æ‰€æœ‰çš„å±æ€§æä¾› get æ–¹æ³•ï¼Œéƒ½æä¾›é»˜è®¤æ„é€ æ–¹æ³•ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180107/d0F5h97J5f.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180107/K0m81cFd6g.png-1" alt="mark"></p><p><strong>@Slf4j</strong></p><p>æ³¨è§£åœ¨ <strong>ç±»</strong> ä¸Šï¼›ä¸ºç±»æä¾›ä¸€ä¸ª å±æ€§åä¸º log çš„æ—¥å¿—å¯¹è±¡ï¼Œæä¾›é»˜è®¤æ„é€ æ–¹æ³•ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180107/BChd89Cbh5.png-1" alt="mark"></p><p><strong>@AllArgsConstructor</strong></p><p>æ³¨è§£åœ¨ <strong>ç±»</strong> ä¸Šï¼›ä¸ºç±»æä¾›ä¸€ä¸ªå…¨å‚çš„æ„é€ æ–¹æ³•ï¼ŒåŠ äº†è¿™ä¸ªæ³¨è§£åï¼Œç±»ä¸­ä¸æä¾›é»˜è®¤æ„é€ æ–¹æ³•äº†ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180107/4iji9AJ0fE.png-1" alt="mark"></p><p><strong>@NoArgsConstructor</strong></p><p>æ³¨è§£åœ¨ <strong>ç±»</strong> ä¸Šï¼›ä¸ºç±»æä¾›ä¸€ä¸ªæ— å‚çš„æ„é€ æ–¹æ³•ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180107/JcdfmhDAaB.png-1" alt="mark"></p><p><strong>@EqualsAndHashCode</strong></p><p>æ³¨è§£åœ¨ <strong>ç±»</strong> ä¸Š, å¯ä»¥ç”Ÿæˆ equalsã€canEqualã€hashCode æ–¹æ³•ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180108/CKHe7EICGd.png-1" alt="mark"></p><p><strong>@NonNull</strong></p><p>æ³¨è§£åœ¨ <strong>å±æ€§</strong> ä¸Šï¼Œä¼šè‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªå…³äºæ­¤å‚æ•°çš„éç©ºæ£€æŸ¥ï¼Œå¦‚æœå‚æ•°ä¸ºç©ºï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä¹Ÿä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180108/g6Lh1eh1jm.png-1" alt="mark"></p><p><strong>@Cleanup</strong></p><p>è¿™ä¸ªæ³¨è§£ç”¨åœ¨ <strong>å˜é‡</strong> å‰é¢ï¼Œå¯ä»¥ä¿è¯æ­¤å˜é‡ä»£è¡¨çš„èµ„æºä¼šè¢«è‡ªåŠ¨å…³é—­ï¼Œé»˜è®¤æ˜¯è°ƒç”¨èµ„æºçš„ close() æ–¹æ³•ï¼Œå¦‚æœè¯¥èµ„æºæœ‰å…¶å®ƒå…³é—­æ–¹æ³•ï¼Œå¯ä½¿ç”¨ @Cleanup(â€œmethodNameâ€) æ¥æŒ‡å®šè¦è°ƒç”¨çš„æ–¹æ³•ï¼Œä¹Ÿä¼šç”Ÿæˆé»˜è®¤çš„æ„é€ æ–¹æ³•</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180108/Ba1bDkKb9J.png-1" alt="mark"></p><p><strong>@ToString</strong></p><p>è¿™ä¸ªæ³¨è§£ç”¨åœ¨ <strong>ç±»</strong> ä¸Šï¼Œå¯ä»¥ç”Ÿæˆæ‰€æœ‰å‚æ•°çš„ toString æ–¹æ³•ï¼Œè¿˜ä¼šç”Ÿæˆé»˜è®¤çš„æ„é€ æ–¹æ³•ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180108/7LjglDeH8e.png-1" alt="mark"></p><p><strong>@RequiredArgsConstructor</strong></p><p>è¿™ä¸ªæ³¨è§£ç”¨åœ¨ <strong>ç±»</strong> ä¸Šï¼Œä½¿ç”¨ç±»ä¸­æ‰€æœ‰å¸¦æœ‰ @NonNull æ³¨è§£çš„æˆ–è€…å¸¦æœ‰ final ä¿®é¥°çš„æˆå‘˜å˜é‡ç”Ÿæˆå¯¹åº”çš„æ„é€ æ–¹æ³•ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180108/CBgAF4ei8m.png-1" alt="mark"></p><p><strong>@Value</strong></p><p>è¿™ä¸ªæ³¨è§£ç”¨åœ¨ <strong>ç±»</strong> ä¸Šï¼Œä¼šç”Ÿæˆå«æ‰€æœ‰å‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œget æ–¹æ³•ï¼Œæ­¤å¤–è¿˜æä¾›äº†equalsã€hashCodeã€toString æ–¹æ³•ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180108/b6KeAg0ABi.png-1" alt="mark"></p><p><strong>@SneakyThrows</strong></p><p>è¿™ä¸ªæ³¨è§£ç”¨åœ¨ <strong>æ–¹æ³•</strong> ä¸Šï¼Œå¯ä»¥å°†æ–¹æ³•ä¸­çš„ä»£ç ç”¨ try-catch è¯­å¥åŒ…è£¹èµ·æ¥ï¼Œæ•è·å¼‚å¸¸å¹¶åœ¨ catch ä¸­ç”¨ Lombok.sneakyThrow(e) æŠŠå¼‚å¸¸æŠ›å‡ºï¼Œå¯ä»¥ä½¿ç”¨ @SneakyThrows(Exception.class) çš„å½¢å¼æŒ‡å®šæŠ›å‡ºå“ªç§å¼‚å¸¸ï¼Œä¹Ÿä¼šç”Ÿæˆé»˜è®¤çš„æ„é€ æ–¹æ³•ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180108/IfCKh1FGbh.png-1" alt="mark"></p><p><strong>@Synchronized</strong></p><p>è¿™ä¸ªæ³¨è§£ç”¨åœ¨ <strong>ç±»æ–¹æ³•</strong> æˆ–è€… <strong>å®ä¾‹æ–¹æ³•</strong> ä¸Šï¼Œæ•ˆæœå’Œ synchronized å…³é”®å­—ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºé”å¯¹è±¡ä¸åŒï¼Œå¯¹äºç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼Œsynchronized å…³é”®å­—çš„é”å¯¹è±¡åˆ†åˆ«æ˜¯ç±»çš„ class å¯¹è±¡å’Œ this å¯¹è±¡ï¼Œè€Œ @Synchronized çš„é”å¯¹è±¡åˆ†åˆ«æ˜¯ ç§æœ‰é™æ€ final å¯¹è±¡ lock å’Œ ç§æœ‰ final å¯¹è±¡ lockï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šé”å¯¹è±¡ï¼Œæ­¤å¤–ä¹Ÿæä¾›é»˜è®¤çš„æ„é€ æ–¹æ³•ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180108/L95jIc7eJi.png-1" alt="mark"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä»¥ä¸Šæ³¨è§£å¯æ ¹æ®éœ€è¦ä¸€èµ·æ­é…ä½¿ç”¨ï¼</p><p><strong>è™½è¯´è½®å­å¥½ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ä»…è¦çŸ¥å…¶ç„¶ï¼Œä¹Ÿè¦çŸ¥å…¶æ‰€ä»¥ç„¶ï¼</strong></p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>è½¬è½½è¯·æ³¨æ˜åŸåˆ›åœ°å€ï¼š<a href="http://www.54tianzhisheng.cn/2018/01/07/lombok/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/01/07/lombok/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ohfk1r827.bkt.clouddn.com/blog/180107/7JfK07cCbh.png-1&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‰æ&quot;&gt;&lt;a href=&quot;#å‰æ&quot; class=&quot;headerlink&quot; title=&quot;å‰æ&quot;&gt;&lt;/a&gt;å‰æ&lt;/h3&gt;&lt;p&gt;è‡ªä»è¿›å…¬å¸å®ä¹ åï¼Œé¡¹ç›®ä»£ç ä¸­èƒ½ç”¨ Lombok çš„éƒ½ç”¨äº†ï¼Œæ¯•ç«Ÿè¿™ä¹ˆå¥½çš„è½®å­è¦å……åˆ†åˆ©ç”¨å¥½ã€‚ä¹Ÿå¯ä»¥å‡å°‘ä¸€äº› get/set/toString æ–¹æ³•çš„ç¼–å†™ï¼Œè™½è¯´ IDEA çš„æ’ä»¶å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ get/set/toString æ–¹æ³•ï¼Œä½†æ˜¯ä½¿ç”¨ Lombok å¯ä»¥è®©ä»£ç æ›´ç®€æ´ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="lombok" scheme="http://yoursite.com/tags/lombok/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot Kafka æ•´åˆä½¿ç”¨</title>
    <link href="http://yoursite.com/2018/01/05/SpringBoot-Kafka/"/>
    <id>http://yoursite.com/2018/01/05/SpringBoot-Kafka/</id>
    <published>2018-01-04T16:00:00.000Z</published>
    <updated>2018-01-21T11:25:33.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180105/DKcBEKHimB.jpg-1" alt="mark"></p><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>å‡è®¾ä½ äº†è§£è¿‡ SpringBoot å’Œ Kafkaã€‚<br><a id="more"></a><br>1ã€SpringBoot</p><p>å¦‚æœå¯¹ SpringBoot ä¸äº†è§£çš„è¯ï¼Œå»ºè®®å»çœ‹çœ‹ <a href="http://blog.didispace.com/Spring-Boot%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" target="_blank" rel="noopener">DD å¤§ä½¬</a> å’Œ <a href="http://www.ityouknow.com/spring-boot.html" target="_blank" rel="noopener">çº¯æ´çš„å¾®ç¬‘</a> çš„ç³»åˆ—åšå®¢ã€‚</p><p>2ã€Kafka</p><p>Kafka çš„è¯å¯ä»¥çœ‹çœ‹æˆ‘å‰ä¸¤å¤©å†™çš„åšå®¢ ï¼š <a href="http://www.54tianzhisheng.cn/2018/01/04/Kafka/" target="_blank" rel="noopener">Kafka å®‰è£…åŠå¿«é€Ÿå…¥é—¨</a>   å­¦ä¹ çš„è¯è‡ªå·±å¼€å°è™šæ‹Ÿæœºè‡ªå·±æ‰‹åŠ¨æ­å»ºç¯å¢ƒå§ï¼Œæœ‰æ¡ä»¶çš„ä¹°æœåŠ¡å™¨ã€‚</p><p>æ³¨æ„ï¼š<strong>ä¸€å®šè¦äº²è‡ªè‡ªå·±å®‰è£…å®è·µ</strong>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿™ä¸¤ä¸ªè¿›è¡Œæ•´åˆã€‚</p><h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><h4 id="é¡¹ç›®æ•´ä½“æ¶æ„ï¼š"><a href="#é¡¹ç›®æ•´ä½“æ¶æ„ï¼š" class="headerlink" title="é¡¹ç›®æ•´ä½“æ¶æ„ï¼š"></a>é¡¹ç›®æ•´ä½“æ¶æ„ï¼š</h4><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180105/c6jC85Bbk4.png-1" alt="mark"></p><p>ä½¿ç”¨ IDEA åˆ›å»º SpringBoot é¡¹ç›®ï¼Œè¿™ä¸ªå¾ˆç®€å•äº†ï¼Œè¿™é‡Œä¸åšè¿‡å¤šçš„è®²è§£ã€‚</p><p>1ã€pom æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zhisheng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>kafka-learning<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>kafka-learning<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot + kafka<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.kafka<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-kafka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸»è¦å¼•å…¥äº†  spring-kafka ã€lombok ã€ gson ä¾èµ–ã€‚</p><p>2ã€æ¶ˆæ¯å®ä½“ç±» Message.java  å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Message</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;    <span class="comment">//id</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String msg; <span class="comment">//æ¶ˆæ¯</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Date sendTime;  <span class="comment">//æ—¶é—´æˆ³</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3ã€æ¶ˆæ¯å‘é€ç±» KafkaSender.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KafkaSender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> KafkaTemplate&lt;String, String&gt; kafkaTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Gson gson = <span class="keyword">new</span> GsonBuilder().create();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘é€æ¶ˆæ¯æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Message message = <span class="keyword">new</span> Message();</span><br><span class="line">        message.setId(System.currentTimeMillis());</span><br><span class="line">        message.setMsg(UUID.randomUUID().toString());</span><br><span class="line">        message.setSendTime(<span class="keyword">new</span> Date());</span><br><span class="line">        log.info(<span class="string">"+++++++++++++++++++++  message = &#123;&#125;"</span>, gson.toJson(message));</span><br><span class="line">        kafkaTemplate.send(<span class="string">"zhisheng"</span>, gson.toJson(message));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°±è¿™æ ·ï¼Œå‘é€æ¶ˆæ¯ä»£ç å°±å®ç°äº†ã€‚</p><p>è¿™é‡Œå…³é”®çš„ä»£ç ä¸º <code>kafkaTemplate.send()</code>  æ–¹æ³•ï¼Œ<code>zhisheng</code> æ˜¯ Kafka é‡Œçš„ topic ï¼Œè¿™ä¸ª topic åœ¨ Java ç¨‹åºä¸­æ˜¯ä¸éœ€è¦æå‰åœ¨ Kafka ä¸­è®¾ç½®çš„ï¼Œå› ä¸ºå®ƒä¼šåœ¨å‘é€çš„æ—¶å€™è‡ªåŠ¨åˆ›å»ºä½ è®¾ç½®çš„ topicï¼Œ <code>gson.toJson(message)</code>   æ˜¯æ¶ˆæ¯å†…å®¹ï¼Œè¿™é‡Œæš‚æ—¶å…ˆè¯´è¿™ä¹ˆå¤šäº†ï¼Œä¸è¯¦è§£äº†ï¼Œåé¢æœ‰æœºä¼šç»§ç»­æŠŠé‡Œé¢æºç è§£è¯»å†™ç¯‡åšå®¢å‡ºæ¥ï¼ˆå› ä¸ºä¸­é€”ç¢°åˆ°å‘ï¼Œè€å­è·Ÿäº†å‡ éæºç ï¼‰ã€‚</p><p>4ã€æ¶ˆæ¯æ¥æ”¶ç±»  KafkaReceiver.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KafkaReceiver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@KafkaListener</span>(topics = &#123;<span class="string">"zhisheng"</span>&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listen</span><span class="params">(ConsumerRecord&lt;?, ?&gt; record)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Optional&lt;?&gt; kafkaMessage = Optional.ofNullable(record.value());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (kafkaMessage.isPresent()) &#123;</span><br><span class="line"></span><br><span class="line">            Object message = kafkaMessage.get();</span><br><span class="line"></span><br><span class="line">            log.info(<span class="string">"----------------- record ="</span> + record);</span><br><span class="line">            log.info(<span class="string">"------------------ message ="</span> + message);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯ consumer æ¥æ”¶æ¶ˆæ¯ç‰¹åˆ«ç®€å•ï¼Œç›´æ¥ç”¨ <code>@KafkaListener</code> æ³¨è§£å³å¯ï¼Œå¹¶åœ¨ç›‘å¬ä¸­è®¾ç½®ç›‘å¬çš„ <code>topic</code> ï¼Œ<code>topics</code> æ˜¯ä¸€ä¸ªæ•°ç»„æ‰€ä»¥æ˜¯å¯ä»¥ç»‘å®šå¤šä¸ªä¸»é¢˜çš„ï¼Œä¸Šé¢çš„ä»£ç ä¸­ä¿®æ”¹ä¸º <code>@KafkaListener(topics = {&quot;zhisheng&quot;,&quot;tian&quot;})</code>  å°±å¯ä»¥åŒæ—¶ç›‘å¬ä¸¤ä¸ª <code>topic</code> çš„æ¶ˆæ¯äº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™é‡Œçš„ topic éœ€è¦å’Œæ¶ˆæ¯å‘é€ç±» KafkaSender.java ä¸­è®¾ç½®çš„ topic ä¸€è‡´ã€‚</p><p>5ã€å¯åŠ¨ç±» KafkaApplication.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KafkaApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        ConfigurableApplicationContext context = SpringApplication.run(KafkaApplication.class, args);</span><br><span class="line"></span><br><span class="line">        KafkaSender sender = context.getBean(KafkaSender.class);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//è°ƒç”¨æ¶ˆæ¯å‘é€ç±»ä¸­çš„æ¶ˆæ¯å‘é€æ–¹æ³•</span></span><br><span class="line">            sender.send();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>6ã€é…ç½®æ–‡ä»¶ application.properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#============== kafka ===================</span><br><span class="line"># æŒ‡å®škafka ä»£ç†åœ°å€ï¼Œå¯ä»¥å¤šä¸ª</span><br><span class="line">spring.kafka.bootstrap-servers=192.168.153.135:9092</span><br><span class="line"></span><br><span class="line">#=============== provider  =======================</span><br><span class="line"></span><br><span class="line">spring.kafka.producer.retries=0</span><br><span class="line"># æ¯æ¬¡æ‰¹é‡å‘é€æ¶ˆæ¯çš„æ•°é‡</span><br><span class="line">spring.kafka.producer.batch-size=16384</span><br><span class="line">spring.kafka.producer.buffer-memory=33554432</span><br><span class="line"></span><br><span class="line"># æŒ‡å®šæ¶ˆæ¯keyå’Œæ¶ˆæ¯ä½“çš„ç¼–è§£ç æ–¹å¼</span><br><span class="line">spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer</span><br><span class="line">spring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer</span><br><span class="line"></span><br><span class="line">#=============== consumer  =======================</span><br><span class="line"># æŒ‡å®šé»˜è®¤æ¶ˆè´¹è€…group id</span><br><span class="line">spring.kafka.consumer.group-id=test-consumer-group</span><br><span class="line"></span><br><span class="line">spring.kafka.consumer.auto-offset-reset=earliest</span><br><span class="line">spring.kafka.consumer.enable-auto-commit=true</span><br><span class="line">spring.kafka.consumer.auto-commit-interval=100</span><br><span class="line"></span><br><span class="line"># æŒ‡å®šæ¶ˆæ¯keyå’Œæ¶ˆæ¯ä½“çš„ç¼–è§£ç æ–¹å¼</span><br><span class="line">spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer</span><br><span class="line">spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer</span><br></pre></td></tr></table></figure><p>spring.kafka.bootstrap-servers åé¢è®¾ç½®ä½ å®‰è£…çš„ Kafka çš„æœºå™¨ IP åœ°å€å’Œç«¯å£å· 9092ã€‚</p><p>å¦‚æœä½ åªæ˜¯ç®€å•æ•´åˆä¸‹ï¼Œå…¶ä»–çš„å‡ ä¸ªé»˜è®¤å°±å¥½äº†ã€‚</p><h3 id="Kafka-è®¾ç½®"><a href="#Kafka-è®¾ç½®" class="headerlink" title="Kafka è®¾ç½®"></a>Kafka è®¾ç½®</h3><p>åœ¨ä½ å®‰è£…çš„ Kafka ç›®å½•æ–‡ä»¶ä¸‹ï¼š</p><h4 id="å¯åŠ¨-zk"><a href="#å¯åŠ¨-zk" class="headerlink" title="å¯åŠ¨ zk"></a>å¯åŠ¨ zk</h4><p>ä½¿ç”¨å®‰è£…åŒ…ä¸­çš„è„šæœ¬å¯åŠ¨å•èŠ‚ç‚¹ Zookeeper å®ä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/zookeeper-server-start.sh -daemon config/zookeeper.properties</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨-Kafka-æœåŠ¡"><a href="#å¯åŠ¨-Kafka-æœåŠ¡" class="headerlink" title="å¯åŠ¨ Kafka æœåŠ¡"></a>å¯åŠ¨ Kafka æœåŠ¡</h4><p>ä½¿ç”¨ <code>kafka-server-start.sh</code> å¯åŠ¨ kafka æœåŠ¡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-server-start.sh  config/server.properties</span><br></pre></td></tr></table></figure><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180104/Lc2CiKfIee.png-1" alt="mark"></p><p>å¯åŠ¨æˆåŠŸåï¼</p><p><strong>åƒä¸‡æ³¨æ„</strong>ï¼š è®°å¾—å°†ä½ çš„è™šæ‹Ÿæœºæˆ–è€…æœåŠ¡å™¨å…³é—­é˜²ç«å¢™æˆ–è€…å¼€å¯ Kafka çš„ç«¯å£ 9092ã€‚</p><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180105/HBB0LCDdj8.png-1" alt="mark"></p><p>å‡ºç°è¿™å°±ä»£è¡¨æ•´åˆæˆåŠŸäº†ï¼</p><hr><p>æˆ‘ä»¬çœ‹ä¸‹ Kafka ä¸­çš„ topic åˆ—è¡¨å°±</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --list --zookeeper localhost:2181</span><br></pre></td></tr></table></figure><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180105/DI6cmll4BC.png-1" alt="mark"></p><p>å°±ä¼šå‘ç°åˆšæ‰æˆ‘ä»¬ç¨‹åºä¸­çš„ <code>zhisheng</code> å·²ç»è‡ªå·±åˆ›å»ºäº†ã€‚</p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/01/05/SpringBoot-Kafka/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/01/05/SpringBoot-Kafka/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ohfk1r827.bkt.clouddn.com/blog/180105/DKcBEKHimB.jpg-1&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‰æ&quot;&gt;&lt;a href=&quot;#å‰æ&quot; class=&quot;headerlink&quot; title=&quot;å‰æ&quot;&gt;&lt;/a&gt;å‰æ&lt;/h3&gt;&lt;p&gt;å‡è®¾ä½ äº†è§£è¿‡ SpringBoot å’Œ Kafkaã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="Kafka" scheme="http://yoursite.com/tags/Kafka/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Kafka å®‰è£…åŠå¿«é€Ÿå…¥é—¨</title>
    <link href="http://yoursite.com/2018/01/04/Kafka/"/>
    <id>http://yoursite.com/2018/01/04/Kafka/</id>
    <published>2018-01-03T16:00:00.000Z</published>
    <updated>2018-01-21T11:38:16.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180104/2K14BekelF.jpg-1" alt="mark"></p><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>å®˜ç½‘ï¼š<a href="http://kafka.apache.org/" target="_blank" rel="noopener">http://kafka.apache.org/</a></p><p>Apache Kafkaæ˜¯åˆ†å¸ƒå¼å‘å¸ƒ-è®¢é˜…æ¶ˆæ¯ç³»ç»Ÿã€‚å®ƒæœ€åˆç”±LinkedInå…¬å¸å¼€å‘ï¼Œä¹‹åæˆä¸ºApacheé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚Kafkaæ˜¯ä¸€ç§å¿«é€Ÿã€å¯æ‰©å±•çš„ã€è®¾è®¡å†…åœ¨å°±æ˜¯åˆ†å¸ƒå¼çš„ï¼Œåˆ†åŒºçš„å’Œå¯å¤åˆ¶çš„æäº¤æ—¥å¿—æœåŠ¡ã€‚<br><a id="more"></a><br>Apache Kafkaä¸ä¼ ç»Ÿæ¶ˆæ¯ç³»ç»Ÿç›¸æ¯”ï¼Œæœ‰ä»¥ä¸‹ä¸åŒï¼š</p><ul><li><p>å®ƒè¢«è®¾è®¡ä¸ºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæ˜“äºå‘å¤–æ‰©å±•ï¼›</p></li><li><p>å®ƒåŒæ—¶ä¸ºå‘å¸ƒå’Œè®¢é˜…æä¾›é«˜ååé‡ï¼›</p></li><li><p>å®ƒæ”¯æŒå¤šè®¢é˜…è€…ï¼Œå½“å¤±è´¥æ—¶èƒ½è‡ªåŠ¨å¹³è¡¡æ¶ˆè´¹è€…ï¼›</p></li><li><p>å®ƒå°†æ¶ˆæ¯æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œå› æ­¤å¯ç”¨äºæ‰¹é‡æ¶ˆè´¹ï¼Œä¾‹å¦‚ETLï¼Œä»¥åŠå®æ—¶åº”ç”¨ç¨‹åºã€‚</p></li></ul><h3 id="å®‰è£…-kafka"><a href="#å®‰è£…-kafka" class="headerlink" title="å®‰è£… kafka"></a>å®‰è£… kafka</h3><p>ä¸‹è½½åœ°å€ï¼š<a href="https://kafka.apache.org/downloads" target="_blank" rel="noopener">https://kafka.apache.org/downloads</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://mirrors.shuosc.org/apache/kafka/1.0.0/kafka_2.11-1.0.0.tgz</span><br></pre></td></tr></table></figure><p>è§£å‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf kafka_2.11-1.0.0.tgz</span><br><span class="line"></span><br><span class="line">cd /usr/local/kafka_2.11-1.0.0/</span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹ kafka-server çš„é…ç½®æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/kafka/config/server.properties</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å…¶ä¸­çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">broker.id=1</span><br><span class="line">log.dir=/data/kafka/logs-1</span><br></pre></td></tr></table></figure><h3 id="åŠŸèƒ½éªŒè¯ï¼š"><a href="#åŠŸèƒ½éªŒè¯ï¼š" class="headerlink" title="åŠŸèƒ½éªŒè¯ï¼š"></a>åŠŸèƒ½éªŒè¯ï¼š</h3><h4 id="1ã€å¯åŠ¨-zk"><a href="#1ã€å¯åŠ¨-zk" class="headerlink" title="1ã€å¯åŠ¨ zk"></a>1ã€å¯åŠ¨ zk</h4><p>ä½¿ç”¨å®‰è£…åŒ…ä¸­çš„è„šæœ¬å¯åŠ¨å•èŠ‚ç‚¹ Zookeeper å®ä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/zookeeper-server-start.sh -daemon config/zookeeper.properties</span><br></pre></td></tr></table></figure><h4 id="2ã€å¯åŠ¨Kafka-æœåŠ¡"><a href="#2ã€å¯åŠ¨Kafka-æœåŠ¡" class="headerlink" title="2ã€å¯åŠ¨Kafka æœåŠ¡"></a>2ã€å¯åŠ¨Kafka æœåŠ¡</h4><p>ä½¿ç”¨ <code>kafka-server-start.sh</code> å¯åŠ¨ kafka æœåŠ¡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-server-start.sh  config/server.properties</span><br></pre></td></tr></table></figure><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180104/Lc2CiKfIee.png-1" alt="mark"></p><h4 id="3ã€åˆ›å»º-topic"><a href="#3ã€åˆ›å»º-topic" class="headerlink" title="3ã€åˆ›å»º topic"></a>3ã€åˆ›å»º topic</h4><p>ä½¿ç”¨ <code>kafka-topics.sh</code> åˆ›å»ºå•åˆ†åŒºå•å‰¯æœ¬çš„ topic testï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ topic åˆ—è¡¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --list --zookeeper localhost:2181</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢åˆ›å»ºçš„ topic åˆ—è¡¨æŠ¥é”™ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180104/c3K5D805eI.png-1" alt="mark"></p><p>è§£å†³æ–¹æ³•:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts</span><br></pre></td></tr></table></figure><p>å°† host é‡Œçš„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         ip6-localhost ip6-localhost.localdomain localhost6 localhost6.localdomain6</span><br></pre></td></tr></table></figure><p>æ–¹æ³•å‚è€ƒï¼š<a href="https://stackoverflow.com/questions/28109669/zookeeper-unable-to-open-socket-to-localhost-000000012181" target="_blank" rel="noopener">zookeeper unable to open socket to localhost/0:0:0:0:0:0:0:1:2181</a></p><p>å†æ¬¡æŸ¥è¯¢å°±ä¸æŠ¥é”™äº†ã€‚</p><h4 id="4ã€äº§ç”Ÿæ¶ˆæ¯"><a href="#4ã€äº§ç”Ÿæ¶ˆæ¯" class="headerlink" title="4ã€äº§ç”Ÿæ¶ˆæ¯"></a>4ã€äº§ç”Ÿæ¶ˆæ¯</h4><p>ä½¿ç”¨ <code>kafka-console-producer.sh</code> å‘é€æ¶ˆæ¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test</span><br></pre></td></tr></table></figure><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180104/4F1EAgdmI1.png-1" alt="mark"></p><h4 id="5ã€æ¶ˆè´¹æ¶ˆæ¯"><a href="#5ã€æ¶ˆè´¹æ¶ˆæ¯" class="headerlink" title="5ã€æ¶ˆè´¹æ¶ˆæ¯"></a>5ã€æ¶ˆè´¹æ¶ˆæ¯</h4><p>ä½¿ç”¨ <code>kafka-console-consumer.sh</code> æ¥æ”¶æ¶ˆæ¯å¹¶åœ¨ç»ˆç«¯æ‰“å°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic test --from-beginning</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ä¸ªæ–°çš„å‘½ä»¤çª—å£æ‰§è¡Œä¸Šé¢å‘½ä»¤å³å¯æŸ¥çœ‹ä¿¡æ¯ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180104/c8mg8jJFki.png-1" alt="mark"></p><h4 id="6ã€æŸ¥çœ‹æè¿°-topics-ä¿¡æ¯"><a href="#6ã€æŸ¥çœ‹æè¿°-topics-ä¿¡æ¯" class="headerlink" title="6ã€æŸ¥çœ‹æè¿° topics ä¿¡æ¯"></a>6ã€æŸ¥çœ‹æè¿° topics ä¿¡æ¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --describe --zookeeper localhost:2181 --topic test</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Topic:testPartitionCount:1ReplicationFactor:1Configs:</span><br><span class="line">Topic: testPartition: 0Leader: 1Replicas: 1Isr: 1</span><br></pre></td></tr></table></figure><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180104/6JlmHdLcI5.png-1" alt="mark"></p><p>ç¬¬ä¸€è¡Œç»™å‡ºäº†æ‰€æœ‰åˆ†åŒºçš„æ‘˜è¦ï¼Œæ¯ä¸ªé™„åŠ è¡Œç»™å‡ºäº†å…³äºä¸€ä¸ªåˆ†åŒºçš„ä¿¡æ¯ã€‚ ç”±äºæˆ‘ä»¬åªæœ‰ä¸€ä¸ªåˆ†åŒºï¼Œæ‰€ä»¥åªæœ‰ä¸€è¡Œã€‚</p><p>â€œLeaderâ€: æ˜¯è´Ÿè´£ç»™å®šåˆ†åŒºçš„æ‰€æœ‰è¯»å–å’Œå†™å…¥çš„èŠ‚ç‚¹ã€‚ æ¯ä¸ªèŠ‚ç‚¹å°†æˆä¸ºåˆ†åŒºéšæœºé€‰æ‹©éƒ¨åˆ†çš„é¢†å¯¼è€…ã€‚</p><p>â€œReplicasâ€: æ˜¯å¤åˆ¶æ­¤åˆ†åŒºæ—¥å¿—çš„èŠ‚ç‚¹åˆ—è¡¨ï¼Œæ— è®ºå®ƒä»¬æ˜¯å¦æ˜¯é¢†å¯¼è€…ï¼Œæˆ–è€…å³ä½¿ä»–ä»¬å½“å‰å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚</p><p>â€œIsrâ€: æ˜¯ä¸€ç»„â€œåŒæ­¥â€å‰¯æœ¬ã€‚è¿™æ˜¯å¤åˆ¶å“åˆ—è¡¨çš„å­é›†ï¼Œå½“å‰æ´»ç€å¹¶è¢«å¼•å¯¼åˆ°é¢†å¯¼è€…ã€‚</p><h3 id="é›†ç¾¤é…ç½®"><a href="#é›†ç¾¤é…ç½®" class="headerlink" title="é›†ç¾¤é…ç½®"></a>é›†ç¾¤é…ç½®</h3><p>Kafka æ”¯æŒä¸¤ç§æ¨¡å¼çš„é›†ç¾¤æ­å»ºï¼šå¯ä»¥åœ¨å•æœºä¸Šè¿è¡Œå¤šä¸ª broker å®ä¾‹æ¥å®ç°é›†ç¾¤ï¼Œä¹Ÿå¯åœ¨å¤šå°æœºå™¨ä¸Šæ­å»ºé›†ç¾¤ï¼Œä¸‹é¢ä»‹ç»ä¸‹å¦‚ä½•å®ç°å•æœºå¤š broker å®ä¾‹é›†ç¾¤ï¼Œå…¶å®å¾ˆç®€å•ï¼Œåªéœ€è¦å¦‚ä¸‹é…ç½®å³å¯ã€‚</p><h4 id="å•æœºå¤šbroker-é›†ç¾¤é…ç½®"><a href="#å•æœºå¤šbroker-é›†ç¾¤é…ç½®" class="headerlink" title="å•æœºå¤šbroker é›†ç¾¤é…ç½®"></a>å•æœºå¤šbroker é›†ç¾¤é…ç½®</h4><p>åˆ©ç”¨å•èŠ‚ç‚¹éƒ¨ç½²å¤šä¸ª brokerã€‚ ä¸åŒçš„ broker è®¾ç½®ä¸åŒçš„ idï¼Œç›‘å¬ç«¯å£åŠæ—¥å¿—ç›®å½•ã€‚ ä¾‹å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cp config/server.properties config/server-2.properties</span><br><span class="line"></span><br><span class="line">cp config/server.properties config/server-3.properties</span><br><span class="line"></span><br><span class="line">vim config/server-2.properties</span><br><span class="line"></span><br><span class="line">vim config/server-3.properties</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">broker.id=2</span><br><span class="line"></span><br><span class="line">listeners = PLAINTEXT://your.host.name:9093</span><br><span class="line"></span><br><span class="line">log.dir=/data/kafka/logs-2</span><br></pre></td></tr></table></figure><p>å’Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">broker.id=3</span><br><span class="line"></span><br><span class="line">listeners = PLAINTEXT://your.host.name:9094</span><br><span class="line"></span><br><span class="line">log.dir=/data/kafka/logs-3</span><br></pre></td></tr></table></figure><p>å¯åŠ¨KafkaæœåŠ¡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-server-start.sh config/server-2.properties &amp;</span><br><span class="line"></span><br><span class="line">bin/kafka-server-start.sh config/server-3.properties &amp;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œå•æœºå¤šbrokerå®ä¾‹çš„é›†ç¾¤é…ç½®å®Œæ¯•ã€‚</p><h4 id="å¤šæœºå¤š-broker-é›†ç¾¤é…ç½®"><a href="#å¤šæœºå¤š-broker-é›†ç¾¤é…ç½®" class="headerlink" title="å¤šæœºå¤š broker é›†ç¾¤é…ç½®"></a>å¤šæœºå¤š broker é›†ç¾¤é…ç½®</h4><p>åˆ†åˆ«åœ¨å¤šä¸ªèŠ‚ç‚¹æŒ‰ä¸Šè¿°æ–¹å¼å®‰è£… Kafkaï¼Œé…ç½®å¯åŠ¨å¤šä¸ª Zookeeper å®ä¾‹ã€‚</p><p>å‡è®¾ä¸‰å°æœºå™¨ IP åœ°å€æ˜¯ ï¼š 192.168.153.135ï¼Œ 192.168.153.136ï¼Œ 192.168.153.137</p><p>åˆ†åˆ«é…ç½®å¤šä¸ªæœºå™¨ä¸Šçš„ Kafka æœåŠ¡ï¼Œè®¾ç½®ä¸åŒçš„ broker idï¼Œzookeeper.connect è®¾ç½®å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim config/server.properties</span><br></pre></td></tr></table></figure><p>é‡Œé¢çš„ <code>zookeeper.connect</code></p><p>ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zookeeper.connect=192.168.153.135:2181,192.168.153.136:2181,192.168.153.137:2181</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-Kafka-Connect-æ¥å¯¼å…¥-å¯¼å‡ºæ•°æ®"><a href="#ä½¿ç”¨-Kafka-Connect-æ¥å¯¼å…¥-å¯¼å‡ºæ•°æ®" class="headerlink" title="ä½¿ç”¨ Kafka Connect æ¥å¯¼å…¥/å¯¼å‡ºæ•°æ®"></a>ä½¿ç”¨ Kafka Connect æ¥å¯¼å…¥/å¯¼å‡ºæ•°æ®</h3><p>ä»æ§åˆ¶å°å†™å…¥æ•°æ®å¹¶å°†å…¶å†™å›æ§åˆ¶å°æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„èµ·ç‚¹ï¼Œä½†æ‚¨å¯èƒ½æƒ³è¦ä½¿ç”¨å…¶ä»–æ¥æºçš„æ•°æ®æˆ–å°†æ•°æ®ä» Kafka å¯¼å‡ºåˆ°å…¶ä»–ç³»ç»Ÿã€‚å¯¹äºè®¸å¤šç³»ç»Ÿï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Kafka Connect æ¥å¯¼å…¥æˆ–å¯¼å‡ºæ•°æ®ï¼Œè€Œä¸å¿…ç¼–å†™è‡ªå®šä¹‰é›†æˆä»£ç ã€‚</p><p>Kafka Connect æ˜¯ Kafka åŒ…å«çš„ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥å°†æ•°æ®å¯¼å…¥å’Œå¯¼å‡ºåˆ° Kafkaã€‚å®ƒæ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„å·¥å…·ï¼Œè¿è¡Œ è¿æ¥å™¨ï¼Œå®ç°ä¸å¤–éƒ¨ç³»ç»Ÿäº¤äº’çš„è‡ªå®šä¹‰é€»è¾‘ã€‚åœ¨è¿™ä¸ªå¿«é€Ÿå…¥é—¨ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•ä½¿ç”¨ç®€å•çš„è¿æ¥å™¨è¿è¡Œ Kafka Connectï¼Œè¿™äº›è¿æ¥å™¨å°†æ•°æ®ä»æ–‡ä»¶å¯¼å…¥åˆ° Kafka topicï¼Œå¹¶å°†æ•°æ®ä» Kafka topic å¯¼å‡ºåˆ°æ–‡ä»¶ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†é€šè¿‡åˆ›å»ºä¸€äº›ç§å­æ•°æ®å¼€å§‹æµ‹è¯•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e &quot;zhisheng\ntian&quot; &gt; test.txt</span><br></pre></td></tr></table></figure><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180104/79EG4ilBAH.png-1" alt="mark"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å¯åŠ¨ä¸¤ä¸ªä»¥ç‹¬ç«‹æ¨¡å¼è¿è¡Œçš„è¿æ¥å™¨ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å°†åœ¨å•ä¸ªæœ¬åœ°ä¸“ç”¨è¿›ç¨‹ä¸­è¿è¡Œã€‚æˆ‘ä»¬æä¾›ä¸‰ä¸ªé…ç½®æ–‡ä»¶ä½œä¸ºå‚æ•°ã€‚é¦–å…ˆæ˜¯ Kafka Connect è¿‡ç¨‹çš„é…ç½®ï¼ŒåŒ…å«å¸¸è§çš„é…ç½®ï¼Œä¾‹å¦‚è¦è¿æ¥çš„ Kafka ä»£ç†ä»¥åŠæ•°æ®çš„åºåˆ—åŒ–æ ¼å¼ã€‚å…¶ä½™çš„é…ç½®æ–‡ä»¶éƒ½æŒ‡å®šä¸€ä¸ªè¦åˆ›å»ºçš„è¿æ¥å™¨ã€‚è¿™äº›æ–‡ä»¶åŒ…æ‹¬å”¯ä¸€çš„è¿æ¥å™¨åç§°ï¼Œè¦å®ä¾‹åŒ–çš„è¿æ¥å™¨ç±»ä»¥åŠè¿æ¥å™¨æ‰€éœ€çš„ä»»ä½•å…¶ä»–é…ç½®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/connect-standalone.sh  config/connect-standalone.properties config/connect-file-source.properties config/connect-file-sink.properties</span><br></pre></td></tr></table></figure><p>Kafka é™„å¸¦çš„è¿™äº›ç¤ºä¾‹é…ç½®æ–‡ä»¶ä½¿ç”¨æ‚¨ä¹‹å‰å¯åŠ¨çš„é»˜è®¤æœ¬åœ°ç¾¤é›†é…ç½®ï¼Œå¹¶åˆ›å»ºä¸¤ä¸ªè¿æ¥å™¨ï¼šç¬¬ä¸€ä¸ªæ˜¯æºè¿æ¥å™¨ï¼Œç”¨äºè¯»å–è¾“å…¥æ–‡ä»¶ä¸­çš„è¡Œï¼Œå¹¶å°†æ¯ä¸ªè¿æ¥ç”Ÿæˆä¸º Kafka topicï¼Œç¬¬äºŒä¸ªä¸ºè¿æ¥å™¨å®ƒä» Kafka topic è¯»å–æ¶ˆæ¯ï¼Œå¹¶åœ¨è¾“å‡ºæ–‡ä»¶ä¸­äº§ç”Ÿæ¯è¡Œæ¶ˆæ¯ã€‚</p><p>åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸€äº›æ—¥å¿—æ¶ˆæ¯ï¼Œå…¶ä¸­ä¸€äº›æŒ‡ç¤ºè¿æ¥å™¨æ­£åœ¨å®ä¾‹åŒ–ã€‚Kafka Connect è¿›ç¨‹å¯åŠ¨åï¼Œæºè¿æ¥å™¨åº”è¯¥å¼€å§‹è¯»å– test.txt topic connect-testï¼Œå¹¶å°†å…¶ç”Ÿæˆ topic ï¼Œå¹¶ä¸”æ¥æ”¶å™¨è¿æ¥å™¨åº”è¯¥å¼€å§‹è¯»å– topic ä¸­çš„æ¶ˆæ¯ connect-test å¹¶å°†å…¶å†™å…¥æ–‡ä»¶ test.sink.txtã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ£€æŸ¥è¾“å‡ºæ–‡ä»¶çš„å†…å®¹æ¥éªŒè¯é€šè¿‡æ•´ä¸ªç®¡é“ä¼ è¾“çš„æ•°æ®ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180104/Jh18BCJcb6.png-1" alt="mark"></p><p>æ•°æ®å­˜å‚¨åœ¨ Kafka topic ä¸­ connect-testï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿è¡Œæ§åˆ¶å°ä½¿ç”¨è€…æ¥æŸ¥çœ‹ topic ä¸­çš„æ•°æ®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic connect-test --from-beginning</span><br></pre></td></tr></table></figure><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180104/LBC5fF1LK6.png-1" alt="mark"></p><p>è¿æ¥å™¨ç»§ç»­å¤„ç†æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†æ•°æ®æ·»åŠ åˆ°æ–‡ä»¶ä¸­ï¼Œå¹¶çœ‹åˆ°å®ƒåœ¨ç®¡é“ä¸­ç§»åŠ¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo zhishengtian&gt;&gt; test.txt</span><br><span class="line">echo zhishengtian2&gt;&gt; test.txt</span><br><span class="line">echo zhishengtian3&gt;&gt; test.txt</span><br><span class="line">echo zhishengtian4&gt;&gt; test.txt</span><br></pre></td></tr></table></figure><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180104/0DH6K1dkBA.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180104/6JLE96B87K.png-1" alt="mark"></p><h3 id="ä½¿ç”¨-Kafka-æµæ¥å¤„ç†æ•°æ®"><a href="#ä½¿ç”¨-Kafka-æµæ¥å¤„ç†æ•°æ®" class="headerlink" title="ä½¿ç”¨ Kafka æµæ¥å¤„ç†æ•°æ®"></a>ä½¿ç”¨ Kafka æµæ¥å¤„ç†æ•°æ®</h3><p>Kafka Streams æ˜¯ç”¨äºæ„å»ºå…³é”®ä»»åŠ¡å®æ—¶åº”ç”¨ç¨‹åºå’Œå¾®æœåŠ¡çš„å®¢æˆ·ç«¯åº“ï¼Œè¾“å…¥å’Œ/æˆ–è¾“å‡ºæ•°æ®å­˜å‚¨åœ¨ Kafka é›†ç¾¤ä¸­ã€‚Kafka Streams ç»“åˆäº†åœ¨å®¢æˆ·ç«¯ç¼–å†™å’Œéƒ¨ç½²æ ‡å‡† Java å’Œ Scala åº”ç”¨ç¨‹åºçš„ç®€å•æ€§ä»¥åŠ Kafka æœåŠ¡å™¨ç«¯é›†ç¾¤æŠ€æœ¯çš„ä¼˜åŠ¿ï¼Œä½¿è¿™äº›åº”ç”¨ç¨‹åºå…·æœ‰é«˜åº¦å¯ä¼¸ç¼©æ€§ï¼Œå¼¹æ€§ï¼Œå®¹é”™æ€§ï¼Œåˆ†å¸ƒå¼ç­‰ç‰¹æ€§ã€‚</p><p>å¯å‚è€ƒå®˜ç½‘å…¥é—¨æ¡ˆä¾‹ï¼š<a href="http://kafka.apache.org/10/documentation/streams/quickstart" target="_blank" rel="noopener">http://kafka.apache.org/10/documentation/streams/quickstart</a></p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p>1ã€<a href="https://www.mtyun.com/library/how-to-install-kafka-on-centos7" target="_blank" rel="noopener">åœ¨CentOS 7ä¸Šå®‰è£…Kafka</a></p><p>2ã€<a href="http://kafka.apache.org/10/documentation/streams/quickstart" target="_blank" rel="noopener">http://kafka.apache.org/10/documentation/streams/quickstart</a></p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>è½¬è½½è¯·æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/01/04/Kafka/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/01/04/Kafka/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ohfk1r827.bkt.clouddn.com/blog/180104/2K14BekelF.jpg-1&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ä»‹ç»&quot;&gt;&lt;/a&gt;ä»‹ç»&lt;/h3&gt;&lt;p&gt;å®˜ç½‘ï¼š&lt;a href=&quot;http://kafka.apache.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://kafka.apache.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Apache Kafkaæ˜¯åˆ†å¸ƒå¼å‘å¸ƒ-è®¢é˜…æ¶ˆæ¯ç³»ç»Ÿã€‚å®ƒæœ€åˆç”±LinkedInå…¬å¸å¼€å‘ï¼Œä¹‹åæˆä¸ºApacheé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚Kafkaæ˜¯ä¸€ç§å¿«é€Ÿã€å¯æ‰©å±•çš„ã€è®¾è®¡å†…åœ¨å°±æ˜¯åˆ†å¸ƒå¼çš„ï¼Œåˆ†åŒºçš„å’Œå¯å¤åˆ¶çš„æäº¤æ—¥å¿—æœåŠ¡ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="Kafka" scheme="http://yoursite.com/tags/Kafka/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºä»€ä¹ˆè¦é‡æ–°è¿è¥ä»¥å‰çš„å…¬ä¼—å·å‘¢ï¼Ÿ</title>
    <link href="http://yoursite.com/2018/01/04/weixin/"/>
    <id>http://yoursite.com/2018/01/04/weixin/</id>
    <published>2018-01-03T16:00:00.000Z</published>
    <updated>2018-01-21T11:26:54.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/mL5G5acdd4.png-1" alt="mark"></p><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>è€è¯»è€…å¯èƒ½ä¼šå‘ç°ç°åœ¨æˆ‘çš„å…¬ä¼—å·å·²ç»æ”¹åäº†ã€‚ï¼ˆç”± â€œçŒ¿blogâ€  å˜æˆ  â€œzhishengâ€ äº†ï¼Œç»†å¿ƒçš„ç«¥é‹ä¼šå‘ç°ä¸ä»…åå­—å˜äº†ï¼Œ ID ä¹Ÿå˜äº†ï¼Œä½†æ˜¯å›¾ç‰‡è¿˜æ²¡æ”¹ï¼Œæš‚æ—¶è¿˜æ²¡æƒ³åˆ°å¥½çš„ logo å›¾ç‰‡ï¼‰ï¼Œä¸‹é¢è¯´è¯´ä¸ºå•¥å§ï¼<br><a id="more"></a></p><h3 id="å¬æˆ‘ç-BB"><a href="#å¬æˆ‘ç-BB" class="headerlink" title="å¬æˆ‘ç BB"></a>å¬æˆ‘ç BB</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/k1a984Emlc.png-1" alt="mark"></p><p>ä¸Šå›¾æ˜¯ä¸¤å¹´å‰å…¬ä¼—å·ç¾¤å‘çš„ç¬¬ä¸€æ¡ä¿¡æ¯ï¼Œé‚£æ—¶è‡ªå·±è¿˜æ˜¯åœ¨å­¦æ ¡ï¼Œå¦‚ä»Šå·²ç»è¿›å…¥äº†ç¤¾ä¼šï¼Œåœ¨å…¬å¸å®ä¹ äº†ã€‚è®°å¾—å½“åˆå¼€è¿™ä¸ªå…¬ä¼—å·çš„åŸå› æ˜¯å› ä¸ºå‡ ä¸ªå¹´è½»äººæœ‰ç€æ¢¦æƒ³ï¼Œæ‰“ç®—ä¸€èµ·åšç‚¹ä¸œè¥¿ï¼Œå½“æ—¶ä¸€è…”çƒ­è¡€çš„è‡ªå·±ç«‹é©¬å°±å…ˆç”³è¯·äº†ä¸ªå…¬ä¼—å·ï¼Œåæ¥ â€œä¸œè¥¿â€ å€’æ˜¯æ²¡åšï¼Œåå€’æ˜¯æˆ‘è‡ªå·±æ…¢æ…¢çš„åœ¨å¾®ä¿¡å…¬ä¼—å·åˆ†äº«ä¸€äº›æ–‡ç« ï¼Œç„¶åé‚£æ—¶è‡ªå·±ä¹Ÿå†™åšå®¢ï¼ˆç®—ç®—è‡ªå·±å†™åšå®¢åº”è¯¥å¿«ä¸‰å¹´äº†ï¼ŒåšæŒçœŸä¸æ˜“å•Šï¼‰ï¼Œæ‰€ä»¥å¶å°”ä¹ŸæŠŠè‡ªå·±çš„åšå®¢åˆ†äº«åœ¨å¾®ä¿¡å…¬ä¼—å·ä¸Šã€‚</p><p>ä½†æ˜¯å¥½æ™¯ä¸é•¿ï¼Œé‚£æ—¶çš„å¾®ä¿¡å…¬ä¼—å·æ’ç‰ˆçœŸå°¼ç›éš¾ç”¨çš„ä¸€æ‰¹ï¼Œä½œä¸ºä¸€ä¸ªç†å·¥ç§‘çš„ç”·ç”Ÿï¼Œæœ¬æ¥è‡ªå·±åšäº‹ä¸€èˆ¬ç»†å¿ƒå’Œè€å¿ƒï¼Œæ— å¥ˆï¼ŒæŠŠè¿™ä¹ˆå¥½çš„ä¸€ä¸ªç«¥é‹éƒ½ç»™é€¼åäº†ã€‚æˆ‘ç°åœ¨è¿˜æ˜¯å¾—åæ§½ä¸‹ï¼Œå¦‚ä»Šçš„å¾®ä¿¡å…¬ä¼—å·åå°æ’ç‰ˆè¿˜æ˜¯é‚£ä¹ˆå·®ã€‚ä½†æ˜¯å¯èƒ½å› ä¸ºéœ€æ±‚æ¯”è¾ƒå¤šäº†ï¼Œæ‰€ä»¥å°±æœ‰äººåšå‡ºäº†å·¥å…·ï¼ˆå°† markdown æ’ç‰ˆååœ¨å°†æ•´ä¸ªæ ·å¼å¤åˆ¶ç²˜è´´åˆ°å¾®ä¿¡å…¬ä¼—å·åå°ï¼‰ï¼Œè¿™æ ·ä¸€ç¯‡æ’ç‰ˆè¿˜ç®—ä¸é”™çš„åšå®¢å°±å‡ºæ¥äº†ã€‚</p><p>è‡ªå·±æ—©å°±çŸ¥é“äº†è¿™ä¹ˆä¸ªå·¥å…·ï¼Œä»¥å‰çœ‹ DD çš„åšå®¢çš„æ—¶å€™å°±å‘ç°äº†è¿™ä¸ªå·¥å…·ï¼Œä½†æ˜¯å¾ˆä¹…æ²¡æ›´æ–°çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œè‡ªå·±ä¹Ÿä¸æ€ä¹ˆæƒ³å†ç®¡ç†ã€‚</p><p>æœ‰äººå°±è¦é—®äº†ï¼Ÿé‚£ä¸ºå•¥ç°åœ¨åˆè¦å¼€å§‹è·Ÿæ–°äº†å‘¢ï¼Ÿ</p><p>æˆ‘åªæƒ³è¯´ï¼šâ€œè´±äººå°±æ˜¯çŸ«æƒ…ï¼ï¼ï¼åˆæƒ³çæŠ˜è…¾ä¸‹ã€‚â€ï¼Œåæ­£è‡ªå·±çš„åšå®¢ä¹Ÿåœ¨ä¸æ–­çš„æ›´æ–°ï¼Œå¶å°”é¡ºå¸¦æŠŠæ–‡ç« åŒæ­¥åˆ°å¾®ä¿¡å…¬ä¼—å·å…¶å®ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚åœ¨å­¦æ ¡çš„æ—¶å€™æ—¶é—´æ¯”è¾ƒå¤šï¼Œé‚£æ—¶çœŸçš„æ˜¯æ—¶é—´æ¯”è¾ƒå¤šï¼Œåæ‚”æ²¡å¥½å¥½åšæŒè¿è¥ä¸‹æ¥ã€‚ç°åœ¨å·¥ä½œäº†ï¼Œè‡ªå·±å·¥ä½œä¹‹å¤–çš„æ—¶é—´è¾ƒå°‘ï¼Œé™¤äº†å­¦ä¹ ï¼Œå¶å°”å†™å†™åšå®¢ï¼Œå¨±ä¹æ—¶é—´æ¯”è¾ƒå°‘ï¼Œéƒ½æ˜¯å¤§å­¦æ—¶å®…çš„ã€‚</p><p>å‰æ®µæ—¶é—´è¢«äºº â€œå¿½æ‚ â€ è¯´ç»§ç»­æ›´æ–°å…¬ä¼—å·ï¼Œé‚£æ—¶åˆšå¥½ä¹Ÿå¿« 2018 å¹´äº†ï¼Œè‡ªå·±ä¹Ÿæƒ³ç»™è‡ªå·±å®šå‡ ä¸ªç›®æ ‡ï¼Œåœ¨å…ƒæ—¦çš„é‚£å¤©ï¼Œæƒ³æƒ³è¿˜æ˜¯ç»§ç»­æ›´æ–°å¾®ä¿¡å…¬ä¼—å·å§ï¼Œæ‰€ä»¥ä½ ä¹Ÿçœ‹å¾—åˆ°æœ€è¿‘æˆ‘çš„æ›´æ–°äº†ï¼Œå¯èƒ½æœ€è¿‘çš„æ›´æ–°æ¯”è¾ƒæœ‰è§„å¾‹ï¼Œå› ä¸ºè¿™äº›æ–‡ç« å¤§éƒ¨åˆ†æ˜¯ä¹‹å‰å°±å·²ç»å†™å¥½äº†çš„ï¼Œå·²ç»å‘è¿‡åœ¨æˆ‘çš„åšå®¢é‡Œäº†ã€‚ä¼°è®¡æŠŠè¿™äº›æ–‡ç« æ›´æ–°å®Œåï¼Œå°±ä¸ä¼šæ¯å¤©éƒ½æ›´æ–°æˆ‘è‡ªå·±çš„æ–‡ç« äº†ã€‚</p><h3 id="å®šä½"><a href="#å®šä½" class="headerlink" title="å®šä½"></a>å®šä½</h3><p>è¯´ä¸‹å¾®ä¿¡å…¬ä¼—å·çš„å®šä½å§ï¼š</p><p>1ã€æˆ‘çš„æŠ€æœ¯åšå®¢åº”è¯¥éƒ½ä¼šåŒæ­¥åœ¨è¿™é‡Œçš„ã€‚</p><p>2ã€åˆ†äº«è‡ªå·±å¹³æ—¶çš„éšç¬”æ–‡ç« ã€‚ï¼ˆæ¯”å¦‚è¿™ç¯‡ã€‚ã€‚ã€‚ï¼‰</p><p>3ã€é™¤äº†æŠ€æœ¯æ–‡ç« ï¼Œå½“ç„¶è¿˜æœ‰å¹³æ—¶è‡ªå·±çš„ å¥‡æ·«æŠ€å·§ ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºå†™ä½œæ–¹å¼ã€æ¨èå¥½ç”¨çš„è½¯ä»¶ç­‰ï¼‰</p><p>4ã€åˆ†äº«è‡ªå·±è§‰å¾—ä¸é”™çš„æ–‡ç« ï¼ˆåˆ«äººçš„ï¼Œå°½é‡å¾å¾—åŒæ„ï¼Œä¸€å®šä¼šå¤‡æ³¨åŸåˆ›åœ°å€çš„ï¼‰</p><p>5ã€å¦‚æœä½ ä¹Ÿå†™åšå®¢ï¼Œä½†æ˜¯é˜…è¯»é‡å¾ˆå°çš„è¯ï¼Œå¯ä»¥è€ƒè™‘è‡ªèã€‚ï¼ˆæ³¨ï¼šæ–‡ç« æˆ‘å¯èƒ½ä¼šå®¡æ‰¹ï¼Œå¿…é¡»è¦è§‰å¾—ä¸é”™çš„æ–‡ç« ï¼‰</p><p>6ã€åˆ†äº«ä¸€äº›å­¦ä¹ è§†é¢‘å’Œä¹¦ç±</p><p>7ã€åæœŸå¯èƒ½ä¼šæå·¥ä½œå†…æ¨</p><p>ã€‚ã€‚ã€‚</p><p>æš‚æ—¶åªæƒ³åˆ°è¿™äº›äº†</p><h3 id="é—®é¢˜æ¥äº†"><a href="#é—®é¢˜æ¥äº†" class="headerlink" title="é—®é¢˜æ¥äº†"></a>é—®é¢˜æ¥äº†</h3><p>å› ä¸ºå·¥ä½œäº†ï¼Œæ‰€ä»¥æ—¶é—´å°‘ï¼Œè¿è¥è¿™å¾®ä¿¡å…¬ä¼—å·å¯èƒ½éœ€è¦èŠ±è´¹æˆ‘ä¸å°‘å·¥ä½œä¹‹å¤–çš„æ—¶é—´ã€‚</p><p>å¦‚æœå¯ä»¥çš„è¯ï¼Œæˆ‘å¸Œæœ›èƒ½æ‰¾åˆ°ä¸€ä¸ªèƒ½å¸®æˆ‘åˆ†æ‹…ç‚¹çš„æœ‹å‹ã€‚</p><p>æ³¨ï¼š<strong>æ— å¿çš„ï¼Œå¦‚æœä»‹æ„çš„è¯ï¼Œä¸‹é¢å°±ä¸ç”¨å†çœ‹äº†ã€‚</strong></p><hr><p>è¯´ç‚¹ç®€å•çš„è¦æ±‚å§ï¼š</p><p>1ã€ç»†å¿ƒã€è€å¿ƒçš„ boy  or  girl éƒ½è¡Œ</p><p>2ã€èµ·ç è¦çŸ¥é“ç‚¹ç¼–ç¨‹æ–¹é¢çš„çŸ¥è¯†</p><p>3ã€èƒ½åšæŒä¸‹æ¥</p><p>4ã€å¯¹æ–°æŠ€æœ¯æœ‰æ•æ„Ÿçš„å—…è§‰</p><p>5ã€æœ€åä¸€ç‚¹å°±æ˜¯ä½ è¦æœ‰ç‚¹æ—¶é—´äº†ï¼Œå¸Œæœ›ä¸è€½è¯¯ä½ å­¦ä¹ </p><p>å†è¯´ä¸‹èƒ½ç»™ä½ å¸¦æ¥çš„ <strong>å¥½å¤„</strong> å§ï¼š</p><p>1ã€è‚¯å®šèƒ½å¢åŠ ä½ çš„è¿è¥èƒ½åŠ›ï¼ˆå†å»äº’è”ç½‘å…¬å¸æŠ•è¿è¥å²—ä½ä¼šæœ‰ä¼˜åŠ¿çš„ï¼‰</p><p>2ã€æœ¬äººä¸€å¼€å§‹ä¼šäº²è‡ªæ•™æˆè¯¥æ€ä¹ˆåšï¼Œæ‰€ä»¥æ²¡ç»éªŒçš„æœ‹å‹ä¸ç”¨æ‹…å¿ƒ</p><p>3ã€å¯ä»¥å¢åŠ å’Œå¤§ç‰›å‹¾æ­çš„æœºä¼šï¼Œä½ ä»¬æ‡‚çš„ã€‚ã€‚</p><p>4ã€æœ¬äººå¯ä»¥äº²è‡ªä¼ æˆç»éªŒï¼ˆç¼–ç¨‹å’Œç”Ÿæ´»ç‚¹æ»´ç»éªŒï¼‰</p><p><strong>å¦‚æœä½ æœ‰æ„æ„¿çš„è¯ï¼Œè¯·åŠ æˆ‘ QQ ï¼š 1041218129  èŠèŠå§</strong></p><hr><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ohfk1r827.bkt.clouddn.com/blog/180103/mL5G5acdd4.png-1&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‰æ&quot;&gt;&lt;a href=&quot;#å‰æ&quot; class=&quot;headerlink&quot; title=&quot;å‰æ&quot;&gt;&lt;/a&gt;å‰æ&lt;/h3&gt;&lt;p&gt;è€è¯»è€…å¯èƒ½ä¼šå‘ç°ç°åœ¨æˆ‘çš„å…¬ä¼—å·å·²ç»æ”¹åäº†ã€‚ï¼ˆç”± â€œçŒ¿blogâ€  å˜æˆ  â€œzhishengâ€ äº†ï¼Œç»†å¿ƒçš„ç«¥é‹ä¼šå‘ç°ä¸ä»…åå­—å˜äº†ï¼Œ ID ä¹Ÿå˜äº†ï¼Œä½†æ˜¯å›¾ç‰‡è¿˜æ²¡æ”¹ï¼Œæš‚æ—¶è¿˜æ²¡æƒ³åˆ°å¥½çš„ logo å›¾ç‰‡ï¼‰ï¼Œä¸‹é¢è¯´è¯´ä¸ºå•¥å§ï¼&lt;br&gt;
    
    </summary>
    
    
      <category term="éšç¬”" scheme="http://yoursite.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>Windows ä¸‹å®‰è£… Consul</title>
    <link href="http://yoursite.com/2017/12/27/consul-install/"/>
    <id>http://yoursite.com/2017/12/27/consul-install/</id>
    <published>2017-12-26T16:00:00.000Z</published>
    <updated>2018-01-21T11:06:14.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171227/Da4dGccaEd.jpg-1" alt="mark"></p><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>ä»åˆšå·¥ä½œå°±å¼€å§‹æ¥è§¦ Consulï¼Œä¸­é€”è‡ªå·±ä¹Ÿæœ‰ä¸¤ä¸ªé¡¹ç›®å’Œ Consul æœ‰å…³ï¼Œåé¢æœ‰æœºä¼šå†è®²è®²ï¼Œç½‘ä¸Šå…³äºè¿™ä¸ªçš„èµ„æ–™è¿˜æ¯”è¾ƒå°‘ã€‚å› ä¸ºæ˜å¤©æœ‰ Consul çš„æŠ€æœ¯åˆ†äº«ï¼Œæ‰€ä»¥è‡ªå·±ä»Šå¤©ä¸‹åˆåœ¨å®˜ç½‘çœ‹äº†ä¸‹ç›¸å…³çš„ä»‹ç»ã€‚<br><a id="more"></a></p><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>Consul æ˜¯ä¸€ä¸ªæ”¯æŒå¤šæ•°æ®ä¸­å¿ƒåˆ†å¸ƒå¼é«˜å¯ç”¨çš„æœåŠ¡å‘ç°å’Œé…ç½®å…±äº«çš„æœåŠ¡è½¯ä»¶,  ç”± HashiCorp å…¬å¸ç”¨ Go è¯­è¨€å¼€å‘,  åŸºäº Mozilla Public License 2.0 çš„åè®®è¿›è¡Œå¼€æºã€‚Consul æ”¯æŒå¥åº·æ£€æŸ¥,  å¹¶å…è®¸ HTTP å’Œ DNS åè®®è°ƒç”¨ API å­˜å‚¨é”®å€¼å¯¹ã€‚<br>å‘½ä»¤è¡Œè¶…çº§å¥½ç”¨çš„è™šæ‹Ÿæœºç®¡ç†è½¯ä»¶ vgrant ä¹Ÿæ˜¯ HashiCorp å…¬å¸å¼€å‘çš„äº§å“ã€‚ä¸€è‡´æ€§åè®®é‡‡ç”¨ Raft ç®—æ³•,  ç”¨æ¥ä¿è¯æœåŠ¡çš„é«˜å¯ç”¨ï¼Œ ä½¿ç”¨ GOSSIP åè®®ç®¡ç†æˆå‘˜å’Œå¹¿æ’­æ¶ˆæ¯, å¹¶ä¸”æ”¯æŒ ACL è®¿é—®æ§åˆ¶ã€‚</p><h3 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h3><p>å»å®˜ç½‘ä¸‹è½½ï¼š<a href="https://www.consul.io/downloads.html" target="_blank" rel="noopener">https://www.consul.io/downloads.html</a></p><p>å¾—åˆ°ä¸€ä¸ª zip å‹ç¼©åŒ…</p><p>åœ¨ä½ æƒ³è¦å®‰è£…çš„ä½ç½®è§£å‹å°±è¡Œï¼Œåªæœ‰ä¸€ä¸ª consul.exe æ–‡ä»¶ï¼ˆæˆ‘çš„è§£å‹ä½ç½®æ˜¯ï¼šD:\softwareï¼‰</p><p>è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆåœ¨ path ä¸­æ–°å¢ä¸€æ¡ï¼‰ï¼š</p><p>D:\software</p><p>cmd å‘½ä»¤çª—å£å¯åŠ¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">consul agent -dev</span><br></pre></td></tr></table></figure><p>consul è‡ªå¸¦ UI ç•Œé¢ï¼Œæ‰“å¼€ç½‘å€ï¼š<a href="http://localhost:8500" target="_blank" rel="noopener">http://localhost:8500</a> ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æ³¨å†Œçš„æœåŠ¡ç•Œé¢ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171227/7Alcc9AECH.png-1" alt="mark"></p><h3 id="Consul-ä¼˜åŠ¿"><a href="#Consul-ä¼˜åŠ¿" class="headerlink" title="Consul ä¼˜åŠ¿"></a>Consul ä¼˜åŠ¿</h3><ul><li>ä½¿ç”¨ Raft ç®—æ³•æ¥ä¿è¯ä¸€è‡´æ€§, æ¯”å¤æ‚çš„ Paxos ç®—æ³•æ›´ç›´æ¥. ç›¸æ¯”è¾ƒè€Œè¨€, zookeeper é‡‡ç”¨çš„æ˜¯ Paxos, è€Œ etcd ä½¿ç”¨çš„åˆ™æ˜¯ Raft.</li><li>æ”¯æŒå¤šæ•°æ®ä¸­å¿ƒï¼Œå†…å¤–ç½‘çš„æœåŠ¡é‡‡ç”¨ä¸åŒçš„ç«¯å£è¿›è¡Œç›‘å¬ã€‚ å¤šæ•°æ®ä¸­å¿ƒé›†ç¾¤å¯ä»¥é¿å…å•æ•°æ®ä¸­å¿ƒçš„å•ç‚¹æ•…éšœ,è€Œå…¶éƒ¨ç½²åˆ™éœ€è¦è€ƒè™‘ç½‘ç»œå»¶è¿Ÿ, åˆ†ç‰‡ç­‰æƒ…å†µç­‰. zookeeper å’Œ etcd å‡ä¸æä¾›å¤šæ•°æ®ä¸­å¿ƒåŠŸèƒ½çš„æ”¯æŒ.</li><li>æ”¯æŒå¥åº·æ£€æŸ¥. etcd ä¸æä¾›æ­¤åŠŸèƒ½.</li><li>æ”¯æŒ http å’Œ dns åè®®æ¥å£. zookeeper çš„é›†æˆè¾ƒä¸ºå¤æ‚, etcd åªæ”¯æŒ http åè®®.</li><li>å®˜æ–¹æä¾›webç®¡ç†ç•Œé¢, etcd æ— æ­¤åŠŸèƒ½.</li></ul><p>ç»¼åˆæ¯”è¾ƒ, Consul ä½œä¸ºæœåŠ¡æ³¨å†Œå’Œé…ç½®ç®¡ç†çš„æ–°æ˜Ÿ, æ¯”è¾ƒå€¼å¾—å…³æ³¨å’Œç ”ç©¶.</p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><blockquote><p>æœ¬æ–‡é¦–å‘äºï¼š<a href="http://www.54tianzhisheng.cn/" target="_blank" rel="noopener">zhishengçš„åšå®¢</a></p><p>åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2017/12/27/consul-install/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2017/12/27/consul-install/</a>    è½¬è½½è¯·æ³¨æ˜åœ°å€ï¼</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ohfk1r827.bkt.clouddn.com/blog/171227/Da4dGccaEd.jpg-1&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‰æ&quot;&gt;&lt;a href=&quot;#å‰æ&quot; class=&quot;headerlink&quot; title=&quot;å‰æ&quot;&gt;&lt;/a&gt;å‰æ&lt;/h3&gt;&lt;p&gt;ä»åˆšå·¥ä½œå°±å¼€å§‹æ¥è§¦ Consulï¼Œä¸­é€”è‡ªå·±ä¹Ÿæœ‰ä¸¤ä¸ªé¡¹ç›®å’Œ Consul æœ‰å…³ï¼Œåé¢æœ‰æœºä¼šå†è®²è®²ï¼Œç½‘ä¸Šå…³äºè¿™ä¸ªçš„èµ„æ–™è¿˜æ¯”è¾ƒå°‘ã€‚å› ä¸ºæ˜å¤©æœ‰ Consul çš„æŠ€æœ¯åˆ†äº«ï¼Œæ‰€ä»¥è‡ªå·±ä»Šå¤©ä¸‹åˆåœ¨å®˜ç½‘çœ‹äº†ä¸‹ç›¸å…³çš„ä»‹ç»ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="Consul" scheme="http://yoursite.com/tags/Consul/"/>
    
  </entry>
  
  <entry>
    <title>ELK å®æ—¶æ—¥å¿—åˆ†æå¹³å°ç¯å¢ƒæ­å»º</title>
    <link href="http://yoursite.com/2017/12/25/ELK/"/>
    <id>http://yoursite.com/2017/12/25/ELK/</id>
    <published>2017-12-24T16:00:00.000Z</published>
    <updated>2018-01-21T11:10:24.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171225/82lhH8E4Hk.jpg-1" alt="mark"></p><h3 id="ç®€å•ä»‹ç»"><a href="#ç®€å•ä»‹ç»" class="headerlink" title="ç®€å•ä»‹ç»"></a>ç®€å•ä»‹ç»</h3><p>ELKï¼ˆElasticSearch, Logstash, Kibanaï¼‰ï¼Œä¸‰è€…ç»„åˆåœ¨ä¸€èµ·æ­å»ºå®æ—¶çš„æ—¥å¿—åˆ†æå¹³å°ï¼Œç›®å‰å¥½å¤šå…¬å¸éƒ½æ˜¯è¿™å¥—ï¼<br><a id="more"></a></p><ul><li>Elasticsearch æ˜¯ä¸ªå¼€æºåˆ†å¸ƒå¼æœç´¢å¼•æ“ï¼Œå®ƒçš„ç‰¹ç‚¹æœ‰ï¼šåˆ†å¸ƒå¼ï¼Œé›¶é…ç½®ï¼Œè‡ªåŠ¨å‘ç°ï¼Œç´¢å¼•è‡ªåŠ¨åˆ†ç‰‡ï¼Œç´¢å¼•å‰¯æœ¬æœºåˆ¶ï¼Œrestful é£æ ¼æ¥å£ï¼Œå¤šæ•°æ®æºï¼Œè‡ªåŠ¨æœç´¢è´Ÿè½½ç­‰ã€‚</li><li>Logstash æ˜¯ä¸€ä¸ªå®Œå…¨å¼€æºçš„å·¥å…·ï¼Œä»–å¯ä»¥å¯¹ä½ çš„æ—¥å¿—è¿›è¡Œæ”¶é›†ã€è¿‡æ»¤ï¼Œå¹¶å°†å…¶å­˜å‚¨ä¾›ä»¥åä½¿ç”¨ï¼ˆå¦‚ï¼Œæœç´¢ï¼‰ã€‚</li><li>Kibana ä¹Ÿæ˜¯ä¸€ä¸ªå¼€æºå’Œå…è´¹çš„å·¥å…·ï¼Œå®ƒ Kibana å¯ä»¥ä¸º Logstash å’Œ ElasticSearch æä¾›çš„æ—¥å¿—åˆ†æå‹å¥½çš„ Web ç•Œé¢ï¼Œå¯ä»¥å¸®åŠ©æ‚¨æ±‡æ€»ã€åˆ†æå’Œæœç´¢é‡è¦æ•°æ®æ—¥å¿—ã€‚</li></ul><h3 id="å®‰è£…-ES"><a href="#å®‰è£…-ES" class="headerlink" title="å®‰è£… ES"></a>å®‰è£… ES</h3><p>ã€‚ã€‚ã€‚è¿™ä¸ªçœç•¥ï¼Œä¸ bb äº†ï¼Œä»¥å‰å†™è¿‡ã€‚ã€‚ã€‚ä¼ é€é—¨ï¼š<a href="http://www.54tianzhisheng.cn/2017/09/09/Elasticsearch-install/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2017/09/09/Elasticsearch-install/</a></p><h3 id="å®‰è£…-Logstash"><a href="#å®‰è£…-Logstash" class="headerlink" title="å®‰è£… Logstash"></a>å®‰è£… Logstash</h3><p>ELK æ•´å¥—ç¯å¢ƒæ­å»ºç‰ˆæœ¬å¾ˆå…³é”®ï¼Œæœ€å¥½å…¨ç»Ÿä¸€ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦åˆ™å‡ºå•¥é—®é¢˜å°±ä¸å¤ªå¥½æ‰¾äº†ã€‚è¿™æ˜¯æˆ‘è§è¿‡ç‰ˆæœ¬ç»Ÿä¸€æœ€ä¸¥æ ¼çš„äº†ã€‚è€Œå·² ES ç‰ˆæœ¬å‡äº†åï¼Œå…¶ä»–çš„éƒ½è¦éƒ½è¦å‡çº§ï¼ŒåŒ…æ‹¬å…¶æ’ä»¶ã€‚å‡çº§ä»£ä»·æŒºå¤§çš„ï¼Œæœ€å¥½ä¸€å¼€å§‹å°±å®šä½å¥½è¦å®‰è£…å“ªä¸ªç‰ˆæœ¬ï¼</p><p>åœ¨å®˜ç½‘ä¸‹å¥½å®‰è£…åŒ…åä¼ åˆ° Linux ä¸Šï¼Œè¿™æ˜¯é€Ÿåº¦æœ€å¿«çš„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ /usr/local ç›®å½•ä¸‹è§£å‹ï¼š</span><br><span class="line"></span><br><span class="line">tar -zxvf  logstash-5.5.2.tar.gz</span><br><span class="line"></span><br><span class="line">è¿›å…¥è§£å‹åçš„ç›®å½•ï¼š</span><br><span class="line"></span><br><span class="line">cd /usr/local/logstash-5.5.2/bin</span><br><span class="line"></span><br><span class="line">æ–°å¢é…ç½®æ–‡ä»¶ï¼š</span><br><span class="line"></span><br><span class="line">vim logstash.conf</span><br><span class="line"></span><br><span class="line">å¢åŠ ï¼š</span><br><span class="line"></span><br><span class="line">input&#123;</span><br><span class="line">    file&#123;</span><br><span class="line">      path =&gt; [&quot;/var/log/*.log&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output&#123;</span><br><span class="line">   elasticsearch&#123;</span><br><span class="line">       hosts =&gt; [&quot;192.168.153.135:9200&quot;]</span><br><span class="line">       index =&gt; &quot;logstash__log&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Logstash çš„å¯åŠ¨æ–¹å¼æ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ /usr/local/logstash-5.5.2/bin ç›®å½•ä¸‹è¿è¡Œï¼š</span><br><span class="line"></span><br><span class="line">./logstash -f logstash.conf</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-Kibana"><a href="#å®‰è£…-Kibana" class="headerlink" title="å®‰è£… Kibana"></a>å®‰è£… Kibana</h3><p>åŒæ ·ï¼Œå®˜ç½‘ä¸‹å¥½å®‰è£…åŒ…ï¼Œä¸Šä¼ åˆ° Linuxã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">è§£å‹ï¼š</span><br><span class="line"></span><br><span class="line">tar -zxvf kibana-5.5.2-linux-x86_64.tar.gz</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹é…ç½®æ–‡ä»¶ kibana-5.5.2/config/kibana.yml å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">Server.host  //é…ç½®æœºå™¨ip/hostname</span><br><span class="line"></span><br><span class="line">Server.name  //æ­¤kibanaæœåŠ¡çš„åç§°</span><br><span class="line"></span><br><span class="line">elasticsearch.url  //es masterèŠ‚ç‚¹url</span><br></pre></td></tr></table></figure><p>Kibana å¯åŠ¨æ–¹å¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ /usr/local/kibana-5.5.2/bin ç›®å½•ä¸‹è¿è¡Œï¼š</span><br><span class="line"></span><br><span class="line">./kibana</span><br></pre></td></tr></table></figure><p>Webç•Œé¢è®¿é—®: <a href="http://ip:5601" target="_blank" rel="noopener">http://ip:5601</a> æ­¤æ—¶éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ç™»å½•,é»˜è®¤åˆ†åˆ«æ˜¯ elastic å’Œ changeme</p><h3 id="X-Pack"><a href="#X-Pack" class="headerlink" title="X-Pack"></a>X-Pack</h3><p>X-Pack æ˜¯ä¸€ä¸ª Elastic Stack çš„æ‰©å±•ï¼Œå°†å®‰å…¨ï¼Œè­¦æŠ¥ï¼Œç›‘æ§ï¼ŒæŠ¥å‘Šå’Œå›¾å½¢åŠŸèƒ½åŒ…å«åœ¨ä¸€ä¸ªæ˜“äºå®‰è£…çš„è½¯ä»¶åŒ…ä¸­ã€‚</p><p>ES å’Œ Kibana éƒ½å¯å®‰è£…ã€‚</p><p>æ’ä»¶ x-pack-5.5.2.zip  ä¾æ—§å®˜ç½‘ä¸‹ã€‚</p><h4 id="ES-å®‰è£…-X-Pack"><a href="#ES-å®‰è£…-X-Pack" class="headerlink" title="ES å®‰è£… X-Pack"></a>ES å®‰è£… X-Pack</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/elasticsearch/bin</span><br><span class="line"></span><br><span class="line">./elasticsearch-plugin install file:///opt/es/x-pack-5.5.2.zip</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆåŠŸï¼šæ˜¾ç¤ºå¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 bin]# ./elasticsearch-plugin install file:///opt/es/x-pack-5.5.2.zip</span><br><span class="line">-&gt; Downloading file:///opt/es/x-pack-5.5.2.zip</span><br><span class="line">[=================================================] 100%</span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">@     WARNING: plugin requires additional permissions     @</span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">* java.io.FilePermission \\.\pipe\* read,write</span><br><span class="line">* java.lang.RuntimePermission accessClassInPackage.com.sun.activation.registries</span><br><span class="line">* java.lang.RuntimePermission getClassLoader</span><br><span class="line">* java.lang.RuntimePermission setContextClassLoader</span><br><span class="line">* java.lang.RuntimePermission setFactory</span><br><span class="line">* java.security.SecurityPermission createPolicy.JavaPolicy</span><br><span class="line">* java.security.SecurityPermission getPolicy</span><br><span class="line">* java.security.SecurityPermission putProviderProperty.BC</span><br><span class="line">* java.security.SecurityPermission setPolicy</span><br><span class="line">* java.util.PropertyPermission * read,write</span><br><span class="line">* java.util.PropertyPermission sun.nio.ch.bugLevel write</span><br><span class="line">* javax.net.ssl.SSLPermission setHostnameVerifier</span><br><span class="line">See http://docs.oracle.com/javase/8/docs/technotes/guides/security/permissions.html</span><br><span class="line">for descriptions of what these permissions allow and the associated risks.</span><br><span class="line"></span><br><span class="line">Continue with installation? [y/N]y</span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">@        WARNING: plugin forks a native controller        @</span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">This plugin launches a native controller that is not subject to the Java</span><br><span class="line">security manager nor to system call filters.</span><br><span class="line"></span><br><span class="line">Continue with installation? [y/N]y</span><br><span class="line">-&gt; Installed x-pack</span><br></pre></td></tr></table></figure><h4 id="Kibana-å®‰è£…-X-Pack"><a href="#Kibana-å®‰è£…-X-Pack" class="headerlink" title="Kibana å®‰è£… X-Pack"></a>Kibana å®‰è£… X-Pack</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/kibana-5.5.2/bin</span><br><span class="line"></span><br><span class="line">./kibana-plugin install file:///opt/es/x-pack-5.5.2.zip</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 bin]# ./kibana-plugin install file:///opt/es/x-pack-5.5.2.zip</span><br><span class="line">Attempting to transfer from file:///opt/es/x-pack-5.5.2.zip</span><br><span class="line">Transferring 159867054 bytes....................</span><br><span class="line">Transfer complete</span><br><span class="line">Retrieving metadata from plugin archive</span><br><span class="line">Extracting plugin archive</span><br><span class="line">Extraction complete</span><br><span class="line">Optimizing and caching browser bundles...</span><br><span class="line">Plugin installation complete</span><br></pre></td></tr></table></figure><h4 id="å¯ç”¨-x-pack-å®‰å…¨æœºåˆ¶"><a href="#å¯ç”¨-x-pack-å®‰å…¨æœºåˆ¶" class="headerlink" title="å¯ç”¨ x-pack å®‰å…¨æœºåˆ¶"></a>å¯ç”¨ x-pack å®‰å…¨æœºåˆ¶</h4><p>åˆ†åˆ«åœ¨ kibana.yml å’Œ elasticsearch.yml ä¸­åŠ å…¥ä¸‹è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xpack.security.enabled: true</span><br></pre></td></tr></table></figure><p>è¿™æ ·åï¼Œä½ å†æ‰“å¼€ ES çš„ head ç•Œé¢å’Œ Kibana ç®¡ç†ç•Œé¢å°±éœ€è¦è¾“å…¥è´¦å·å¯†ç äº†ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171225/i8ebl0jgLl.png-1" alt="mark"></p><p>ä¸Šå›¾å³è¾¹æ˜¯å®‰è£… X-Pack åçš„ï¼ŒåŠŸèƒ½å¤šäº†å‡ ä¸ªã€‚</p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>ç¯å¢ƒæ­å»ºå¾ˆç®€å•ï¼Œåé¢å¦‚æœæœ‰æ—¶é—´çš„è¯å¯ä»¥å†è®²è®²åœ¨ Kibana çš„ Dev Tools ä¸Šæ„å»º ES çš„ JSON ä¸²æ¥å¯¹ ES è¿›è¡Œæ“ä½œã€‚</p><p>æˆ‘è¿˜å†™è¿‡ ES ç›¸å…³çš„æ–‡ç« ï¼š</p><p>1ã€<a href="http://www.54tianzhisheng.cn/2017/09/07/Elasticsearch-analyzers/" target="_blank" rel="noopener">Elasticsearch é»˜è®¤åˆ†è¯å™¨å’Œä¸­åˆ†åˆ†è¯å™¨ä¹‹é—´çš„æ¯”è¾ƒåŠä½¿ç”¨æ–¹æ³•</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2017/09/09/Elasticsearch-install/" target="_blank" rel="noopener">å…¨æ–‡æœç´¢å¼•æ“ Elasticsearch é›†ç¾¤æ­å»ºå…¥é—¨æ•™ç¨‹</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2017/10/15/ElasticSearch-cluster-health-metrics/" target="_blank" rel="noopener">ElasticSearch é›†ç¾¤ç›‘æ§</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2017/10/18/ElasticSearch-nodes-metrics/" target="_blank" rel="noopener">ElasticSearch å•ä¸ªèŠ‚ç‚¹ç›‘æ§</a></p><h3 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h3><blockquote><p>æœ¬æ–‡é¦–å‘äºï¼š<a href="http://www.54tianzhisheng.cn/" target="_blank" rel="noopener">zhisheng çš„åšå®¢</a></p><p>è½¬è½½è¯·æ³¨æ˜åœ°å€ï¼š<a href="http://www.54tianzhisheng.cn/2017/12/25/ELK/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2017/12/25/ELK/</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ohfk1r827.bkt.clouddn.com/blog/171225/82lhH8E4Hk.jpg-1&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;ç®€å•ä»‹ç»&quot;&gt;&lt;a href=&quot;#ç®€å•ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ç®€å•ä»‹ç»&quot;&gt;&lt;/a&gt;ç®€å•ä»‹ç»&lt;/h3&gt;&lt;p&gt;ELKï¼ˆElasticSearch, Logstash, Kibanaï¼‰ï¼Œä¸‰è€…ç»„åˆåœ¨ä¸€èµ·æ­å»ºå®æ—¶çš„æ—¥å¿—åˆ†æå¹³å°ï¼Œç›®å‰å¥½å¤šå…¬å¸éƒ½æ˜¯è¿™å¥—ï¼&lt;br&gt;
    
    </summary>
    
    
      <category term="ElasticSearch" scheme="http://yoursite.com/tags/ElasticSearch/"/>
    
      <category term="LogStash" scheme="http://yoursite.com/tags/LogStash/"/>
    
      <category term="Kibana" scheme="http://yoursite.com/tags/Kibana/"/>
    
  </entry>
  
  <entry>
    <title>Hexo + yilia æ­å»ºåšå®¢å¯èƒ½ä¼šé‡åˆ°çš„æ‰€æœ‰ç–‘é—®</title>
    <link href="http://yoursite.com/2017/12/18/hexo-yilia/"/>
    <id>http://yoursite.com/2017/12/18/hexo-yilia/</id>
    <published>2017-12-17T16:00:00.000Z</published>
    <updated>2018-01-21T11:14:29.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171218/BaE3G1imDm.png-1" alt="mark"></p><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>ä¸ºä»€ä¹ˆä¼šå†æ¬¡å†™è¿™ç¯‡åšå®¢ï¼Ÿè¯·çœ‹ä¸‹å›¾ï¼š<br><a id="more"></a></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171218/b4j29CkGgJ.png-1" alt="mark"></p><p>è¿™æ˜¯æˆ‘åšå®¢æœç´¢å¼•æ“çš„ä¸»è¦å…³é”®å­—ã€‚ä¸ºä»€ä¹ˆä¼šæœ‰è¿™äº›å…³é”®å­—å‘¢ï¼Ÿ</p><p>æˆ‘çŒœä¼°è®¡æ˜¯æ›¾ç»å†™äº†å‡ ç¯‡å…³äºæ­å»ºåšå®¢çš„æ–‡ç« ï¼Œè¢«æœç´¢å¼•æ“æ”¶å…¥äº†ï¼Œæ‰€ä»¥æœç´¢å¼•æ“æ‰ä¼šå°†è¿™äº›æµé‡å¼•å¯¼è‡³æˆ‘çš„åšå®¢ï¼Œæ–‡ç« å¦‚ä¸‹ï¼š</p><p>1ã€<a href="http://www.54tianzhisheng.cn/2017/03/28/%E5%88%A9%E7%94%A8Github%20Page%20%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/" target="_blank" rel="noopener">åˆ©ç”¨Github Page æ­å»ºä¸ªäººåšå®¢ç½‘ç«™</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/Hexo-yilia-toc/" target="_blank" rel="noopener">Hexo + yilia ä¸»é¢˜å®ç°æ–‡ç« ç›®å½•</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2017/04/13/Hexo-yilia-changyan/" target="_blank" rel="noopener">Github pages + Hexo åšå®¢ yilia ä¸»é¢˜ä½¿ç”¨ç•…è¨€è¯„è®ºç³»ç»Ÿ</a></p><p>é‚£è¿˜æœ‰è¿™ä¹ˆå¤šäººæœç´¢è¿™äº›å…³é”®å­—ï¼Ÿè¯´æ˜ç¢°åˆ°é—®é¢˜çš„è¿˜æœ‰ä¸å°‘ï¼Œæ‰€ä»¥æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« çš„è¯ç”Ÿï¼</p><h3 id="é—®é¢˜è§£ç­”"><a href="#é—®é¢˜è§£ç­”" class="headerlink" title="é—®é¢˜è§£ç­”"></a>é—®é¢˜è§£ç­”</h3><p><strong>1ã€hexo  yilia æ–‡ç« ç›®å½•</strong></p><p>è¿™ä¸ªæˆ‘ä»¥å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼š<a href="http://www.54tianzhisheng.cn/2017/06/13/Hexo-yilia-toc/" target="_blank" rel="noopener">Hexo + yilia ä¸»é¢˜å®ç°æ–‡ç« ç›®å½•</a>    é‚£ç¯‡æ–‡ç« å†™äº†æˆ‘é‚£ä¸ªç‰ˆæœ¬çš„ yilia æ€ä¹ˆæ·»åŠ æ–‡ç« ç›®å½•çš„ï¼Œä½†æ˜¯å¥½åƒæ–°ç‰ˆæœ¬çš„ yilia å·²ç»è‡ªå¸¦äº†è¿™ä¸ªæ–‡ç« ç›®å½•åŠŸèƒ½ã€‚æ‰€ä»¥å¦‚æœä½ æ˜¯ä½¿ç”¨çš„æ–°ç‰ˆæœ¬çš„ yilia ï¼Œè¯·ä¸è¦åšä»»ä½•ä¿®æ”¹ï¼ä½†æ˜¯å‰å‡ å¤©æœ‰äººç»™æˆ‘å‘äº†ä¸ªå›¾ç‰‡ï¼Œåˆå¥½åƒæœ‰ç‚¹åŒºåˆ«ï¼Œå¦‚æœå®åœ¨æœ‰ä¸åŒçš„è¯ï¼Œè¯·åŠ ç¾¤ 528776268 æ‰¾æˆ‘è¦æˆ‘é‚£ä¸ªä¸»é¢˜ç‰ˆæœ¬çš„æ‰€æœ‰é…ç½®æ–‡ä»¶ã€‚å†æ¬¡è¯´æ˜ï¼Œæˆ‘å‰ç«¯ä¹Ÿä¸æ˜¯å¾ˆæ“…é•¿ï¼Œæˆ‘å†™é‚£ç¯‡æ–‡ç« ä¹Ÿæ˜¯å‚è€ƒå…¶ä»–åšå®¢çš„ä¿®æ”¹ï¼Œæ‰€ä»¥æ— èƒ½ä¸ºåŠ›äº†ã€‚æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå»ºè®®ç›´æ¥åœ¨ yilia ä¸»é¢˜çš„ GitHub å»æ‰¾ä½œè€…èŠï¼</p><p><strong>2ã€Hexo  yilia  éšç¬”</strong></p><p>éšç¬”å¦‚ä¸‹ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171218/0kkIFEkcja.png-1" alt="mark"></p><p>å¯¹æ­¤æƒ³è¯´çš„å°±æ˜¯ï¼Œâ€œéšç¬”â€  å…¶å®å°±æ˜¯æ–‡ç« çš„ä¸€ä¸ª tags(æ ‡ç­¾)ï¼Œå¦‚æœä½ æƒ³æŠŠæ–‡ç« ä½œä¸ºéšç¬”çš„è¯ï¼Œè¯·åœ¨æ–‡ç« çš„é¦–éƒ¨å†™ä¸ª tags  ä¸º â€œéšç¬”â€   çš„æ ‡ç­¾ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171218/13539aGJF5.png-1" alt="mark"></p><p>æ³¨æ„ï¼š-  åé¢æœ‰ä¸ªç©ºæ ¼ã€‚</p><p><strong>3ã€yilia ä¸»é¢˜åˆ†ç±»å®ç°</strong></p><p>å¦‚æœè¦æœ‰å¤šä¸ªæ ‡ç­¾ï¼Œå¯ä»¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171218/lF42EedCJA.png-1" alt="mark"></p><p><strong>4ã€hexo yilia è®¾ç½®æ–‡ç« æ˜¾ç¤ºé•¿åº¦ï¼Œä¸å±•å¼€å…¨æ–‡</strong></p><p>yilia ä¸»é¢˜ä¸­å¯ä»¥ç”¨ <code>&lt;!-- more --&gt;</code>  æˆªå–æ–‡ç« çš„æ˜¾ç¤ºé•¿åº¦ï¼Œå¦‚æœä½ æƒ³åœ¨å“ªæˆªå–æ–‡ç« ï¼Œå°±åœ¨é‚£è¡Œä½¿ç”¨è¯¥å­—ç¬¦ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171218/2ickeEEFbh.png-1" alt="mark"></p><p><strong>5ã€yilia æ·»åŠ é˜…è¯»é‡</strong></p><p>æˆ‘æ·»åŠ çš„æ˜¯ â€œä¸è’œå­â€ è®¡æ•°ï¼Œå®ƒå¯ä»¥åŒºåˆ† pv/uv çš„ç»Ÿè®¡æ–¹å¼ï¼Œç»Ÿè®¡æ›´ç²¾å‡†ï¼Œæ»¡è¶³æ›´å¤šéœ€æ±‚ã€‚æœ‰è¿™ä¸ªéœ€æ±‚çš„å¯ä»¥å»æŸ¥æ‰¾ä¸‹åšå®¢æ€ä¹ˆæ·»åŠ ã€‚ï¼ˆç½‘ä¸Šæœ‰å¾ˆå¤šè¿™æ–¹é¢çš„åšå®¢ï¼‰</p><p><strong>6ã€yilia ä¸»é¢˜ä½¿ç”¨ â€œç•…è¨€â€ è¯„è®ºç³»ç»Ÿ</strong></p><p>å‚è§æˆ‘ä»¥å‰çš„æ–‡ç« ï¼š  <a href="http://www.54tianzhisheng.cn/2017/04/13/Hexo-yilia-changyan/" target="_blank" rel="noopener">Github pages + Hexo åšå®¢ yilia ä¸»é¢˜ä½¿ç”¨ç•…è¨€è¯„è®ºç³»ç»Ÿ</a></p><p><strong>7ã€hexo yilia å¼•å…¥éŸ³ä¹</strong></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171218/fA367Gej62.png-1" alt="mark"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">frameborder</span>=<span class="string">"no"</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">marginwidth</span>=<span class="string">"0"</span> <span class="attr">marginheight</span>=<span class="string">"0"</span> <span class="attr">width</span>=<span class="string">330</span> <span class="attr">height</span>=<span class="string">86</span> <span class="attr">src</span>=<span class="string">"å¡«å†™éŸ³ä¹é“¾æ¥åœ°å€"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾ï¼Œå¯ä»¥åœ¨ç½‘æ˜“äº‘éŸ³ä¹é‡Œæœåˆ°ä½ æƒ³è¦å¼•å…¥çš„éŸ³ä¹ï¼Œç„¶åç‚¹å‡»å¦‚ä¸‹çš„ â€œç”Ÿæˆå¤–é“¾æ’­æ”¾å™¨â€ å³å¯ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171218/lLLLBlH1FK.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171218/ibaCjDEhEa.png-1" alt="mark"></p><p><strong>8ã€hexo yilia å¼•å…¥è§†é¢‘</strong></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171218/1f6gC2mJ1f.png-1" alt="mark"></p><p>hexo  æ”¯æŒ html è¯­æ³•çš„ï¼Œæ‰€ä»¥å¯ä»¥å¦‚ä¸Šå›¾è¿™æ ·å¼•å…¥è§†é¢‘ï¼</p><p><strong>9ã€hexo  yilia  ç›¸å†Œ</strong></p><p>è¿™ä¸ªæŠ±æ­‰ï¼Œæˆ‘è‡ªå·±ä¹Ÿæ²¡åšè¿™æ–¹é¢çš„åŠŸèƒ½ï¼Œæš‚æ—¶ä¸å¤ªæ¸…æ¥šæ€ä¹ˆå®ç°ã€‚ä¸è¿‡æœ‰æ–‡ç« å†™æ€ä¹ˆå®ç°ï¼Œå¤§å®¶å¯ä»¥æœç´¢ä¸‹ï¼</p><p><strong>10ã€hexo  yilia  æ€ä¹ˆå†™æ–‡ç« </strong></p><p>æˆ‘ä¸€èˆ¬å†™æ–‡ç« å°±æ˜¯å…ˆç”¨æœ¬åœ° markdown ç¼–è¾‘å™¨å†™å¥½åï¼Œç„¶åæ”¾åœ¨ hexo çš„ <code>source/_posts</code> ç›®å½•ä¸‹ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171218/0HjLacBcfe.png-1" alt="mark"></p><h3 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h3><p>å¥½äº†ï¼Œå¤§æ¦‚å°±è¿™äº›é—®é¢˜ï¼Œæˆ‘ä¹Ÿä¸€ä¸€è§£ç­”äº†ï¼Œå¸Œæœ›æ­å»ºåšå®¢çš„ä½ å¯ä»¥çœ‹åˆ°è¿™ç¯‡æ–‡ç« ï¼Œè®©ä½ å°‘èµ°ç‚¹å¼¯è·¯ï¼Œå¦‚æœä½ ä¹Ÿé‡åˆ°è¿‡è¿™äº›é—®é¢˜ï¼Œè¿˜è¯·ä½ èƒ½åˆ†äº«ä¸‹æ–‡ç« ï¼Œè®©æ›´å¤šäººé¿å…å…¥å‘ï¼</p><p>æœ¬æ–‡åœ°å€æ˜¯ï¼š<a href="http://www.54tianzhisheng.cn/2017/12/18/hexo-yilia" target="_blank" rel="noopener">Hexo + yilia æ­å»ºåšå®¢å¯èƒ½ä¼šé‡åˆ°çš„æ‰€æœ‰ç–‘é—®</a>  æœ¬æ–‡åŸåˆ›ï¼Œè½¬è½½è¯·æ³¨æ˜åŸåˆ›åœ°å€ã€‚</p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p><a href="http://www.54tianzhisheng.cn/2017/12/18/hexo-yilia" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2017/12/18/hexo-yilia</a>  è¿™ä¸ªé“¾æ¥æ˜¯è®©æ¨é…·çˆ¬è™«åæ‰çš„ï¼Œå“ˆå“ˆï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ohfk1r827.bkt.clouddn.com/blog/171218/BaE3G1imDm.png-1&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‰æ&quot;&gt;&lt;a href=&quot;#å‰æ&quot; class=&quot;headerlink&quot; title=&quot;å‰æ&quot;&gt;&lt;/a&gt;å‰æ&lt;/h3&gt;&lt;p&gt;ä¸ºä»€ä¹ˆä¼šå†æ¬¡å†™è¿™ç¯‡åšå®¢ï¼Ÿè¯·çœ‹ä¸‹å›¾ï¼š&lt;br&gt;
    
    </summary>
    
    
      <category term="hexo" scheme="http://yoursite.com/tags/hexo/"/>
    
      <category term="yilia" scheme="http://yoursite.com/tags/yilia/"/>
    
  </entry>
  
  <entry>
    <title>è°·æ­Œå¼€å‘è€…å¤§ä¼šæ”¶è·æ»¡æ»¡ï¼Œä¸å»çœŸ â€œå¯æƒœâ€ äº†</title>
    <link href="http://yoursite.com/2017/12/13/Google-Developer-Days/"/>
    <id>http://yoursite.com/2017/12/13/Google-Developer-Days/</id>
    <published>2017-12-12T16:00:00.000Z</published>
    <updated>2018-01-21T11:11:18.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/1DJAFA7Kmb.png-1" alt="mark"><br>å…¨æ–‡å›¾ç‰‡è¾ƒå¤šï¼Œè¯·åœ¨ WiFi ä¸‹é˜…è¯»ï¼ŒåœŸè±ªè¯·éšæ„ï¼<br><a id="more"></a></p><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>ä»Šå¹´ Google å¼€å‘è€…å¤§ä¼šå†åº¦æ¥è¢­ï¼Œå¤§ä¼šå°†äº 12 æœˆ 13 æ—¥å’Œ 14 æ—¥åœ¨ä¸Šæµ·ä¸¾åŠï¼Œä¸»é¢˜æ¶µç›–æœºå™¨å­¦ä¹ (Machine Learning)ã€Androidã€ç§»åŠ¨ç½‘ç»œ(Mobile Web)ã€TensorFlowã€Firebaseã€äº‘æœåŠ¡(Cloud)ã€AR/VRã€è®¾è®¡(Design)ä»¥åŠæ›´å¤šå¼€å‘è€…ç›¸å…³å†…å®¹ã€‚</p><p>ä»Šå¤©æˆ‘å°±åˆ°èµ°ä¸€é­ï¼Œæ”¶è·æ»¡æ»¡ï¼Œéƒ½æ˜¯ç”¨è¢‹å­æå›æ¥çš„ï¼Œå“ˆå“ˆã€‚ä¸‹å›¾ä¸ºè¢‹å­ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/LB2im47IbD.png-1" alt="mark"></p><p>å†ç§€å¼ å›¾ä»£è¡¨æˆ‘å»äº†ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/ia81GicG37.png-1" alt="mark"></p><h3 id="å…¥åœº"><a href="#å…¥åœº" class="headerlink" title="å…¥åœº"></a>å…¥åœº</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/1DJAFA7Kmb.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/5KAJDGGGH5.png-1" alt="mark"></p><p>è¯´ä¸‹ä»Šå¤©æˆ‘å‚åŠ çš„ä¼šåœºå§ï¼</p><h3 id="ä¼šåœº"><a href="#ä¼šåœº" class="headerlink" title="ä¼šåœº"></a>ä¼šåœº</h3><h4 id="ä¸»ä¼šåœºå¼€å¹•"><a href="#ä¸»ä¼šåœºå¼€å¹•" class="headerlink" title="ä¸»ä¼šåœºå¼€å¹•"></a>ä¸»ä¼šåœºå¼€å¹•</h4><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/iKjbLIggh8.png-1" alt="mark"></p><p>å½“ç„¶æ˜¯ç”¨æ¥ç”¨æ¥åšå¼€å‘è€…å¼€å¹•å¤§ä¼šä¸»é¢˜æ¼”è®²çš„ã€‚ç›¸ä¿¡ä¸å°‘æ²¡åˆ°ç°åœºçš„ä¹Ÿçœ‹äº†ç›´æ’­ã€‚</p><p>æ‹äº†ä¸¤å¼ æé£é£æ¼”è®²æ—¶çš„ç…§ç‰‡ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/BggGaADkF7.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/KEAB816319.png-1" alt="mark"></p><p>è¿˜æœ‰ä¸ªå¦¹å­æ˜¯è®² TensorFlow çš„ï¼Œå…¨ç¨‹ä¸­æ–‡ï¼Œè¿˜è´¼ 6ï¼Œä½©æœï¼ï¼ï¼</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/IbK91Af32b.png-1" alt="mark"></p><p>ä¸­é€”æ¼”è®²è¿˜å¥½å‡ ä¸ªï¼Œæ²¡æ‹ç…§äº†ã€‚ã€‚ã€‚</p><h3 id="ä¸­é€”èŒ¶æ­‡ï¼š"><a href="#ä¸­é€”èŒ¶æ­‡ï¼š" class="headerlink" title="ä¸­é€”èŒ¶æ­‡ï¼š"></a>ä¸­é€”èŒ¶æ­‡ï¼š</h3><p>å»å¤–é¢çœ‹äº†ä¸‹ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/dLm4BaJE4I.png-1" alt="mark"></p><h3 id="ä¸»ä¼šåœºæ¼”è®²"><a href="#ä¸»ä¼šåœºæ¼”è®²" class="headerlink" title="ä¸»ä¼šåœºæ¼”è®²"></a>ä¸»ä¼šåœºæ¼”è®²</h3><p>ä¸»é¢˜æ˜¯ï¼šã€Šæ¸è¿›å¼ç½‘é¡µåº”ç”¨ï¼šå¿«é€Ÿã€é›†æˆã€å¯é å¹¶ä¸”å…·æœ‰å¸å¼•åŠ›ã€‹</p><p>è¿™æ¬¡åçš„æ˜¯å‰æ’ï¼Œè¿˜æ‹äº†ç…§ï¼Œæ¼”è®²äººæŠ€å·§å¾ˆå¥½ï¼Œè¾¹æ¼”è®²è¾¹å¸¦æœ‰èº«ä½“åŠ¨ä½œçš„ï¼Œè€Œä¸”è¿˜æ¯”è¾ƒè¯™è°ã€‚</p><h3 id="åˆé¤"><a href="#åˆé¤" class="headerlink" title="åˆé¤"></a>åˆé¤</h3><p>èƒ¸ç‰Œä¸Šæœ‰13ã€14 å·çš„åˆé¤åˆ¸ï¼Œå¯ä»¥å…è´¹åƒã€å…è´¹æ‹¿ï¼Œç¦åˆ©è¶…å¥½ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/b06B2HGeC4.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/6K2lChij33.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/lCf1afKlck.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/1IJ74dJ3c1.png-1" alt="mark"></p><h3 id="ä¸‹åˆä¼šåœº"><a href="#ä¸‹åˆä¼šåœº" class="headerlink" title="ä¸‹åˆä¼šåœº"></a>ä¸‹åˆä¼šåœº</h3><p><strong>ä¸‹åˆä¼šåœºæœ‰ç‚¹å¤šï¼Œç•¥ç•¥ç•¥ã€‚ã€‚ã€‚</strong></p><p>éƒ½æ‹äº†ç‚¹ç…§ï¼Œå¦‚æœæƒ³è¦ï¼Œå¯ä»¥åŠ ç¾¤ï¼š528776268  æ‰¾æˆ‘è¦ã€</p><h3 id="æ™šé¤"><a href="#æ™šé¤" class="headerlink" title="æ™šé¤"></a>æ™šé¤</h3><p>è¯±æƒ‘é¢‡å¤§ã€‚ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/agJcFAH7ea.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/G6G4d12jLF.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/7gm9hB1i41.png-1" alt="mark"></p><p>æˆ‘è¿˜å–äº†æ¯è‘¡è„é…’ã€‚ã€‚å“ˆå“ˆ</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/3iHm1dKfG2.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/232lbee3Dg.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/Dlb96kdIfh.png-1" alt="mark"></p><p>å¦å¤–é™¤äº†ç…§ç‰‡ï¼Œè¿˜æ‹äº†ä¸‰ä¸ªè§†é¢‘</p><video width="400" height="800" controls="controls"><br>  <source src="http://ohfk1r827.bkt.clouddn.com/VID_20171213_183743.mp4" type="video/mp4"><br></video><p><br></p><video width="400" height="800" controls="controls"><br>  <source src="http://ohfk1r827.bkt.clouddn.com/VID_20171213_183253.mp4" type="video/mp4"><br></video><p><br></p><video width="400" height="800" controls="controls"><br>  <source src="http://ohfk1r827.bkt.clouddn.com/VID_20171213_185542.mp4" type="video/mp4"><br></video><h3 id="å›å®¶"><a href="#å›å®¶" class="headerlink" title="å›å®¶"></a>å›å®¶</h3><p>åƒé¥±å–è¶³ï¼Œå›å®¶æ‹äº†å¼ ç…§</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/6ihACFehj9.png-1" alt="mark"></p><h3 id="ç¤¼ç‰©"><a href="#ç¤¼ç‰©" class="headerlink" title="ç¤¼ç‰©"></a>ç¤¼ç‰©</h3><p>åˆ°å®¶äº†ï¼Œæ•´ç†äº†ä¸‹ä»Šå¤©çš„ç¤¼ç‰©ï¼š</p><p>è´´çº¸ä¸€å¼ </p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/FbBIc9Gm7k.png-1" alt="mark"></p><p>å°ç¤¼å“ä¸€ä¸ª</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/cilDBLBfDB.png-1" alt="mark"></p><p>ä¸€ä¸ªå¯ DIY çš„éŸ³ç®±</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/AIgb2iaEad.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/5aiiBhbAfc.png-1" alt="mark"></p><p>ä¸€ä¸ªå®šåˆ¶çš„æ‰‹æç”µè„‘åŒ…ï¼Œè´¨é‡å¾ˆå¥½ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/Lm1D2J4L60.png-1" alt="mark"></p><p>AndroidThings</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/hABaggD631.png-1" alt="mark"></p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171213/gmf7K6Cfgl.png-1" alt="mark"></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>å…¨æ–‡å›¾ç‰‡è¾ƒå¤šï¼Œè°¢è°¢é˜…è¯»ï¼è‡ªå·±æ”¶è·ä¹ŸæŒºå¤šçš„ï¼Œæ˜å¤©è¿˜æœ‰ä¸€å¤©ï¼Œå¯æƒœä¸æ‰“ç®—å»äº†ï¼Œè½¬è½½è¯·æ³¨æ˜åœ°å€ï¼š<a href="http://www.54tianzhisheng.cn/2017/12/13/Google-Developer-Days/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2017/12/13/Google-Developer-Days/</a></p><h3 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h3><p>è¿™ä¸ªæ˜¯ä¸ºäº†é˜²çˆ¬è™«å†™çš„ï¼Œå“ˆå“ˆ</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ohfk1r827.bkt.clouddn.com/blog/171213/1DJAFA7Kmb.png-1&quot; alt=&quot;mark&quot;&gt;&lt;br&gt;å…¨æ–‡å›¾ç‰‡è¾ƒå¤šï¼Œè¯·åœ¨ WiFi ä¸‹é˜…è¯»ï¼ŒåœŸè±ªè¯·éšæ„ï¼&lt;br&gt;
    
    </summary>
    
    
      <category term="éšç¬”" scheme="http://yoursite.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ CodeMirror æ‰“é€ å±äºè‡ªå·±çš„åœ¨çº¿ä»£ç ç¼–è¾‘å™¨</title>
    <link href="http://yoursite.com/2017/12/09/CodeMirror/"/>
    <id>http://yoursite.com/2017/12/09/CodeMirror/</id>
    <published>2017-12-08T16:00:00.000Z</published>
    <updated>2018-01-21T11:05:55.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171209/bA6g59gGB5.jpg-1" alt="mark"></p><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>å†™è¿™ä¸ªçš„ç›®çš„æ˜¯å› ä¸ºä¹‹å‰é¡¹ç›®é‡Œç”¨åˆ°è¿‡ CodeMirrorï¼Œè§‰å¾—ä½œä¸ºä¸€æ¬¾åœ¨çº¿ä»£ç ç¼–è¾‘å™¨è¿˜æ˜¯ä¸é”™ï¼Œä¹Ÿçœ‹åˆ°è¿‡æœ‰äº›ç½‘ç«™ç”¨åˆ°è¿‡åœ¨çº¿ä»£ç ç¼–è¾‘ï¼Œå½“ç„¶æˆ‘ä¸çŸ¥é“ä»–ä»¬æ˜¯ç”¨ä»€ä¹ˆåšçš„ï¼Œè¿™é‡Œæˆ‘æŠŠå…¬å¸é¡¹ç›®é‡Œç”¨åˆ°çš„é‚£éƒ¨åˆ†æŠ½å‡ºæ¥ï¼Œå•ç‹¬å†™ç¯‡åšå®¢ï¼Œå¹¶æŠŠæŠ½å‡ºæ¥çš„é‚£éƒ¨åˆ†ä»£ç æäº¤åˆ° GitHub å»ï¼ˆ<a href="https://github.com/zhisheng17/CoderBlog/tree/master/CodeMirror" target="_blank" rel="noopener">åœ°å€</a>ï¼‰ï¼Œä»¥é˜²æ—¥åå¯èƒ½ä¼šå†æ¬¡ç”¨åˆ°ï¼ˆæ²¡å‡†æ¯•ä¸šè®¾è®¡é‡Œå¯èƒ½ç”¨çš„åˆ°ï¼‰ã€‚<br><a id="more"></a></p><h3 id="ç®€å•ä»‹ç»"><a href="#ç®€å•ä»‹ç»" class="headerlink" title="ç®€å•ä»‹ç»"></a>ç®€å•ä»‹ç»</h3><p>CodeMirror æ˜¯ä¸€æ¬¾åœ¨çº¿çš„æ”¯æŒè¯­æ³•é«˜äº®çš„ä»£ç ç¼–è¾‘å™¨ã€‚å®˜ç½‘ï¼š <a href="http://codemirror.net/" target="_blank" rel="noopener">http://codemirror.net/</a></p><p>å¯èƒ½å…‰çœ‹å®˜ç½‘ï¼Œç¬¬ä¸€çœ¼è§‰å¾—é‚£äº›åœ¨çº¿ç¼–è¾‘å™¨æœ‰ç‚¹<strong>ä¸‘</strong>ï¼Œåæ­£ç¬¬ä¸€çœ¼ç»™æˆ‘çš„æ„Ÿè§‰å°±æ˜¯è¿™æ ·å­ï¼Œä½†æ˜¯ç»è¿‡è‡ªå·±çš„ç»†è°ƒï¼Œä¹Ÿèƒ½æ‰“é€ å‡ºä¸€æ¬¾ç²¾ç¾çš„åœ¨çº¿ä»£ç ç¼–è¾‘å™¨ã€‚</p><p>å®˜ç½‘å¯ä»¥æŠŠå®ƒä¸‹è½½ä¸‹æ¥ã€‚</p><p>ä¸‹è½½åï¼Œè§£å‹å¼€å¾—åˆ°çš„æ–‡ä»¶å¤¹ä¸­ï¼Œlib ä¸‹æ˜¯æ”¾çš„æ˜¯æ ¸å¿ƒåº“å’Œæ ¸å¿ƒ cssï¼Œmode ä¸‹æ”¾çš„æ˜¯å„ç§æ”¯æŒè¯­è¨€çš„è¯­æ³•å®šä¹‰ï¼Œtheme ç›®å½•ä¸‹æ˜¯æ”¯æŒçš„ä¸»é¢˜æ ·å¼ã€‚ä¸€èˆ¬åœ¨å¼€å‘ä¸­ï¼Œæ·»åŠ  lib ä¸‹çš„å¼•ç”¨å’Œ mode ä¸‹çš„å¼•ç”¨å°±å¤Ÿäº†ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171209/cJHjjadJ9E.png" alt="mark"></p><h3 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h3><p>ä¸‹é¢ä¸¤ä¸ªæ˜¯ä½¿ç”¨ Code Mirror å¿…é¡»å¼•å…¥çš„ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"codemirror-5.31.0/lib/codemirror.css"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"codemirror-5.31.0/lib/codemirror.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥è¦å¼•ç”¨çš„å°±æ˜¯åœ¨ mode ç›®å½•ä¸‹ç¼–è¾‘å™¨ä¸­è¦ç¼–è¾‘çš„è¯­è¨€å¯¹åº”çš„ js æ–‡ä»¶ï¼Œè¿™é‡Œä»¥ Groovy ä¸ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--groovyä»£ç é«˜äº®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"codemirror-5.31.0/mode/groovy/groovy.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³è®© Java ä»£ç ä¹Ÿæ”¯æŒä»£ç é«˜äº®ï¼Œåˆ™éœ€è¦å¼•å…¥æˆ‘ä»ç½‘ä¸Šä¸‹è½½ä¸‹æ¥çš„ clike.jsï¼ˆæˆ‘å·²ç»æ”¾åˆ°æˆ‘çš„ GitHub å»äº†ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Javaä»£ç é«˜äº®å¿…é¡»å¼•å…¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"codemirror-5.31.0/clike.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¼•ç”¨çš„æ–‡ä»¶ç”¨äºæ”¯æŒå¯¹åº”è¯­è¨€çš„è¯­æ³•é«˜äº®ã€‚</p><p>ç„¶åå‰é¢è¯´äº†ç¬¬ä¸€æ¬¡è¿›å…¥ Code Mirror å®˜ç½‘ï¼Œè§‰å¾—é‚£äº›ç¼–è¾‘å™¨æ¯”è¾ƒä¸‘ï¼Œé‚£å¯èƒ½æ˜¯ä¸»é¢˜æ¯”è¾ƒä¸‘ï¼Œæˆ‘è¿™é‡Œæ¨èä¸€æ¬¾è¿˜ä¸é”™çš„ä¸»é¢˜ï¼Œåªéœ€æŒ‰ç…§å¦‚ä¸‹å¼•å…¥å³å¯ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¼•å…¥cssæ–‡ä»¶ï¼Œç”¨ä»¥æ”¯æŒä¸»é¢˜--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"codemirror-5.31.0/theme/dracula.css"</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è¿˜æƒ³è®©ä½ çš„ç¼–è¾‘å™¨æ”¯æŒä»£ç è¡ŒæŠ˜å ï¼Œè¯·æŒ‰ç…§å¦‚ä¸‹è¿›è¡Œæ“ä½œï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ”¯æŒä»£ç æŠ˜å --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"codemirror-5.31.0/addon/fold/foldgutter.css"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"codemirror-5.31.0/addon/fold/foldcode.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"codemirror-5.31.0/addon/fold/foldgutter.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"codemirror-5.31.0/addon/fold/brace-fold.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"codemirror-5.31.0/addon/fold/comment-fold.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ˜¯ä¸æ˜¯è¿™æ ·å¼•å…¥å°±å¥½äº†å‘¢ï¼Œå½“ç„¶ä¸æ˜¯å•¦</p><h3 id="åˆ›å»ºç¼–è¾‘å™¨"><a href="#åˆ›å»ºç¼–è¾‘å™¨" class="headerlink" title="åˆ›å»ºç¼–è¾‘å™¨"></a>åˆ›å»ºç¼–è¾‘å™¨</h3><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬éƒ½ä¸ä¼šç›´æ¥æŠŠ body æ•´ä¸ªå†…å®¹ä½œä¸ºç¼–è¾‘å™¨çš„å®¹å™¨ã€‚è€Œæœ€å¸¸ç”¨çš„ï¼Œæ˜¯ä½¿ç”¨ textareaã€‚è¿™é‡Œæˆ‘åœ¨ <body> é‡Œä½¿ç”¨ä¸ª textareaï¼Œ</body></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- begin code --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"code"</span> <span class="attr">name</span>=<span class="string">"code"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- end code--&gt;</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±æ˜¯åˆ›å»ºç¼–è¾‘å™¨äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®DOMå…ƒç´ çš„idæ„é€ å‡ºä¸€ä¸ªç¼–è¾‘å™¨</span></span><br><span class="line"><span class="keyword">var</span> editor = CodeMirror.fromTextArea(<span class="built_in">document</span>.getElementById(<span class="string">"code"</span>), &#123;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ˜¯ä¸æ˜¯æœ‰ç‚¹å•è°ƒï¼Ÿ</p><p>æ²¡é”™ï¼Œæˆ‘è¿˜å¯ä»¥åœ¨é‡Œé¢ç»™ä»–è®¾ç½®äº›å±æ€§ï¼šï¼ˆå……åˆ†åˆ©ç”¨æˆ‘ä¸€å¼€å§‹å¼•å…¥çš„é‚£äº›æ–‡ä»¶ï¼‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mode: <span class="string">"text/groovy"</span>,    <span class="comment">//å®ç°groovyä»£ç é«˜äº®</span></span><br><span class="line">mode: <span class="string">"text/x-java"</span>, <span class="comment">//å®ç°Javaä»£ç é«˜äº®</span></span><br><span class="line">lineNumbers: <span class="literal">true</span>,<span class="comment">//æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">theme: <span class="string">"dracula"</span>,<span class="comment">//è®¾ç½®ä¸»é¢˜</span></span><br><span class="line">lineWrapping: <span class="literal">true</span>,<span class="comment">//ä»£ç æŠ˜å </span></span><br><span class="line">foldGutter: <span class="literal">true</span>,</span><br><span class="line">gutters: [<span class="string">"CodeMirror-linenumbers"</span>, <span class="string">"CodeMirror-foldgutter"</span>],</span><br><span class="line">matchBrackets: <span class="literal">true</span>,<span class="comment">//æ‹¬å·åŒ¹é…</span></span><br><span class="line"><span class="comment">//readOnly: true,        //åªè¯»</span></span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦æŸ¥çœ‹æ›´å¤šå±æ€§ï¼Œå¯ä»¥å»å®˜ç½‘æŸ¥æ‰¾ï¼Œç›®å‰æˆ‘åªç”¨åˆ°è¿™äº›å±æ€§ï¼</p><p><strong>ä¸‹é¢ä¹Ÿåˆ—ä¸¾äº›å§ï¼š</strong></p><p><strong>indentUnit: integer</strong><br>ç¼©è¿›å•ä½ï¼Œå€¼ä¸ºç©ºæ ¼æ•°ï¼Œé»˜è®¤ä¸º2 ã€‚</p><p><strong>smartIndent: boolean</strong><br>è‡ªåŠ¨ç¼©è¿›ï¼Œè®¾ç½®æ˜¯å¦æ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨ç¼©è¿›ï¼ˆå’Œä¸Šä¸€è¡Œç›¸åŒçš„ç¼©è¿›é‡ï¼‰ã€‚é»˜è®¤ä¸ºtrueã€‚</p><p><strong>tabSize: integer</strong><br>tabå­—ç¬¦çš„å®½åº¦ï¼Œé»˜è®¤ä¸º4 ã€‚</p><p><strong>indentWithTabs: boolean</strong><br>åœ¨ç¼©è¿›æ—¶ï¼Œæ˜¯å¦éœ€è¦æŠŠ n*tabå®½åº¦ä¸ªç©ºæ ¼æ›¿æ¢æˆnä¸ªtabå­—ç¬¦ï¼Œé»˜è®¤ä¸ºfalse ã€‚</p><p><strong>electricChars: boolean</strong><br>åœ¨è¾“å…¥å¯èƒ½æ”¹å˜å½“å‰çš„ç¼©è¿›æ—¶ï¼Œæ˜¯å¦é‡æ–°ç¼©è¿›ï¼Œé»˜è®¤ä¸ºtrue ï¼ˆä»…åœ¨modeæ”¯æŒç¼©è¿›æ—¶æœ‰æ•ˆï¼‰ã€‚</p><p><strong>specialChars: RegExp</strong><br>éœ€è¦è¢«å ä½ç¬¦(placeholder)æ›¿æ¢çš„ç‰¹æ®Šå­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚æœ€å¸¸ç”¨çš„æ˜¯éæ‰“å°å­—ç¬¦ã€‚é»˜è®¤ä¸ºï¼š/[\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/ã€‚</p><p><strong>specialCharPlaceholder: function(char) â†’ Element</strong><br>è¿™æ˜¯ä¸€ä¸ªæ¥æ”¶ç”±specialCharsé€‰é¡¹æŒ‡å®šçš„å­—ç¬¦ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œæ­¤å‡½æ•°ä¼šäº§ç”Ÿä¸€ä¸ªç”¨æ¥æ˜¾ç¤ºæŒ‡å®šå­—ç¬¦çš„DOMèŠ‚ç‚¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¾ç¤ºä¸€ä¸ªçº¢ç‚¹ï¼ˆâ€¢ï¼‰ï¼Œè¿™ä¸ªçº¢ç‚¹æœ‰ä¸€ä¸ªå¸¦æœ‰å‰é¢ç‰¹æ®Šå­—ç¬¦ç¼–ç çš„æç¤ºæ¡†ã€‚</p><p><strong>rtlMoveVisually: boolean</strong><br>Determines whether horizontal cursor movement through right-to-left (Arabic, Hebrew) text is visual (pressing the left arrow moves the cursor left) or logical (pressing the left arrow moves to the next lower index in the string, which is visually right in right-to-left text). The default is false on Windows, and true on other platforms.ï¼ˆè¿™æ®µå®Œå…¨ä¸æ™“å¾—æå•¥å­é¬¼ï¼‰</p><p><strong>keyMap: string</strong><br>é…ç½®å¿«æ·é”®ã€‚é»˜è®¤å€¼ä¸ºdefaultï¼Œå³ codemorrir.js å†…éƒ¨å®šä¹‰ã€‚å…¶å®ƒåœ¨<a href="http://codemirror.net/keymap/" target="_blank" rel="noopener">key map</a>ç›®å½•ä¸‹ã€‚</p><p><strong>extraKeys: object</strong><br>ç»™ç¼–è¾‘å™¨ç»‘å®šä¸å‰é¢keyMapé…ç½®ä¸åŒçš„å¿«æ·é”®ã€‚</p><p><strong>lineWrapping: boolean</strong><br>åœ¨é•¿è¡Œæ—¶æ–‡å­—æ˜¯æ¢è¡Œ(wrap)è¿˜æ˜¯æ»šåŠ¨(scroll)ï¼Œé»˜è®¤ä¸ºæ»šåŠ¨(scroll)ã€‚</p><p><strong>lineNumbers: boolean</strong><br>æ˜¯å¦åœ¨ç¼–è¾‘å™¨å·¦ä¾§æ˜¾ç¤ºè¡Œå·ã€‚</p><p><strong>firstLineNumber: integer</strong><br>è¡Œå·ä»å“ªä¸ªæ•°å¼€å§‹è®¡æ•°ï¼Œé»˜è®¤ä¸º1 ã€‚</p><p><strong>lineNumberFormatter: function(line: integer) â†’ string</strong><br>ä½¿ç”¨ä¸€ä¸ªå‡½æ•°è®¾ç½®è¡Œå·ã€‚</p><p><strong>gutters: array<string></string></strong><br>ç”¨æ¥æ·»åŠ é¢å¤–çš„gutterï¼ˆåœ¨è¡Œå·gutterå‰æˆ–ä»£æ›¿è¡Œå·gutterï¼‰ã€‚å€¼åº”è¯¥æ˜¯CSSåç§°æ•°ç»„ï¼Œæ¯ä¸€é¡¹å®šä¹‰äº†ç”¨äºç»˜åˆ¶gutterèƒŒæ™¯çš„å®½åº¦ï¼ˆè¿˜æœ‰å¯é€‰çš„èƒŒæ™¯ï¼‰ã€‚ä¸ºäº†èƒ½æ˜ç¡®è®¾ç½®è¡Œå·gutterçš„ä½ç½®ï¼ˆé»˜è®¤åœ¨æ‰€æœ‰å…¶å®ƒgutterçš„å³è¾¹ï¼‰ï¼Œä¹Ÿå¯ä»¥åŒ…å«CodeMirror-linenumbersç±»ã€‚ç±»åæ˜¯ç”¨äºä¼ ç»™setGutterMarkerçš„é”®å(keys)ã€‚</p><p><strong>fixedGutter: boolean</strong><br>è®¾ç½®gutterè·Ÿéšç¼–è¾‘å™¨å†…å®¹æ°´å¹³æ»šåŠ¨ï¼ˆfalseï¼‰è¿˜æ˜¯å›ºå®šåœ¨å·¦ä¾§ï¼ˆtrueæˆ–é»˜è®¤ï¼‰ã€‚</p><p><strong>scrollbarStyle: string</strong><br>è®¾ç½®æ»šåŠ¨æ¡ã€‚é»˜è®¤ä¸ºâ€nativeâ€ï¼Œæ˜¾ç¤ºåŸç”Ÿçš„æ»šåŠ¨æ¡ã€‚æ ¸å¿ƒåº“è¿˜æä¾›äº†â€nullâ€æ ·å¼ï¼Œæ­¤æ ·å¼ä¼šå®Œå…¨éšè—æ»šåŠ¨æ¡ã€‚Addonså¯ä»¥è®¾ç½®æ›´å¤šçš„æ»šåŠ¨æ¡æ¨¡å¼ã€‚</p><p><strong>coverGutterNextToScrollbar: boolean</strong><br>å½“fixedGutterå¯ç”¨ï¼Œå¹¶ä¸”å­˜åœ¨æ°´å¹³æ»šåŠ¨æ¡æ—¶ï¼Œåœ¨æ»šåŠ¨æ¡æœ€å·¦ä¾§é»˜è®¤ä¼šæ˜¾ç¤ºgutterï¼Œå½“æ­¤é¡¹è®¾ç½®ä¸ºtrueæ—¶ï¼Œgutterä¼šè¢«å¸¦æœ‰CodeMirror-gutter-fillerç±»çš„å…ƒç´ é®æŒ¡ã€‚<br><strong>inputStyle: string</strong><br>é€‰æ‹©CodeMirrorå¤„ç†è¾“å…¥å’Œç„¦ç‚¹çš„æ–¹å¼ã€‚æ ¸å¿ƒåº“å®šä¹‰äº†textareaå’Œcontenteditableè¾“å…¥æ¨¡å¼ã€‚åœ¨ç§»åŠ¨æµè§ˆå™¨ä¸Šï¼Œé»˜è®¤æ˜¯contenteditableï¼Œåœ¨æ¡Œé¢æµè§ˆå™¨ä¸Šï¼Œé»˜è®¤æ˜¯textareaã€‚åœ¨contenteditableæ¨¡å¼ä¸‹å¯¹IMEå’Œå±å¹•é˜…è¯»å™¨æ”¯æŒæ›´å¥½ã€‚</p><p><strong>readOnly: boolean|string</strong><br>ç¼–è¾‘å™¨æ˜¯å¦åªè¯»ã€‚å¦‚æœè®¾ç½®ä¸ºé¢„è®¾çš„å€¼ â€œnocursorâ€ï¼Œé‚£ä¹ˆé™¤äº†è®¾ç½®åªè¯»å¤–ï¼Œç¼–è¾‘åŒºåŸŸè¿˜ä¸èƒ½è·å¾—ç„¦ç‚¹ã€‚</p><p><strong>showCursorWhenSelecting: boolean</strong><br>åœ¨é€‰æ‹©æ—¶æ˜¯å¦æ˜¾ç¤ºå…‰æ ‡ï¼Œé»˜è®¤ä¸ºfalseã€‚</p><p><strong>lineWiseCopyCut: boolean</strong><br>å¯ç”¨æ—¶ï¼Œå¦‚æœåœ¨å¤åˆ¶æˆ–å‰ªåˆ‡æ—¶æ²¡æœ‰é€‰æ‹©æ–‡æœ¬ï¼Œé‚£ä¹ˆå°±ä¼šè‡ªåŠ¨æ“ä½œå…‰æ ‡æ‰€åœ¨çš„æ•´è¡Œã€‚</p><p><strong>undoDepth: integer</strong><br>æœ€å¤§æ’¤æ¶ˆæ¬¡æ•°ï¼Œé»˜è®¤ä¸º200ï¼ˆåŒ…æ‹¬é€‰ä¸­å†…å®¹æ”¹å˜äº‹ä»¶ï¼‰ ã€‚</p><p><strong>historyEventDelay: integer</strong><br>åœ¨è¾“å…¥æˆ–åˆ é™¤æ—¶å¼•å‘å†å²äº‹ä»¶å‰çš„æ¯«ç§’æ•°ã€‚</p><p><strong>tabindex: integer</strong><br>ç¼–è¾‘å™¨çš„tabindexã€‚</p><p><strong>autofocus: boolean</strong><br>æ˜¯å¦åœ¨åˆå§‹åŒ–æ—¶è‡ªåŠ¨è·å–ç„¦ç‚¹ã€‚é»˜è®¤æƒ…å†µæ˜¯å…³é—­çš„ã€‚ä½†æ˜¯ï¼Œåœ¨ä½¿ç”¨textareaå¹¶ä¸”æ²¡æœ‰æ˜ç¡®æŒ‡å®šå€¼çš„æ—¶å€™ä¼šè¢«è‡ªåŠ¨è®¾ç½®ä¸ºtrueã€‚</p><p><strong>dragDrop: boolean</strong><br>æ˜¯å¦å…è®¸æ‹–æ”¾ï¼Œé»˜è®¤ä¸ºtrueã€‚</p><p><strong>allowDropFileTypes: array<string></string></strong><br>é»˜è®¤ä¸ºnullã€‚å½“è®¾ç½®æ­¤é¡¹æ—¶ï¼Œåªæ¥æ”¶åŒ…å«åœ¨æ­¤æ•°ç»„å†…çš„æ–‡ä»¶ç±»å‹æ‹–å…¥ç¼–è¾‘å™¨ã€‚æ–‡ä»¶ç±»å‹ä¸ºMIMEåç§°ã€‚</p><p><strong>cursorBlinkRate: number</strong><br>å…‰æ ‡é—ªåŠ¨çš„é—´éš”ï¼Œå•ä½ä¸ºæ¯«ç§’ã€‚é»˜è®¤ä¸º530ã€‚å½“è®¾ç½®ä¸º0æ—¶ï¼Œä¼šç¦ç”¨å…‰æ ‡é—ªåŠ¨ã€‚è´Ÿæ•°ä¼šéšè—å…‰æ ‡ã€‚</p><p><strong>cursorScrollMargin: number</strong><br>å½“å…‰æ ‡é è¿‘å¯è§†åŒºåŸŸè¾¹ç•Œæ—¶ï¼Œå…‰æ ‡è·ç¦»ä¸Šæ–¹å’Œä¸‹æ–¹çš„è·ç¦»ã€‚é»˜è®¤ä¸º0 ã€‚</p><p><strong>cursorHeight: number</strong><br>å…‰æ ‡é«˜åº¦ã€‚é»˜è®¤ä¸º1ï¼Œä¹Ÿå°±æ˜¯æ’‘æ»¡è¡Œé«˜ã€‚å¯¹ä¸€äº›å­—ä½“ï¼Œè®¾ç½®0.85çœ‹èµ·æ¥ä¼šæ›´å¥½ã€‚</p><p><strong>resetSelectionOnContextMenu: boolean</strong><br>è®¾ç½®åœ¨é€‰æ‹©æ–‡æœ¬å¤–ç‚¹å‡»æ‰“å¼€ä¸Šä¸‹æ–‡èœå•æ—¶ï¼Œæ˜¯å¦å°†å…‰æ ‡ç§»åŠ¨åˆ°ç‚¹å‡»å¤„ã€‚é»˜è®¤ä¸ºtrueã€‚</p><p><strong>workTime, workDelay: number</strong><br>é€šè¿‡ä¸€ä¸ªå‡çš„åå°çº¿ç¨‹é«˜äº® workTime æ—¶é•¿ï¼Œç„¶åä½¿ç”¨ timeout ä¼‘æ¯ workDelay æ—¶é•¿ã€‚é»˜è®¤ä¸º200å’Œ300 ã€‚ï¼ˆå®Œå…¨ä¸æ‡‚è¿™ä¸ªåŠŸèƒ½æ˜¯åœ¨è¯´å•¥ï¼‰</p><p><strong>pollInterval: number</strong><br>æŒ‡æ˜CodeMirrorå‘å¯¹åº”çš„textareaæ»šåŠ¨ï¼ˆå†™æ•°æ®ï¼‰çš„é€Ÿåº¦ï¼ˆè·å¾—ç„¦ç‚¹æ—¶ï¼‰ã€‚å¤§å¤šæ•°çš„è¾“å…¥éƒ½æ˜¯é€šè¿‡äº‹ä»¶æ•è·ï¼Œä½†æ˜¯æœ‰çš„è¾“å…¥æ³•ï¼ˆå¦‚IMEï¼‰åœ¨æŸäº›æµè§ˆå™¨ä¸Šå¹¶ä¸ä¼šç”Ÿæˆäº‹ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨æ•°æ®æ»šåŠ¨ã€‚é»˜è®¤ä¸º100æ¯«ç§’ã€‚</p><p><strong>flattenSpans: boolean</strong><br>é»˜è®¤æƒ…å†µä¸‹ï¼ŒCodeMirrorä¼šå°†ä½¿ç”¨ç›¸åŒclassçš„ä¸¤ä¸ªspanåˆå¹¶æˆä¸€ä¸ªã€‚é€šè¿‡è®¾ç½®æ­¤é¡¹ä¸ºfalseç¦ç”¨æ­¤åŠŸèƒ½ã€‚</p><p><strong>addModeClass: boolean</strong><br>å½“å¯ç”¨æ—¶ï¼ˆé»˜è®¤ç¦ç”¨ï¼‰ï¼Œä¼šç»™æ¯ä¸ªæ ‡è®°æ·»åŠ é¢å¤–çš„è¡¨ç¤ºç”Ÿæˆæ ‡è®°çš„modeçš„ä»¥cm-må¼€å¤´çš„CSSæ ·å¼ç±»ã€‚ä¾‹å¦‚ï¼ŒXML modeäº§ç”Ÿçš„æ ‡è®°ï¼Œä¼šæ·»åŠ cm-m-xmlç±»ã€‚</p><p><strong>maxHighlightLength: number</strong><br>å½“éœ€è¦é«˜äº®å¾ˆé•¿çš„è¡Œæ—¶ï¼Œä¸ºäº†ä¿æŒå“åº”æ€§èƒ½ï¼Œå½“åˆ°è¾¾æŸäº›ä½ç½®æ—¶ï¼Œç¼–è¾‘å™¨ä¼šç›´æ¥å°†å…¶ä»–è¡Œè®¾ç½®ä¸ºçº¯æ–‡æœ¬(plain text)ã€‚é»˜è®¤ä¸º10000ï¼Œå¯ä»¥è®¾ç½®ä¸ºInfinityæ¥å…³é—­æ­¤åŠŸèƒ½ã€‚</p><p><strong>viewportMargin: integer</strong><br>æŒ‡å®šå½“å‰æ»šåŠ¨åˆ°è§†å›¾ä¸­å†…å®¹ä¸Šæ–¹å’Œä¸‹æ–¹è¦æ¸²æŸ“çš„è¡Œæ•°ã€‚è¿™ä¼šå½±å“åˆ°æ»šåŠ¨æ—¶è¦æ›´æ–°çš„è¡Œæ•°ã€‚é€šå¸¸æƒ…å†µä¸‹åº”è¯¥ä½¿ç”¨é»˜è®¤å€¼10ã€‚å¯ä»¥è®¾ç½®å€¼ä¸ºInfinityå§‹ç»ˆæ¸²æŸ“æ•´ä¸ªæ–‡æ¡£ã€‚æ³¨æ„ï¼šè¿™æ ·è®¾ç½®åœ¨å¤„ç†å¤§æ–‡æ¡£æ—¶ä¼šå½±å“æ€§èƒ½ã€‚</p><hr><p>å¦‚æœä½ è¦è®¾ç½®ä»£ç æ¡†çš„å¤§å°è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">editor.setSize(<span class="string">'800px'</span>, <span class="string">'950px'</span>);     <span class="comment">//è®¾ç½®ä»£ç æ¡†çš„é•¿å®½</span></span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œå¦‚æœä½ æƒ³ç»™ä»£ç æ¡†èµ‹å€¼ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">editor.setValue(<span class="string">""</span>);    <span class="comment">//ç»™ä»£ç æ¡†èµ‹å€¼</span></span><br><span class="line">editor.getValue();    <span class="comment">//è·å–ä»£ç æ¡†çš„å€¼</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ å†æƒ³åœ¨å…¶ä»–åœ°æ–¹è®¾ç½®æ–°çš„å±æ€§ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å†™ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">editor.setOption(<span class="string">"readOnly"</span>, <span class="literal">true</span>);<span class="comment">//ç±»ä¼¼è¿™ç§</span></span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä¸Šé¢å°±å¤§æ¦‚è®²äº†ä¸‹ Code Mirror æ€ä¹ˆä½¿ç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæœå§</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171209/C1303F6F9A.png-1" alt="mark"></p><p>æˆ‘è‡ªæˆ‘æ„Ÿè§‰è¿˜æ˜¯å¯ä»¥çš„å“ˆï¼</p><p>é‡Œé¢æ‰€æœ‰æ¶‰åŠçš„ä»£ç åœ¨ GitHub é‡Œå¯ä»¥ä¸‹è½½ï¼š<a href="https://github.com/zhisheng17/CoderBlog/tree/master/CodeMirror" target="_blank" rel="noopener">https://github.com/zhisheng17/CoderBlog/tree/master/CodeMirror</a></p><p>æ–‡ç« åŸåˆ›ï¼Œè½¬è½½åŠ¡å¿…è¯·æ³¨æ˜åŸåˆ›åœ°å€ï¼š<a href="http://www.54tianzhisheng.cn/2017/12/09/CodeMirror/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2017/12/09/CodeMirror/</a></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>fuck  æ— è„‘çš„æ¨é…·çˆ¬è™«ï¼Œç«Ÿç„¶æŠŠæˆ‘æ‰€æœ‰æ–‡ç« æœ€åçš„åŸåˆ›é“¾æ¥éƒ½ç»™å»æ‰äº†ï¼Œè¿™æ˜¯æˆ‘ç°åœ¨æƒ³åˆ°çš„ä¸€ç§å¯¹ç­–æ–¹æ³•ã€‚ä»»ä½•å…¶ä»–å½¢å¼çš„è½¬è½½ï¼Œä¹Ÿå¿…é¡»æŠŠæˆ‘æ–‡ç« æ‰€æœ‰å†…å®¹åŠ ä¸Šï¼Œä¸å¾—åšä»»ä½•ä¿®æ”¹ï¼Œå¦åˆ™è¯·åˆ«è½¬è½½äº†ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ohfk1r827.bkt.clouddn.com/blog/171209/bA6g59gGB5.jpg-1&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‰æ&quot;&gt;&lt;a href=&quot;#å‰æ&quot; class=&quot;headerlink&quot; title=&quot;å‰æ&quot;&gt;&lt;/a&gt;å‰æ&lt;/h3&gt;&lt;p&gt;å†™è¿™ä¸ªçš„ç›®çš„æ˜¯å› ä¸ºä¹‹å‰é¡¹ç›®é‡Œç”¨åˆ°è¿‡ CodeMirrorï¼Œè§‰å¾—ä½œä¸ºä¸€æ¬¾åœ¨çº¿ä»£ç ç¼–è¾‘å™¨è¿˜æ˜¯ä¸é”™ï¼Œä¹Ÿçœ‹åˆ°è¿‡æœ‰äº›ç½‘ç«™ç”¨åˆ°è¿‡åœ¨çº¿ä»£ç ç¼–è¾‘ï¼Œå½“ç„¶æˆ‘ä¸çŸ¥é“ä»–ä»¬æ˜¯ç”¨ä»€ä¹ˆåšçš„ï¼Œè¿™é‡Œæˆ‘æŠŠå…¬å¸é¡¹ç›®é‡Œç”¨åˆ°çš„é‚£éƒ¨åˆ†æŠ½å‡ºæ¥ï¼Œå•ç‹¬å†™ç¯‡åšå®¢ï¼Œå¹¶æŠŠæŠ½å‡ºæ¥çš„é‚£éƒ¨åˆ†ä»£ç æäº¤åˆ° GitHub å»ï¼ˆ&lt;a href=&quot;https://github.com/zhisheng17/CoderBlog/tree/master/CodeMirror&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;åœ°å€&lt;/a&gt;ï¼‰ï¼Œä»¥é˜²æ—¥åå¯èƒ½ä¼šå†æ¬¡ç”¨åˆ°ï¼ˆæ²¡å‡†æ¯•ä¸šè®¾è®¡é‡Œå¯èƒ½ç”¨çš„åˆ°ï¼‰ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="http://yoursite.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>Netty æºç é˜…è¯»ä¹‹åˆå§‹ç¯å¢ƒæ­å»º</title>
    <link href="http://yoursite.com/2017/12/08/netty-01-env/"/>
    <id>http://yoursite.com/2017/12/08/netty-01-env/</id>
    <published>2017-12-07T16:00:00.000Z</published>
    <updated>2018-01-21T11:21:15.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ohfk1r827.bkt.clouddn.com/p4.jpeg-1" alt=""></p><h3 id="Netty-ç®€ä»‹"><a href="#Netty-ç®€ä»‹" class="headerlink" title="Netty ç®€ä»‹"></a>Netty ç®€ä»‹</h3><p>Netty æ˜¯ç”± JBOSS æä¾›çš„ä¸€ä¸ªå¼€æºçš„ java ç½‘ç»œç¼–ç¨‹æ¡†æ¶ï¼Œä¸»è¦æ˜¯å¯¹ java çš„ nio åŒ…è¿›è¡Œäº†å†æ¬¡å°è£…ã€‚Netty æ¯” java åŸç”Ÿçš„nio åŒ…æä¾›äº†æ›´åŠ å¼ºå¤§ã€ç¨³å®šçš„åŠŸèƒ½å’Œæ˜“äºä½¿ç”¨çš„ apiã€‚ netty çš„ä½œè€…æ˜¯ Trustin Leeï¼Œè¿™æ˜¯ä¸€ä¸ªéŸ©å›½äººï¼Œä»–è¿˜å¼€å‘äº†å¦å¤–ä¸€ä¸ªè‘—åçš„ç½‘ç»œç¼–ç¨‹æ¡†æ¶ï¼Œminaã€‚äºŒè€…åœ¨å¾ˆå¤šæ–¹é¢éƒ½ååˆ†ç›¸ä¼¼ï¼Œå®ƒä»¬çš„çº¿ç¨‹æ¨¡å‹ä¹Ÿæ˜¯åŸºæœ¬ä¸€è‡´ ã€‚ä¸è¿‡ netty ç¤¾åŒºçš„æ´»è·ƒç¨‹åº¦è¦ mina é«˜å¾—å¤šã€‚<br><a id="more"></a><br>ç‰ˆæœ¬é€‰æ‹©ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171208/f3lI8Ifgdg.png-1" alt="mark"></p><p>3.x ç›®å‰ä¼ä¸šä½¿ç”¨æœ€å¤šçš„ç‰ˆæœ¬ï¼Œæœ€ä¸ºç¨³å®šã€‚ä¾‹å¦‚dubboä½¿ç”¨çš„å°±æ˜¯3.xç‰ˆæœ¬</p><p>4.x å¼•å…¥äº†å†…å­˜æ± ç­‰é‡å¤§ç‰¹æ€§ï¼Œå¯ä»¥æœ‰æ•ˆçš„é™ä½GCè´Ÿè½½ï¼Œrocketmqä½¿ç”¨çš„å°±æ˜¯4.x</p><p>5.x å·²ç»è¢«åºŸå¼ƒäº†ï¼Œå…·ä½“å¯å‚è§ <a href="https://github.com/netty/netty/issues/4466" target="_blank" rel="noopener">https://github.com/netty/netty/issues/4466</a></p><p>æ‰€ä»¥è¿™é‡Œæˆ‘æ­å»ºçš„æºç é˜…è¯»ç¯å¢ƒæ˜¯å­˜åœ¨çš„ 4.1 ç‰ˆæœ¬ã€‚</p><h3 id="å‡†å¤‡å·¥å…·"><a href="#å‡†å¤‡å·¥å…·" class="headerlink" title="å‡†å¤‡å·¥å…·"></a>å‡†å¤‡å·¥å…·</h3><ul><li>IDEA 2017</li></ul><h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h3><p>åœ¨ IDEA ä¸­å¯¼å…¥é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/netty/netty.git" target="_blank" rel="noopener">https://github.com/netty/netty.git</a>   ï¼Œç„¶åå°±ä¼šè‡ªåŠ¨ä¸‹è½½é¡¹ç›®æ‰€æœ‰çš„ä¾èµ–ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼š</p><p><strong>å¿…é¡»åœ¨ IDEA ä¸­å°† Profiles ä¸­çš„æ‰€æœ‰éƒ½å‹¾é€‰ä¸Š</strong>ï¼Œå¦åˆ™ä¼šå¯¼è‡´å¾ˆå¤š jar åŒ…æ‹‰ä¸ä¸‹æ¥ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171208/F8fB27dL52.png-1" alt="mark"></p><p>ç„¶åå°±æ˜¯è€å¿ƒç­‰å¾…äº†ï¼Œä¸€ç›´åˆ°æ‰€æœ‰çš„ jar åŒ…æ‹‰å–ä¸‹æ¥ã€‚</p><p>ä¸­é€”ä½ å¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171208/Hf6LADAHlh.png-1" alt="mark"></p><p>è¿™é‡Œçš„æ˜¯ 1.5 ç‰ˆæœ¬ï¼Œå¯¼è‡´æˆ‘ä»¬å¦‚æœæƒ³ç”¨äº›é«˜çº§çš„è¯­æ³•ä¼šå®Œå…¨æŠ¥é”™ã€‚</p><p>å¦‚æœä½ æŠŠè¿™ä¸ªç‰ˆæœ¬è®¾ç½®ä¸º 8 çš„ç‰ˆæœ¬åï¼Œ</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171208/EgEL2iG463.png-1" alt="mark"></p><p>ä¸‹é¢ä¼šæç¤ºä½ ï¼Œé¡¹ç›®æ˜¯ä» maven å¯¼è¿‡æ¥çš„ï¼Œå¦‚æœ maven é…ç½®æ”¹å˜é‡æ–° reimport åï¼Œä»»ä½•åœ¨è¿™é‡Œçš„æ”¹å˜éƒ½ä¼šä¸¢å¤±ã€‚</p><p>åŒæ—¶ä½ ä¼šçœ‹åˆ°é¡¹ç›®çš„ Java Compile ç‰ˆæœ¬æ˜¯ 1.5 çš„ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171208/CLCLeiJGfK.png-1" alt="mark"></p><p>åŒæ ·ï¼Œä½ åœ¨è¿™é‡Œä¿®æ”¹ï¼Œå¦‚æœ maven é…ç½®æ”¹å˜é‡æ–° reimport åï¼Œä»»ä½•åœ¨è¿™é‡Œçš„æ”¹å˜ä¹Ÿéƒ½ä¼šä¸¢å¤±ã€‚æˆ‘ä¼°è®¡ç¢°åˆ°è¿™ç§é—®é¢˜çš„ä¸å°‘ã€‚</p><p>æ€»ç»“èµ·æ¥åŸå› å°±æ˜¯ maven ä¸­çš„ç¼–è¯‘ç‰ˆæœ¬å°±æ˜¯ 1.5 çš„ï¼Œæ‰€ä»¥æ‰ä¼šå¯¼è‡´è¿™é‡Œçš„é—®é¢˜å‘ç”Ÿï¼Œå¦‚æœæƒ³å®Œå…¨ä¿®æ”¹å¥½ï¼ˆä¸€åŠ³æ°¸é€¸ï¼‰ã€‚è¯·ç›´æ¥å¯¹ pom æ–‡ä»¶åŠ¨åˆ€ï¼Œå°±æ˜¯å¹²ï¼</p><p>åªéœ€æŠŠå¤§é¡¹ç›®ï¼ˆnetty-parentï¼‰çš„é‚£ä¸ª pom.xml ä¿®æ”¹ä¸ªå±æ€§ï¼ŒæŠŠç‰ˆæœ¬ä¿¡æ¯æé«˜åˆ° 1.8ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171208/gkCi51aAg2.png-1" alt="mark"></p><p>åœ¨ç­‰å¾…å®ƒæ‹‰å– jar åŒ…å§</p><p>æå®Œäº†ä¹‹åå‘ç°è¿˜æœ‰ä¸¤ä¸ªæ¨¡å—ï¼ˆnetty-bomã€netty-dev-toolsï¼‰ä¸èƒ½è®¾ç½®åˆ° ç‰ˆæœ¬ï¼Œåªèƒ½æ‰‹åŠ¨çš„å’Œä¸Šé¢é‚£ç§è®¾ç½® language level å’Œ Java compile ä¸º 1.8 äº†ã€‚</p><p>æœ€åä½ ä¼šå‘ç°è¿™é‡Œçš„å®Œå…¨æ²¡æœ‰æŠ¥é”™äº†ï¼Œå¼€å¿ƒä¸ï¼Ÿ</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171208/D0liIHeAFa.png-1" alt="mark"></p><h3 id="ä»£ç è¡Œæ•°ç»Ÿè®¡"><a href="#ä»£ç è¡Œæ•°ç»Ÿè®¡" class="headerlink" title="ä»£ç è¡Œæ•°ç»Ÿè®¡"></a>ä»£ç è¡Œæ•°ç»Ÿè®¡</h3><p>é¢ï¼Œçœ‹åˆ°é¡¹ç›®è¿™ä¹ˆå¤šå­æ¨¡å—ï¼Œä½ éƒ½ä¸çŸ¥é“è¯¥ä»å“ªé‡Œä¸‹æ‰‹å¼€å§‹çœ‹ï¼Œé‚£ä¹ˆæˆ‘å°±å†™äº†ä¸ªç®€å•çš„ Java è„šæœ¬å»å¤§æ¦‚çš„ç»Ÿè®¡æ¯ä¸ªå­é¡¹ç›®ä»£ç çš„è¡Œæ•°ã€‚å…ˆçœ‹çœ‹ç»Ÿè®¡ç»“æœï¼š</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/171208/GhmkD1K8Kd.png-1" alt="mark"></p><p>æ•´ä¸ªé¡¹ç›®å·®ä¸å¤š 23 ä¸‡ã€‚ï¼ˆè¿‡æ»¤äº†ç©ºè¡Œã€å„ç§æ³¨é‡Šå’Œ <code>@Override</code> ä¹‹åçš„ Java ä»£ç è¡Œæ•°ï¼‰ï¼Œé è¿™ä¸ªæ•°å­—å¾ˆå“äººï¼</p><p>æ¥çœ‹çœ‹æˆ‘çš„è„šæœ¬ä»£ç å§ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> count = Files.walk(Paths.get(<span class="string">"C:\\JetBrains\\IDEAProject\\netty\\transport-udt"</span>))    <span class="comment">// é€’å½’è·å¾—é¡¹ç›®ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">            .filter(file -&gt; !Files.isDirectory(file))   <span class="comment">// ç­›é€‰å‡ºæ–‡ä»¶</span></span><br><span class="line">            .filter(file -&gt; file.toString().endsWith(<span class="string">".java"</span>))  <span class="comment">// ç­›é€‰å‡º java æ–‡ä»¶</span></span><br><span class="line">            .flatMap(Try.of(file -&gt; Files.lines(file), Stream.empty()))     <span class="comment">// å°†ä¼šæŠ›å‡ºå—æ£€å¼‚å¸¸çš„ Lambda åŒ…è£…ä¸º æŠ›å‡ºéå—æ£€å¼‚å¸¸çš„ Lambda</span></span><br><span class="line">            .filter(line -&gt; !line.trim().isEmpty())         <span class="comment">// è¿‡æ»¤æ‰ç©ºè¡Œ</span></span><br><span class="line">            .filter(line -&gt; !line.trim().startsWith(<span class="string">"//"</span>))  <span class="comment">//è¿‡æ»¤æ‰ //ä¹‹ç±»çš„æ³¨é‡Š</span></span><br><span class="line">            .filter(line -&gt; !(line.trim().startsWith(<span class="string">"/*"</span>) &amp;&amp; line.trim().endsWith(<span class="string">"*/"</span>)))  <span class="comment">//è¿‡æ»¤æ‰/* */ä¹‹ç±»çš„æ³¨é‡Š</span></span><br><span class="line">            .filter(line -&gt; !(line.trim().startsWith(<span class="string">"/*"</span>) &amp;&amp; !line.trim().endsWith(<span class="string">"*/"</span>)))     <span class="comment">//è¿‡æ»¤æ‰ä»¥ /* å¼€å¤´çš„æ³¨é‡Šï¼ˆå»é™¤ç©ºæ ¼åçš„å¼€å¤´ï¼‰</span></span><br><span class="line">            .filter(line -&gt; !(!line.trim().startsWith(<span class="string">"/*"</span>) &amp;&amp; line.trim().endsWith(<span class="string">"*/"</span>)))     <span class="comment">//è¿‡æ»¤æ‰å·² */ ç»“å°¾çš„æ³¨é‡Š</span></span><br><span class="line">            .filter(line -&gt; !line.trim().startsWith(<span class="string">"*"</span>))   <span class="comment">//è¿‡æ»¤æ‰ javadoc ä¸­çš„æ–‡å­—æ³¨é‡Š</span></span><br><span class="line">            .filter(line -&gt; !line.trim().startsWith(<span class="string">"@Override"</span>))   <span class="comment">//è¿‡æ»¤æ‰æ–¹æ³•ä¸Šå« @Override çš„</span></span><br><span class="line">            .count();</span><br><span class="line">    System.out.println(<span class="string">"ä»£ç è¡Œæ•°ï¼š"</span> + count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åé¢æˆ‘ä¼šæŠŠæˆ‘é˜…è¯»æºç çš„ä¸­æ–‡æ³¨é‡ŠåŠè§£æä¹‹ç±»çš„æ›´æ–°åˆ°æˆ‘çš„ GitHub å»ï¼ˆæ¬¢è¿å…³æ³¨ã€æˆ‘æ˜¯æ¥éª— star çš„ï¼‰ï¼Œ<a href="https://github.com/zhisheng17/netty" target="_blank" rel="noopener">https://github.com/zhisheng17/netty</a>    ï¼Œå¦‚æœä½ ä¸æƒ³å»è‡ªå·±è®¾ç½®ä¸Šé¢æ‰€è¯´çš„è¿™äº›ï¼ˆå·æ‡’ï¼‰ï¼Œé‚£å°±ç›´æ¥ fork æˆ‘çš„è¿™ä»½å§ï¼</p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>ç¯å¢ƒæ­å»ºå°±å†™åˆ°è¿™é‡Œäº†ï¼Œè½¬è½½è¯·æ³¨æ˜åœ°å€ï¼š<a href="http://www.54tianzhisheng.cn/2017/12/08/netty-01-env/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2017/12/08/netty-01-env/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ohfk1r827.bkt.clouddn.com/p4.jpeg-1&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;Netty-ç®€ä»‹&quot;&gt;&lt;a href=&quot;#Netty-ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;Netty ç®€ä»‹&quot;&gt;&lt;/a&gt;Netty ç®€ä»‹&lt;/h3&gt;&lt;p&gt;Netty æ˜¯ç”± JBOSS æä¾›çš„ä¸€ä¸ªå¼€æºçš„ java ç½‘ç»œç¼–ç¨‹æ¡†æ¶ï¼Œä¸»è¦æ˜¯å¯¹ java çš„ nio åŒ…è¿›è¡Œäº†å†æ¬¡å°è£…ã€‚Netty æ¯” java åŸç”Ÿçš„nio åŒ…æä¾›äº†æ›´åŠ å¼ºå¤§ã€ç¨³å®šçš„åŠŸèƒ½å’Œæ˜“äºä½¿ç”¨çš„ apiã€‚ netty çš„ä½œè€…æ˜¯ Trustin Leeï¼Œè¿™æ˜¯ä¸€ä¸ªéŸ©å›½äººï¼Œä»–è¿˜å¼€å‘äº†å¦å¤–ä¸€ä¸ªè‘—åçš„ç½‘ç»œç¼–ç¨‹æ¡†æ¶ï¼Œminaã€‚äºŒè€…åœ¨å¾ˆå¤šæ–¹é¢éƒ½ååˆ†ç›¸ä¼¼ï¼Œå®ƒä»¬çš„çº¿ç¨‹æ¨¡å‹ä¹Ÿæ˜¯åŸºæœ¬ä¸€è‡´ ã€‚ä¸è¿‡ netty ç¤¾åŒºçš„æ´»è·ƒç¨‹åº¦è¦ mina é«˜å¾—å¤šã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Netty" scheme="http://yoursite.com/tags/Netty/"/>
    
  </entry>
  
</feed>
