<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>zhishengçš„åšå®¢</title>
  
  <subtitle>å‘è¦ä¸€ä¸ªä¸ªå¡«ï¼Œè·¯è¦ä¸€æ­¥æ­¥èµ°ï¼</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-08-04T15:01:03.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>zhisheng</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” ç¯å¢ƒæ­å»º</title>
    <link href="http://yoursite.com/2018/08/05/es-code01/"/>
    <id>http://yoursite.com/2018/08/05/es-code01/</id>
    <published>2018-08-04T16:00:00.000Z</published>
    <updated>2018-08-04T15:01:03.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fty28q9ljkj31hc0zbqf5.jpg" alt="girl-3551832_1920"></p><a id="more"></a><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="zhisheng"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/08/25/es-code01/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/08/25/es-code01/</a></p><h3 id="è½¯ä»¶ç¯å¢ƒ"><a href="#è½¯ä»¶ç¯å¢ƒ" class="headerlink" title="è½¯ä»¶ç¯å¢ƒ"></a>è½¯ä»¶ç¯å¢ƒ</h3><p>1ã€Intellij Idea:2018.2ç‰ˆæœ¬</p><p>2ã€Elasticsearch æºç ç‰ˆæœ¬: 6.3.2</p><p>3ã€JDK:10.0.2</p><p>4ã€Gradle : å»ºè®® 4.5 åŠä»¥ä¸Šç‰ˆæœ¬</p><p>5ã€Macbook Pro 2017 </p><h3 id="å®‰è£…-ElasticSearch"><a href="#å®‰è£…-ElasticSearch" class="headerlink" title="å®‰è£… ElasticSearch"></a>å®‰è£… ElasticSearch</h3><p> å» <a href="https://www.elastic.co/downloads/past-releases" target="_blank" rel="noopener">https://www.elastic.co/downloads/past-releases</a> è¿™é‡Œæ‰¾åˆ° ElasticSearch 6.3.2 ç‰ˆæœ¬ï¼Œä¸‹è½½åç„¶åè§£å‹å°±å¥½äº†ã€‚ï¼ˆæ³¨æ„ï¼šè¿™ä¸ªç‰ˆæœ¬éœ€è¦å’Œä¸‹é¢çš„æºç ç‰ˆæœ¬ä¸€è‡´ï¼‰</p><h3 id="ä¸‹è½½æºç "><a href="#ä¸‹è½½æºç " class="headerlink" title="ä¸‹è½½æºç "></a>ä¸‹è½½æºç </h3><p>ä» <a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener">https://github.com/elastic/elasticsearch</a> ä¸Šä¸‹è½½ç›¸åº”ç‰ˆæœ¬çš„æºä»£ç ï¼Œè¿™é‡Œå»ºè®®ç”¨ git clone ï¼Œè¿™æ ·çš„è¯åé¢ä½ å¯ä»¥éšæ„åˆ‡æ¢åˆ° ElasticSearch çš„å…¶ä»–ç‰ˆæœ¬å»ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:elastic/elasticsearch.git</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çœ‹ä¸‹æœ‰å“ªäº›ç‰ˆæœ¬çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°äº†ç›®å‰æºç ç‰ˆæœ¬æœ€æ–°çš„ç‰ˆæœ¬çš„ç¨³å®šç‰ˆä¸ºï¼šv6.3.2</p><p>åˆ‡æ¢åˆ°è¯¥ç‰ˆæœ¬ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout v6.3.2</span><br></pre></td></tr></table></figure><p>äºæ˜¯å°±å¯ä»¥åˆ‡æ¢åˆ°è¯¥ç¨³å®šç‰ˆæœ¬äº†ã€‚æ¥ä¸‹æ¥ä¸è¦ç›´æ¥å¯¼å…¥åˆ° IDEA/Eclipse ä¸­ã€‚</p><h3 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h3><p><a href="https://github.com/elastic/elasticsearch/blob/master/CONTRIBUTING.md#configuring-ides-and-running-tests" target="_blank" rel="noopener">GitHub è¿™é‡Œ</a>å·²ç»æœ‰æè¿°å¦‚ä½•å¯¼å…¥ IDEA/Eclipse ä¸­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">JDK 10 is required to build Elasticsearch. You must have a JDK 10 installation with the environment variable JAVA_HOME referencing the path to Java home for your JDK 10 installation. By default, tests use the same runtime as JAVA_HOME. However, since Elasticsearch, supports JDK 8 the build supports compiling with JDK 10 and testing on a JDK 8 runtime; to do this, set RUNTIME_JAVA_HOME pointing to the Java home of a JDK 8 installation. Note that this mechanism can be used to test against other JDKs as well, this is not only limited to JDK 8.</span><br><span class="line"></span><br><span class="line">Note: It is also required to have JAVA7_HOME, JAVA8_HOME and JAVA10_HOME available so that the tests can pass.</span><br><span class="line"></span><br><span class="line">Warning: do not use sdkman for Java installations which do not have proper jrunscript for jdk distributions.</span><br><span class="line"></span><br><span class="line">Elasticsearch uses the Gradle wrapper for its build. You can execute Gradle using the wrapper via the gradlew script in the root of the repository.</span><br><span class="line"></span><br><span class="line">Configuring IDEs And Running Tests</span><br><span class="line">Eclipse users can automatically configure their IDE: ./gradlew eclipse then File: Import: Existing Projects into Workspace. Select the option Search for nested projects. Additionally you will want to ensure that Eclipse is using 2048m of heap by modifying eclipse.ini accordingly to avoid GC overhead errors.</span><br><span class="line"></span><br><span class="line">IntelliJ users can automatically configure their IDE: ./gradlew idea then File-&gt;New Project From Existing Sources. Point to the root of the source directory, select Import project from external model-&gt;Gradle, enable Use auto-import. In order to run tests directly from IDEA 2017.2 and above, it is required to disable the IDEA run launcher in order to avoid idea_rt.jar causing &quot;jar hell&quot;. This can be achieved by adding the -Didea.no.launcher=true JVM option. Alternatively, idea.no.launcher=true can be set in the idea.properties file which can be accessed under Help &gt; Edit Custom Properties (this will require a restart of IDEA). For IDEA 2017.3 and above, in addition to the JVM option, you will need to go to Run-&gt;Edit Configurations-&gt;...-&gt;Defaults-&gt;JUnit and verify that the Shorten command line setting is set to user-local default: none. You may also need to remove ant-javafx.jar from your classpath if that is reported as a source of jar hell.</span><br><span class="line"></span><br><span class="line">To run an instance of elasticsearch from the source code run ./gradlew run</span><br><span class="line"></span><br><span class="line">The Elasticsearch codebase makes heavy use of Java asserts and the test runner requires that assertions be enabled within the JVM. This can be accomplished by passing the flag -ea to the JVM on startup.</span><br><span class="line"></span><br><span class="line">For IntelliJ, go to Run-&gt;Edit Configurations...-&gt;Defaults-&gt;JUnit-&gt;VM options and input -ea.</span><br><span class="line"></span><br><span class="line">For Eclipse, go to Preferences-&gt;Java-&gt;Installed JREs and add -ea to VM Arguments.</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¯´äº†ä¸‹å¦‚ä½•ç¼–è¯‘ Elasticsearch å’Œå¦‚ä½•åœ¨ ide ä¸­é…ç½®å¥½ç¯å¢ƒã€‚ä¸‹é¢è¯´ä¸‹æ­¥éª¤å§ï¼šï¼ˆè¿™é‡Œæˆ‘åªæ˜¯æ¼”ç¤ºåœ¨ IDEA ä¸­å¦‚ä½•å¯¼å…¥ï¼‰</p><p>1ã€åœ¨æˆ‘ä»¬ä¸‹è½½çš„ Elasticsearch æ ¹ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤ï¼š(æ‰§è¡Œå·²ç»å†™å¥½çš„è„šæœ¬ gradlew)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew idea</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ç‰ˆæœ¬å’Œæˆ‘çš„ä¸€è‡´ï¼Œæ—©çš„ç‰ˆæœ¬å¯èƒ½æ²¡æœ‰è¯¥æ‰§è¡Œè„šæœ¬ï¼Œéœ€è¦æ‰§è¡Œ <code>gradle idea</code> å‘½ä»¤</p><p>æœ€åç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://ws4.sinaimg.cn/large/0069RVTdly1fty1xfk9m9j31kw0ib494.jpg" alt="idea-config"></p><p>2ã€å¯¼å…¥ IDEA </p><p>idea ä¸­ <code>File -&gt; New Project From Existing Sources</code> é€‰æ‹©ä½ ä¸‹è½½çš„ Elasticsearch æ ¹ç›®å½•ï¼Œç„¶åç‚¹ <code>open</code> ï¼Œä¹‹å <code>Import project from external model -&gt; Gradle</code> , é€‰ä¸­ <code>Use auto-import</code>, ç„¶åå°±å¯ä»¥äº†ã€‚</p><p>å¯¼å…¥è¿›å»åï¼Œgradle åˆä¼šç¼–è¯‘ä¸€éï¼Œéœ€è¦ç­‰ä¸€ä¼šï¼Œå¥½äº†ä¹‹åå¦‚ä¸‹ï¼š</p><p><img src="https://ws3.sinaimg.cn/large/0069RVTdly1fty1xisz0kj31kw0w07jn.jpg" alt="ok"></p><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><p>æ‰“å¼€ server æ¨¡å—ä¸‹çš„ Elasticsearch ç±»ï¼šorg.elasticsearch.bootstrap.Elasticsearchï¼Œè¿è¡Œé‡Œé¢çš„ main å‡½æ•°ã€‚</p><p>1ã€æŠ¥é”™å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR: the system property [es.path.conf] must be set</span><br></pre></td></tr></table></figure><p><img src="https://ws4.sinaimg.cn/large/0069RVTdly1fty1xdcx6zj30ss0ahjru.jpg" alt="1es-path-conf-must-be-set"></p><p>æˆ‘ä»¬åœ¨è¿è¡Œçš„é…ç½® vm options å¦‚ä¸‹ï¼šï¼ˆåé¢å¯åŠ¨æµç¨‹ä¼šå†™ä¸ºä»€ä¹ˆä¼šæŠ¥è¿™ä¸ªé”™è¯¯ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Des.path.conf=&quot;/usr/local/elasticsearch-6.3.2/config&quot;</span><br></pre></td></tr></table></figure><p><img src="https://ws3.sinaimg.cn/large/0069RVTdly1fty1xebbgxj30v10l9n0w.jpg" alt="2è®¾ç½®es-path-conf"></p><p>2ã€å†æ¬¡è¿è¡Œï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.IllegalStateException: path.home is not configured</span><br><span class="line">at org.elasticsearch.env.Environment.&lt;init&gt;(Environment.java:103)</span><br><span class="line">at org.elasticsearch.env.Environment.&lt;init&gt;(Environment.java:94)</span><br><span class="line">at org.elasticsearch.node.InternalSettingsPreparer.prepareEnvironment(InternalSettingsPreparer.java:86)</span><br><span class="line">at org.elasticsearch.cli.EnvironmentAwareCommand.createEnv(EnvironmentAwareCommand.java:95)</span><br><span class="line">at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86)</span><br><span class="line">at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124)</span><br><span class="line">at org.elasticsearch.cli.Command.main(Command.java:90)</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:93)</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:86)</span><br></pre></td></tr></table></figure><p><img src="https://ws1.sinaimg.cn/large/0069RVTdly1fty1xh2zblj30tk09s40w.jpg" alt="3path-home-not-config"></p><p>æˆ‘ä»¬åœ¨è¿è¡Œçš„é…ç½® vm options å¦‚ä¸‹ï¼šï¼ˆåé¢å¯åŠ¨æµç¨‹ä¼šå†™ä¸ºä»€ä¹ˆä¼šæŠ¥è¿™ä¸ªé”™è¯¯ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Des.path.home=&quot;/usr/local/elasticsearch-6.3.2&quot;</span><br></pre></td></tr></table></figure><p><img src="https://ws4.sinaimg.cn/large/0069RVTdly1fty1xg4ktmj30v10l976r.jpg" alt="4é…ç½®es-path-home"></p><p>3ã€å†æ¬¡è¿è¡Œï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">2018-08-01 09:38:03,974 main ERROR Could not register mbeans java.security.AccessControlException: access denied (&quot;javax.management.MBeanTrustPermission&quot; &quot;register&quot;)</span><br><span class="line">at java.base/java.security.AccessControlContext.checkPermission(AccessControlContext.java:472)</span><br><span class="line">at java.base/java.lang.SecurityManager.checkPermission(SecurityManager.java:371)</span><br><span class="line">at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.checkMBeanTrustPermission(DefaultMBeanServerInterceptor.java:1805)</span><br><span class="line">at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:318)</span><br><span class="line">at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)</span><br><span class="line">at org.apache.logging.log4j.core.jmx.Server.register(Server.java:389)</span><br><span class="line">at org.apache.logging.log4j.core.jmx.Server.reregisterMBeansAfterReconfigure(Server.java:167)</span><br><span class="line">at org.apache.logging.log4j.core.jmx.Server.reregisterMBeansAfterReconfigure(Server.java:140)</span><br><span class="line">at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:556)</span><br><span class="line">at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:261)</span><br><span class="line">at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:206)</span><br><span class="line">at org.apache.logging.log4j.core.config.Configurator.initialize(Configurator.java:220)</span><br><span class="line">at org.apache.logging.log4j.core.config.Configurator.initialize(Configurator.java:197)</span><br><span class="line">at org.elasticsearch.common.logging.LogConfigurator.configureStatusLogger(LogConfigurator.java:171)</span><br><span class="line">at org.elasticsearch.common.logging.LogConfigurator.configure(LogConfigurator.java:140)</span><br><span class="line">at org.elasticsearch.common.logging.LogConfigurator.configure(LogConfigurator.java:119)</span><br><span class="line">at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:294)</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:136)</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:127)</span><br><span class="line">at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86)</span><br><span class="line">at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124)</span><br><span class="line">at org.elasticsearch.cli.Command.main(Command.java:90)</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:93)</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:86)</span><br></pre></td></tr></table></figure><p><img src="https://ws4.sinaimg.cn/large/0069RVTdly1fty1xcqbf1j316r0tbn87.jpg" alt="5access-denied"></p><p>æˆ‘ä»¬åœ¨è¿è¡Œçš„é…ç½® vm options å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Dlog4j2.disable.jmx=true</span><br></pre></td></tr></table></figure><p><img src="https://ws2.sinaimg.cn/large/0069RVTdly1fty1xglydpj30v10l9q5h.jpg" alt="6log4j-disable-jmx"></p><p>4ã€å¦‚æœä½ ç”¨çš„æ˜¯ JDK 1.8 ç¼–è¯‘çš„åº”è¯¥è¿˜ä¼šæŠ¥è¿™ä¸ªé”™è¯¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[2018-08-01T11:02:24,663][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [] uncaught exception in thread [main]</span><br><span class="line">org.elasticsearch.bootstrap.StartupException: java.lang.IllegalStateException: jar hell!</span><br><span class="line">class: jdk.packager.services.UserJvmOptionsService</span><br><span class="line">jar1: /Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/lib/ant-javafx.jar</span><br><span class="line">jar2: /Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/lib/packager.jar</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:140) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:127) ~[main/:?]</span><br><span class="line">at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[main/:?]</span><br><span class="line">at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) ~[main/:?]</span><br><span class="line">at org.elasticsearch.cli.Command.main(Command.java:90) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:93) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:86) ~[main/:?]</span><br><span class="line">Caused by: java.lang.IllegalStateException: jar hell!</span><br><span class="line">class: jdk.packager.services.UserJvmOptionsService</span><br><span class="line">jar1: /Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/lib/ant-javafx.jar</span><br><span class="line">jar2: /Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/lib/packager.jar</span><br><span class="line">at org.elasticsearch.bootstrap.JarHell.checkClass(JarHell.java:273) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.JarHell.checkJarHell(JarHell.java:190) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.JarHell.checkJarHell(JarHell.java:86) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:198) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:326) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:136) ~[main/:?]</span><br><span class="line">... 6 more</span><br><span class="line">2018-08-01 11:02:24,713 Thread-2 ERROR No log4j2 configuration file found. Using default configuration: logging only errors to the console. Set system property &apos;log4j2.debug&apos; to show Log4j2 internal initialization logging.</span><br></pre></td></tr></table></figure><p><img src="https://ws1.sinaimg.cn/large/0069RVTdly1fty1xhjppqj31h40gbted.jpg" alt="8jar-hell"></p><p>æœ‰ä¸¤ä¸ªè§£å†³æ–¹æ³•å°±æ˜¯ï¼Œ</p><p>ï¼ˆ1ï¼‰ã€æŠŠæºç ä¸­æœ‰å…³ä½¿ç”¨äº† <code>JarHell.checkJarHell</code> ä»£ç çš„åœ°æ–¹å…¨éƒ¨æ³¨é‡Šæ‰å°±å¥½äº†</p><p>ï¼ˆ2ï¼‰ã€æ¢æˆ JDK 10 ç¼–è¯‘</p><p>ä¸¤ç§æ–¹æ³•æˆ‘éƒ½è¯•äº†æ˜¯å¯è¡Œçš„ï¼Œå»ºè®®ç›´æ¥æ¢ç¬¬äºŒç§æ–¹æ¡ˆå§ï¼</p><p>5ã€ç„¶åå†å¯åŠ¨çš„è¯ï¼Œåº”è¯¥æ²¡é—®é¢˜äº†,å‡ºç°ä¸‹é¢æ—¥å¿—ï¼šï¼ˆç½‘ä¸Šå¾ˆå¤šäººåœ¨è¿™æ­¥å°±å¥½äº†ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">[elasticsearch] Java HotSpot(TM) 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:26,073][INFO ][o.e.n.Node               ] [node-0] initializing ...</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:26,185][INFO ][o.e.e.NodeEnvironment    ] [node-0] using [1] data paths, mounts [[/ (/dev/disk1s1)]], net usable_space [109.3gb], net total_space [233.4gb], types [apfs]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:26,187][INFO ][o.e.e.NodeEnvironment    ] [node-0] heap size [494.9mb], compressed ordinary object pointers [true]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:26,190][INFO ][o.e.n.Node               ] [node-0] node name [node-0], node ID [o9SuMXP-R7uvJLtE3h37Rw]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:26,191][INFO ][o.e.n.Node               ] [node-0] version[6.3.2-SNAPSHOT], pid[61499], build[default/zip/053779d/2018-08-04T08:39:59.714654Z], OS[Mac OS X/10.13.5/x86_64], JVM[&quot;Oracle Corporation&quot;/Java HotSpot(TM) 64-Bit Server VM/10.0.2/10.0.2+13]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:26,191][INFO ][o.e.n.Node               ] [node-0] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/var/folders/mb/3vpbvkkx13l2jmpt2kmmt0fr0000gn/T/elasticsearch.URRKTybG, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,pid,tags:filecount=32,filesize=64m, -Djava.locale.providers=COMPAT, -XX:UseAVX=2, -ea, -esa, -Xms512m, -Xmx512m, -Des.path.home=/Users/zhisheng/IdeaProjects/github/elasticsearch/distribution/build/cluster/run node0/elasticsearch-6.3.2-SNAPSHOT, -Des.path.conf=/Users/zhisheng/IdeaProjects/github/elasticsearch/distribution/build/cluster/run node0/elasticsearch-6.3.2-SNAPSHOT/config, -Des.distribution.flavor=default, -Des.distribution.type=zip]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:26,191][WARN ][o.e.n.Node               ] [node-0] version [6.3.2-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,808][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [aggs-matrix-stats]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [analysis-common]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [ingest-common]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [lang-expression]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [lang-mustache]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [lang-painless]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [mapper-extras]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [parent-join]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [percolator]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [rank-eval]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [reindex]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [repository-url]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [transport-netty4]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [tribe]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [x-pack-core]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [x-pack-deprecation]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [x-pack-graph]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [x-pack-logstash]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [x-pack-ml]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [x-pack-monitoring]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [x-pack-rollup]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [x-pack-security]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,811][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [x-pack-sql]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,811][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [x-pack-upgrade]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,811][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [x-pack-watcher]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:28,811][INFO ][o.e.p.PluginsService     ] [node-0] no plugins loaded</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:32,722][INFO ][o.e.x.s.a.s.FileRolesStore] [node-0] parsed [0] roles from file [/Users/zhisheng/IdeaProjects/github/elasticsearch/distribution/build/cluster/run node0/elasticsearch-6.3.2-SNAPSHOT/config/roles.yml]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:33,358][INFO ][o.e.x.m.j.p.l.CppLogMessageHandler] [controller/61517] [Main.cc@109] controller (64 bit): Version 6.3.2-SNAPSHOT (Build 903094f295d249) Copyright (c) 2018 Elasticsearch BV</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:33,783][DEBUG][o.e.a.ActionModule       ] Using REST wrapper from plugin org.elasticsearch.xpack.security.Security</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:34,110][INFO ][o.e.d.DiscoveryModule    ] [node-0] using discovery type [zen]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:34,971][INFO ][o.e.n.Node               ] [node-0] initialized</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:34,971][INFO ][o.e.n.Node               ] [node-0] starting ...</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:35,217][INFO ][o.e.t.TransportService   ] [node-0] publish_address &#123;127.0.0.1:9300&#125;, bound_addresses &#123;[::1]:9300&#125;, &#123;127.0.0.1:9300&#125;</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:38,291][INFO ][o.e.c.s.MasterService    ] [node-0] zen-disco-elected-as-master ([0] nodes joined)[, ], reason: new_master &#123;node-0&#125;&#123;o9SuMXP-R7uvJLtE3h37Rw&#125;&#123;xjoT1zvpRsm1ZDGLCab1sA&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;ml.machine_memory=17179869184, xpack.installed=true, testattr=test, ml.max_open_jobs=20, ml.enabled=true&#125;</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:38,295][INFO ][o.e.c.s.ClusterApplierService] [node-0] new_master &#123;node-0&#125;&#123;o9SuMXP-R7uvJLtE3h37Rw&#125;&#123;xjoT1zvpRsm1ZDGLCab1sA&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;ml.machine_memory=17179869184, xpack.installed=true, testattr=test, ml.max_open_jobs=20, ml.enabled=true&#125;, reason: apply cluster state (from master [master &#123;node-0&#125;&#123;o9SuMXP-R7uvJLtE3h37Rw&#125;&#123;xjoT1zvpRsm1ZDGLCab1sA&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;ml.machine_memory=17179869184, xpack.installed=true, testattr=test, ml.max_open_jobs=20, ml.enabled=true&#125; committed version [1] source [zen-disco-elected-as-master ([0] nodes joined)[, ]]])</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:38,317][INFO ][o.e.x.s.t.n.SecurityNetty4HttpServerTransport] [node-0] publish_address &#123;127.0.0.1:9200&#125;, bound_addresses &#123;[::1]:9200&#125;, &#123;127.0.0.1:9200&#125;</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:38,319][INFO ][o.e.n.Node               ] [node-0] started</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:38,358][WARN ][o.e.x.s.a.s.m.NativeRoleMappingStore] [node-0] Failed to clear cache for realms [[]]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:38,413][INFO ][o.e.g.GatewayService     ] [node-0] recovered [0] indices into cluster_state</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:38,597][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.watch-history-7] for index patterns [.watcher-history-7*]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:38,660][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.watches] for index patterns [.watches*]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:38,707][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.triggered_watches] for index patterns [.triggered_watches*]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:38,771][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.monitoring-logstash] for index patterns [.monitoring-logstash-6-*]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:38,836][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.monitoring-es] for index patterns [.monitoring-es-6-*]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:38,878][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.monitoring-alerts] for index patterns [.monitoring-alerts-6]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:38,926][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.monitoring-beats] for index patterns [.monitoring-beats-6-*]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:38,970][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.monitoring-kibana] for index patterns [.monitoring-kibana-6-*]</span><br><span class="line">[elasticsearch] [2018-08-04T16:42:39,055][INFO ][o.e.l.LicenseService     ] [node-0] license [79704513-d3c4-4535-8276-beeb146765de] mode [basic] - valid</span><br></pre></td></tr></table></figure><p>6ã€ä½†æ˜¯æˆ‘å‡ºç°äº†ä¸‹é¢è¿™ä¸ªé—®é¢˜ï¼Œä¸€ç›´å›°æ‰°ç€æˆ‘å‘¢ï¼Œæˆ‘æ˜¯ç›´æ¥è·³è¿‡å»çš„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[2018-08-01T09:44:27,370][ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [] fatal error in thread [main], exiting</span><br><span class="line">java.lang.NoClassDefFoundError: org/elasticsearch/plugins/ExtendedPluginsClassLoader</span><br><span class="line">at org.elasticsearch.plugins.PluginsService.loadBundle(PluginsService.java:632) ~[main/:?]</span><br><span class="line">at org.elasticsearch.plugins.PluginsService.loadBundles(PluginsService.java:557) ~[main/:?]</span><br><span class="line">at org.elasticsearch.plugins.PluginsService.&lt;init&gt;(PluginsService.java:162) ~[main/:?]</span><br><span class="line">at org.elasticsearch.node.Node.&lt;init&gt;(Node.java:311) ~[main/:?]</span><br><span class="line">at org.elasticsearch.node.Node.&lt;init&gt;(Node.java:252) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.Bootstrap$5.&lt;init&gt;(Bootstrap.java:213) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:213) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:326) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:136) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:127) ~[main/:?]</span><br><span class="line">at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[main/:?]</span><br><span class="line">at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) ~[main/:?]</span><br><span class="line">at org.elasticsearch.cli.Command.main(Command.java:90) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:93) ~[main/:?]</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:86) ~[main/:?]</span><br><span class="line">Caused by: java.lang.ClassNotFoundException: org.elasticsearch.plugins.ExtendedPluginsClassLoader</span><br><span class="line">at jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582) ~[?:?]</span><br><span class="line">at jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:190) ~[?:?]</span><br><span class="line">at java.lang.ClassLoader.loadClass(ClassLoader.java:499) ~[?:?]</span><br><span class="line">... 15 more</span><br></pre></td></tr></table></figure><p><img src="https://ws2.sinaimg.cn/large/0069RVTdly1fty1xi20xzj310q0ilgsa.jpg" alt="7noclassDefFoundError"></p><p>é‡åˆ°çš„è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘åœ¨ GitHub æ±‚åŠ©ä¿¡æ¯å¦‚ä¸‹ï¼š</p><p><a href="https://github.com/elastic/elasticsearch/issues/30774" target="_blank" rel="noopener">https://github.com/elastic/elasticsearch/issues/30774</a></p><p>ä½†æ˜¯å¹¶æ²¡æœ‰è§£å†³æˆ‘çš„é—®é¢˜ï¼Œè¿™é‡Œæš‚æ—¶å…ˆè®°å½•ä¸‹æ¥ï¼æˆ‘è‡ªå·±ä¹Ÿè·Ÿäº†ä¸‹æºç ï¼Œå®šä½åˆ°é”™è¯¯ä¿¡æ¯æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Œä½†æ˜¯æ²¡æœ‰è§£å†³æ–¹æ¡ˆï¼</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æŠ˜è…¾çš„è·¯ä¸Šå°‘ä¸äº†å„ç§é”™è¯¯çƒ¦æ‰°ä½ ï¼Œå­¦ä¼šè§£å†³é—®é¢˜ï¼</p><h3 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h3><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/08/04/why-see-es-code/" target="_blank" rel="noopener">æ¸£æ¸£èœé¸¡ä¸ºä»€ä¹ˆè¦çœ‹ ElasticSearch æºç ï¼Ÿ</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2017/09/08/Elasticsearch-analyzers/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šElasticsearch é»˜è®¤åˆ†è¯å™¨å’Œä¸­åˆ†åˆ†è¯å™¨ä¹‹é—´çš„æ¯”è¾ƒåŠä½¿ç”¨æ–¹æ³•</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2017/09/09/Elasticsearch-install/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šå…¨æ–‡æœç´¢å¼•æ“ Elasticsearch é›†ç¾¤æ­å»ºå…¥é—¨æ•™ç¨‹</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2017/10/15/ElasticSearch-cluster-health-metrics/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šElasticSearch é›†ç¾¤ç›‘æ§</a></p><p>5ã€<a href="http://www.54tianzhisheng.cn/2017/10/18/ElasticSearch-nodes-metrics/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šElasticSearch å•ä¸ªèŠ‚ç‚¹ç›‘æ§</a></p><p>6ã€<a href="http://www.54tianzhisheng.cn/2017/12/25/ELK/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šELK å®æ—¶æ—¥å¿—åˆ†æå¹³å°ç¯å¢ƒæ­å»º</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws4.sinaimg.cn/large/006tNc79ly1fty28q9ljkj31hc0zbqf5.jpg&quot; alt=&quot;girl-3551832_1920&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="ElasticSearch" scheme="http://yoursite.com/tags/ElasticSearch/"/>
    
  </entry>
  
  <entry>
    <title>æ¸£æ¸£èœé¸¡ä¸ºä»€ä¹ˆè¦çœ‹ ElasticSearch æºç ï¼Ÿ</title>
    <link href="http://yoursite.com/2018/08/04/why-see-es-code/"/>
    <id>http://yoursite.com/2018/08/04/why-see-es-code/</id>
    <published>2018-08-03T16:00:00.000Z</published>
    <updated>2018-08-04T14:35:12.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws3.sinaimg.cn/large/006tNc79ly1fty1lwmoa0j31hc0vjjyz.jpg" alt="004"></p><a id="more"></a><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>äººå·¥æ™ºèƒ½ã€å¤§æ•°æ®å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œå¯¹äº TB ç”šè‡³ PB çº§å¤§æ•°æ®çš„å¿«é€Ÿæ£€ç´¢å·²ç„¶æˆä¸ºåˆšéœ€ï¼Œå¤§å‹ä¼ä¸šæ—©å·²æ·¹æ²¡åœ¨ç³»ç»Ÿç”Ÿæˆçš„æµ©ç€šæ•°æ®æµå½“ä¸­ã€‚å¤§æ•°æ®æŠ€æœ¯ä¸šå·²é›†ä¸­åœ¨å¦‚ä½•å­˜å‚¨å’Œå¤„ç†è¿™äº›æµ·é‡çš„æ•°æ®ä¸Šã€‚Elasticsearch ä½œä¸ºå¼€æºé¢†åŸŸçš„åèµ·ä¹‹ç§€ï¼Œä»2010å¹´è‡³ä»Šå¾—åˆ°é£è·ƒå¼çš„å‘å±•ã€‚ Elasticsearch ä»¥å…¶å¼€æºã€åˆ†å¸ƒå¼ã€RESTFul API ä¸‰å¤§ä¼˜åŠ¿ï¼Œå·²ç»æˆä¸ºå½“ä¸‹é£å£ä¸­â€œä¼šé£çš„çŒªâ€ã€‚</p><p>åœ¨æˆ‘çš„ç”µè„‘æœ¬åœ°å†™äº†å‡ ç¯‡ ElasticSearch çš„æºç è§£æäº†ï¼Œå›è¿‡å¤´æ¥æƒ³æƒ³åº”è¯¥ä¹Ÿå†™ä¸€ç¯‡ä¸ºä½•æˆ‘ä¼šå»çœ‹å®ƒçš„æºç ï¼Ÿ</p><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸‹é¢æˆ‘è®²è®²è‡ªå·±ä»æ¥è§¦æœç´¢åˆ°ç°åœ¨çœ‹æºç çš„è¿‡ç¨‹ï¼</p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="zhisheng"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/08/04/why-see-es-code/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/08/24/why-see-es-code/</a></p><h3 id="ç¬¬ä¸€æ¬¡æ¥è§¦æœç´¢"><a href="#ç¬¬ä¸€æ¬¡æ¥è§¦æœç´¢" class="headerlink" title="ç¬¬ä¸€æ¬¡æ¥è§¦æœç´¢"></a>ç¬¬ä¸€æ¬¡æ¥è§¦æœç´¢</h3><p>æœç´¢ï¼Œæˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„æ˜¯æœç´¢å¼•æ“ï¼šGoogleã€ç™¾åº¦ï¼Œè¿™ä¸ªå°±ç®—æ˜¯æ¥è§¦çš„æœ€æ—©çš„äº†ã€‚</p><p>æˆ‘è‡ªå·±é¡¹ç›®é‡Œé¢æ¥è§¦æœç´¢æ˜¯å¤§äºŒæš‘å‡é‚£æ—¶ç»ƒä¹ çš„ä¸€ä¸ªé¡¹ç›®ï¼Œé‡Œé¢ç”¨äº† Solrï¼Œç„¶åå½“æ—¶è‡ªå·±ä¹Ÿç¨å¾®äº†è§£äº†ä¸‹ï¼Œå¹¶ç”¨åœ¨äº†é¡¹ç›®é‡Œé¢ã€‚</p><h3 id="ç¬¬äºŒæ¬¡æ¥è§¦æœç´¢"><a href="#ç¬¬äºŒæ¬¡æ¥è§¦æœç´¢" class="headerlink" title="ç¬¬äºŒæ¬¡æ¥è§¦æœç´¢"></a>ç¬¬äºŒæ¬¡æ¥è§¦æœç´¢</h3><p>ä»ç¬¬ä¸€æ¬¡é¡¹ç›®é‡Œé¢ç”¨åˆ°äº†æœç´¢ï¼Œåé¢è‡ªå·±å¯¹è¿™æ–¹é¢å°±æ¯”è¾ƒæ„Ÿå…´è¶£ã€‚å†ä¸€æ¬¡æ¥è§¦æœç´¢æ˜¯å®ä¹ çš„æ—¶å€™è¿›å…¬å¸ã€‚ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯è¢«è€å¤§å«çš„å»å­¦ä¹ æ­å»º Elasticsearch é›†ç¾¤ï¼Œäºæ˜¯ä¹ï¼Œç”µè„‘å°±è£…äº†ä¸‰ä¸ªè™šæ‹Ÿæœºï¼ŒElasticsearch å°±ä¸€ä¸ªä¸ªçš„è£…äº†èµ·æ¥äº†ã€‚ä¹Ÿè®°å½•äº†åšå®¢ä¸‹æ¥ï¼š<a href="http://www.54tianzhisheng.cn/2017/09/09/Elasticsearch-install/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šå…¨æ–‡æœç´¢å¼•æ“ Elasticsearch é›†ç¾¤æ­å»ºå…¥é—¨æ•™ç¨‹</a>ï¼Œå½“æ—¶æ­å»ºçš„æ—¶å€™ ES çš„ç‰ˆæœ¬æ‰åˆšä» 2.x å‡çº§åˆ° 5.x å‘¢ï¼Œæˆªæ­¢æœ¬æ–‡æ—¶é—´ 2018.08.04ï¼Œç°åœ¨ ES ç‰ˆæœ¬å·²ç»æ˜¯åˆ° 7.0 äº†ï¼Œè¿™ç‰ˆæœ¬å‡çº§æ˜¯çœŸçš„çš„å¿«ï¼Œè¿™ä¹Ÿè¯´æ˜äº† ES çš„æ´»è·ƒåº¦å¾ˆé«˜ï¼ŒèƒŒåçš„å¼€å‘å·¥ç¨‹å¸ˆç»´æŠ¤ä¹Ÿå¿«ï¼Œä¾§é¢çªå‡ºè¦å»çœ‹å®ƒæºç çš„é‡è¦æ€§ã€‚</p><p>å½“æ—¶è‡ªå·±åœ¨æœ¬åœ°æµ‹è¯•æ­å»ºé›†ç¾¤åï¼Œç»™åˆ†é…äº†å¦å¤–ä¸€ä¸ªä»»åŠ¡å°±æ˜¯å»äº†è§£ ES ä¸­çš„è‡ªå¸¦åˆ†è¯ã€è‹±æ–‡åˆ†è¯ã€ä¸­æ–‡åˆ†è¯çš„ç›¸åŒä¸å·®å¼‚ã€ä»¥åŠè‡ªå·±å»ºç«‹åˆ†è¯éœ€è¦æ³¨æ„çš„ç‚¹ã€‚äºæ˜¯ä¹ï¼šå½“æ—¶åœ¨å…¬å¸ wiki è´¡çŒ®äº†è¿™ç¯‡æ–‡ç« ï¼š<a href="http://www.54tianzhisheng.cn/2017/09/08/Elasticsearch-analyzers/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šElasticsearch é»˜è®¤åˆ†è¯å™¨å’Œä¸­åˆ†åˆ†è¯å™¨ä¹‹é—´çš„æ¯”è¾ƒåŠä½¿ç”¨æ–¹æ³•</a>ã€‚è¿™ç¯‡æ–‡ç« å‡ ä¹å·²ç»æŠŠå¸‚é¢ä¸Šæ‰€æœ‰çš„åˆ†è¯éƒ½å†™è¿›å»äº†ï¼ŒåŒ…æ‹¬ä»–ä»¬çš„ç›¸åŒç‚¹ã€ä¸åŒç‚¹ã€å¦‚ä½•ä½¿ç”¨ã€å¦‚ä½•è‡ªå®šä¹‰åˆ†è¯å™¨ã€‚</p><p>ç„¶åè¿˜æœ‰å°±æ˜¯æˆ‘åŒç»„çš„ä¸€ä¸ªåŒå­¦ï¼Œå¥¹çš„ä»»åŠ¡å°±æ˜¯ 2.x å‡çº§åˆ° 5.x ä¸­ mapping çš„å¤§æ”¹å˜æœ‰å“ªäº›ï¼Ÿåé¢æˆ‘ä¹Ÿçœ‹äº†å¥¹æ€»ç»“çš„æ–‡æ¡£ï¼Œå¾ˆè¯¦ç»†ï¼</p><p>åœ¨è¿™æ¬¡æ¥è§¦äº† ES åï¼Œå› ä¸ºæˆ‘è‡ªå·±æœ¬åœ°å·²ç»æœ‰ç¯å¢ƒäº†ï¼Œæ‰€ä»¥è‡ªå·±æµ‹è¯•äº†ä¸€äº›åŠŸèƒ½ï¼Œç»™ ES å®‰è£…æ’ä»¶ï¼ˆIKã€x-packã€æ”¯æŒ sql çš„ã€ï¼‰ï¼Œåé¢è‡ªå·±ä¹Ÿå»æµ‹è¯• ES çš„ç´¢å¼•ã€æ–‡æ¡£ã€REST APIã€‚</p><h3 id="ç¬¬ä¸‰æ¬¡æ¥è§¦æœç´¢"><a href="#ç¬¬ä¸‰æ¬¡æ¥è§¦æœç´¢" class="headerlink" title="ç¬¬ä¸‰æ¬¡æ¥è§¦æœç´¢"></a>ç¬¬ä¸‰æ¬¡æ¥è§¦æœç´¢</h3><p>ç”±äºæ˜¯è‡ªå·±å¯¹å…¶æ„Ÿå…´è¶£ï¼Œæ‰€ä»¥åé¢å°±å»æ‰¾äº†äº›ç›¸å…³çš„è§†é¢‘ï¼Œæ¯”å¦‚ï¼šä¸­åçŸ³è¡«çš„ã€ŠElasticsearch é¡¶å°–é«˜æ‰‹ç³»åˆ—-é«˜æ‰‹è¿›é˜¶ç¯‡ã€‹å‡ ä¸ªç³»åˆ—è§†é¢‘æ•™ç¨‹ä¸ªäººæ„Ÿè§‰è¿˜æ˜¯ä¸é”™çš„ï¼Œçœ‹å®Œè¿™å‡ ä¸ªç³»åˆ—ä¼°è®¡å…¥é—¨è‚¯å®šæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ç‰ˆæƒåŸå› ï¼Œä¸æä¾›ä¸‹è½½é“¾æ¥ã€‚</p><p>å¦å¤–å°±æ˜¯ã€ŠElasticsearch æƒå¨æŒ‡å—ã€‹ç¿»è¯‘çš„ç‰ˆæœ¬ï¼Œç¿»è¯‘è¿˜æ²¡æœ‰å…¨ï¼Œå¯ä»¥å»çœ‹çœ‹ï¼Œè®²å¾—å¾ˆè¯¦ç»†çš„ï¼Œå¸‚é¢ä¸Šåº”è¯¥è¿˜æ²¡æœ‰å“ªæœ¬ä¹¦è®²çš„æœ‰è¿™ä¹ˆæ¸…æ¥šï¼Œå¦‚æœè‹±æ–‡ä¸é”™çš„å¯ä»¥ç›´æ¥å•ƒè‹±æ–‡å§ã€‚</p><p>è¿˜æœ‰å°±æ˜¯å®˜ç½‘çš„æ–‡æ¡£äº†ï¼Œéå¸¸éå¸¸è¯¦ç»†ï¼Œè¿˜æœ‰ demoï¼Œ2.x ç‰ˆæœ¬çš„æ˜¯æœ‰ä¸­æ–‡çš„å®˜æ–¹æ–‡æ¡£ï¼Œå¯ä»¥å‡‘åˆç€çœ‹ã€‚</p><p>å­¦ä¹ æ–°ä¸œè¥¿ï¼Œè¦å­¦ä¼šå…ˆçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œä½•å†µ Elasticsearch çš„å®˜æ–¹æ–‡æ¡£è¿™ä¹ˆè¯¦ç»†å‘¢ï¼</p><h3 id="ç¬¬å››æ¬¡æ¥è§¦æœç´¢"><a href="#ç¬¬å››æ¬¡æ¥è§¦æœç´¢" class="headerlink" title="ç¬¬å››æ¬¡æ¥è§¦æœç´¢"></a>ç¬¬å››æ¬¡æ¥è§¦æœç´¢</h3><p>åé¢å®ä¹ çš„æ—¶å€™ï¼Œåˆåˆ†é…äº†å…¬å¸ä¸­é—´ä»¶ç›‘æ§çš„ä¸¤ä¸ªæ¨¡å—ï¼šElasticsearch å’Œ HBase ç»„ä»¶çš„ç›‘æ§ã€‚äºæ˜¯ä¹ï¼Œå†æ¬¡æœ‰æœºä¼šæ¥è§¦ Elasticsearch äº†ï¼Œè¿™æ¬¡ä¸»è¦è¿˜æ˜¯åˆ©ç”¨ Elasticsearch è‡ªå¸¦çš„ REST API ï¼š<code>_cluster/health</code> ã€<code>_cluster/stats</code>ã€<code>_nodes</code>ã€<code>_nodes/stats</code> å»è·å–åˆ°é›†ç¾¤çš„å¥åº·ä¿¡æ¯ã€èŠ‚ç‚¹ä¿¡æ¯ï¼ˆå†…å­˜ã€CPUã€ç½‘ç»œã€JVMç­‰ä¿¡æ¯ï¼‰ã€‚ä¸ºäº†åšè¿™ä¸ªé¡¹ç›®è‡ªå·±å½“æ—¶ä¹Ÿå»æ‰¾äº†ç½‘ä¸Šå¾ˆå¤šç±»ä¼¼çš„æ–‡ç« å‚è€ƒå¸¸ç”¨çš„ç›‘æ§æŒ‡æ ‡å’Œä»–ä»¬æ˜¯æ€ä¹ˆåšç›‘æ§çš„ã€‚æˆ‘å½“æ—¶çš„ä»»åŠ¡ä¸»è¦è¿˜æ˜¯é‡‡é›†ä¿¡æ¯ï¼Œç„¶åå­˜åˆ°å…¬å¸å¤§é¡¹ç›®çš„ influxdb ä¸­ï¼Œæœ€åç”¨ grafana å±•ç¤ºå‡ºæ¥ï¼Œåé¢æˆ‘ç»„çš„è¿ç»´å¤§ä½¬ç»™æˆ‘çœ‹äº†ç›‘æ§å¤§ç›˜ï¼Œç•Œé¢æŒºé…·ç‚«çš„ï¼Œå“ˆå“ˆå“ˆï¼Œç‰›é€¼ï¼</p><p>å½“æ—¶å†™çš„ä¸¤ç¯‡åšå®¢ï¼š</p><p>1ã€<a href="http://www.54tianzhisheng.cn/2017/10/15/ElasticSearch-cluster-health-metrics/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šElasticSearch é›†ç¾¤ç›‘æ§</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2017/10/18/ElasticSearch-nodes-metrics/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šElasticSearch å•ä¸ªèŠ‚ç‚¹ç›‘æ§</a></p><p>å–ä¹‹ç½‘ç»œï¼Œè¿˜ä¹‹ç½‘ç»œï¼Œå¸Œæœ›ç»™åé¢åšç±»ä¼¼ä»»åŠ¡çš„å°ä¼™ä¼´ç»™ç‚¹å‚è€ƒæ„è§ï¼</p><p>å†å°±æ˜¯è‡ªå·±æ­å»º ELKï¼ˆElasticSearch, Logstash, Kibanaï¼‰æ—¥å¿—åˆ†æå¹³å°ï¼Œç„¶åç©äº†ä¸‹ï¼</p><p>æ­å»ºç¯å¢ƒåšå®¢ï¼š<a href="http://www.54tianzhisheng.cn/2017/12/25/ELK/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šELK å®æ—¶æ—¥å¿—åˆ†æå¹³å°ç¯å¢ƒæ­å»º</a></p><h3 id="ç¬¬äº”æ¬¡æ¥è§¦æœç´¢"><a href="#ç¬¬äº”æ¬¡æ¥è§¦æœç´¢" class="headerlink" title="ç¬¬äº”æ¬¡æ¥è§¦æœç´¢"></a>ç¬¬äº”æ¬¡æ¥è§¦æœç´¢</h3><p>åé¢å°±æ²¡æ€ä¹ˆæ¥è§¦ ElasticSearch äº†ï¼Œä¸€ç›´å¿™ç€å…¶ä»–çš„ä¸œè¥¿ã€‚</p><p>å®ä¹ è¾èŒåï¼Œæ¯•ä¸šå‡ºæ¥æ‰¾å·¥ä½œçš„é‚£æ®µæ—¥å­ï¼Œè‡ªå·±åˆèŠ±äº†ä¸€æ˜ŸæœŸç¨å¾®è¿‡äº†ä¸€é ã€ŠElasticsearch æƒå¨æŒ‡å—ã€‹ è¿™æœ¬ä¹¦ï¼Œè¯è¯´è¿˜å¸®æˆ‘é¢è¯•æŒºè¿‡ä¸å°‘å…³å‘¢ï¼Œå“ˆå“ˆå“ˆï¼å› ä¸ºæˆ‘é¡¹ç›®é‡Œå†™äº† Elasticsearch çš„ç›‘æ§ï¼Œå¦‚æœä½ å¯¹ Elasticsearch å…¶ä»–çš„ä¸ç†Ÿæ‚‰ï¼Œé¢è¯•å®˜ç¨å¾®é—®äº›å…¶ä»–å…³äºè¿™æ–¹é¢çš„ï¼Œé‚£å°±ä¸çŸ¥é“å°±æœ‰ç‚¹å°´å°¬ğŸ˜…äº†ï¼Œæ‰€ä»¥è¿˜æ˜¯å‡†å¤‡äº†ä¸‹ã€‚çœ‹å®Œä¹‹ååº”ä»˜é¢è¯•æ²¡å¤šå¤§çš„é—®é¢˜ã€‚</p><h3 id="ç¬¬å…­æ¬¡æ¥è§¦"><a href="#ç¬¬å…­æ¬¡æ¥è§¦" class="headerlink" title="ç¬¬å…­æ¬¡æ¥è§¦"></a>ç¬¬å…­æ¬¡æ¥è§¦</h3><p>çœ‹èµ·æ¥æˆ‘æ¥è§¦äº† Elasticsearch å¾ˆä¹…äº†ï¼Œå…¶å®çœŸæ­£é¡¹ç›®é‡Œé¢æ˜¯æ²¡æœ‰ç”¨åˆ° Elasticsearch åšè¿‡é¡¹ç›®çš„ï¼Œæ²¡æœ‰ç”¨åˆ° Elasticsearch çš„æœç´¢åšä»€ä¹ˆé¡¹ç›®ï¼Œäºæ˜¯è‡ªå·±å½“æ—¶æ‰¾å·¥ä½œå…¶å®ä¹Ÿæ‰“ç®—æ‰¾åˆ°å·¥ä½œåçœ‹èƒ½ä¸èƒ½è‡ªå·±åšä¸ªé¡¹ç›®æˆ–è€…å…¬å¸é¡¹ç›®é‡Œé¢ç”¨ç”¨ Elasticsearch å‘¢ï¼Ÿ</p><p>ç»“æœåœ¨æ–°å…¬å¸æ–°é¡¹ç›®é‡Œï¼Œå¾ˆå¿«å°±ç”¨åˆ°äº†ã€‚åªä¸è¿‡è¿™æ¬¡ä¸æ˜¯ Java é¡¹ç›®é‡Œé¢ç”¨äº†ï¼Œè€Œæ˜¯å’Œ GoLang æ•´åˆã€‚ä¸è¿‡ API éƒ½å·®ä¸å¤šï¼Œå¤šç†Ÿæ‚‰å‡ æ¬¡å°±å¾ˆå¿«ä¸Šæ‰‹äº†ï¼Œå…³é”®è¿˜æ˜¯è¦æ‡‚ Elasticsearch å¦‚ä½•æ„é€  DSL æŸ¥è¯¢è¯­å¥ï¼Œè¿™æ ·å†è½¬æ¢æˆ GO é‡Œé¢çš„ API å°±å¿«äº†ã€‚</p><p>è¿˜æœ‰å°±æ˜¯å…¬å¸é‡Œåˆšå¥½æœ‰ä¸ªä¸­ç§‘é™¢ç ”ç©¶ç”Ÿå¤§ä½¬ï¼Œä»–å°±å†™è¿‡ Elasticsearch è¿™å—çš„ä¹¦ç±ã€Šä» lucene åˆ° Elasticsearch å…¨æ–‡æ£€ç´¢å®æˆ˜ã€‹ï¼Œå¦å¤–ä»–çš„ CSDN åšå®¢ä¹Ÿå¾ˆç«ï¼Œé˜…è¯»é‡å¾ˆé«˜ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥ä¹°æœ¬ä¹¦æ”¯æŒä¸‹ã€‚</p><p>ä¸­é€”è‡ªå·±é‡åˆ° Elasticsearch å®åœ¨ä¸ä¼šçš„é—®é¢˜ä¹Ÿä¼šä¸»åŠ¨å»æ‰¾å¤§ä½¬å’¨è¯¢ï¼Œç„¶åå¤§ä½¬è€å¿ƒæ•™æ•™æˆ‘è¿™ä¸ªæ¸£æ¸£èœé¸¡ï¼Œåœ¨æ–‡ç« è¿™é‡Œæ„Ÿè°¢ä¸‹å¤§ä½¬è¿™æ®µæ—¶é—´çš„å…³ç…§ã€‚</p><h3 id="èŒç”Ÿé˜…è¯»æºç çš„æƒ³æ³•"><a href="#èŒç”Ÿé˜…è¯»æºç çš„æƒ³æ³•" class="headerlink" title="èŒç”Ÿé˜…è¯»æºç çš„æƒ³æ³•"></a>èŒç”Ÿé˜…è¯»æºç çš„æƒ³æ³•</h3><p>æ—¢ç„¶æ¥è§¦äº†è¿™ä¹ˆä¹…çš„ Elasticsearch ï¼Œé¡¹ç›®é‡Œç”¨è¿‡ï¼Œä¹¦ç±ä¹Ÿçœ‹è¿‡ï¼Œè™½ç„¶è¿˜ä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æ˜¯å¦‚æœçœ‹çœ‹å®ƒçš„æºç æ˜¯ä¸æ˜¯ä¼šè®©æˆ‘å¯¹å®ƒçš„å°è±¡æ›´æ·±å‘¢ï¼Ÿ</p><p>è¯´å¹²å°±å¹²ï¼Œæ™šä¸Šå›å®¶å°±ä» GitHub clone äº†æºç åœ¨æœ¬åœ°ï¼Œé‚£æ—¶åˆšå¥½å›å®¶ï¼Œå°±åœ¨ç«è½¦ä¸Šç›´æ¥ç”¨ VS code çœ‹äº†ä¼šæºç ï¼Œä¹Ÿæ²¡æœ‰åœ¨ ide é‡Œ debug èµ·æ¥ã€‚</p><p>å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™å·²ç»æŠŠ Elasticsearch çš„æ•´ä¸ªå¯åŠ¨æµç¨‹ï¼ˆåŠ è½½è¯»å–é…ç½®ã€åŠ è½½æ’ä»¶ç­‰ï¼‰ã€å¦‚ä½•æ”¯æŒ REST API çœ‹äº†ä¸‹ï¼Œåé¢ä¼šåœ¨ä¸‹ç­åå›å®¶ç»§ç»­é˜…è¯»æºç ï¼Œç»§ç»­åˆ†äº«æˆ‘çš„æºç è§£æçš„ã€‚</p><p>æœ‰æƒ³æ³•å°±å»å¹²ï¼Œä¸å°è¯•ä¸‹ï¼Œæ€ä¹ˆçŸ¥é“é€‚ä¸é€‚åˆä½ ï¼Ÿ</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å…¶å®é˜…è¯»æºç çš„ä¸»è¦åŸå› è¿˜æ˜¯è‡ªå·±æ„Ÿå…´è¶£ï¼›å¦å¤–å°±æ˜¯è¿™ä¸œè¥¿ç°åœ¨é¡¹ç›®é‡Œç¡®å®ä¹Ÿç”¨åˆ°äº†ï¼Œå¦‚æœæˆ‘å¯¹æºç ç†Ÿæ‚‰çš„è¯å¯èƒ½ä¼šå¯¹æˆ‘çš„ç†è§£ä¼šæ›´åŠ é€å½»ç‚¹ï¼›è¿˜æœ‰å°±æ˜¯ Elasticsearch ç¡®å®ç«ï¼Œå…¬å¸å‡ ä¹éƒ½ç”¨çš„ï¼Œæ‰€ä»¥å­¦ä¹ ä¸‹è¿˜æ˜¯æœ‰å¿…è¦çš„ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws3.sinaimg.cn/large/006tNc79ly1fty1lwmoa0j31hc0vjjyz.jpg&quot; alt=&quot;004&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="ElasticSearch" scheme="http://yoursite.com/tags/ElasticSearch/"/>
    
  </entry>
  
  <entry>
    <title>æ¸£æ¸£èœé¸¡çš„èš‚èšé‡‘æœé¢è¯•ç»å†(äºŒ)</title>
    <link href="http://yoursite.com/2018/07/31/alipay02/"/>
    <id>http://yoursite.com/2018/07/31/alipay02/</id>
    <published>2018-07-30T16:00:00.000Z</published>
    <updated>2018-07-31T15:17:07.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws2.sinaimg.cn/large/801b780aly1fttgbvge25j21f60vyack.jpg" alt="2018-07-31_23-16-07"></p><a id="more"></a><h2 id="èš‚èšé‡‘æœ"><a href="#èš‚èšé‡‘æœ" class="headerlink" title="èš‚èšé‡‘æœ"></a>èš‚èšé‡‘æœ</h2><h3 id="ç”µè¯äºŒé¢ï¼ˆ85-åˆ†é’Ÿï¼‰"><a href="#ç”µè¯äºŒé¢ï¼ˆ85-åˆ†é’Ÿï¼‰" class="headerlink" title="ç”µè¯äºŒé¢ï¼ˆ85 åˆ†é’Ÿï¼‰"></a>ç”µè¯äºŒé¢ï¼ˆ85 åˆ†é’Ÿï¼‰</h3><p>1ã€è‡ªæˆ‘ä»‹ç»ã€å·¥ä½œç»å†ã€æŠ€æœ¯æ ˆ</p><p>2ã€é¡¹ç›®ä¸­ä½ å­¦åˆ°äº†ä»€ä¹ˆæŠ€æœ¯ï¼Ÿï¼ˆæŠŠä¸‰é¡¹ç›®å…·ä½“æè¿°äº†å¾ˆä¹…ï¼‰</p><p>3ã€å¾®æœåŠ¡åˆ’åˆ†çš„ç²’åº¦</p><p>4ã€å¾®æœåŠ¡çš„é«˜å¯ç”¨æ€ä¹ˆä¿è¯çš„ï¼Ÿ</p><p>5ã€å¸¸ç”¨çš„è´Ÿè½½å‡è¡¡ï¼Œè¯¥æ€ä¹ˆç”¨ï¼Œä½ èƒ½è¯´ä¸‹å—ï¼Ÿ</p><p>6ã€ç½‘å…³èƒ½å¤Ÿä¸ºåç«¯æœåŠ¡å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿ</p><p>7ã€Spring Bean çš„ç”Ÿå‘½å‘¨æœŸ</p><p>8ã€xml ä¸­é…ç½®çš„ initã€destroy æ–¹æ³•æ€ä¹ˆå¯ä»¥åšåˆ°è°ƒç”¨å…·ä½“çš„æ–¹æ³•ï¼Ÿ</p><p>9ã€åå°„çš„æœºåˆ¶</p><p>10ã€Object ç±»ä¸­çš„æ–¹æ³•</p><p>11ã€hashcode å’Œ equals æ–¹æ³•å¸¸ç”¨åœ°æ–¹</p><p>12ã€å¯¹è±¡æ¯”è¾ƒæ˜¯å¦ç›¸åŒ</p><p>13ã€hashmap put æ–¹æ³•å­˜æ”¾çš„æ—¶å€™æ€ä¹ˆåˆ¤æ–­æ˜¯å¦æ˜¯é‡å¤çš„</p><p>14ã€Object toString æ–¹æ³•å¸¸ç”¨çš„åœ°æ–¹ï¼Œä¸ºä»€ä¹ˆè¦é‡å†™è¯¥æ–¹æ³•</p><p>15ã€Set å’Œ List åŒºåˆ«ï¼Ÿ</p><p>16ã€ArrayList å’Œ LinkedList åŒºåˆ«</p><p>17ã€å¦‚æœå­˜å–ç›¸åŒçš„æ•°æ®ï¼ŒArrayList å’Œ LinkedList è°å ç”¨ç©ºé—´æ›´å¤§ï¼Ÿ</p><p>18ã€Set å­˜çš„é¡ºåºæ˜¯æœ‰åºçš„å—ï¼Ÿ</p><p>19ã€å¸¸è§ Set çš„å®ç°æœ‰å“ªäº›ï¼Ÿ</p><p>20ã€TreeSet å¯¹å­˜å…¥å¯¹æ•°æ®æœ‰ä»€ä¹ˆè¦æ±‚å‘¢ï¼Ÿ</p><p>21ã€HashSet çš„åº•å±‚å®ç°å‘¢</p><p>22ã€TreeSet åº•å±‚æºç æœ‰çœ‹è¿‡å—ï¼Ÿ</p><p>23ã€HashSet æ˜¯ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ</p><p>24ã€Java ä¸­æœ‰å“ªäº›çº¿ç¨‹å®‰å…¨çš„ Mapï¼Ÿ</p><p>25ã€Concurrenthashmap æ˜¯æ€ä¹ˆåšåˆ°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ</p><p>26ã€HashTable ä½ äº†è§£è¿‡å—ï¼Ÿ</p><p>27ã€å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ</p><p>28ã€synchronizedã€lock</p><p>29ã€volatile çš„åŸå­æ€§é—®é¢˜ï¼Ÿä¸ºä»€ä¹ˆ i++ è¿™ç§ä¸æ”¯æŒåŸå­æ€§ï¼Ÿä»è®¡ç®—æœºåŸç†çš„è®¾è®¡æ¥è®²ä¸‹ä¸èƒ½ä¿è¯åŸå­æ€§çš„åŸå› </p><p>30ã€happens before åŸç†</p><p>31ã€cas æ“ä½œ</p><p>32ã€lock å’Œ synchronized çš„åŒºåˆ«ï¼Ÿ</p><p>33ã€å…¬å¹³é”å’Œéå…¬å¹³é”</p><p>34ã€Java è¯»å†™é”</p><p>35ã€è¯»å†™é”è®¾è®¡ä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p><p>36ã€ä½ é¡¹ç›®é™¤äº†å†™ Java ä»£ç ï¼Œè¿˜æœ‰å‰ç«¯ä»£ç ï¼Œé‚£ä½ çŸ¥é“å‰ç«¯æœ‰å“ªäº›æ¡†æ¶å—ï¼Ÿ</p><p>37ã€MySQL åˆ†é¡µæŸ¥è¯¢è¯­å¥</p><p>38ã€MySQL äº‹åŠ¡ç‰¹æ€§å’Œéš”ç¦»çº§åˆ«</p><p>39ã€ä¸å¯é‡å¤è¯»ä¼šå‡ºç°åœ¨ä»€ä¹ˆåœºæ™¯ï¼Ÿ</p><p>40ã€sql  having çš„ä½¿ç”¨åœºæ™¯</p><p>41ã€å‰ç«¯æµè§ˆå™¨åœ°å€çš„ä¸€ä¸ª http è¯·æ±‚åˆ°åç«¯æ•´ä¸ªæµç¨‹æ˜¯æ€ä¹ˆæ ·ï¼Ÿèƒ½å¤Ÿè¯´ä¸‹å—ï¼Ÿ</p><p>42ã€http é»˜è®¤ç«¯å£ï¼Œhttps é»˜è®¤ç«¯å£</p><p>43ã€DNS ä½ çŸ¥é“æ˜¯å¹²å˜›çš„å—ï¼Ÿ</p><p>44ã€ä½ ä»¬å¼€å‘ç”¨çš„ ide æ˜¯å•¥ï¼Ÿä½ èƒ½è¯´ä¸‹ idea çš„å¸¸ç”¨å‡ ä¸ªå¿«æ·é”®å§ï¼Ÿ</p><p>45ã€ä»£ç ç‰ˆæœ¬ç®¡ç†ä½ ä»¬ç”¨çš„æ˜¯å•¥ï¼Ÿ</p><p>46ã€git rebase å’Œ merge æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>47ã€ä½ ä»¬å…¬å¸åŠ ç­å¤šå—ï¼Ÿ</p><p>48ã€åé¢ä¸€èµ·èŠ high äº†ï¼Œä¹‹é—´æ‰¯äº†äº›è›‹ï¼Œå“ˆå“ˆå“ˆ</p><h3 id="ç›¸å…³æ–‡ç« ï¼š"><a href="#ç›¸å…³æ–‡ç« ï¼š" class="headerlink" title="ç›¸å…³æ–‡ç« ï¼š"></a>ç›¸å…³æ–‡ç« ï¼š</h3><p><a href="http://www.54tianzhisheng.cn/2017/08/04/yaxin/" target="_blank" rel="noopener">1ã€ç§‹æ‹›ç¬¬ä¸€ç«™ â€”â€” äºšä¿¡ç§‘æŠ€</a></p><p><a href="http://www.54tianzhisheng.cn/2017/08/04/iqiyi/" target="_blank" rel="noopener">2ã€ç§‹æ‹›ç¬¬äºŒç«™ â€”â€” å†…æ¨çˆ±å¥‡è‰º</a></p><p><a href="http://www.54tianzhisheng.cn/2017/08/04/alibaba/" target="_blank" rel="noopener">3ã€ç§‹æ‹›ç¬¬ä¸‰ç«™ â€”â€” å†…æ¨é˜¿é‡Œï¼ˆä¸€é¢ï¼‰</a></p><p><a href="http://www.54tianzhisheng.cn/2017/08/28/recommend-books/" target="_blank" rel="noopener">4ã€é‚£äº›å¹´æˆ‘çœ‹è¿‡çš„ä¹¦ â€”â€” è‡´æ•¬æˆ‘çš„å¤§å­¦ç”Ÿæ´» â€”â€” Say Good Bye ï¼</a></p><p><a href="http://www.54tianzhisheng.cn/2017/09/17/Interview-summary/" target="_blank" rel="noopener">5ã€é¢è¯•è¿‡é˜¿é‡Œç­‰äº’è”ç½‘å¤§å…¬å¸ï¼Œæˆ‘çŸ¥é“äº†è¿™äº›å¥—è·¯</a></p><p><a href="http://www.54tianzhisheng.cn/2018/07/12/youzan/" target="_blank" rel="noopener">6ã€æ¸£æ¸£èœé¸¡çš„æœ‰èµé¢è¯•ç»å†ï¼ˆä¸€ï¼‰</a></p><p><a href="http://www.54tianzhisheng.cn/2018/07/30/alipay01/" target="_blank" rel="noopener">7ã€æ¸£æ¸£èœé¸¡çš„èš‚èšé‡‘æœé¢è¯•ç»å†ï¼ˆä¸€ï¼‰</a></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æœ¬åœ°åœ°å€ï¼š<a href="http://www.54tianzhisheng.cn/2018/07/31/alipay02" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/07/31/alipay02</a> ï¼Œè½¬è½½è¯·æˆæƒï¼Œå¦åˆ™ç¦æ­¢è½¬è½½ï¼</p><p><strong>æœ¬æ–‡é¦–å‘åœ¨æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œæœ€è¿‘è‡ªå·±ä¸€ç›´åœ¨å†™å‰æ®µæ—¶é—´çš„æ‰€æœ‰é¢è¯•æƒ…å†µï¼Œå·²ç»åˆ†äº«åœ¨æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œå¦‚æœæ„Ÿå…´è¶£ï¼Œå¯ä»¥åŠ å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼</strong></p><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fts8b5uin5j30o00didgn.jpg" alt="zhisheng_zsxq"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws2.sinaimg.cn/large/801b780aly1fttgbvge25j21f60vyack.jpg&quot; alt=&quot;2018-07-31_23-16-07&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="é¢ç»" scheme="http://yoursite.com/tags/%E9%9D%A2%E7%BB%8F/"/>
    
  </entry>
  
  <entry>
    <title>æ¸£æ¸£èœé¸¡çš„èš‚èšé‡‘æœé¢è¯•ç»å†(ä¸€)</title>
    <link href="http://yoursite.com/2018/07/30/alipay01/"/>
    <id>http://yoursite.com/2018/07/30/alipay01/</id>
    <published>2018-07-29T16:00:00.000Z</published>
    <updated>2018-07-30T13:56:13.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fts8b55rbfj30zk0nj4do.jpg" alt="cafe-3537801_1280"></p><a id="more"></a><h2 id="èš‚èšé‡‘æœ"><a href="#èš‚èšé‡‘æœ" class="headerlink" title="èš‚èšé‡‘æœ"></a>èš‚èšé‡‘æœ</h2><h3 id="ç”µè¯ä¸€é¢"><a href="#ç”µè¯ä¸€é¢" class="headerlink" title="ç”µè¯ä¸€é¢"></a>ç”µè¯ä¸€é¢</h3><p>1ã€è‡ªæˆ‘ä»‹ç»ã€è‡ªå·±åšçš„é¡¹ç›®å’ŒæŠ€æœ¯é¢†åŸŸ</p><p>2ã€é¡¹ç›®ä¸­çš„ç›‘æ§ï¼šé‚£ä¸ªç›‘æ§æŒ‡æ ‡å¸¸è§çš„å“ªäº›ï¼Ÿ</p><p>3ã€å¾®æœåŠ¡æ¶‰åŠåˆ°çš„æŠ€æœ¯ä»¥åŠéœ€è¦æ³¨æ„çš„é—®é¢˜æœ‰å“ªäº›ï¼Ÿ</p><p>4ã€æ³¨å†Œä¸­å¿ƒä½ äº†è§£äº†å“ªäº›ï¼Ÿ</p><p>5ã€consul çš„å¯é æ€§ä½ äº†è§£å—ï¼Ÿ</p><p>6ã€consul çš„æœºåˆ¶ä½ æœ‰æ²¡æœ‰å…·ä½“æ·±å…¥è¿‡ï¼Ÿæœ‰æ²¡æœ‰å’Œå…¶ä»–çš„æ³¨å†Œä¸­å¿ƒå¯¹æ¯”è¿‡ï¼Ÿ</p><p>7ã€é¡¹ç›®ç”¨ Spring æ¯”è¾ƒå¤šï¼Œæœ‰æ²¡æœ‰äº†è§£ Spring çš„åŸç†ï¼ŸAOP å’Œ IOC çš„åŸç†</p><p>8ã€Spring Booté™¤äº†è‡ªåŠ¨é…ç½®ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„ Spring æœ‰ä»€ä¹ˆå…¶ä»–çš„åŒºåˆ«ï¼Ÿ</p><p>9ã€Spring Cloud æœ‰äº†è§£å¤šå°‘ï¼Ÿ</p><p>10ã€Spring Bean çš„ç”Ÿå‘½å‘¨æœŸ</p><p>11ã€HashMap å’Œ hashTable åŒºåˆ«ï¼Ÿ</p><p>12ã€Object çš„ hashcode æ–¹æ³•é‡å†™äº†ï¼Œequals æ–¹æ³•è¦ä¸è¦æ”¹ï¼Ÿ</p><p>13ã€Hashmap çº¿ç¨‹ä¸å®‰å…¨çš„å‡ºç°åœºæ™¯</p><p>14ã€çº¿ä¸ŠæœåŠ¡ CPU å¾ˆé«˜è¯¥æ€ä¹ˆåšï¼Ÿæœ‰å“ªäº›æªæ–½å¯ä»¥æ‰¾åˆ°é—®é¢˜</p><p>15ã€JDK ä¸­æœ‰å“ªå‡ ä¸ªçº¿ç¨‹æ± ï¼Ÿé¡ºå¸¦æŠŠçº¿ç¨‹æ± è®²äº†ä¸ªé</p><p>16ã€SQL ä¼˜åŒ–çš„å¸¸è§æ–¹æ³•æœ‰å“ªäº›</p><p>17ã€SQL ç´¢å¼•çš„é¡ºåºï¼Œå­—æ®µçš„é¡ºåº</p><p>18ã€æŸ¥çœ‹ SQL æ˜¯ä¸æ˜¯ä½¿ç”¨äº†ç´¢å¼•ï¼Ÿï¼ˆæœ‰ä»€ä¹ˆå·¥å…·ï¼‰</p><p>19ã€TCP å’Œ UDP çš„åŒºåˆ«ï¼ŸTCP æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­æ€ä¹ˆåšåˆ°å¯é çš„ï¼Ÿ</p><p>20ã€è¯´ä¸‹ä½ çŸ¥é“çš„æ’åºç®—æ³•å§</p><p>21ã€æŸ¥æ‰¾ä¸€ä¸ªæ•°ç»„çš„ä¸­ä½æ•°ï¼Ÿ</p><p>22ã€ä½ æœ‰ä»€ä¹ˆé—®é¢˜æƒ³é—®æˆ‘çš„å—ï¼Ÿ</p><h3 id="ç›¸å…³æ–‡ç« ï¼š"><a href="#ç›¸å…³æ–‡ç« ï¼š" class="headerlink" title="ç›¸å…³æ–‡ç« ï¼š"></a>ç›¸å…³æ–‡ç« ï¼š</h3><p><a href="http://www.54tianzhisheng.cn/2017/08/04/yaxin/" target="_blank" rel="noopener">1ã€ç§‹æ‹›ç¬¬ä¸€ç«™ â€”â€” äºšä¿¡ç§‘æŠ€</a></p><p><a href="http://www.54tianzhisheng.cn/2017/08/04/iqiyi/" target="_blank" rel="noopener">2ã€ç§‹æ‹›ç¬¬äºŒç«™ â€”â€” å†…æ¨çˆ±å¥‡è‰º</a></p><p><a href="http://www.54tianzhisheng.cn/2017/08/04/alibaba/" target="_blank" rel="noopener">3ã€ç§‹æ‹›ç¬¬ä¸‰ç«™ â€”â€” å†…æ¨é˜¿é‡Œï¼ˆä¸€é¢ï¼‰</a></p><p><a href="http://www.54tianzhisheng.cn/2017/08/28/recommend-books/" target="_blank" rel="noopener">4ã€é‚£äº›å¹´æˆ‘çœ‹è¿‡çš„ä¹¦ â€”â€” è‡´æ•¬æˆ‘çš„å¤§å­¦ç”Ÿæ´» â€”â€” Say Good Bye ï¼</a></p><p><a href="http://www.54tianzhisheng.cn/2017/09/17/Interview-summary/" target="_blank" rel="noopener">5ã€é¢è¯•è¿‡é˜¿é‡Œç­‰äº’è”ç½‘å¤§å…¬å¸ï¼Œæˆ‘çŸ¥é“äº†è¿™äº›å¥—è·¯</a></p><p><a href="http://www.54tianzhisheng.cn/2018/07/12/youzan/" target="_blank" rel="noopener">6ã€æ¸£æ¸£èœé¸¡çš„æœ‰èµé¢è¯•ç»å†ï¼ˆä¸€ï¼‰</a></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æœ¬åœ°åœ°å€ï¼š<a href="http://www.54tianzhisheng.cn/2018/07/30/alipay01" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/07/30/alipay01</a> ï¼Œè½¬è½½è¯·æˆæƒï¼Œå¦åˆ™ç¦æ­¢è½¬è½½ï¼</p><p><strong>æœ¬æ–‡é¦–å‘åœ¨æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œæœ€è¿‘è‡ªå·±ä¸€ç›´åœ¨å†™å‰æ®µæ—¶é—´çš„æ‰€æœ‰é¢è¯•æƒ…å†µï¼Œå·²ç»åˆ†äº«åœ¨æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œå¦‚æœæ„Ÿå…´è¶£ï¼Œå¯ä»¥åŠ å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼</strong></p><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fts8b5uin5j30o00didgn.jpg" alt="zhisheng_zsxq"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws4.sinaimg.cn/large/006tNc79ly1fts8b55rbfj30zk0nj4do.jpg&quot; alt=&quot;cafe-3537801_1280&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="é¢ç»" scheme="http://yoursite.com/tags/%E9%9D%A2%E7%BB%8F/"/>
    
  </entry>
  
  <entry>
    <title>æ¸£æ¸£èœé¸¡çš„æœ‰èµé¢è¯•ç»å†ï¼ˆä¸€ï¼‰</title>
    <link href="http://yoursite.com/2018/07/12/youzan/"/>
    <id>http://yoursite.com/2018/07/12/youzan/</id>
    <published>2018-07-11T16:00:00.000Z</published>
    <updated>2018-07-15T01:48:13.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1ftaaye0j1aj31hc0zganr.jpg" alt="003"></p><p>å‡ºå»é¢è¯•çš„è¯è¿˜æ˜¯å¾—å¥½å¥½å‡†å¤‡ï¼Œä¸ç„¶ä¼šè¢«è™çš„æœ‰ç‚¹æƒ¨ï¼<br><a id="more"></a></p><h2 id="æœ‰èµï¼ˆæ¡†æ¶ç»„ï¼‰"><a href="#æœ‰èµï¼ˆæ¡†æ¶ç»„ï¼‰" class="headerlink" title="æœ‰èµï¼ˆæ¡†æ¶ç»„ï¼‰"></a>æœ‰èµï¼ˆæ¡†æ¶ç»„ï¼‰</h2><p>å››æœˆä»½é¢è¯•æœ‰èµçš„æ—¶å€™ï¼Œè‡ªå·±è¿˜åœ¨å®ä¹ ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰å¤ä¹ ï¼Œæ˜¯åœ¨ Boss ç›´è˜ä¸ŠæŠ•çš„ï¼Œå½“æ—¶çœ‹åˆ°äº†æœ‰èµçš„ 2018 å±Šæ˜¥æ‹›ï¼Œå°±æŠ•äº†ä¸‹ï¼Œç„¶åä¸çŸ¥é“æ€ä¹ˆå°±è¢«æ¨åˆ°äº†æ¡†æ¶ç»„ï¼Œç»“æœåé¢å°±æ„Ÿè§‰è‡ªå·±è¢«è™çš„å¯æƒ¨äº†ã€‚</p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="zhisheng"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/07/12/youzan/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/07/12/youzan/</a></p><h3 id="ç”µè¯ä¸€é¢"><a href="#ç”µè¯ä¸€é¢" class="headerlink" title="ç”µè¯ä¸€é¢"></a>ç”µè¯ä¸€é¢</h3><p>å¥½åƒæ˜¯æ¸…æ˜èŠ‚è¿˜æ˜¯äº”ä¸€åŠ³åŠ¨èŠ‚æ¥ç€ï¼Œæˆ‘è¿˜åœ¨ç¡è§‰ï¼Œå°±æ¥åˆ°ä¸€é¢é¢è¯•å®˜çš„ç”µè¯ï¼Œè¯´ç°åœ¨æœ‰æ—¶é—´å—ï¼Œèƒ½å¤Ÿæ¥å—ä¸‹ç”µè¯é¢è¯•å—ï¼Ÿæˆ‘å‹’ä¸ªå»ï¼Œä»Šå¤©è¿‡èŠ‚ã€æˆ‘è¢«ç”µè¯åµé†’çš„ï¼Œç°åœ¨äººéƒ½æ²¡æ¸…é†’ã€è¿™é¢è¯•é‚£è‚¯å®šå¾—ä¸€é¢å°±æŒ‚äº†ï¼Œæ‰€ä»¥å°±è€å®å¾—è¯´ç°åœ¨è¿˜æ˜¯ä¸æ–¹ä¾¿å‘¢ï¼Œçº¦äº†å‘¨ä¸€ä¸Šåˆ 10 ç‚¹é¢è¯•ã€‚</p><p>å‘¨ä¸€ 10 ç‚¹é¢è¯•å®˜å‡†æ—¶æ‰“ç”µè¯è¿‡æ¥äº†ï¼</p><p>ä»¥ä¸‹æ˜¯é¢è¯•çš„é—®é¢˜ï¼š</p><p>1ã€è‡ªæˆ‘ä»‹ç»</p><p>2ã€Map çš„åº•å±‚ç»“æ„ï¼Ÿï¼ˆHashMapï¼‰</p><p>3ã€çº¿ç¨‹å®‰å…¨çš„ Map ï¼ˆconcurrentHashMapï¼‰ç®€å•çš„è¯´äº†ä¸‹è¿™ä¸¤ 1ã€‚7 å’Œ 1.8 çš„åŒºåˆ«ï¼Œæœ¬æƒ³é—®ä¸‹è¦ä¸è¦æ·±å…¥çš„è®²ä¸‹ï¼ˆæºç çº§åˆ«ï¼‰ï¼Œç»“æœé¢è¯•å®˜è¯´ä¸ç”¨äº†ã€‚</p><p>4ã€é¡¹ç›® MySQL çš„æ•°æ®é‡å’Œå¹¶å‘é‡æœ‰å¤šå¤§ï¼Ÿ</p><p>5ã€ä½ å¯¹æ•°æ®åº“äº†è§£å¤šå°‘ï¼Ÿ</p><p>6ã€ä½ è¯´ä¸‹æ•°æ®åº“çš„ç´¢å¼•å®ç°å’Œéä¸»é”®çš„äºŒçº§ç´¢å¼•</p><p>7ã€é¡¹ç›®ç”¨çš„æ˜¯ SpringBoot ï¼Œä½ èƒ½è¯´ä¸‹ Spring Boot ä¸ Spring çš„åŒºåˆ«å—ï¼Ÿ</p><p>8ã€SpringBoot çš„è‡ªåŠ¨é…ç½®æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ</p><p>9ã€MyBatis å®šä¹‰çš„æ¥å£ï¼Œæ€ä¹ˆæ‰¾åˆ°å®ç°çš„ï¼Ÿ</p><p>10ã€Java å†…å­˜ç»“æ„</p><p>11ã€å¯¹è±¡æ˜¯å¦å¯ GCï¼Ÿ</p><p>12ã€Minor GC å’Œ Full GC</p><p>13ã€åƒåœ¾å›æ”¶ç®—æ³•</p><p>14ã€åƒåœ¾å›æ”¶å™¨ G1</p><p>15ã€é¡¹ç›®é‡Œç”¨è¿‡ ElasticSearch å’Œ Hbaseï¼Œæœ‰æ·±å…¥äº†è§£ä»–ä»¬çš„è°ƒä¼˜æŠ€å·§å—ï¼Ÿ</p><p>16ã€Spring RestTemplate çš„å…·ä½“å®ç°</p><p>17ã€æè¿°ä¸‹ç½‘é¡µä¸€ä¸ª Http è¯·æ±‚ï¼Œåˆ°åç«¯çš„æ•´ä¸ªè¯·æ±‚è¿‡ç¨‹</p><p>18ã€å¤šçº¿ç¨‹çš„å¸¸ç”¨æ–¹æ³•å’Œæ¥å£ç±»åŠçº¿ç¨‹æ± çš„æœºåˆ¶</p><p>19ã€æ€»ç»“æˆ‘çš„ Java åŸºç¡€è¿˜æ˜¯ä¸é”™ï¼Œä½†æ˜¯ä¸€äº›ä¸»æµçš„æ¡†æ¶æºç è¿˜æ˜¯å¤„åœ¨ä½¿ç”¨çš„çŠ¶æ€ï¼Œéœ€è¦ç»§ç»­å»çœ‹æºç </p><p>20ã€æ­»é”</p><p>21ã€è‡ªå·±ç ”ç©¶æ¯”è¾ƒæ–°çš„æŠ€æœ¯ï¼Œè¯´ä¸‹æˆæœï¼</p><p>22ã€ä½ æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿæˆ‘å°±é—®äº†ä¸‹å…¬å¸é‚£è¾¹çš„æƒ…å†µï¼Œè¿™ä¸ªè‡ªç”±å‘æŒ¥ï¼</p><p>æœ€åæˆ‘çŸ¥é“æœ‰äºŒé¢çš„é¢è¯•æœºä¼šäº†ã€‚</p><p>10 æ¥åˆ†é’Ÿä¸åˆ°ï¼Œå°±å†æ¬¡æ‰“ç”µè¯è¿‡æ¥çº¦äº†æ˜æ—©ä¸Šåˆ 10 ç‚¹çš„è§†é¢‘é¢è¯•ã€‚</p><h3 id="è§†é¢‘äºŒé¢"><a href="#è§†é¢‘äºŒé¢" class="headerlink" title="è§†é¢‘äºŒé¢"></a>è§†é¢‘äºŒé¢</h3><p>äºŒé¢é¢è¯•å®˜å…ˆæ‰“ç”µè¯è¿‡æ¥ï¼Œç„¶ååŠ äº†ä¸ªå¾®ä¿¡ï¼Œå¼€å§‹å¾®ä¿¡è§†é¢‘é¢è¯•</p><p>è¿™ä¸ªé¢è¯•æˆ‘ä¹Ÿä¸å¤ªè®°å¾—å…·ä½“é¢è¯•é¢˜ç›®äº†ï¼Œä¸‹é¢å†™çš„æ˜¯å¤§æ¦‚æ–¹å‘çš„ï¼š</p><p>1ã€HashMapï¼Œæºç çº§åˆ«çš„é—®äº†ï¼ŒåŒ…æ‹¬ä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨</p><p>2ã€æ­»é”</p><p>3ã€Synchronized å’Œ ReentrantLock é”æœºåˆ¶ï¼Œæ€ä¹ˆåˆ¤æ–­é‡å…¥é”çš„ï¼Œä¼šä¸ä¼šæ˜¯æ­»é”ï¼Ÿ</p><p>4ã€è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ï¼Ÿ</p><p>5ã€è¿›ç¨‹ä¹‹é—´å¦‚ä½•ä¿è¯åŒæ­¥ï¼Ÿ</p><p>6ã€åˆ†å¸ƒå¼é”</p><p>7ã€å¯¹è±¡ GC</p><p>8ã€åƒåœ¾å›æ”¶ç®—æ³•</p><p>9ã€JVM å‚æ•°</p><p>10ã€OOM å‡ºç°çš„æœ‰å“ªäº›åœºæ™¯ï¼Ÿä¸ºä»€ä¹ˆä¼šå‘ç”Ÿï¼Ÿ</p><p>11ã€JVM å†…å­˜ç»“æ„è¯´ä¸‹å§</p><p>12ã€å †å’Œæ ˆçš„å…±äº«é—®é¢˜ï¼Ÿ</p><p>13ã€æœ‰æ¯”è¾ƒè¿‡ Http å’Œ RPC å—ï¼Ÿ</p><p>14ã€HttpClient ä½ è¯´è¯´é‡Œé¢çš„å…·ä½“å®ç°å§ï¼Ÿï¼ˆæ¶‰åŠäº†å“ªäº›ä¸œè¥¿ï¼‰</p><p>15ã€é‚£è¦ä½ è®¾è®¡ä¸€ä¸ªé«˜æ€§èƒ½çš„ Http ï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡ï¼Ÿ</p><p>äºŒé¢å¾®ä¿¡è§†é¢‘é¢è¯•åªè®°å¾—è¿™ä¹ˆå¤šäº†ã€‚</p><hr><p><strong>æœ¬æ–‡é¦–å‘åœ¨æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œæœ€è¿‘è‡ªå·±ä¸€ç›´åœ¨å†™å‰æ®µæ—¶é—´çš„æ‰€æœ‰é¢è¯•æƒ…å†µï¼Œåé¢ä¼šä¸€ç¯‡ä¸€ç¯‡åˆ†äº«åœ¨æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒçš„ï¼Œå¦‚æœæ„Ÿå…´è¶£ï¼Œå¯ä»¥åŠ å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼</strong></p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1ftaayfcr1dj30o00didgn.jpg" alt="zhisheng_zsxq"></p><p>çŸ¥è¯†æ˜Ÿçƒæ›´å¤šé¢ç»æ–‡ç« ï¼š</p><p>1ã€<a href="https://t.zsxq.com/EyfYbuv" target="_blank" rel="noopener">èš‚èšé‡‘æœç”µè¯ä¸€é¢</a></p><p>2ã€<a href="https://t.zsxq.com/AurzjA6" target="_blank" rel="noopener">èš‚èšé‡‘æœç”µè¯äºŒé¢â€”â€”åé¢èŠçš„æœ‰ç‚¹high</a></p><p>3ã€<a href="https://t.zsxq.com/66MJauR" target="_blank" rel="noopener">club factory é¢ç»åˆ†äº«</a></p><p>4ã€<a href="https://t.zsxq.com/biybQFa" target="_blank" rel="noopener">ä½œä¸ºé¢è¯•å®˜å¾—åˆ°çš„ç»éªŒ</a></p><p>5ã€<a href="https://t.zsxq.com/FmuvrJI" target="_blank" rel="noopener">å²ä¸Šæœ€å¼ºæœ€å…¨é¢ç»åˆé›†</a></p><p>6ã€<a href="https://t.zsxq.com/BuNVJuJ" target="_blank" rel="noopener">å…¬å¸éœ€è¦ä»€ä¹ˆæ ·çš„äºº</a></p><p>7ã€<a href="https://t.zsxq.com/UN7i6uV" target="_blank" rel="noopener">å¦‚ä½•ä»‹ç»é¡¹ç›®</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws4.sinaimg.cn/large/006tKfTcly1ftaaye0j1aj31hc0zganr.jpg&quot; alt=&quot;003&quot;&gt;&lt;/p&gt;
&lt;p&gt;å‡ºå»é¢è¯•çš„è¯è¿˜æ˜¯å¾—å¥½å¥½å‡†å¤‡ï¼Œä¸ç„¶ä¼šè¢«è™çš„æœ‰ç‚¹æƒ¨ï¼&lt;br&gt;
    
    </summary>
    
    
      <category term="é¢ç»" scheme="http://yoursite.com/tags/%E9%9D%A2%E7%BB%8F/"/>
    
  </entry>
  
  <entry>
    <title>20 ä¸ªæ¡ˆä¾‹æ•™ä½ åœ¨ Java 8 ä¸­å¦‚ä½•å¤„ç†æ—¥æœŸå’Œæ—¶é—´?</title>
    <link href="http://yoursite.com/2018/06/20/java-8-date/"/>
    <id>http://yoursite.com/2018/06/20/java-8-date/</id>
    <published>2018-06-19T16:00:00.000Z</published>
    <updated>2018-06-20T15:21:02.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fsho6kitc6j31hc0zkdr7.jpg" alt="002"><br><a id="more"></a></p><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>å‰é¢ä¸€ç¯‡æ–‡ç« å†™äº†<a href="http://www.54tianzhisheng.cn/2018/06/19/SimpleDateFormat/" target="_blank" rel="noopener">ã€ŠSimpleDateFormat å¦‚ä½•å®‰å…¨çš„ä½¿ç”¨ï¼Ÿã€‹</a>, é‡Œé¢ä»‹ç»äº† SimpleDateFormat å¦‚ä½•å¤„ç†æ—¥æœŸï¼æ—¶é—´ï¼Œä»¥åŠå¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼ŒåŠå…¶ä»‹ç»äº†åœ¨ Java 8 ä¸­çš„å¤„ç†æ—¶é—´ï¼æ—¥æœŸé»˜è®¤å°±çº¿ç¨‹å®‰å…¨çš„ DateTimeFormatter ç±»ã€‚é‚£ä¹ˆ Java 8 ä¸­è¯¥æ€ä¹ˆæ ·å¤„ç†ç”Ÿæ´»ä¸­å¸¸è§çš„ä¸€äº›æ—¥æœŸï¼æ—¶é—´å‘¢ï¼Ÿæ¯”å¦‚ï¼šè®¡ç®—ä¸€å‘¨åçš„æ—¥æœŸï¼›è®¡ç®—ä¸€å¹´å‰æˆ–ä¸€å¹´åçš„æ—¥æœŸï¼›æ£€æŸ¥é—°å¹´ç­‰ã€‚</p><p>æ¥ä¸‹æ¥åˆ›å»ºäº† 20 ä¸ªåŸºäºä»»åŠ¡çš„å®ä¾‹æ¥å­¦ä¹  Java 8 çš„æ–°ç‰¹æ€§ã€‚ä»æœ€ç®€å•åˆ›å»ºå½“å¤©çš„æ—¥æœŸå¼€å§‹ï¼Œç„¶ååˆ›å»ºæ—¶é—´åŠæ—¶åŒºï¼Œæ¥ç€æ¨¡æ‹Ÿä¸€ä¸ªæ—¥æœŸæé†’åº”ç”¨ä¸­çš„ä»»åŠ¡â€”â€”è®¡ç®—é‡è¦æ—¥æœŸçš„åˆ°æœŸå¤©æ•°ï¼Œä¾‹å¦‚ç”Ÿæ—¥ã€çºªå¿µæ—¥ã€è´¦å•æ—¥ã€ä¿è´¹åˆ°æœŸæ—¥ã€ä¿¡ç”¨å¡è¿‡æœŸæ—¥ç­‰ã€‚</p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="zhisheng"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/06/20/java-8-date/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/06/20/java-8-date/</a></p><h3 id="ç¤ºä¾‹-1ã€åœ¨-Java-8-ä¸­è·å–ä»Šå¤©çš„æ—¥æœŸ"><a href="#ç¤ºä¾‹-1ã€åœ¨-Java-8-ä¸­è·å–ä»Šå¤©çš„æ—¥æœŸ" class="headerlink" title="ç¤ºä¾‹ 1ã€åœ¨ Java 8 ä¸­è·å–ä»Šå¤©çš„æ—¥æœŸ"></a>ç¤ºä¾‹ 1ã€åœ¨ Java 8 ä¸­è·å–ä»Šå¤©çš„æ—¥æœŸ</h3><p>Java 8 ä¸­çš„ LocalDate ç”¨äºè¡¨ç¤ºå½“å¤©æ—¥æœŸã€‚å’Œ java.util.Date ä¸åŒï¼Œå®ƒåªæœ‰æ—¥æœŸï¼Œä¸åŒ…å«æ—¶é—´ã€‚å½“ä½ ä»…éœ€è¦è¡¨ç¤ºæ—¥æœŸæ—¶å°±ç”¨è¿™ä¸ªç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LocalDate now = LocalDate.now();</span><br><span class="line">System.out.println(now);</span><br></pre></td></tr></table></figure><p>ç»“æœæ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2018-06-20</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç åˆ›å»ºäº†å½“å¤©çš„æ—¥æœŸï¼Œä¸å«æ—¶é—´ä¿¡æ¯ã€‚æ‰“å°å‡ºçš„æ—¥æœŸæ ¼å¼éå¸¸å‹å¥½ï¼Œä¸åƒè€çš„ Date ç±»æ‰“å°å‡ºä¸€å †æ²¡æœ‰æ ¼å¼åŒ–çš„ä¿¡æ¯ã€‚</p><h3 id="ç¤ºä¾‹-2ã€åœ¨-Java-8-ä¸­è·å–å¹´ã€æœˆã€æ—¥ä¿¡æ¯"><a href="#ç¤ºä¾‹-2ã€åœ¨-Java-8-ä¸­è·å–å¹´ã€æœˆã€æ—¥ä¿¡æ¯" class="headerlink" title="ç¤ºä¾‹ 2ã€åœ¨ Java 8 ä¸­è·å–å¹´ã€æœˆã€æ—¥ä¿¡æ¯"></a>ç¤ºä¾‹ 2ã€åœ¨ Java 8 ä¸­è·å–å¹´ã€æœˆã€æ—¥ä¿¡æ¯</h3><p>LocalDate ç±»æä¾›äº†è·å–å¹´ã€æœˆã€æ—¥çš„å¿«æ·æ–¹æ³•ï¼Œå…¶å®ä¾‹è¿˜åŒ…å«å¾ˆå¤šå…¶å®ƒçš„æ—¥æœŸå±æ€§ã€‚é€šè¿‡è°ƒç”¨è¿™äº›æ–¹æ³•å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¾—åˆ°éœ€è¦çš„æ—¥æœŸä¿¡æ¯ï¼Œä¸ç”¨åƒä»¥å‰ä¸€æ ·éœ€è¦ä¾èµ– java.util.Calendar ç±»äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LocalDate now = LocalDate.now();</span><br><span class="line"><span class="keyword">int</span> year = now.getYear();</span><br><span class="line"><span class="keyword">int</span> monthValue = now.getMonthValue();</span><br><span class="line"><span class="keyword">int</span> dayOfMonth = now.getDayOfMonth();</span><br><span class="line">System.out.printf(<span class="string">"year = %d, month = %d, day = %d"</span>, year, monthValue, dayOfMonth);</span><br></pre></td></tr></table></figure><p>ç»“æœæ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">year = 2018, month = 6, day = 20</span><br></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹-3ã€åœ¨-Java-8-ä¸­å¤„ç†ç‰¹å®šæ—¥æœŸ"><a href="#ç¤ºä¾‹-3ã€åœ¨-Java-8-ä¸­å¤„ç†ç‰¹å®šæ—¥æœŸ" class="headerlink" title="ç¤ºä¾‹ 3ã€åœ¨ Java 8 ä¸­å¤„ç†ç‰¹å®šæ—¥æœŸ"></a>ç¤ºä¾‹ 3ã€åœ¨ Java 8 ä¸­å¤„ç†ç‰¹å®šæ—¥æœŸ</h3><p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬é€šè¿‡é™æ€å·¥å‚æ–¹æ³• now() éå¸¸å®¹æ˜“åœ°åˆ›å»ºäº†å½“å¤©æ—¥æœŸï¼Œä½ è¿˜å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ªæœ‰ç”¨çš„å·¥å‚æ–¹æ³•LocalDate.of() åˆ›å»ºä»»æ„æ—¥æœŸï¼Œ è¯¥æ–¹æ³•éœ€è¦ä¼ å…¥å¹´ã€æœˆã€æ—¥åšå‚æ•°ï¼Œè¿”å›å¯¹åº”çš„ LocalDate å®ä¾‹ã€‚è¿™ä¸ªæ–¹æ³•çš„å¥½å¤„æ˜¯æ²¡å†çŠ¯è€ API çš„è®¾è®¡é”™è¯¯ï¼Œæ¯”å¦‚å¹´åº¦èµ·å§‹äº 1900ï¼Œæœˆä»½æ˜¯ä» 0 å¼€å§‹ç­‰ç­‰ã€‚æ—¥æœŸæ‰€è§å³æ‰€å¾—ï¼Œå°±åƒä¸‹é¢è¿™ä¸ªä¾‹å­è¡¨ç¤ºäº† 6 æœˆ 20 æ—¥ï¼Œæ²¡æœ‰ä»»ä½•éšè—æœºå…³ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LocalDate date = LocalDate.of(<span class="number">2018</span>, <span class="number">06</span>, <span class="number">20</span>);</span><br><span class="line">System.out.println(date);</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°åˆ›å»ºçš„æ—¥æœŸå®Œå…¨ç¬¦åˆé¢„æœŸï¼Œä¸å†™å…¥çš„ 2018 å¹´ 6 æœˆ 20 æ—¥å®Œå…¨ä¸€è‡´ã€‚</p><h3 id="ç¤ºä¾‹-4ã€åœ¨-Java-8-ä¸­åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦ç›¸ç­‰"><a href="#ç¤ºä¾‹-4ã€åœ¨-Java-8-ä¸­åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦ç›¸ç­‰" class="headerlink" title="ç¤ºä¾‹ 4ã€åœ¨ Java 8 ä¸­åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦ç›¸ç­‰"></a>ç¤ºä¾‹ 4ã€åœ¨ Java 8 ä¸­åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦ç›¸ç­‰</h3><p>ç°å®ç”Ÿæ´»ä¸­æœ‰ä¸€ç±»æ—¶é—´å¤„ç†å°±æ˜¯åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦ç›¸ç­‰ã€‚ä½ å¸¸å¸¸ä¼šæ£€æŸ¥ä»Šå¤©æ˜¯ä¸æ˜¯ä¸ªç‰¹æ®Šçš„æ—¥å­ï¼Œæ¯”å¦‚ç”Ÿæ—¥ã€çºªå¿µæ—¥æˆ–éäº¤æ˜“æ—¥ã€‚è¿™æ—¶å°±éœ€è¦æŠŠæŒ‡å®šçš„æ—¥æœŸä¸æŸä¸ªç‰¹å®šæ—¥æœŸåšæ¯”è¾ƒï¼Œä¾‹å¦‚åˆ¤æ–­è¿™ä¸€å¤©æ˜¯å¦æ˜¯å‡æœŸã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­ä¼šå¸®åŠ©ä½ ç”¨ Java 8 çš„æ–¹å¼å»è§£å†³ï¼Œä½ è‚¯å®šå·²ç»æƒ³åˆ°äº†ï¼ŒLocalDate é‡è½½äº† equal æ–¹æ³•ï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LocalDate now = LocalDate.now();</span><br><span class="line">LocalDate date = LocalDate.of(<span class="number">2018</span>, <span class="number">06</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">if</span> (date.equals(now)) &#123;</span><br><span class="line">System.out.println(<span class="string">"åŒä¸€å¤©"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬æ¯”è¾ƒçš„ä¸¤ä¸ªæ—¥æœŸç›¸åŒã€‚æ³¨æ„ï¼Œå¦‚æœæ¯”è¾ƒçš„æ—¥æœŸæ˜¯å­—ç¬¦å‹çš„ï¼Œéœ€è¦å…ˆè§£ææˆæ—¥æœŸå¯¹è±¡å†ä½œåˆ¤æ–­ã€‚</p><h3 id="ç¤ºä¾‹-5ã€åœ¨-Java-8-ä¸­æ£€æŸ¥åƒç”Ÿæ—¥è¿™ç§å‘¨æœŸæ€§äº‹ä»¶"><a href="#ç¤ºä¾‹-5ã€åœ¨-Java-8-ä¸­æ£€æŸ¥åƒç”Ÿæ—¥è¿™ç§å‘¨æœŸæ€§äº‹ä»¶" class="headerlink" title="ç¤ºä¾‹ 5ã€åœ¨ Java 8 ä¸­æ£€æŸ¥åƒç”Ÿæ—¥è¿™ç§å‘¨æœŸæ€§äº‹ä»¶"></a>ç¤ºä¾‹ 5ã€åœ¨ Java 8 ä¸­æ£€æŸ¥åƒç”Ÿæ—¥è¿™ç§å‘¨æœŸæ€§äº‹ä»¶</h3><p>Java ä¸­å¦ä¸€ä¸ªæ—¥æœŸæ—¶é—´çš„å¤„ç†å°±æ˜¯æ£€æŸ¥ç±»ä¼¼æ¯æœˆè´¦å•ã€ç»“å©šçºªå¿µæ—¥ã€EMIæ—¥æˆ–ä¿é™©ç¼´è´¹æ—¥è¿™äº›å‘¨æœŸæ€§äº‹ä»¶ã€‚å¦‚æœä½ åœ¨ç”µå­å•†åŠ¡ç½‘ç«™å·¥ä½œï¼Œé‚£ä¹ˆä¸€å®šä¼šæœ‰ä¸€ä¸ªæ¨¡å—ç”¨æ¥åœ¨åœ£è¯èŠ‚ã€æ„Ÿæ©èŠ‚è¿™ç§èŠ‚æ—¥æ—¶å‘å®¢æˆ·å‘é€é—®å€™é‚®ä»¶ã€‚Java ä¸­å¦‚ä½•æ£€æŸ¥è¿™äº›èŠ‚æ—¥æˆ–å…¶å®ƒå‘¨æœŸæ€§äº‹ä»¶å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ MonthDay ç±»ã€‚è¿™ä¸ªç±»ç»„åˆäº†æœˆä»½å’Œæ—¥ï¼Œå»æ‰äº†å¹´ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨å®ƒåˆ¤æ–­æ¯å¹´éƒ½ä¼šå‘ç”Ÿäº‹ä»¶ã€‚å’Œè¿™ä¸ªç±»ç›¸ä¼¼çš„è¿˜æœ‰ä¸€ä¸ª YearMonth ç±»ã€‚è¿™äº›ç±»ä¹Ÿéƒ½æ˜¯ä¸å¯å˜å¹¶ä¸”çº¿ç¨‹å®‰å…¨çš„å€¼ç±»å‹ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡ MonthDay æ¥æ£€æŸ¥å‘¨æœŸæ€§äº‹ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">LocalDate now = LocalDate.now();</span><br><span class="line">LocalDate dateOfBirth = LocalDate.of(<span class="number">2018</span>, <span class="number">06</span>, <span class="number">20</span>);</span><br><span class="line">MonthDay birthday = MonthDay.of(dateOfBirth.getMonth(), dateOfBirth.getDayOfMonth());</span><br><span class="line">MonthDay currentMonthDay = MonthDay.from(now);</span><br><span class="line"><span class="keyword">if</span> (currentMonthDay.equals(birthday)) &#123;</span><br><span class="line">System.out.println(<span class="string">"Happy Birthday"</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">"Sorry, today is not your birthday"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼šï¼ˆæ³¨æ„ï¼šè·å–å½“å‰æ—¶é—´å¯èƒ½ä¸ä½ çœ‹çš„æ—¶å€™ä¸å¯¹ï¼Œæ‰€ä»¥è¿™ä¸ªç»“æœå¯èƒ½å’Œä½ çœ‹çš„æ—¶å€™è¿è¡Œç»“æœä¸ä¸€æ ·ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Happy Birthday</span><br></pre></td></tr></table></figure><p>åªè¦å½“å¤©çš„æ—¥æœŸå’Œç”Ÿæ—¥åŒ¹é…ï¼Œæ— è®ºæ˜¯å“ªä¸€å¹´éƒ½ä¼šæ‰“å°å‡ºç¥è´ºä¿¡æ¯ã€‚ä½ å¯ä»¥æŠŠç¨‹åºæ•´åˆè¿›ç³»ç»Ÿæ—¶é’Ÿï¼Œçœ‹çœ‹ç”Ÿæ—¥æ—¶æ˜¯å¦ä¼šå—åˆ°æé†’ï¼Œæˆ–è€…å†™ä¸€ä¸ªå•å…ƒæµ‹è¯•æ¥æ£€æµ‹ä»£ç æ˜¯å¦è¿è¡Œæ­£ç¡®ã€‚</p><h3 id="ç¤ºä¾‹-6ã€åœ¨-Java-8-ä¸­è·å–å½“å‰æ—¶é—´"><a href="#ç¤ºä¾‹-6ã€åœ¨-Java-8-ä¸­è·å–å½“å‰æ—¶é—´" class="headerlink" title="ç¤ºä¾‹ 6ã€åœ¨ Java 8 ä¸­è·å–å½“å‰æ—¶é—´"></a>ç¤ºä¾‹ 6ã€åœ¨ Java 8 ä¸­è·å–å½“å‰æ—¶é—´</h3><p>ä¸ Java 8 è·å–æ—¥æœŸçš„ä¾‹å­å¾ˆåƒï¼Œè·å–æ—¶é—´ä½¿ç”¨çš„æ˜¯ LocalTime ç±»ï¼Œä¸€ä¸ªåªæœ‰æ—¶é—´æ²¡æœ‰æ—¥æœŸçš„ LocalDate è¿‘äº²ã€‚å¯ä»¥è°ƒç”¨é™æ€å·¥å‚æ–¹æ³• now() æ¥è·å–å½“å‰æ—¶é—´ã€‚é»˜è®¤çš„æ ¼å¼æ˜¯ hh:mm:ss:nnnã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LocalTime localTime = LocalTime.now();</span><br><span class="line">System.out.println(localTime);</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">13:35:56.155</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å½“å‰æ—¶é—´å°±åªåŒ…å«æ—¶é—´ä¿¡æ¯ï¼Œæ²¡æœ‰æ—¥æœŸã€‚</p><h3 id="ç¤ºä¾‹-7ã€å¦‚ä½•åœ¨ç°æœ‰çš„æ—¶é—´ä¸Šå¢åŠ å°æ—¶"><a href="#ç¤ºä¾‹-7ã€å¦‚ä½•åœ¨ç°æœ‰çš„æ—¶é—´ä¸Šå¢åŠ å°æ—¶" class="headerlink" title="ç¤ºä¾‹ 7ã€å¦‚ä½•åœ¨ç°æœ‰çš„æ—¶é—´ä¸Šå¢åŠ å°æ—¶"></a>ç¤ºä¾‹ 7ã€å¦‚ä½•åœ¨ç°æœ‰çš„æ—¶é—´ä¸Šå¢åŠ å°æ—¶</h3><p>é€šè¿‡å¢åŠ å°æ—¶ã€åˆ†ã€ç§’æ¥è®¡ç®—å°†æ¥çš„æ—¶é—´å¾ˆå¸¸è§ã€‚Java 8 é™¤äº†ä¸å˜ç±»å‹å’Œçº¿ç¨‹å®‰å…¨çš„å¥½å¤„ä¹‹å¤–ï¼Œè¿˜æä¾›äº†æ›´å¥½çš„plusHours() æ–¹æ³•æ›¿æ¢ add()ï¼Œå¹¶ä¸”æ˜¯å…¼å®¹çš„ã€‚æ³¨æ„ï¼Œè¿™äº›æ–¹æ³•è¿”å›ä¸€ä¸ªå…¨æ–°çš„ LocalTime å®ä¾‹ï¼Œç”±äºå…¶ä¸å¯å˜æ€§ï¼Œè¿”å›åä¸€å®šè¦ç”¨å˜é‡èµ‹å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LocalTime localTime = LocalTime.now();</span><br><span class="line">System.out.println(localTime);</span><br><span class="line">LocalTime localTime1 = localTime.plusHours(<span class="number">2</span>);<span class="comment">//å¢åŠ 2å°æ—¶</span></span><br><span class="line">System.out.println(localTime1);</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">13:41:20.721</span><br><span class="line">15:41:20.721</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæ–°çš„æ—¶é—´åœ¨å½“å‰æ—¶é—´ 13:41:20.721 çš„åŸºç¡€ä¸Šå¢åŠ äº† 2 ä¸ªå°æ—¶ã€‚</p><h3 id="ç¤ºä¾‹-8ã€å¦‚ä½•è®¡ç®—ä¸€å‘¨åçš„æ—¥æœŸ"><a href="#ç¤ºä¾‹-8ã€å¦‚ä½•è®¡ç®—ä¸€å‘¨åçš„æ—¥æœŸ" class="headerlink" title="ç¤ºä¾‹ 8ã€å¦‚ä½•è®¡ç®—ä¸€å‘¨åçš„æ—¥æœŸ"></a>ç¤ºä¾‹ 8ã€å¦‚ä½•è®¡ç®—ä¸€å‘¨åçš„æ—¥æœŸ</h3><p>å’Œä¸Šä¸ªä¾‹å­è®¡ç®—ä¸¤å°æ—¶ä»¥åçš„æ—¶é—´ç±»ä¼¼ï¼Œè¿™ä¸ªä¾‹å­ä¼šè®¡ç®—ä¸€å‘¨åçš„æ—¥æœŸã€‚LocalDate æ—¥æœŸä¸åŒ…å«æ—¶é—´ä¿¡æ¯ï¼Œå®ƒçš„ plus()æ–¹æ³•ç”¨æ¥å¢åŠ å¤©ã€å‘¨ã€æœˆï¼ŒChronoUnit ç±»å£°æ˜äº†è¿™äº›æ—¶é—´å•ä½ã€‚ç”±äº LocalDate ä¹Ÿæ˜¯ä¸å˜ç±»å‹ï¼Œè¿”å›åä¸€å®šè¦ç”¨å˜é‡èµ‹å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LocalDate now = LocalDate.now();</span><br><span class="line">LocalDate plusDate = now.plus(<span class="number">1</span>, ChronoUnit.WEEKS);</span><br><span class="line">System.out.println(now);</span><br><span class="line">System.out.println(plusDate);</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2018-06-20</span><br><span class="line">2018-06-27</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æ–°æ—¥æœŸç¦»å½“å¤©æ—¥æœŸæ˜¯ 7 å¤©ï¼Œä¹Ÿå°±æ˜¯ä¸€å‘¨ã€‚ä½ å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•å¢åŠ  1 ä¸ªæœˆã€1 å¹´ã€1 å°æ—¶ã€1 åˆ†é’Ÿç”šè‡³ä¸€ä¸ªä¸–çºªï¼Œæ›´å¤šé€‰é¡¹å¯ä»¥æŸ¥çœ‹ Java 8 API ä¸­çš„ ChronoUnit ç±»ã€‚</p><h3 id="ç¤ºä¾‹-9ã€è®¡ç®—ä¸€å¹´å‰æˆ–ä¸€å¹´åçš„æ—¥æœŸ"><a href="#ç¤ºä¾‹-9ã€è®¡ç®—ä¸€å¹´å‰æˆ–ä¸€å¹´åçš„æ—¥æœŸ" class="headerlink" title="ç¤ºä¾‹ 9ã€è®¡ç®—ä¸€å¹´å‰æˆ–ä¸€å¹´åçš„æ—¥æœŸ"></a>ç¤ºä¾‹ 9ã€è®¡ç®—ä¸€å¹´å‰æˆ–ä¸€å¹´åçš„æ—¥æœŸ</h3><p>ç»§ç»­ä¸Šé¢çš„ä¾‹å­ï¼Œä¸Šä¸ªä¾‹å­ä¸­æˆ‘ä»¬é€šè¿‡ LocalDate çš„ plus() æ–¹æ³•å¢åŠ å¤©æ•°ã€å‘¨æ•°æˆ–æœˆæ•°ï¼Œè¿™ä¸ªä¾‹å­æˆ‘ä»¬åˆ©ç”¨ minus() æ–¹æ³•è®¡ç®—ä¸€å¹´å‰çš„æ—¥æœŸã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LocalDate now = LocalDate.now();</span><br><span class="line">LocalDate minusDate = now.minus(<span class="number">1</span>, ChronoUnit.YEARS);</span><br><span class="line">LocalDate plusDate1 = now.plus(<span class="number">1</span>, ChronoUnit.YEARS);</span><br><span class="line">System.out.println(minusDate);</span><br><span class="line">System.out.println(plusDate1);</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2017-06-20</span><br><span class="line">2019-06-20</span><br></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹-10ã€ä½¿ç”¨-Java-8-çš„-Clock-æ—¶é’Ÿç±»"><a href="#ç¤ºä¾‹-10ã€ä½¿ç”¨-Java-8-çš„-Clock-æ—¶é’Ÿç±»" class="headerlink" title="ç¤ºä¾‹ 10ã€ä½¿ç”¨ Java 8 çš„ Clock æ—¶é’Ÿç±»"></a>ç¤ºä¾‹ 10ã€ä½¿ç”¨ Java 8 çš„ Clock æ—¶é’Ÿç±»</h3><p>Java 8 å¢åŠ äº†ä¸€ä¸ª Clock æ—¶é’Ÿç±»ç”¨äºè·å–å½“æ—¶çš„æ—¶é—´æˆ³ï¼Œæˆ–å½“å‰æ—¶åŒºä¸‹çš„æ—¥æœŸæ—¶é—´ä¿¡æ¯ã€‚ä»¥å‰ç”¨åˆ°System.currentTimeInMillis() å’Œ TimeZone.getDefault() çš„åœ°æ–¹éƒ½å¯ç”¨ Clock æ›¿æ¢ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Clock clock = Clock.systemUTC();</span><br><span class="line">Clock clock1 = Clock.systemDefaultZone();</span><br><span class="line">System.out.println(clock);</span><br><span class="line">System.out.println(clock1);</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SystemClock[Z]</span><br><span class="line">SystemClock[Asia/Shanghai]</span><br></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹-11ã€å¦‚ä½•ç”¨-Java-åˆ¤æ–­æ—¥æœŸæ˜¯æ—©äºè¿˜æ˜¯æ™šäºå¦ä¸€ä¸ªæ—¥æœŸ"><a href="#ç¤ºä¾‹-11ã€å¦‚ä½•ç”¨-Java-åˆ¤æ–­æ—¥æœŸæ˜¯æ—©äºè¿˜æ˜¯æ™šäºå¦ä¸€ä¸ªæ—¥æœŸ" class="headerlink" title="ç¤ºä¾‹ 11ã€å¦‚ä½•ç”¨ Java åˆ¤æ–­æ—¥æœŸæ˜¯æ—©äºè¿˜æ˜¯æ™šäºå¦ä¸€ä¸ªæ—¥æœŸ"></a>ç¤ºä¾‹ 11ã€å¦‚ä½•ç”¨ Java åˆ¤æ–­æ—¥æœŸæ˜¯æ—©äºè¿˜æ˜¯æ™šäºå¦ä¸€ä¸ªæ—¥æœŸ</h3><p>å¦ä¸€ä¸ªå·¥ä½œä¸­å¸¸è§çš„æ“ä½œå°±æ˜¯å¦‚ä½•åˆ¤æ–­ç»™å®šçš„ä¸€ä¸ªæ—¥æœŸæ˜¯å¤§äºæŸå¤©è¿˜æ˜¯å°äºæŸå¤©ï¼Ÿåœ¨ Java 8 ä¸­ï¼ŒLocalDate ç±»æœ‰ä¸¤ç±»æ–¹æ³• isBefore() å’Œ isAfter() ç”¨äºæ¯”è¾ƒæ—¥æœŸã€‚è°ƒç”¨ isBefore() æ–¹æ³•æ—¶ï¼Œå¦‚æœç»™å®šæ—¥æœŸå°äºå½“å‰æ—¥æœŸåˆ™è¿”å› trueã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">LocalDate tomorrow = LocalDate.of(<span class="number">2018</span>,<span class="number">6</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">if</span>(tomorrow.isAfter(now))&#123;</span><br><span class="line">System.out.println(<span class="string">"Tomorrow comes after today"</span>);</span><br><span class="line">&#125;</span><br><span class="line">LocalDate yesterday = now.minus(<span class="number">1</span>, ChronoUnit.DAYS);</span><br><span class="line"><span class="keyword">if</span>(yesterday.isBefore(now))&#123;</span><br><span class="line">System.out.println(<span class="string">"Yesterday is day before today"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ Java 8 ä¸­æ¯”è¾ƒæ—¥æœŸéå¸¸æ–¹ä¾¿ï¼Œä¸éœ€è¦ä½¿ç”¨é¢å¤–çš„ Calendar ç±»æ¥åšè¿™äº›åŸºç¡€å·¥ä½œäº†ã€‚</p><h3 id="ç¤ºä¾‹-12ã€åœ¨-Java-8-ä¸­å¤„ç†æ—¶åŒº"><a href="#ç¤ºä¾‹-12ã€åœ¨-Java-8-ä¸­å¤„ç†æ—¶åŒº" class="headerlink" title="ç¤ºä¾‹ 12ã€åœ¨ Java 8 ä¸­å¤„ç†æ—¶åŒº"></a>ç¤ºä¾‹ 12ã€åœ¨ Java 8 ä¸­å¤„ç†æ—¶åŒº</h3><p>Java 8 ä¸ä»…åˆ†ç¦»äº†æ—¥æœŸå’Œæ—¶é—´ï¼Œä¹ŸæŠŠæ—¶åŒºåˆ†ç¦»å‡ºæ¥äº†ã€‚ç°åœ¨æœ‰ä¸€ç³»åˆ—å•ç‹¬çš„ç±»å¦‚ ZoneId æ¥å¤„ç†ç‰¹å®šæ—¶åŒºï¼ŒZoneDateTime ç±»æ¥è¡¨ç¤ºæŸæ—¶åŒºä¸‹çš„æ—¶é—´ã€‚è¿™åœ¨ Java 8 ä»¥å‰éƒ½æ˜¯ GregorianCalendar ç±»æ¥åšçš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ZoneId america = ZoneId.of(<span class="string">"America/New_York"</span>);</span><br><span class="line">LocalDateTime localtDateAndTime = LocalDateTime.now();</span><br><span class="line">ZonedDateTime dateAndTimeInNewYork  = ZonedDateTime.of(localtDateAndTime, america );</span><br><span class="line">System.out.println(dateAndTimeInNewYork);</span><br></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹-13ã€å¦‚ä½•è¡¨ç¤ºä¿¡ç”¨å¡åˆ°æœŸè¿™ç±»å›ºå®šæ—¥æœŸï¼Œç­”æ¡ˆå°±åœ¨-YearMonth"><a href="#ç¤ºä¾‹-13ã€å¦‚ä½•è¡¨ç¤ºä¿¡ç”¨å¡åˆ°æœŸè¿™ç±»å›ºå®šæ—¥æœŸï¼Œç­”æ¡ˆå°±åœ¨-YearMonth" class="headerlink" title="ç¤ºä¾‹ 13ã€å¦‚ä½•è¡¨ç¤ºä¿¡ç”¨å¡åˆ°æœŸè¿™ç±»å›ºå®šæ—¥æœŸï¼Œç­”æ¡ˆå°±åœ¨ YearMonth"></a>ç¤ºä¾‹ 13ã€å¦‚ä½•è¡¨ç¤ºä¿¡ç”¨å¡åˆ°æœŸè¿™ç±»å›ºå®šæ—¥æœŸï¼Œç­”æ¡ˆå°±åœ¨ YearMonth</h3><p>ä¸ MonthDay æ£€æŸ¥é‡å¤äº‹ä»¶çš„ä¾‹å­ç›¸ä¼¼ï¼ŒYearMonth æ˜¯å¦ä¸€ä¸ªç»„åˆç±»ï¼Œç”¨äºè¡¨ç¤ºä¿¡ç”¨å¡åˆ°æœŸæ—¥ã€FD åˆ°æœŸæ—¥ã€æœŸè´§æœŸæƒåˆ°æœŸæ—¥ç­‰ã€‚è¿˜å¯ä»¥ç”¨è¿™ä¸ªç±»å¾—åˆ° å½“æœˆå…±æœ‰å¤šå°‘å¤©ï¼ŒYearMonth å®ä¾‹çš„ lengthOfMonth() æ–¹æ³•å¯ä»¥è¿”å›å½“æœˆçš„å¤©æ•°ï¼Œåœ¨åˆ¤æ–­ 2 æœˆæœ‰ 28 å¤©è¿˜æ˜¯ 29 å¤©æ—¶éå¸¸æœ‰ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">YearMonth currentYearMonth = YearMonth.now();</span><br><span class="line">System.out.printf(<span class="string">"Days in month year %s: %d%n"</span>, currentYearMonth, currentYearMonth.lengthOfMonth());</span><br><span class="line">YearMonth creditCardExpiry = YearMonth.of(<span class="number">2018</span>, Month.FEBRUARY);</span><br><span class="line">System.out.printf(<span class="string">"Your credit card expires on %s %n"</span>, creditCardExpiry);</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Days in month year 2018-06: 30</span><br><span class="line">Your credit card expires on 2018-02</span><br></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹-14ã€å¦‚ä½•åœ¨-Java-8-ä¸­æ£€æŸ¥é—°å¹´"><a href="#ç¤ºä¾‹-14ã€å¦‚ä½•åœ¨-Java-8-ä¸­æ£€æŸ¥é—°å¹´" class="headerlink" title="ç¤ºä¾‹ 14ã€å¦‚ä½•åœ¨ Java 8 ä¸­æ£€æŸ¥é—°å¹´"></a>ç¤ºä¾‹ 14ã€å¦‚ä½•åœ¨ Java 8 ä¸­æ£€æŸ¥é—°å¹´</h3><p>LocalDate ç±»æœ‰ä¸€ä¸ªå¾ˆå®ç”¨çš„æ–¹æ³• isLeapYear() åˆ¤æ–­è¯¥å®ä¾‹æ˜¯å¦æ˜¯ä¸€ä¸ªé—°å¹´ã€‚</p><h3 id="ç¤ºä¾‹-15ã€è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å’Œæœˆæ•°"><a href="#ç¤ºä¾‹-15ã€è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å’Œæœˆæ•°" class="headerlink" title="ç¤ºä¾‹ 15ã€è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å’Œæœˆæ•°"></a>ç¤ºä¾‹ 15ã€è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å’Œæœˆæ•°</h3><p>æœ‰ä¸€ä¸ªå¸¸è§æ—¥æœŸæ“ä½œæ˜¯è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°ã€å‘¨æ•°æˆ–æœˆæ•°ã€‚åœ¨ Java 8 ä¸­å¯ä»¥ç”¨ java.time.Period ç±»æ¥åšè®¡ç®—ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è®¡ç®—äº†å½“å¤©å’Œå°†æ¥æŸä¸€å¤©ä¹‹é—´çš„æœˆæ•°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LocalDate date = LocalDate.of(2019, Month.MARCH, 20);</span><br><span class="line">Period period = Period.between(now, date);</span><br><span class="line">System.out.println(&quot;ç¦»ä¸‹ä¸ªæ—¶é—´è¿˜æœ‰&quot; + period.getMonths() + &quot; ä¸ªæœˆ&quot;);</span><br></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹-16ã€åŒ…å«æ—¶å·®ä¿¡æ¯çš„æ—¥æœŸå’Œæ—¶é—´"><a href="#ç¤ºä¾‹-16ã€åŒ…å«æ—¶å·®ä¿¡æ¯çš„æ—¥æœŸå’Œæ—¶é—´" class="headerlink" title="ç¤ºä¾‹ 16ã€åŒ…å«æ—¶å·®ä¿¡æ¯çš„æ—¥æœŸå’Œæ—¶é—´"></a>ç¤ºä¾‹ 16ã€åŒ…å«æ—¶å·®ä¿¡æ¯çš„æ—¥æœŸå’Œæ—¶é—´</h3><p>åœ¨ Java 8 ä¸­ï¼ŒZoneOffset ç±»ç”¨æ¥è¡¨ç¤ºæ—¶åŒºï¼Œä¸¾ä¾‹æ¥è¯´å°åº¦ä¸ GMT æˆ– UTC æ ‡å‡†æ—¶åŒºç›¸å·® +05:30ï¼Œå¯ä»¥é€šè¿‡ZoneOffset.of() é™æ€æ–¹æ³•æ¥è·å–å¯¹åº”çš„æ—¶åŒºã€‚ä¸€æ—¦å¾—åˆ°äº†æ—¶å·®å°±å¯ä»¥é€šè¿‡ä¼ å…¥ LocalDateTime å’Œ ZoneOffset æ¥åˆ›å»ºä¸€ä¸ª OffSetDateTime å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LocalDateTime datetime = LocalDateTime.of(<span class="number">2014</span>, Month.JANUARY, <span class="number">14</span>,<span class="number">19</span>,<span class="number">30</span>);</span><br><span class="line">ZoneOffset offset = ZoneOffset.of(<span class="string">"+05:30"</span>);</span><br><span class="line">OffsetDateTime date = OffsetDateTime.of(datetime, offset);  </span><br><span class="line">System.out.println(<span class="string">"Date and Time with timezone offset in Java : "</span> + date);</span><br></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹-17ã€åœ¨-Java-8-ä¸­è·å–å½“å‰çš„æ—¶é—´æˆ³"><a href="#ç¤ºä¾‹-17ã€åœ¨-Java-8-ä¸­è·å–å½“å‰çš„æ—¶é—´æˆ³" class="headerlink" title="ç¤ºä¾‹ 17ã€åœ¨ Java 8 ä¸­è·å–å½“å‰çš„æ—¶é—´æˆ³"></a>ç¤ºä¾‹ 17ã€åœ¨ Java 8 ä¸­è·å–å½“å‰çš„æ—¶é—´æˆ³</h3><p>å¦‚æœä½ è¿˜è®°å¾— Java 8 ä»¥å‰æ˜¯å¦‚ä½•è·å¾—å½“å‰æ—¶é—´æˆ³ï¼Œé‚£ä¹ˆç°åœ¨ä½ ç»ˆäºè§£è„±äº†ã€‚Instant ç±»æœ‰ä¸€ä¸ªé™æ€å·¥å‚æ–¹æ³• now() ä¼šè¿”å›å½“å‰çš„æ—¶é—´æˆ³ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Instant timestamp = Instant.now();</span><br><span class="line">System.out.println(timestamp);</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2018-06-20T06:35:24.881Z</span><br></pre></td></tr></table></figure><p>æ—¶é—´æˆ³ä¿¡æ¯é‡ŒåŒæ—¶åŒ…å«äº†æ—¥æœŸå’Œæ—¶é—´ï¼Œè¿™å’Œ java.util.Date å¾ˆåƒã€‚å®é™…ä¸Š Instant ç±»ç¡®å®ç­‰åŒäº Java 8 ä¹‹å‰çš„ Dateç±»ï¼Œä½ å¯ä»¥ä½¿ç”¨ Date ç±»å’Œ Instant ç±»å„è‡ªçš„è½¬æ¢æ–¹æ³•äº’ç›¸è½¬æ¢ï¼Œä¾‹å¦‚ï¼šDate.from(Instant) å°† Instant è½¬æ¢æˆjava.util.Dateï¼ŒDate.toInstant() åˆ™æ˜¯å°† Date ç±»è½¬æ¢æˆ Instant ç±»ã€‚</p><h3 id="ç¤ºä¾‹-18ã€åœ¨-Java-8-ä¸­å¦‚ä½•ä½¿ç”¨é¢„å®šä¹‰çš„æ ¼å¼åŒ–å·¥å…·å»è§£ææˆ–æ ¼å¼åŒ–æ—¥æœŸ"><a href="#ç¤ºä¾‹-18ã€åœ¨-Java-8-ä¸­å¦‚ä½•ä½¿ç”¨é¢„å®šä¹‰çš„æ ¼å¼åŒ–å·¥å…·å»è§£ææˆ–æ ¼å¼åŒ–æ—¥æœŸ" class="headerlink" title="ç¤ºä¾‹ 18ã€åœ¨ Java 8 ä¸­å¦‚ä½•ä½¿ç”¨é¢„å®šä¹‰çš„æ ¼å¼åŒ–å·¥å…·å»è§£ææˆ–æ ¼å¼åŒ–æ—¥æœŸ"></a>ç¤ºä¾‹ 18ã€åœ¨ Java 8 ä¸­å¦‚ä½•ä½¿ç”¨é¢„å®šä¹‰çš„æ ¼å¼åŒ–å·¥å…·å»è§£ææˆ–æ ¼å¼åŒ–æ—¥æœŸ</h3><p>åœ¨ Java 8 ä»¥å‰çš„ä¸–ç•Œé‡Œï¼Œæ—¥æœŸå’Œæ—¶é—´çš„æ ¼å¼åŒ–éå¸¸è¯¡å¼‚ï¼Œå”¯ä¸€çš„å¸®åŠ©ç±» SimpleDateFormat ä¹Ÿæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œä¸”ç”¨ä½œå±€éƒ¨å˜é‡è§£æå’Œæ ¼å¼åŒ–æ—¥æœŸæ—¶æ˜¾å¾—å¾ˆç¬¨é‡ã€‚å¹¸å¥½çº¿ç¨‹å±€éƒ¨å˜é‡èƒ½ä½¿å®ƒåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å˜å¾—å¯ç”¨ï¼Œä¸è¿‡è¿™éƒ½æ˜¯è¿‡å»æ—¶äº†ã€‚Java 8 å¼•å…¥äº†å…¨æ–°çš„æ—¥æœŸæ—¶é—´æ ¼å¼å·¥å…·ï¼Œçº¿ç¨‹å®‰å…¨è€Œä¸”ä½¿ç”¨æ–¹ä¾¿ã€‚å®ƒè‡ªå¸¦äº†ä¸€äº›å¸¸ç”¨çš„å†…ç½®æ ¼å¼åŒ–å·¥å…·ã€‚</p><p>å‚è§æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ï¼š <a href="http://www.54tianzhisheng.cn/2018/06/19/SimpleDateFormat/" target="_blank" rel="noopener">ã€ŠSimpleDateFormat å¦‚ä½•å®‰å…¨çš„ä½¿ç”¨ï¼Ÿã€‹</a></p><h3 id="ç¤ºä¾‹-19ã€å¦‚ä½•åœ¨-Java-ä¸­ä½¿ç”¨è‡ªå®šä¹‰æ ¼å¼åŒ–å·¥å…·è§£ææ—¥æœŸ"><a href="#ç¤ºä¾‹-19ã€å¦‚ä½•åœ¨-Java-ä¸­ä½¿ç”¨è‡ªå®šä¹‰æ ¼å¼åŒ–å·¥å…·è§£ææ—¥æœŸ" class="headerlink" title="ç¤ºä¾‹ 19ã€å¦‚ä½•åœ¨ Java ä¸­ä½¿ç”¨è‡ªå®šä¹‰æ ¼å¼åŒ–å·¥å…·è§£ææ—¥æœŸ"></a>ç¤ºä¾‹ 19ã€å¦‚ä½•åœ¨ Java ä¸­ä½¿ç”¨è‡ªå®šä¹‰æ ¼å¼åŒ–å·¥å…·è§£ææ—¥æœŸ</h3><p>å°½ç®¡å†…ç½®æ ¼å¼åŒ–å·¥å…·å¾ˆå¥½ç”¨ï¼Œæœ‰æ—¶è¿˜æ˜¯éœ€è¦å®šä¹‰ç‰¹å®šçš„æ—¥æœŸæ ¼å¼ã€‚å¯ä»¥è°ƒç”¨ DateTimeFormatter çš„ ofPattern() é™æ€æ–¹æ³•å¹¶ä¼ å…¥ä»»æ„æ ¼å¼è¿”å›å…¶å®ä¾‹ï¼Œæ ¼å¼ä¸­çš„å­—ç¬¦å’Œä»¥å‰ä»£è¡¨çš„ä¸€æ ·ï¼ŒM ä»£è¡¨æœˆï¼Œm ä»£è¡¨åˆ†ã€‚å¦‚æœæ ¼å¼ä¸è§„èŒƒä¼šæŠ›å‡º DateTimeParseException å¼‚å¸¸ï¼Œä¸è¿‡å¦‚æœåªæ˜¯æŠŠ M å†™æˆ m è¿™ç§é€»è¾‘é”™è¯¯æ˜¯ä¸ä¼šæŠ›å¼‚å¸¸çš„ã€‚</p><p>å‚è§æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ï¼š <a href="http://www.54tianzhisheng.cn/2018/06/19/SimpleDateFormat/" target="_blank" rel="noopener">ã€ŠSimpleDateFormat å¦‚ä½•å®‰å…¨çš„ä½¿ç”¨ï¼Ÿã€‹</a></p><h3 id="ç¤ºä¾‹-20ã€åœ¨-Java-8-ä¸­å¦‚ä½•æŠŠæ—¥æœŸè½¬æ¢æˆå­—ç¬¦ä¸²"><a href="#ç¤ºä¾‹-20ã€åœ¨-Java-8-ä¸­å¦‚ä½•æŠŠæ—¥æœŸè½¬æ¢æˆå­—ç¬¦ä¸²" class="headerlink" title="ç¤ºä¾‹ 20ã€åœ¨ Java 8 ä¸­å¦‚ä½•æŠŠæ—¥æœŸè½¬æ¢æˆå­—ç¬¦ä¸²"></a>ç¤ºä¾‹ 20ã€åœ¨ Java 8 ä¸­å¦‚ä½•æŠŠæ—¥æœŸè½¬æ¢æˆå­—ç¬¦ä¸²</h3><p>ä¸Šä¸¤ä¸ªä¸»è¦æ˜¯ä»å­—ç¬¦ä¸²è§£ææ—¥æœŸã€‚ç°åœ¨æˆ‘ä»¬åè¿‡æ¥ï¼ŒæŠŠ LocalDateTime æ—¥æœŸå®ä¾‹è½¬æ¢æˆç‰¹å®šæ ¼å¼çš„å­—ç¬¦ä¸²ã€‚è¿™æ˜¯è¿„ä»Šä¸ºæ­¢ Java æ—¥æœŸè½¬å­—ç¬¦ä¸²æœ€ä¸ºç®€å•çš„æ–¹å¼äº†ã€‚ä¸‹é¢çš„ä¾‹å­å°†è¿”å›ä¸€ä¸ªä»£è¡¨æ—¥æœŸçš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚å’Œå‰é¢ç±»ä¼¼ï¼Œè¿˜æ˜¯éœ€è¦åˆ›å»º DateTimeFormatter å®ä¾‹å¹¶ä¼ å…¥æ ¼å¼ï¼Œä½†è¿™å›è°ƒç”¨çš„æ˜¯ format() æ–¹æ³•ï¼Œè€Œé parse() æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šæŠŠä¼ å…¥çš„æ—¥æœŸè½¬åŒ–æˆæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸²ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">LocalDateTime arrivalDate  = LocalDateTime.now();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    DateTimeFormatter format = DateTimeFormatter.ofPattern(<span class="string">"MMMdd yyyy  hh:mm a"</span>);</span><br><span class="line">    String landing = arrivalDate.format(format);</span><br><span class="line">    System.out.printf(<span class="string">"Arriving at :  %s %n"</span>, landing);</span><br><span class="line">&#125;<span class="keyword">catch</span> (DateTimeException ex) &#123;</span><br><span class="line">    System.out.printf(<span class="string">"%s can't be formatted!%n"</span>, arrivalDate);</span><br><span class="line">    ex.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Java-8-æ—¥æœŸæ—¶é—´-API-çš„é‡ç‚¹"><a href="#Java-8-æ—¥æœŸæ—¶é—´-API-çš„é‡ç‚¹" class="headerlink" title="Java 8 æ—¥æœŸæ—¶é—´ API çš„é‡ç‚¹"></a>Java 8 æ—¥æœŸæ—¶é—´ API çš„é‡ç‚¹</h3><p>é€šè¿‡è¿™äº›ä¾‹å­ï¼Œä½ è‚¯å®šå·²ç»æŒæ¡äº† Java 8 æ—¥æœŸæ—¶é—´ API çš„æ–°çŸ¥è¯†ç‚¹ã€‚ç°åœ¨æ¥å›é¡¾ä¸€ä¸‹è¿™ä¸ªä¼˜é›… API çš„ä½¿ç”¨è¦ç‚¹ï¼š</p><p>1ï¼‰æä¾›äº† javax.time.ZoneId è·å–æ—¶åŒºã€‚</p><p>2ï¼‰æä¾›äº† LocalDate å’Œ LocalTime ç±»ã€‚</p><p>3ï¼‰Java 8 çš„æ‰€æœ‰æ—¥æœŸå’Œæ—¶é—´ API éƒ½æ˜¯ä¸å¯å˜ç±»å¹¶ä¸”çº¿ç¨‹å®‰å…¨ï¼Œè€Œç°æœ‰çš„ Date å’Œ Calendar API ä¸­çš„ java.util.Date å’ŒSimpleDateFormat æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>4ï¼‰ä¸»åŒ…æ˜¯ java.time, åŒ…å«äº†è¡¨ç¤ºæ—¥æœŸã€æ—¶é—´ã€æ—¶é—´é—´éš”çš„ä¸€äº›ç±»ã€‚é‡Œé¢æœ‰ä¸¤ä¸ªå­åŒ… java.time.format ç”¨äºæ ¼å¼åŒ–ï¼Œ java.time.temporal ç”¨äºæ›´åº•å±‚çš„æ“ä½œã€‚</p><p>5ï¼‰æ—¶åŒºä»£è¡¨äº†åœ°çƒä¸ŠæŸä¸ªåŒºåŸŸå†…æ™®éä½¿ç”¨çš„æ ‡å‡†æ—¶é—´ã€‚æ¯ä¸ªæ—¶åŒºéƒ½æœ‰ä¸€ä¸ªä»£å·ï¼Œæ ¼å¼é€šå¸¸ç”±åŒºåŸŸ/åŸå¸‚æ„æˆï¼ˆAsia/Tokyoï¼‰ï¼Œåœ¨åŠ ä¸Šä¸æ ¼æ—å¨æ²»æˆ– UTC çš„æ—¶å·®ã€‚ä¾‹å¦‚ï¼šä¸œäº¬çš„æ—¶å·®æ˜¯ +09:00ã€‚</p><p>6ï¼‰OffsetDateTime ç±»å®é™…ä¸Šç»„åˆäº† LocalDateTime ç±»å’Œ ZoneOffset ç±»ã€‚ç”¨æ¥è¡¨ç¤ºåŒ…å«å’Œæ ¼æ—å¨æ²»æˆ– UTC æ—¶å·®çš„å®Œæ•´æ—¥æœŸï¼ˆå¹´ã€æœˆã€æ—¥ï¼‰å’Œæ—¶é—´ï¼ˆæ—¶ã€åˆ†ã€ç§’ã€çº³ç§’ï¼‰ä¿¡æ¯ã€‚</p><p>7ï¼‰DateTimeFormatter ç±»ç”¨æ¥æ ¼å¼åŒ–å’Œè§£ææ—¶é—´ã€‚ä¸ SimpleDateFormat ä¸åŒï¼Œè¿™ä¸ªç±»ä¸å¯å˜å¹¶ä¸”çº¿ç¨‹å®‰å…¨ï¼Œéœ€è¦æ—¶å¯ä»¥ç»™é™æ€å¸¸é‡èµ‹å€¼ã€‚ DateTimeFormatter ç±»æä¾›äº†å¤§é‡çš„å†…ç½®æ ¼å¼åŒ–å·¥å…·ï¼ŒåŒæ—¶ä¹Ÿå…è®¸ä½ è‡ªå®šä¹‰ã€‚åœ¨è½¬æ¢æ–¹é¢ä¹Ÿæä¾›äº† parse() å°†å­—ç¬¦ä¸²è§£ææˆæ—¥æœŸï¼Œå¦‚æœè§£æå‡ºé”™ä¼šæŠ›å‡º DateTimeParseExceptionã€‚DateTimeFormatter ç±»åŒæ—¶è¿˜æœ‰format() ç”¨æ¥æ ¼å¼åŒ–æ—¥æœŸï¼Œå¦‚æœå‡ºé”™ä¼šæŠ›å‡º DateTimeExceptionå¼‚å¸¸ã€‚</p><p>8ï¼‰å†è¡¥å……ä¸€ç‚¹ï¼Œæ—¥æœŸæ ¼å¼â€œMMM d yyyyâ€å’Œâ€œMMM dd yyyyâ€æœ‰ä¸€äº›å¾®å¦™çš„ä¸åŒï¼Œç¬¬ä¸€ä¸ªæ ¼å¼å¯ä»¥è§£æâ€œJan 2 2014â€å’Œâ€œJan 14 2014â€ï¼Œè€Œç¬¬äºŒä¸ªåœ¨è§£æâ€œJan 2 2014â€å°±ä¼šæŠ›å¼‚å¸¸ï¼Œå› ä¸ºç¬¬äºŒä¸ªæ ¼å¼é‡Œè¦æ±‚æ—¥å¿…é¡»æ˜¯ä¸¤ä½çš„ã€‚å¦‚æœæƒ³ä¿®æ­£ï¼Œä½ å¿…é¡»åœ¨æ—¥æœŸåªæœ‰ä¸ªä½æ•°æ—¶åœ¨å‰é¢è¡¥é›¶ï¼Œå°±æ˜¯è¯´â€œJan 2 2014â€åº”è¯¥å†™æˆ â€œJan 02 2014â€ã€‚</p><h3 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h3><p><a href="http://www.54tianzhisheng.cn/2018/06/19/SimpleDateFormat/" target="_blank" rel="noopener">SimpleDateFormat å¦‚ä½•å®‰å…¨çš„ä½¿ç”¨ï¼Ÿ</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws2.sinaimg.cn/large/006tKfTcgy1fsho6kitc6j31hc0zkdr7.jpg&quot; alt=&quot;002&quot;&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>SimpleDateFormat å¦‚ä½•å®‰å…¨çš„ä½¿ç”¨ï¼Ÿ</title>
    <link href="http://yoursite.com/2018/06/19/SimpleDateFormat/"/>
    <id>http://yoursite.com/2018/06/19/SimpleDateFormat/</id>
    <published>2018-06-18T16:00:00.000Z</published>
    <updated>2018-06-20T07:25:33.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fshewu3v3yj31hc0zkwix.jpg" alt="001"></p><a id="more"></a><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä¸ºä»€ä¹ˆä¼šå†™è¿™ç¯‡æ–‡ç« ï¼Ÿå› ä¸ºè¿™äº›å¤©åœ¨çœ‹ã€Šé˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œè¯¦å°½ç‰ˆã€‹ï¼Œæ²¡çœ‹è¿‡çš„å¯ä»¥å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼š<strong>zhisheng</strong>ï¼Œå›å¤å…³é”®å­—ï¼š<strong>é˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œè¯¦å°½ç‰ˆ</strong>  å°±å¯ä»¥è·å¾—ã€‚</p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/06/19/SimpleDateFormat/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/06/19/SimpleDateFormat/</a></p><p>åœ¨çœ‹çš„è¿‡ç¨‹ä¸­æœ‰è¿™ä¹ˆä¸€æ¡ï¼š</p><blockquote><p><strong>ã€å¼ºåˆ¶ã€‘SimpleDateFormat æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ç±»ï¼Œä¸€èˆ¬ä¸è¦å®šä¹‰ä¸º static å˜é‡ï¼Œå¦‚æœå®šä¹‰ä¸º staticï¼Œå¿…é¡»åŠ é”ï¼Œæˆ–è€…ä½¿ç”¨ DateUtils å·¥å…·ç±»ã€‚ </strong></p></blockquote><p>çœ‹åˆ°è¿™æ¡æˆ‘ç«‹é©¬å°±æƒ³èµ·äº†æˆ‘å®ä¹ çš„æ—¶å€™æœ‰ä¸ªé¡¹ç›®é‡Œé¢å°±çŠ¯äº†è¿™ä¸ªé”™è¯¯ï¼Œè®°å¾—å½“æ—¶æ˜¯è¿™æ ·å†™çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> SimpleDateFormat df = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyMMddHHmmss"</span>);</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æ‰è®¤çœŸçš„å»ç ”ç©¶ä¸‹è¿™ä¸ª SimpleDateFormatï¼Œæ‰€ä»¥æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚</p><h3 id="å®ƒæ˜¯è°ï¼Ÿ"><a href="#å®ƒæ˜¯è°ï¼Ÿ" class="headerlink" title="å®ƒæ˜¯è°ï¼Ÿ"></a>å®ƒæ˜¯è°ï¼Ÿ</h3><p>æƒ³å¿…å¤§å®¶å¯¹ <code>SimpleDateFormat</code> å¹¶ä¸é™Œç”Ÿã€‚<code>SimpleDateFormat</code>  æ˜¯ Java ä¸­ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„ç±»ï¼Œä»–æ˜¯ä»¥åŒºåŸŸæ•æ„Ÿçš„æ–¹å¼æ ¼å¼åŒ–å’Œè§£ææ—¥æœŸçš„å…·ä½“ç±»ã€‚ å®ƒå…è®¸æ ¼å¼åŒ– (date -&gt; text)ã€è¯­æ³•åˆ†æ (text -&gt; date)å’Œæ ‡å‡†åŒ–ã€‚</p><p><code>SimpleDateFormat</code> å…è®¸ä»¥ä»»ä½•ç”¨æˆ·æŒ‡å®šçš„æ—¥æœŸ-æ—¶é—´æ ¼å¼æ–¹å¼å¯åŠ¨ã€‚ ä½†æ˜¯ï¼Œå»ºè®®ä½¿ç”¨ <code>DateFormat</code> ä¸­çš„ <code>getTimeInstance</code>ã€ <code>getDateInstance</code> æˆ– <code>getDateTimeInstance</code> æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªæ—¥æœŸ-æ—¶é—´æ ¼å¼ã€‚ è¿™å‡ ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªé»˜è®¤çš„æ—¥æœŸï¼æ—¶é—´æ ¼å¼ã€‚ ä½ å¯ä»¥æ ¹æ®éœ€è¦ç”¨ <code>applyPattern</code> æ–¹æ³•ä¿®æ”¹æ ¼å¼æ–¹å¼ã€‚</p><h3 id="æ—¥æœŸæ—¶é—´æ ¼å¼"><a href="#æ—¥æœŸæ—¶é—´æ ¼å¼" class="headerlink" title="æ—¥æœŸæ—¶é—´æ ¼å¼"></a>æ—¥æœŸæ—¶é—´æ ¼å¼</h3><p>æ—¥æœŸå’Œæ—¶é—´æ ¼å¼ç”± <strong>æ—¥æœŸå’Œæ—¶é—´æ¨¡å¼å­—ç¬¦ä¸²</strong> æŒ‡å®šã€‚åœ¨ <strong>æ—¥æœŸå’Œæ—¶é—´æ¨¡å¼å­—ç¬¦ä¸²</strong> ä¸­ï¼ŒæœªåŠ å¼•å·çš„å­—æ¯ â€˜Aâ€™ åˆ° â€˜Zâ€™ å’Œ â€˜aâ€™ åˆ° â€˜zâ€™ è¢«è§£é‡Šä¸ºæ¨¡å¼å­—æ¯ï¼Œç”¨æ¥è¡¨ç¤ºæ—¥æœŸæˆ–æ—¶é—´å­—ç¬¦ä¸²å…ƒç´ ã€‚æ–‡æœ¬å¯ä»¥ä½¿ç”¨å•å¼•å· (â€˜) å¼•èµ·æ¥ï¼Œä»¥å…è¿›è¡Œè§£é‡Šã€‚æ‰€æœ‰å…¶ä»–å­—ç¬¦å‡ä¸è§£é‡Šï¼Œåªæ˜¯åœ¨æ ¼å¼åŒ–æ—¶å°†å®ƒä»¬ç®€å•å¤åˆ¶åˆ°è¾“å‡ºå­—ç¬¦ä¸²ã€‚</p><p>ç®€å•çš„è®²ï¼šè¿™äº› A â€”â€”Zï¼Œa â€”â€” z è¿™äº›å­—æ¯(ä¸è¢«å•å¼•å·åŒ…å›´çš„)ä¼šè¢«ç‰¹æ®Šå¤„ç†æ›¿æ¢ä¸ºå¯¹åº”çš„æ—¥æœŸæ—¶é—´ï¼Œå…¶ä»–çš„å­—ç¬¦ä¸²è¿˜æ˜¯åŸæ ·è¾“å‡ºã€‚</p><p>æ—¥æœŸå’Œæ—¶é—´æ¨¡å¼(<strong>æ³¨æ„å¤§å°å†™ï¼Œä»£è¡¨çš„å«ä¹‰æ˜¯ä¸åŒçš„</strong>)å¦‚ä¸‹ï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fshewuz8vij30vm150tfw.jpg" alt="2018-06-19_11-17-43"></p><h3 id="æ€ä¹ˆä½¿ç”¨ï¼Ÿ"><a href="#æ€ä¹ˆä½¿ç”¨ï¼Ÿ" class="headerlink" title="æ€ä¹ˆä½¿ç”¨ï¼Ÿ"></a>æ€ä¹ˆä½¿ç”¨ï¼Ÿ</h3><p>æ—¥æœŸï¼æ—¶é—´æ ¼å¼æ¨¡ç‰ˆæ ·ä¾‹ï¼šï¼ˆç»™çš„æ—¶é—´æ˜¯ï¼š2001-07-04 12:08:56  U.S. Pacific Time time zoneï¼‰</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fshewwuu6pj30x20mqwio.jpg" alt="2018-06-19_11-27-39"></p><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhisheng_tian on 2018/6/19</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FormatDateTime</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SimpleDateFormat myFmt = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyå¹´MMæœˆddæ—¥ HHæ—¶mmåˆ†ssç§’"</span>);</span><br><span class="line">        SimpleDateFormat myFmt1 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yy/MM/dd HH:mm"</span>);</span><br><span class="line">        SimpleDateFormat myFmt2 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);<span class="comment">//ç­‰ä»·äºnow.toLocaleString()</span></span><br><span class="line">        SimpleDateFormat myFmt3 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyå¹´MMæœˆddæ—¥ HHæ—¶mmåˆ†ssç§’ E "</span>);</span><br><span class="line">        SimpleDateFormat myFmt4 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"ä¸€å¹´ä¸­çš„ç¬¬ D å¤© ä¸€å¹´ä¸­ç¬¬wä¸ªæ˜ŸæœŸ ä¸€æœˆä¸­ç¬¬Wä¸ªæ˜ŸæœŸ åœ¨ä¸€å¤©ä¸­kæ—¶ zæ—¶åŒº"</span>);</span><br><span class="line">        Date now = <span class="keyword">new</span> Date();</span><br><span class="line">        System.out.println(myFmt.format(now));</span><br><span class="line">        System.out.println(myFmt1.format(now));</span><br><span class="line">        System.out.println(myFmt2.format(now));</span><br><span class="line">        System.out.println(myFmt3.format(now));</span><br><span class="line">        System.out.println(myFmt4.format(now));</span><br><span class="line">        System.out.println(now.toGMTString());</span><br><span class="line">        System.out.println(now.toLocaleString());</span><br><span class="line">        System.out.println(now.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœæ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">2018å¹´06æœˆ19æ—¥ 23æ—¶10åˆ†05ç§’</span><br><span class="line">18/06/19 23:10</span><br><span class="line">2018-06-19 23:10:05</span><br><span class="line">2018å¹´06æœˆ19æ—¥ 23æ—¶10åˆ†05ç§’ æ˜ŸæœŸäºŒ</span><br><span class="line">ä¸€å¹´ä¸­çš„ç¬¬ 170 å¤© ä¸€å¹´ä¸­ç¬¬25ä¸ªæ˜ŸæœŸ ä¸€æœˆä¸­ç¬¬4ä¸ªæ˜ŸæœŸ åœ¨ä¸€å¤©ä¸­23æ—¶ CSTæ—¶åŒº</span><br><span class="line">19 Jun 2018 15:10:05 GMT</span><br><span class="line">2018-6-19 23:10:05</span><br><span class="line">Tue Jun 19 23:10:05 CST 2018</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯å…ˆè‡ªå·±å®šä¹‰å¥½æ—¶é—´ï¼æ—¥æœŸæ¨¡ç‰ˆï¼Œç„¶åè°ƒç”¨ format æ–¹æ³•ï¼ˆä¼ å…¥ä¸€ä¸ªæ—¶é—´ Date å‚æ•°ï¼‰ã€‚</p><p>ä¸Šé¢çš„æ˜¯æ—¥æœŸè½¬æ¢æˆè‡ªå·±æƒ³è¦çš„å­—ç¬¦ä¸²æ ¼å¼ã€‚ä¸‹é¢åè¿‡æ¥ï¼Œå°†å­—ç¬¦ä¸²ç±»å‹è£…æ¢æˆæ—¥æœŸç±»å‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhisheng_tian on 2018/6/19</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringFormatDate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String time1 = <span class="string">"2018å¹´06æœˆ19æ—¥ 23æ—¶10åˆ†05ç§’"</span>;</span><br><span class="line">        String time2 = <span class="string">"18/06/19 23:10"</span>;</span><br><span class="line">        String time3 = <span class="string">"2018-06-19 23:10:05"</span>;</span><br><span class="line">        String time4 = <span class="string">"2018å¹´06æœˆ19æ—¥ 23æ—¶10åˆ†05ç§’ æ˜ŸæœŸäºŒ"</span>;</span><br><span class="line"></span><br><span class="line">        SimpleDateFormat myFmt = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyå¹´MMæœˆddæ—¥ HHæ—¶mmåˆ†ssç§’"</span>);</span><br><span class="line">        SimpleDateFormat myFmt1 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yy/MM/dd HH:mm"</span>);</span><br><span class="line">        SimpleDateFormat myFmt2 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);<span class="comment">//ç­‰ä»·äºnow.toLocaleString()</span></span><br><span class="line">        SimpleDateFormat myFmt3 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyå¹´MMæœˆddæ—¥ HHæ—¶mmåˆ†ssç§’ E"</span>);</span><br><span class="line"></span><br><span class="line">        Date date1 = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            date1 = myFmt.parse(time1);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(date1);</span><br><span class="line"></span><br><span class="line">        Date date2 = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            date2 = myFmt1.parse(time2);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(date2);</span><br><span class="line"></span><br><span class="line">        Date date3 = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            date3 = myFmt2.parse(time3);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(date3);</span><br><span class="line"></span><br><span class="line">        Date date4 = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            date4 = myFmt3.parse(time4);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(date4);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœæ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Tue Jun 19 23:10:05 CST 2018</span><br><span class="line">Tue Jun 19 23:10:00 CST 2018</span><br><span class="line">Tue Jun 19 23:10:05 CST 2018</span><br><span class="line">Tue Jun 19 23:10:05 CST 2018</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè½¬æ¢æ–¹æ³•ä¹Ÿå¾ˆç®€å•ã€‚ä½†æ˜¯ä¸è¦é«˜å…´çš„å¤ªæ—©ï¼Œä¸»è§’ä¸åœ¨è¿™ã€‚</p><h3 id="çº¿ç¨‹ä¸å®‰å…¨"><a href="#çº¿ç¨‹ä¸å®‰å…¨" class="headerlink" title="çº¿ç¨‹ä¸å®‰å…¨"></a>çº¿ç¨‹ä¸å®‰å…¨</h3><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fsheww10htj31g40wedm3.jpg" alt="2018-06-19_23-56-29"></p><p>åœ¨ SimpleDateFormat ç±»çš„ JavaDoc ä¸­ï¼Œæè¿°äº†è¯¥ç±»ä¸èƒ½å¤Ÿä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå»ºè®®ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ›å»ºå•ç‹¬çš„æ—¥æœŸï¼æ—¶é—´æ ¼å¼å®ä¾‹ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªæ—¥æœŸï¼æ—¶é—´æ ¼å¼ï¼Œå®ƒå¿…é¡»åœ¨å¤–éƒ¨è¿›è¡ŒåŒæ­¥ã€‚é‚£ä¹ˆåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è°ƒç”¨ format() å’Œ parse() æ–¹æ³•åº”è¯¥ä½¿ç”¨åŒæ­¥ä»£ç æ¥é¿å…é—®é¢˜ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„åœºæ™¯æ¥ä¸€æ­¥æ­¥çš„æ·±å…¥å­¦ä¹ å’Œç†è§£SimpleDateFormat ç±»ã€‚</p><p>1ã€æ¯ä¸ªçº¿ç¨‹åˆ›å»ºå•ç‹¬çš„æ—¥æœŸï¼æ—¶é—´æ ¼å¼å®ä¾‹</p><blockquote><p> å¤§é‡çš„åˆ›å»º SimpleDateFormat å®ä¾‹å¯¹è±¡ï¼Œç„¶åå†ä¸¢å¼ƒè¿™ä¸ªå¯¹è±¡ï¼Œå ç”¨å¤§é‡çš„å†…å­˜å’Œ JVM ç©ºé—´ã€‚</p></blockquote><p>2ã€åˆ›å»ºä¸€ä¸ªé™æ€çš„ SimpleDateFormat å®ä¾‹ï¼Œåœ¨ä½¿ç”¨æ—¶ç›´æ¥ä½¿ç”¨è¿™ä¸ªå®ä¾‹è¿›è¡Œæ“ä½œï¼ˆæˆ‘å½“æ—¶å°±æ˜¯è¿™ä¹ˆå¹²çš„ğŸ˜„ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> SimpleDateFormat df = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">Date date = <span class="keyword">new</span> Date();</span><br><span class="line">df.format(date);</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œè¿™ä¸ªæ–¹æ³•çš„ç¡®å¾ˆä¸é”™ï¼Œåœ¨å¤§éƒ¨åˆ†çš„æ—¶é—´é‡Œé¢éƒ½ä¼šå·¥ä½œå¾—å¾ˆå¥½ï¼Œä½†ä¸€æ—¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸€å®šè´Ÿè½½æƒ…å†µä¸‹æ—¶ï¼Œè¿™ä¸ªé—®é¢˜å°±å‡ºæ¥äº†ã€‚ä»–ä¼šå‡ºç°å„ç§ä¸åŒçš„æƒ…å†µï¼Œæ¯”å¦‚è½¬åŒ–çš„æ—¶é—´ä¸æ­£ç¡®ï¼Œæ¯”å¦‚æŠ¥é”™ï¼Œæ¯”å¦‚çº¿ç¨‹è¢«æŒ‚æ­»ç­‰ç­‰ã€‚æˆ‘ä»¬çœ‹ä¸‹é¢çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæ‹¿äº‹å®è¯´è¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhisheng_tian on 2018/6/20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">formatDate</span><span class="params">(Date date)</span> <span class="keyword">throws</span> ParseException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sdf.format(date);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title">parse</span><span class="params">(String strDate)</span> <span class="keyword">throws</span> ParseException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sdf.parse(strDate);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhisheng_tian on 2018/6/20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateUtilsTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSimpleDateFormatThreadSafe</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">this</span>.join(<span class="number">2000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e1) &#123;</span><br><span class="line">                    e1.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="keyword">this</span>.getName() + <span class="string">":"</span> + DateUtils.parse(<span class="string">"2018-06-20 01:18:20"</span>));</span><br><span class="line">                &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> TestSimpleDateFormatThreadSafe().start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">"Thread-0"</span> Exception in thread <span class="string">"Thread-1"</span> java.lang.NumberFormatException: For input string: <span class="string">""</span></span><br><span class="line">at java.lang.NumberFormatException.forInputString(NumberFormatException.java:<span class="number">65</span>)</span><br><span class="line">at java.lang.Long.parseLong(Long.java:<span class="number">601</span>)</span><br><span class="line">at java.lang.Long.parseLong(Long.java:<span class="number">631</span>)</span><br><span class="line">at java.text.DigitList.getLong(DigitList.java:<span class="number">195</span>)</span><br><span class="line">at java.text.DecimalFormat.parse(DecimalFormat.java:<span class="number">2051</span>)</span><br><span class="line">at java.text.SimpleDateFormat.subParse(SimpleDateFormat.java:<span class="number">1869</span>)</span><br><span class="line">at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:<span class="number">1514</span>)</span><br><span class="line">at java.text.DateFormat.parse(DateFormat.java:<span class="number">364</span>)</span><br><span class="line">at com.zhisheng.demo.date.DateUtils.parse(DateUtils.java:<span class="number">19</span>)</span><br><span class="line">at com.zhisheng.demo.date.DateUtilsTest$TestSimpleDateFormatThreadSafe.run(DateUtilsTest.java:<span class="number">19</span>)</span><br><span class="line">java.lang.NumberFormatException: For input string: <span class="string">".1818"</span></span><br><span class="line">at java.lang.NumberFormatException.forInputString(NumberFormatException.java:<span class="number">65</span>)</span><br><span class="line">at java.lang.Long.parseLong(Long.java:<span class="number">578</span>)</span><br><span class="line">at java.lang.Long.parseLong(Long.java:<span class="number">631</span>)</span><br><span class="line">at java.text.DigitList.getLong(DigitList.java:<span class="number">195</span>)</span><br><span class="line">at java.text.DecimalFormat.parse(DecimalFormat.java:<span class="number">2051</span>)</span><br><span class="line">at java.text.SimpleDateFormat.subParse(SimpleDateFormat.java:<span class="number">2162</span>)</span><br><span class="line">at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:<span class="number">1514</span>)</span><br><span class="line">at java.text.DateFormat.parse(DateFormat.java:<span class="number">364</span>)</span><br><span class="line">at com.zhisheng.demo.date.DateUtils.parse(DateUtils.java:<span class="number">19</span>)</span><br><span class="line">at com.zhisheng.demo.date.DateUtilsTest$TestSimpleDateFormatThreadSafe.run(DateUtilsTest.java:<span class="number">19</span>)</span><br><span class="line">Thread-<span class="number">2</span>:Sat Jun <span class="number">20</span> <span class="number">01</span>:<span class="number">18</span>:<span class="number">20</span> CST <span class="number">2201</span></span><br><span class="line">Thread-<span class="number">2</span>:Wed Jun <span class="number">20</span> <span class="number">01</span>:<span class="number">18</span>:<span class="number">20</span> CST <span class="number">2018</span></span><br><span class="line">Thread-<span class="number">2</span>:Wed Jun <span class="number">20</span> <span class="number">01</span>:<span class="number">18</span>:<span class="number">20</span> CST <span class="number">2018</span></span><br><span class="line">Thread-<span class="number">2</span>:Wed Jun <span class="number">20</span> <span class="number">01</span>:<span class="number">18</span>:<span class="number">20</span> CST <span class="number">2018</span></span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼šThread-1å’ŒThread-0æŠ¥java.lang.NumberFormatException: multiple pointsé”™è¯¯ï¼Œç›´æ¥æŒ‚æ­»ï¼Œæ²¡èµ·æ¥ï¼›Thread-2 è™½ç„¶æ²¡æœ‰æŒ‚æ­»ï¼Œä½†è¾“å‡ºçš„æ—¶é—´æ˜¯æœ‰é”™è¯¯çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬è¾“å…¥çš„æ—¶é—´æ˜¯ï¼š2018-06-20 01:18:20 ï¼Œå½“ä¼šè¾“å‡ºï¼šSat Jun 20 01:18:20 CST 2201 è¿™æ ·çš„çµå¼‚äº‹ä»¶ã€‚</p><h3 id="Why"><a href="#Why" class="headerlink" title="Why?"></a>Why?</h3><p>ä¸ºä»€ä¹ˆä¼šå‡ºç°çº¿ç¨‹ä¸å®‰å…¨çš„é—®é¢˜å‘¢ï¼Ÿ</p><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡çœ‹ JDK æºç æ¥çœ‹çœ‹ä¸ºä»€ä¹ˆ SimpleDateFormat å’Œ DateFormat ç±»ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„çœŸæ­£åŸå› ï¼š</p><p>SimpleDateFormat ç»§æ‰¿äº† DateFormatï¼Œåœ¨ DateFormat ä¸­å®šä¹‰äº†ä¸€ä¸ª protected å±æ€§çš„ Calendar ç±»çš„å¯¹è±¡ï¼šcalendarã€‚åªæ˜¯å› ä¸º Calendar ç±»çš„æ¦‚å¿µå¤æ‚ï¼Œç‰µæ‰¯åˆ°æ—¶åŒºä¸æœ¬åœ°åŒ–ç­‰ç­‰ï¼ŒJDK çš„å®ç°ä¸­ä½¿ç”¨äº†æˆå‘˜å˜é‡æ¥ä¼ é€’å‚æ•°ï¼Œè¿™å°±é€ æˆåœ¨å¤šçº¿ç¨‹çš„æ—¶å€™ä¼šå‡ºç°é”™è¯¯ã€‚</p><p>åœ¨ SimpleDateFormat ä¸­çš„ format æ–¹æ³•æºç ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> StringBuffer <span class="title">format</span><span class="params">(Date date, StringBuffer toAppendTo,FieldPosition pos)</span> </span>&#123;</span><br><span class="line">  pos.beginIndex = pos.endIndex = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> format(date, toAppendTo, pos.getFieldDelegate());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Called from Format after creating a FieldDelegate</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> StringBuffer <span class="title">format</span><span class="params">(Date date, StringBuffer toAppendTo,FieldDelegate delegate)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Convert input date to time field list</span></span><br><span class="line">  calendar.setTime(date);</span><br><span class="line">  <span class="keyword">boolean</span> useDateFormatSymbols = useDateFormatSymbols();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; compiledPattern.length; ) &#123;</span><br><span class="line">    <span class="keyword">int</span> tag = compiledPattern[i] &gt;&gt;&gt; <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">int</span> count = compiledPattern[i++] &amp; <span class="number">0xff</span>;</span><br><span class="line">    <span class="keyword">if</span> (count == <span class="number">255</span>) &#123;</span><br><span class="line">      count = compiledPattern[i++] &lt;&lt; <span class="number">16</span>;</span><br><span class="line">      count |= compiledPattern[i++];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (tag) &#123;</span><br><span class="line">      <span class="keyword">case</span> TAG_QUOTE_ASCII_CHAR:</span><br><span class="line">        toAppendTo.append((<span class="keyword">char</span>)count);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> TAG_QUOTE_CHARS:</span><br><span class="line">        toAppendTo.append(compiledPattern, i, count);</span><br><span class="line">        i += count;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        subFormat(tag, count, delegate, toAppendTo, useDateFormatSymbols);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> toAppendTo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>calendar.setTime(date)  è¿™æ¡è¯­å¥æ”¹å˜äº† calendarï¼Œç¨åï¼Œcalendar è¿˜ä¼šç”¨åˆ°ï¼ˆåœ¨ subFormat æ–¹æ³•é‡Œï¼‰ï¼Œè€Œè¿™å°±æ˜¯å¼•å‘é—®é¢˜çš„æ ¹æºã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨ä¸€ä¸ªå¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæœ‰ä¸¤ä¸ªçº¿ç¨‹æŒæœ‰äº†åŒä¸€ä¸ª SimpleDateFormat çš„å®ä¾‹ï¼Œåˆ†åˆ«è°ƒç”¨format æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">çº¿ç¨‹ 1 è°ƒç”¨ format æ–¹æ³•ï¼Œæ”¹å˜äº† calendar è¿™ä¸ªå­—æ®µã€‚</span><br><span class="line">çº¿ç¨‹ 1 ä¸­æ–­äº†ã€‚</span><br><span class="line">çº¿ç¨‹ 2 å¼€å§‹æ‰§è¡Œï¼Œå®ƒä¹Ÿæ”¹å˜äº† calendarã€‚</span><br><span class="line">çº¿ç¨‹ 2 ä¸­æ–­äº†ã€‚</span><br><span class="line">çº¿ç¨‹ 1 å›æ¥äº†</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œcalendar å·²ç„¶ä¸æ˜¯å®ƒæ‰€è®¾çš„å€¼ï¼Œè€Œæ˜¯èµ°ä¸Šäº†çº¿ç¨‹ 2 è®¾è®¡çš„é“è·¯ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶äº‰æŠ¢ calendar å¯¹è±¡ï¼Œåˆ™ä¼šå‡ºç°å„ç§é—®é¢˜ï¼Œæ—¶é—´ä¸å¯¹ï¼Œçº¿ç¨‹æŒ‚æ­»ç­‰ç­‰ã€‚</p><p>åˆ†æä¸€ä¸‹ format çš„å®ç°ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œç”¨åˆ°æˆå‘˜å˜é‡ calendarï¼Œå”¯ä¸€çš„å¥½å¤„ï¼Œå°±æ˜¯åœ¨è°ƒç”¨ subFormat æ—¶ï¼Œå°‘äº†ä¸€ä¸ªå‚æ•°ï¼Œå´å¸¦æ¥äº†è®¸å¤šçš„é—®é¢˜ã€‚å…¶å®ï¼Œåªè¦åœ¨è¿™é‡Œç”¨ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œä¸€è·¯ä¼ é€’ä¸‹å»ï¼Œæ‰€æœ‰é—®é¢˜éƒ½å°†è¿åˆƒè€Œè§£ã€‚</p><p>è¿™ä¸ªé—®é¢˜èƒŒåéšè—ç€ä¸€ä¸ªæ›´ä¸ºé‡è¦çš„é—®é¢˜â€“æ— çŠ¶æ€ï¼šæ— çŠ¶æ€æ–¹æ³•çš„å¥½å¤„ä¹‹ä¸€ï¼Œå°±æ˜¯å®ƒåœ¨å„ç§ç¯å¢ƒä¸‹ï¼Œéƒ½å¯ä»¥å®‰å…¨çš„è°ƒç”¨ã€‚è¡¡é‡ä¸€ä¸ªæ–¹æ³•æ˜¯å¦æ˜¯æœ‰çŠ¶æ€çš„ï¼Œå°±çœ‹å®ƒæ˜¯å¦æ”¹åŠ¨äº†å…¶å®ƒçš„ä¸œè¥¿ï¼Œæ¯”å¦‚å…¨å±€å˜é‡ï¼Œæ¯”å¦‚å®ä¾‹çš„å­—æ®µã€‚format æ–¹æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ”¹åŠ¨äº† SimpleDateFormat çš„ calendar å­—æ®µï¼Œæ‰€ä»¥ï¼Œå®ƒæ˜¯æœ‰çŠ¶æ€çš„ã€‚</p><p>è¿™ä¹ŸåŒæ—¶æé†’æˆ‘ä»¬åœ¨å¼€å‘å’Œè®¾è®¡ç³»ç»Ÿçš„æ—¶å€™æ³¨æ„ä¸‹ä¸€ä¸‹ä¸‰ç‚¹:</p><p><strong>1.è‡ªå·±å†™å…¬ç”¨ç±»çš„æ—¶å€™ï¼Œè¦å¯¹å¤šçº¿ç¨‹è°ƒç”¨æƒ…å†µä¸‹çš„åæœåœ¨æ³¨é‡Šé‡Œè¿›è¡Œæ˜ç¡®è¯´æ˜</strong></p><p><strong>2.å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¯¹æ¯ä¸€ä¸ªå…±äº«çš„å¯å˜å˜é‡éƒ½è¦æ³¨æ„å…¶çº¿ç¨‹å®‰å…¨æ€§</strong></p><p><strong>3.æˆ‘ä»¬çš„ç±»å’Œæ–¹æ³•åœ¨åšè®¾è®¡çš„æ—¶å€™ï¼Œè¦å°½é‡è®¾è®¡æˆæ— çŠ¶æ€çš„</strong></p><h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><p>1ã€<strong>éœ€è¦çš„æ—¶å€™åˆ›å»ºæ–°å®ä¾‹</strong></p><p><strong>è¯´æ˜ï¼š</strong>åœ¨éœ€è¦ç”¨åˆ° SimpleDateFormat çš„åœ°æ–¹æ–°å»ºä¸€ä¸ªå®ä¾‹ï¼Œä¸ç®¡ä»€ä¹ˆæ—¶å€™ï¼Œå°†æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜çš„å¯¹è±¡ç”±å…±äº«å˜ä¸º<strong>å±€éƒ¨ç§æœ‰</strong>éƒ½èƒ½é¿å…å¤šçº¿ç¨‹é—®é¢˜ï¼Œä¸è¿‡ä¹ŸåŠ é‡äº†åˆ›å»ºå¯¹è±¡çš„è´Ÿæ‹…ã€‚åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™æ ·å…¶å®å¯¹æ€§èƒ½å½±å“æ¯”ä¸æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚</p><p>2ã€<strong>ä½¿ç”¨åŒæ­¥ï¼šåŒæ­¥ SimpleDateFormat å¯¹è±¡</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateSyncUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">formatDate</span><span class="params">(Date date)</span> <span class="keyword">throws</span> ParseException </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span>(sdf) &#123;</span><br><span class="line">            <span class="keyword">return</span> sdf.format(date);</span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title">parse</span><span class="params">(String strDate)</span> <span class="keyword">throws</span> ParseException </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span>(sdf) &#123;</span><br><span class="line">            <span class="keyword">return</span> sdf.parse(strDate);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong>å½“çº¿ç¨‹è¾ƒå¤šæ—¶ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œå…¶ä»–æƒ³è¦è°ƒç”¨æ­¤æ–¹æ³•çš„çº¿ç¨‹å°±è¦ block ç­‰å¾…ï¼Œå¤šçº¿ç¨‹å¹¶å‘é‡å¤§çš„æ—¶å€™ä¼šå¯¹æ€§èƒ½æœ‰ä¸€å®šçš„å½±å“ã€‚</p><p>3ã€<strong>ä½¿ç”¨ ThreadLocal</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import java.text.DateFormat;</span><br><span class="line">import java.text.ParseException;</span><br><span class="line">import java.text.SimpleDateFormat;</span><br><span class="line">import java.util.Date;</span><br><span class="line"></span><br><span class="line">public class ConcurrentDateUtil &#123;</span><br><span class="line"></span><br><span class="line">    private static ThreadLocal&lt;DateFormat&gt; threadLocal = new ThreadLocal&lt;DateFormat&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        protected DateFormat initialValue() &#123;</span><br><span class="line">            return new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    public static Date parse(String dateStr) throws ParseException &#123;</span><br><span class="line">        return threadLocal.get().parse(dateStr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static String format(Date date) &#123;</span><br><span class="line">        return threadLocal.get().format(date);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong>ä½¿ç”¨ ThreadLocal, ä¹Ÿæ˜¯å°†å…±äº«å˜é‡å˜ä¸ºç‹¬äº«ï¼Œçº¿ç¨‹ç‹¬äº«è‚¯å®šèƒ½æ¯”æ–¹æ³•ç‹¬äº«åœ¨å¹¶å‘ç¯å¢ƒä¸­èƒ½å‡å°‘ä¸å°‘åˆ›å»ºå¯¹è±¡çš„å¼€é”€ã€‚å¦‚æœå¯¹æ€§èƒ½è¦æ±‚æ¯”è¾ƒé«˜çš„æƒ…å†µä¸‹ï¼Œä¸€èˆ¬æ¨èä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚</p><h3 id="Java-8-ä¸­çš„è§£å†³åŠæ³•"><a href="#Java-8-ä¸­çš„è§£å†³åŠæ³•" class="headerlink" title="Java 8 ä¸­çš„è§£å†³åŠæ³•"></a>Java 8 ä¸­çš„è§£å†³åŠæ³•</h3><p>Java 8 æä¾›äº†æ–°çš„æ—¥æœŸæ—¶é—´ APIï¼Œå…¶ä¸­åŒ…æ‹¬ç”¨äºæ—¥æœŸæ—¶é—´æ ¼å¼åŒ–çš„ DateTimeFormatterï¼Œå®ƒä¸ SimpleDateFormat æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼šDateTimeFormatter æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œ SimpleDateFormat å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨ã€‚</p><p><strong>DateTimeFormatter å¦‚ä½•ä½¿ç”¨ï¼š</strong></p><p>è§£ææ—¥æœŸ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String dateStr= <span class="string">"2018å¹´06æœˆ20æ—¥"</span>;</span><br><span class="line">DateTimeFormatter formatter = DateTimeFormatter.ofPattern(<span class="string">"yyyyå¹´MMæœˆddæ—¥"</span>);   </span><br><span class="line">LocalDate date= LocalDate.parse(dateStr, formatter);</span><br></pre></td></tr></table></figure><p>æ—¥æœŸè½¬æ¢ä¸ºå­—ç¬¦ä¸²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LocalDateTime now = LocalDateTime.now();  </span><br><span class="line">DateTimeFormatter format = DateTimeFormatter.ofPattern(<span class="string">"yyyyå¹´MMæœˆddæ—¥ hh:mm a"</span>);</span><br><span class="line">String nowStr = now .format(format);</span><br></pre></td></tr></table></figure><p>ç”± DateTimeFormatter çš„é™æ€æ–¹æ³• ofPattern() æ„å»ºæ—¥æœŸæ ¼å¼ï¼ŒLocalDateTime å’Œ LocalDate ç­‰ä¸€äº›è¡¨ç¤ºæ—¥æœŸæˆ–æ—¶é—´çš„ç±»ä½¿ç”¨ parse å’Œ format æ–¹æ³•æŠŠæ—¥æœŸå’Œå­—ç¬¦ä¸²åšè½¬æ¢ã€‚</p><p>ä½¿ç”¨æ–°çš„ APIï¼Œæ•´ä¸ªè½¬æ¢è¿‡ç¨‹éƒ½ä¸éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>SimpleDateFormat æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ç±»ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¦‚æœæ˜¯ Java 8 ï¼Œå»ºè®®ä½¿ç”¨ DateTimeFormatter ä»£æ›¿ SimpleDateFormatã€‚</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="">http://www.cnblogs.com/peida/archive/2013/05/31/3070790.html</a></p><h3 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h3><p><a href="http://www.54tianzhisheng.cn/2018/06/20/java-8-date/" target="_blank" rel="noopener">20 ä¸ªæ¡ˆä¾‹æ•™ä½ åœ¨ Java 8 ä¸­å¦‚ä½•å¤„ç†æ—¥æœŸå’Œæ—¶é—´?</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws2.sinaimg.cn/large/006tKfTcgy1fshewu3v3yj31hc0zkwix.jpg&quot; alt=&quot;001&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>è‹¦é€¼çš„æ¯•ä¸šè®ºæ–‡ç»å†</title>
    <link href="http://yoursite.com/2018/05/26/paper/"/>
    <id>http://yoursite.com/2018/05/26/paper/</id>
    <published>2018-05-25T16:00:00.000Z</published>
    <updated>2018-05-26T08:44:28.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1frou078h61j312c0vedse.jpg" alt="2018-05-26_15-01-42"></p><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>æœ€è¿‘ä¸€ç›´åœ¨å­¦æ ¡å¿™æ¯•ä¸šè®ºæ–‡çš„äº‹ï¼ŒæŠ±æ­‰äº†ï¼Œå¾ˆé•¿ä¸€æ®µæ—¶é—´æ²¡æ›´æ–°æ–‡ç« äº†ï¼Œä»Šå¤©æ˜ŸæœŸå…­ï¼Œæ˜¨å¤©æ˜ŸæœŸäº”ï¼Œå¹¸å¥½æ‰€æœ‰èµ„æ–™éƒ½åœ¨å‘¨æœ«å‰äº¤é½äº†ï¼Œæ˜¨æ™šè¿˜åˆ°å‚åŠ ç­ä¸Šçš„èšä¼šï¼Œä¹Ÿå–äº†ä¸å°‘é…’ï¼Œä½†å¹¸å¥½æ²¡é†‰ï¼Œä¸ç„¶ä»Šå¤©è‚¯å®šä¸ä¼šå†™ä¸‹è¿™ç¯‡æ–‡ç« çš„ã€‚è¿™ç¯‡æ–‡ç« å°±æŠŠä»æ¥è§¦åˆ°æ¯•ä¸šè®ºæ–‡æŒ‡å¯¼è€å¸ˆåˆ°ç°åœ¨çš„è¿™åŠå¹´æ—¶é—´æœ‰å…³æ¯•ä¸šè®ºæ–‡çš„äº‹éƒ½è®²è®²ï¼Œå¸Œæœ›èƒ½å¤Ÿç•™ä¸‹ç‚¹å›å¿†ï¼<br><a id="more"></a><br><img src="https://ws3.sinaimg.cn/large/006tNc79gy1frou087a7wj312q11ktmm.jpg" alt="2018-05-26_15-02-15"></p><h3 id="æ¯•è®¾å°åˆ†é˜Ÿæˆç«‹"><a href="#æ¯•è®¾å°åˆ†é˜Ÿæˆç«‹" class="headerlink" title="æ¯•è®¾å°åˆ†é˜Ÿæˆç«‹"></a>æ¯•è®¾å°åˆ†é˜Ÿæˆç«‹</h3><p>å­¦æ ¡ä¼šç»™æ¯ä¸ªæ¯•ä¸šå¯¼å¸ˆå®‰æ’å¸¦å‡ ä¸ªå­¦ç”Ÿï¼ˆ7ï½8 äººå·¦å³ï¼‰ï¼Œä½†æ˜¯åœ¨å­¦æ ¡å‘å‡ºè¡¨æ ¼ä¹‹å‰ï¼Œè°ä¹Ÿä¸çŸ¥é“è‡ªå·±å°†ä¼šç”±å“ªä¸ªå¯¼å¸ˆå¸¦ï¼Œç”šè‡³ä½ ä¼šå‘ç°å°±ç®—å­¦æ ¡å‘å‡ºè¡¨æ ¼åçœ‹åˆ°è‡ªå·±å¯¼å¸ˆåå­—åï¼Œè‡ªå·±éƒ½ä¸çŸ¥é“è¿™å¯¼å¸ˆæ˜¯è°ï¼Ÿæ˜¯ç”·æ˜¯å¥³ï¼Ÿï¼ˆå½“æŸä¸ªå¯¼å¸ˆçš„åå­—æ¯”è¾ƒä¸­æ€§çš„æ—¶å€™ï¼‰åˆ°åº•å¥½ä¸å¥½ç›¸å¤„ï¼Ÿæ€§æ ¼å’‹æ ·ï¼Ÿä»–çš„è”ç³»æ–¹å¼ï¼ˆæ‰‹æœº æˆ–è€… QQï¼‰ï¼ŒWTFï¼Œä¸€ä¸ªéƒ½ä¸çŸ¥é“ï¼Ÿè‹¦é€¼äº†ï¼Œåé¢ä¹Ÿæ˜¯é€šè¿‡é—®è¾…å¯¼å‘˜æ‰çŸ¥é“è¿™äº›æƒ…å†µã€‚åé¢æˆ‘ä»¬å‡ ä¸ªäººä¸­å°±æœ‰ä¸€ä¸ªå¸¦å¤´å»ºäº†ä¸ª QQ ç¾¤ï¼ˆæ¯•è®¾å°åˆ†é˜Ÿï¼‰ï¼Œå¹¶æŠŠæŒ‡å¯¼è€å¸ˆæ‹‰è¿›ç¾¤äº†ã€‚</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1frou05sjbgj30ss0hkjta.jpg" alt="qq"></p><p>å°±è¿™æ ·ï¼Œæˆ‘ä»¬ç»ˆäºå¼€å§‹äº†æ¯•è®¾å°åˆ†é˜Ÿä¹‹æ—…ï¼</p><h3 id="å®ä¹ æ—¶çš„æ¯•è®¾çŠ¶æ€"><a href="#å®ä¹ æ—¶çš„æ¯•è®¾çŠ¶æ€" class="headerlink" title="å®ä¹ æ—¶çš„æ¯•è®¾çŠ¶æ€"></a>å®ä¹ æ—¶çš„æ¯•è®¾çŠ¶æ€</h3><p>2017.12æœˆé‚£æ—¶æ˜¯è¿˜åœ¨å…¬å¸å®ä¹ çš„ï¼Œåˆ°äº†æ¯•ä¸šè®¾è®¡é€‰é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯¼å¸ˆè¿˜å¥½ï¼Œç»™æˆ‘ä»¬æ¯ä¸ªäººå¾ˆè‡ªç”±çš„é€‰æ‹©ï¼Œä½ å¯ä»¥è‡ªæ‹Ÿé¢˜ç›®ï¼Œä¹Ÿå¯ä»¥ä»å¯¼å¸ˆé‚£é‡ŒæŒ‘é€‰é¢˜ç›®ã€‚ä¸è¿‡æˆ‘çœ‹äº†ä¸‹è€å¸ˆç»™çš„é¢˜ç›®ï¼Œå¤§éƒ½æ˜¯æ·±åº¦å­¦ä¹ ã€æœºå™¨å­¦ä¹ åšçš„ç›¸å…³å›¾åƒè¯†åˆ«ã€æ¨èç³»ç»Ÿã€æœç´¢ç³»ç»Ÿã€äººè„¸è¯†åˆ«ã€ç½‘ç»œæµé‡ç›‘æ§ã€æ–‡æœ¬æƒ…æ„Ÿåˆ†æç­‰é«˜å¤§ä¸Šçš„è¯¾é¢˜ã€‚è‡£å¦¾åšä¸åˆ°ï¼Œæ¯•ç«Ÿè¿™éƒ½æ˜¯ç ”ç©¶ç”Ÿæ‰ä¼šç ”ç©¶ç‚¹æ–¹å‘ï¼Œè€å¸ˆä¼šå‘å‡ºæ¥è¿™äº›é¢˜ç›®å¯èƒ½ä¹Ÿæ˜¯å’Œå¥¹è‡ªå·±åœ¨ç ”ç©¶å­¦ä¹ çš„ç›¸å…³çŸ¥è¯†æœ‰å…³ï¼ˆå› ä¸ºæˆ‘åæ¥ç»™å¯¼å¸ˆæ£€æŸ¥æˆ‘çš„ç³»ç»Ÿçš„æ—¶å€™å°±æ˜¯å¯¼å¸ˆå¸¦çš„ä¸€ä¸ªç ”ç©¶ç”Ÿæ£€æŸ¥çš„ï¼ŒæœŸé—´é‚£ä¸ªå­¦é•¿å’Œæˆ‘è¯´ä»–æœ€è¿‘å°±åœ¨åšæ–‡æœ¬æƒ…æ„Ÿåˆ†æç›¸å…³çš„ä¸€ä¸ªé¡¹ç›®ï¼Œå› ä¸ºçœ‹åˆ°æˆ‘é¡¹ç›®ä¸­çš„ä¸­æ–‡åˆ†è¯å™¨ï¼Œæ‰€ä»¥è¿˜å‘æˆ‘è¯·æ•™äº†ä¸‹ï¼Œæˆ‘äºæ˜¯æŠŠæˆ‘åŸæ¥å†™è¿‡çš„ä¸€ç¯‡ä¸­è‹±æ–‡åˆ†è¯å™¨æ‰¾å‡ºæ¥ç»™ä»–ä¸€ä¸ªä¸ªè§£é‡Šï¼‰ï¼Œæ‰€ä»¥å¯¼å¸ˆå¸Œæœ›åœ¨æˆ‘ä»¬è¿™é‡Œä¹Ÿèƒ½å¤Ÿæœ‰äººå»ç ”ç©¶ä¸‹è¿™æ–¹é¢çš„çŸ¥è¯†ï¼Œæ‹“å±•ä¸‹è§†é‡ã€‚ä½†æ˜¯ç”±äºåœ¨å…¬å¸å®ä¹ ï¼Œå·¥ä½œä¹‹å¤–è…¾å‡ºçš„æ—¶é—´ç¡®å®æœ‰é™ï¼Œæ²¡è¿™ä¹ˆå¤šæ—¶é—´å»å­¦ä¹ è¿™äº›ç‰¹åˆ«æ–°çš„ä¸œè¥¿ï¼Œè€Œä¸”è¿˜è¦åšå‡ºä¸€å®šçš„æˆæœå‡ºæ¥ï¼Œè¿™è¿˜æ˜¯æœ‰ç‚¹æŒ‘æˆ˜æ€§çš„ã€‚å¯¼å¸ˆè¯´ä½ å¯ä»¥è‡ªæ‹Ÿé¢˜ç›®ï¼Œæˆ–è€…æŠŠè‡ªå·±åœ¨å…¬å¸åšçš„é¡¹ç›®ä¼˜åŒ–åæ‹¿æ¥åšæ¯•è®¾é¡¹ç›®ã€‚äºæ˜¯ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯æ‹¿è‡ªå·±ä»¥å‰å†™çš„é¡¹ç›®æ¥å½“æ¯•ä¸šè®ºæ–‡é¡¹ç›®äº†ï¼Œå› ä¸ºæ„Ÿè§‰é¡¹ç›®ä¹Ÿè¿˜è¡Œï¼Œæ‹¿æ¥åšæ¯•è®¾å®Œå…¨å¯ä»¥äº†ï¼Œæ‰€ä»¥åé¢è‡ªå·±ä¹Ÿå°±æ¯”è¾ƒè½»æ¾äº†ã€‚</p><h3 id="æ¯•è®¾æµç¨‹"><a href="#æ¯•è®¾æµç¨‹" class="headerlink" title="æ¯•è®¾æµç¨‹"></a>æ¯•è®¾æµç¨‹</h3><p>æŠŠè‡ªå·±çš„æ¯•è®¾é¢˜ç›®æŠ¥ç»™è€å¸ˆåï¼Œè€å¸ˆä¼šæ ¹æ®ä½ çš„é¢˜ç›®å®¡æ ¸æ˜¯å¦å¯ä»¥æ‹¿æ¥å½“æ¯•è®¾ã€‚ç„¶åå†è¦æ±‚ä½ æŠŠæ¯•ä¸šè®¾è®¡çš„å¼€é¢˜æŠ¥å‘Šä¹¦ï¼ˆè®ºæ–‡é¢˜ç›®ã€ç›®çš„ã€æ„ä¹‰ã€æ€ä¹ˆåšã€åšå‡ºä»€ä¹ˆæ•ˆæœã€ç›®æ ‡ä¹‹ç±»çš„ï¼‰å†™è¯¦ç»†ä¸Šäº¤ä¸Šå»ã€‚è¦ç»è¿‡å¯¼å¸ˆå’Œå­¦æ ¡çš„å®¡æ‰¹åæ‰èƒ½å¤Ÿæ­£å¼å¼€é¢˜ã€‚å¼€é¢˜åç¡®å®šåå‡ ä¹å°±å¯ä»¥å¼€å§‹å†™è‡ªå·±çš„é¡¹ç›®äº†ã€‚æœºæ™ºçš„æˆ‘ï¼Œé‚£æ—¶æ¯”è¾ƒè½»æ¾ï¼Œå“ˆå“ˆå“ˆï¼Œå·¥ä½œä¹‹å¤–éƒ½æ’¸ä»£ç å’Œåšå®¢å‘¢ã€‚å·®ä¸å¤šè¿‡äº†ä¸€ä¸ªæœˆåï¼Œå¯¼å¸ˆå°±å¼€å§‹åœ¨ç¾¤é‡Œé—®æˆ‘ä»¬ç³»ç»Ÿå®Œæˆçš„æ€ä¹ˆæ ·äº†ï¼Ÿç„¶åè¦æˆ‘ä»¬ä¸Šäº¤è®ºæ–‡ä»»åŠ¡ä¹¦ï¼Œå­¦æ ¡çš„è¿™ç§ææ–™æœ‰æ—¶å€™è¦çš„å¾ˆæ€¥ï¼Œä¸å¾—ä¸åæ§½ä¸‹ï¼Œå¾ˆå¤´ç–¼ï¼Œè‡ªå·±æœ‰æ—¶å€™éƒ½ä¸€ä¸‹å­äº¤ä¸äº†ã€‚åˆè¿‡äº†ä¸€æ®µæ—¶é—´å°±éœ€è¦æŠŠè®ºæ–‡åˆç¨¿äº¤ä¸Šå»ï¼ŒçœŸæ˜¯è‹¦é€¼ï¼Œé‚£æ—¶è¿˜ä¸çŸ¥é“è®ºæ–‡çš„æ¨¡ç‰ˆåˆ°åº•æ˜¯å’‹æ ·ï¼Ÿè¯¥æ€ä¹ˆå†™æœ¬ç§‘è®ºæ–‡å‘¢ï¼Ÿæå¾—æˆ‘è‡ªå·±é‚£æ®µæ—¶é—´èŠ±äº†å‘¨æœ«ä¸¤å¤©å’Œä¸€å¤©çš„ä¸Šç­çš„æ—¶é—´æ‰å‹‰å¼ºäº¤äº†ä¸ªä¸€èˆ¬çš„åˆç¨¿ï¼Œåˆç¨¿ä¸­çš„å„ç§å›¾ç”»çš„æˆ‘æ˜¯æƒ³å“­ã€‚çœŸå¤šï¼Œè¿˜éº»çƒ¦ã€‚å¹¸å¥½åœ¨é‚£æ®µæ—¶é—´å…¬å¸çš„ä»»åŠ¡è¿˜ä¸å¿™ï¼Œæ‰€ä»¥åœ¨æœ‰æ—¶é—´åœ¨å®ä¹ ä¸Šç­çš„æ—¶å€™ä¹Ÿç¨å¾®å®Œæˆä¸‹è‡ªå·±çš„åˆç¨¿ã€‚</p><p>ä»Šå¹´ 3 ï½ 4 æœˆçš„æ—¶å€™ï¼Œå¯¼å¸ˆä¹Ÿåœ¨ä¸æ–­çš„å«æˆ‘ä»¬æŠŠå­¦æ ¡è¯¥äº¤çš„å®ä¹ æ¯å‘¨æŠ¥å‘Šäº¤ç»™å¥¹ã€‚è¿™ä¸ªå®ä¹ è¿˜æœ‰å®ä¹ ç”³è¯·è¡¨ã€å®ä¹ é‰´å®šè¡¨ææ–™ï¼ˆè¦æ±‚ç›–ç« ï¼‰ï¼Œè¿™ä¸¤ä¸ªèµ„æ–™ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ï¼Œå¦‚æœåé¢æ²¡æœ‰è¿™ä¸ªææ–™éƒ½ä¸èƒ½å‚åŠ ç­”è¾©çš„ã€‚</p><p>åœ¨å¿«äº”æœˆçš„æ—¶å€™ï¼Œå¯¼å¸ˆé‚£æ—¶å°±å¤©å¤©æ™šä¸Šæ·±å¤œåœ¨æ¯•è®¾å°åˆ†é˜Ÿç¾¤é‡Œå‚¬åŒå­¦ä»¬ï¼Œä½ ä»¬çš„è®ºæ–‡å’Œç³»ç»Ÿéƒ½å®Œæˆçš„å’‹æ ·äº†ï¼Ÿç„¶ååˆå‚¬äº†è¦äº¤è®ºæ–‡ä¸­æœŸæŠ¥å‘Šï¼ˆè¿™ä¸ªåº”è¯¥ä¹Ÿè›®é‡è¦çš„ï¼Œæˆ‘ä»¬ç­ä¸¤ä¸ªåŒå­¦å¥½åƒå°±å› ä¸ºè¿™ä¸ªå¯¼è‡´æœ‰ä¸ªè®ºæ–‡ä¸­æœŸæŠ¥å‘Šè­¦å‘Šï¼Œå“å¾—ä»–ä»¬åæ¥ç­”è¾©çš„æ—¶å€™éƒ½æ€•è‡ªå·±æŒ‚äº†ï¼‰ã€‚</p><p>è¿‡å®ŒåŠ³åŠ¨èŠ‚åï¼Œå†è¿‡äº†å‡ å¤©åï¼Œæˆ‘å°±è¾èŒäº†ã€‚è¾èŒååœ¨è‹å·ç©äº†å‡ å¤©ï¼ŒæœŸé—´ä¹Ÿæ˜¯åœ¨ä¸æ–­çš„ä¿®æ”¹è‡ªå·±çš„è®ºæ–‡å’Œä¼˜åŒ–äº›æ ¼å¼é—®é¢˜ã€‚</p><p>åæ¥åˆæµªå›å®¶äº†ï¼Œåœ¨å®¶å‘†äº†å‡ å¤©ï¼Œä¹Ÿæ˜¯æ”¹è®ºæ–‡æ”¹åˆ°æ·±å¤œï¼Œé‚£æ®µæ—¶é—´è‡ªå·±å·²ç»å¼€å§‹åœ¨æŠŠè‡ªå·±çš„è®ºæ–‡åˆç¨¿æ‹¿åˆ°äº›ç¬¬ä¸‰æ–¹å…è´¹çš„æŸ¥é‡å»æŸ¥é‡ç½‘ç«™å»æŸ¥é‡ï¼Œç„¶åæ ¹æ®æŸ¥é‡åçš„ç»“æœï¼Œå°†ä¸€äº›é‡å¤çš„åœ°æ–¹ä¸œæ”¹æ”¹ï¼Œè¥¿å‡‘å‡‘ï¼Œæˆ–è€…ç”¨è‡ªå·±çš„è¯å†™ä¸€éã€‚è¿™æ ·å°±å¯ä»¥å‡å°‘ç‚¹é‡å¤è¯­å¥ã€‚</p><p>å†ç„¶åå°±æ˜¯ 18 å·èµ¶å›æ¥å­¦æ ¡äº†ï¼Œ19ï¼Œ20å·åˆšå¥½å‘¨æœ«ï¼Œåˆæ˜¯ä¸çœ ä¹‹å¤œï¼Œé‚£ä¸¤å¤©ä¸æ–­æŸ¥é‡ï¼Œå‘åˆ«äººè¯·æ•™ï¼Œæ€ä¹ˆåŠ å­—æ•°ï¼Œè‡ªå·±ä¸€å¼€å§‹çš„å­—æ•°å¥½åƒè¿˜æ˜¯ä¸å¤Ÿçš„ï¼Œå­¦æ ¡è¦æ±‚çš„å­—æ•°æœ‰ç‚¹é«˜ï¼Œå…¶ä»–å­¦æ ¡éƒ½æ˜¯ 8000 å­—ï¼Œæˆ‘ä»¬å´è¦æ±‚ 1.5 wï¼ŒçœŸæ˜¯èƒ½æ‰¯å•Šï¼Œæ€ä¹ˆå¯ä»¥æ‰¯å‡ºè¿™ä¹ˆå¤šå­—æ¥ã€‚é€šè¿‡æŸäººçš„ç»éªŒä¹‹è°ˆï¼Œæˆ‘æˆåŠŸçš„æ‰¯äº†ä¸å°‘å­—ï¼Œè¿˜ä¸å¸¦é‡å¤çš„ï¼ŒğŸ˜„ã€‚</p><p>ç„¶å 21 å·å‘¨ä¸€æ‹¿ç»™è€å¸ˆæ£€æŸ¥çš„æ—¶å€™å°±æ˜¯çœ‹äº†ä¸‹æ ¼å¼ï¼ˆè€å¸ˆä¸åœ¨åŠå…¬å®¤ï¼Œå¥¹å¸¦çš„ç ”ç©¶ç”Ÿç»™æ£€æŸ¥çš„ï¼‰ï¼Œè¯´ä½ å…¨æ–‡é¦–è¡Œå’‹éƒ½æ²¡ç¼©è¿›å‘¢ï¼ˆå†™åšå®¢å†™ä¹ æƒ¯äº†ï¼Œè°è¿˜ç¼©è¿›å•Šï¼‰ï¼Œè¡Œé—´è·æ¯”è¾ƒå¤§ï¼Œå›¾çš„æ ‡å·é”™è¯¯ï¼Œä¸»è¦è¿˜æ˜¯æ£€æŸ¥æ ¼å¼ã€‚å½“æ™šï¼Œåˆå¥½å¥½æ”¹äº†ä¸‹ï¼Œå¹¶å’Œæˆ‘åŒå­¦è®¨è®ºäº†ä¸‹ä»–çš„æŒ‡å¯¼å¯¼å¸ˆçš„è¦æ±‚æœ‰å“ªäº›ï¼Œå¹¶ä¹Ÿåšäº†ç›¸åº”çš„ä¿®æ”¹ã€‚ï¼ˆå› ä¸ºæˆ‘çš„ç­”è¾©å¯¼å¸ˆå°±æœ‰æˆ‘é‚£åŒå­¦çš„æŒ‡å¯¼è€å¸ˆï¼‰è®°å¾—å½“æ™šå¥½åƒæ”¹è®ºæ–‡æ”¹åˆ°ä¸‰ç‚¹ï¼Œå¹¸å¥½æœ‰äººé™ªç€æˆ‘ä¸€è¾¹èŠå¤©ä¸€è¾¹æ”¹ï¼Œä¸ç„¶æ—©å›°äº†ï¼Œç¡äº†ã€‚</p><p>22 å·ä¸€æ—©å°±é†’æ¥äº†ï¼Œç„¶åå°±å»æ‰“å°åº—æ‰“å°è®ºæ–‡ã€‚è¿™é‡Œæƒ³ç»™çš„å¤§å®¶ä¸€ä¸ªå»ºè®®å°±æ˜¯ï¼šå¦‚æœä½ ä¹Ÿè¦æ‰“å°è®ºæ–‡ï¼Œæœ€å¥½æ—©ç‚¹å»ï¼Œå› ä¸ºæ¯•ä¸šå­£ï¼Œå­¦æ ¡æ‰“å°åº—å‡ ä¹éƒ½æ˜¯çˆ†æ»¡ï¼Œæ‰“å°è®ºæ–‡çš„éå¸¸å¤šï¼Œè¿˜æœ‰å­¦å¼Ÿå­¦å¦¹æ‰“å°å„ç§è€ƒè¯•å·å­ã€èµ„æ–™å•¥çš„ï¼Œåæ­£äººå¾ˆå¤šï¼Œä¼°è®¡è¦æ’é˜Ÿã€‚æŒ‡å¯¼è€å¸ˆä¹Ÿä¸æ˜¯ä¸€ç›´åœ¨åŠå…¬å®¤çš„ï¼Œä»–ä»¬ä¹Ÿæ˜¯è¦ä¸Šè¯¾çš„ã€‚æ‰€ä»¥æœ€å¥½åœ¨å¯¼å¸ˆåœ¨åŠå…¬å®¤çš„æ—¶å€™èƒ½èµ¶åˆ°ï¼Œè¿™æ ·å°±ä¸ä¼šé”™è¿‡äº†ã€‚è¿™æ¬¡è€å¸ˆæ£€æŸ¥è®ºæ–‡å°±æ¯”è¾ƒä»”ç»†äº†ï¼Œè®ºæ–‡ä¸€è¡Œè¡Œçš„æ‰¾å†…å®¹ï¼Œçœ‹æ˜¯å¦é€šé¡ºï¼Ÿæ˜¯å¦æœ‰ä¸åˆé€‚çš„åœ°æ–¹ï¼Ÿæ ‡ç‚¹ç¬¦å·æ˜¯ä¸æ˜¯å¤šäº†æˆ–è€…å°‘äº†ï¼Ÿæ ¼å¼æ˜¯ä¸æ˜¯è¿˜æœ‰é—®é¢˜ï¼Ÿæ‰€ä»¥å‘¢ï¼Œè¿™æ¬¡åˆå¾ˆæƒ¨ï¼Œè¦æ”¹çš„åœ°æ–¹å¾ˆå¤šï¼Œè¿˜åŒ…æ‹¬æµç¨‹å›¾å’Œ E-R å›¾è¦æ”¹çš„ã€‚è‹¦é€¼äº†ï¼Œä¸‹åˆå›å»ç§Ÿæˆ¿å®¾é¦†çš„æ—¶å€™å°±å¼€å§‹æ‹¼å‘½çš„æ”¹ã€‚æ”¹çš„å·®ä¸å¤šäº†ï¼Œå› ä¸ºç¬¬äºŒå¤©è¦ç­”è¾©äº†ï¼Œæ‰€ä»¥å°±åœ¨çœ‹çœ‹è‡ªå·±çš„ç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿè·‘èµ·æ¥ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆbugï¼Œç»“æœè¿˜çœŸå‘ç°å‡ ä¸ªå°é”™è¯¯å’Œä¸€ä¸ªå¤§é”™è¯¯ï¼Œå°é”™è¯¯å¾ˆå¿«ä¿®å¤å®Œå–„äº†ï¼Œæœ‰ä¸€ä¸ª Redis å­˜æ•°æ®å†å–å‡ºæ¥çš„æ—¶å€™æ•°æ®å˜åŒ–é—®é¢˜å½“ç„¶debugäº†å¾ˆä¹…æ²¡æ‰¾åˆ°åŸå› ã€‚æ‰¾åˆ°æ·±å¤œä¸€ç‚¹å¤šï¼Œæ²¡è§£å†³ï¼Œæ”¾å¼ƒäº†ï¼Œç¬¬äºŒå¤©ä¸æ¼”ç¤ºè¿™å—ã€‚å½“æ™šæ€•è‡ªå·±æ˜å¤©é¡¹ç›®å¯åŠ¨çš„æ—¶å€™å…¶ä»–ç¯å¢ƒè¦ä¸€ä¸ªä¸ªèµ·ï¼Œéœ€è¦è€—è´¹ä¸å°‘æ—¶é—´ï¼Œäºæ˜¯è‡ªå·±ç®€å•çš„å†™äº†ä¸ªè„šæœ¬ï¼Œä¸€é”®å°†è‡ªå·±é¡¹ç›®çš„ç¯å¢ƒå¯åŠ¨èµ·æ¥ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥è¿è¡Œé¡¹ç›®å±•ç¤ºç»™ç­”è¾©è€å¸ˆï¼ŒèŠ‚çœæ—¶é—´ï¼Œå°¤å…¶æ˜¯å…³é”®åœºåˆï¼Œæ€•æ‰é“¾å­ã€‚</p><p>23 å·æ—©ä¸Šå¾ˆæ—©å°±å»æŠŠè‡ªå·±çš„å®ä¹ ç”³è¯·è¡¨ã€å®ä¹ é‰´å®šè¡¨ã€å®ä¹  20 å‘¨æ—¥å¿—ã€å®ä¹ ç»ˆç»“ã€è®ºæ–‡åˆç¨¿è¿™äº›èµ„æ–™æ‰“å°ï¼Œç„¶åæ‹¿ç»™å¯¼å¸ˆæŸ¥çœ‹å’Œæ‰“åˆ†ã€‚ï¼ˆåˆæ‰¾å‡ºé—®é¢˜æ¥äº†ï¼Œè‹¦é€¼ï¼Œè®°å¾—é‚£ä¸ªæ—©ä¸Šç°åœºåœ¨å¯¼å¸ˆåŠå…¬å®¤ç”¨ç”µè„‘æ”¹å¥½åï¼Œæ£€æŸ¥å®Œæ‰æ‹¿å»æ‰“å°å†æ‹¿å›æ¥ç»™å¯¼å¸ˆæ£€æŸ¥çš„ï¼Œæ¥å›è·‘æ¥è·‘å»çš„çœŸçš„å¾ˆæ€¥ï¼Œå‡ºäº†ä¸å°‘æ±—ï¼‰æ³¨æ„ï¼šè¶Šæ˜¯å…³é”®æ—¶åˆ»ï¼Œåƒä¸‡è¦é¡ºç€å¯¼å¸ˆæ¥ï¼Œä»–è¯´æ”¹å“ªé‡Œå°±æ”¹å“ªé‡Œï¼Œåƒä¸‡åˆ«åˆšï¼Œæˆ‘ä¸€ä¸ªåŒå­¦çš„è®ºæ–‡æ”¹çš„å¯¼å¸ˆéƒ½å‘ç«äº†ï¼Œå·®ç‚¹æ²¡è®©æˆ‘é‚£åŒå­¦å‚åŠ ç­”è¾©ï¼Œç›´æ¥è¿›å…¥äºŒè¾©çš„ã€‚</p><p>ç­”è¾©çš„æ—¶å€™å…ˆæ¯ä¸ªäººä»‹ç»ä¸‹è‡ªå·±çš„å®ä¹ ç»å†ï¼Œå¬åˆ°ä¸å°‘ç‰›é€¼çš„åŒå­¦ï¼Œè¿›äº†ä¸å°‘å‰å®³çš„å…¬å¸ï¼Œæœ‰çš„åŒå­¦è¿˜å½“ä¸Šäº†å…¬å¸çš„é¡¹ç›®ç»„ç»„é•¿äº†ï¼ŒçœŸå‰å®³ï¼Œä¸€å¹´çš„å®ä¹ æ—¶é—´å°±æ··çš„è¿™ä¹ˆå¥½äº†ã€‚ç¬é—´å‘ç°å·®è·å¾ˆå¤§ã€‚</p><p>ç„¶åå°±æ˜¯æ¯ä¸ªäººçš„ç­”è¾©äº†ï¼Œæˆ‘ç¬¬ä¸‰ä¸ªï¼Œè¿˜å¥½ï¼Œç­”è¾©çš„è¿‡ç¨‹é—®äº†æˆ‘çš„é—®é¢˜å’Œæ¼”ç¤ºç³»ç»Ÿçš„æ—¶å€™éƒ½è¡¨ç°çš„è›®å¥½çš„ã€‚å°±ç°åœºè¿˜é—®äº†æˆ‘æœ‰ä¸ªåŠŸèƒ½çš„ä»£ç æ˜¯å“ªï¼Ÿï¼ˆä¼°è®¡æ˜¯æƒ³çœ‹ä¸‹æ˜¯ä¸æ˜¯è‡ªå·±å†™çš„é¡¹ç›®ï¼‰åé¢ä¹Ÿçœ‹åˆ°æœ‰çš„åŒå­¦é¡¹ç›®ç«Ÿç„¶èµ·ä¸æ¥çš„ï¼Œæˆ–è€…å›ç­”ä¸å‡ºè€å¸ˆçš„é—®é¢˜çš„ã€‚ç­”è¾©è¿‡ç¨‹ä¸­ï¼Œç­”è¾©è€å¸ˆåˆç»™è®ºæ–‡æ‰¾äº†ä¸å°‘é—®é¢˜ï¼Œåˆè¦è‹¦é€¼çš„ä¿®æ”¹äº†ã€‚</p><p>å½“å¤©å°±å‡ºäº†å¾…å®šåå•å’Œè¦äºŒè¾©çš„åå•ï¼Œé€Ÿåº¦è¿˜æ˜¯å¾ˆå¿«ã€‚è¿˜å¥½æˆ‘æ²¡æœ‰ï¼Œå¼€æ£®ã€‚æœ¬ä»¥ä¸ºç­”è¾©å¥½äº†ï¼Œå°±å¯ä»¥æ¾ä¸‹ä¸€å£æ°”äº†ï¼Œåé¢æ”¹å¥½äº†è®ºæ–‡åæ‹¿å»ç»™å¯¼å¸ˆæ£€æŸ¥ï¼Œå¥¹éƒ½è¯´ OK äº†ï¼Œç»“æœæˆ‘å°±å»æŠŠè®ºæ–‡æ‹¿å»èƒ¶è£…äº†ï¼Œæ³¨æ„èƒ¶è£…é¡ºåºåˆ«æé”™äº†ã€‚ç¬¬äºŒå¤©æŠŠèƒ¶è£…å¥½çš„è®ºæ–‡å’Œå„ç§èµ„æ–™ä¸€èµ·äº¤ç»™è€å¸ˆçš„æ—¶å€™ï¼Œç»“æœåˆæŒ‘å‡ºä¸€ä¸ªç›®å½•çš„é—®é¢˜ï¼ŒWTFï¼Œæå¾—æˆ‘åé¢æ”¹å¥½åå»æ‰“å°åº—é‡æ–°èƒ¶è£…äº†éï¼ˆå°çš®ä»åŸæ¥çš„ä¸Šé¢æ‰¯ä¸‹æ¥èƒ¶è£…ï¼‰ã€‚æ˜¨å¤©ç­¾å®Œå­—äº†ï¼ŒæŠŠè®ºæ–‡çš„åˆç¨¿ã€ç»ˆç¨¿ã€ç­”è¾©è®°å½•ã€å®ä¹ ææ–™ç­‰ææ–™ä¸€èµ·è£…è¿›æ¡£æ¡ˆè¢‹äº†ï¼Œè¿™æ‰å®‰å¿ƒäº†ã€‚</p><p>äºæ˜¯å½“æ™šå°±å»å‚åŠ äº†ç­ä¸Šçš„æ¯•ä¸šèšä¼šã€‚</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1frou06i6h3j31kw16oayj.jpg" alt="571527322665_.pic_hd"></p><h3 id="æ„Ÿå—"><a href="#æ„Ÿå—" class="headerlink" title="æ„Ÿå—"></a>æ„Ÿå—</h3><p>è¿™æ®µæ—¶é—´çœŸçš„æ˜¯å¾ˆç´¯ï¼Œæ¯å¤©ç†¬å¤œåˆ°å¾ˆæ™šï¼Œç¬¬äºŒå¤©æ—©ä¸Šå¾ˆæ—©å°±è‡ªç„¶é†’äº†ã€‚ç˜¦äº†ä¸å°‘ï¼Œç‰›ä»”è£¤çš„çš®å¸¦æˆ‘æ„Ÿè§‰éƒ½ç¼©äº†ä¸€åœˆï¼Œå³æ‰‹çš„å‡ ä¸ªæ‰‹æŒ‡å¤©å¤©åœ¨ç”µè„‘çš„è§¦æ‘¸æ¿ä¸Šæ»‘æ¥æ»‘å»çš„ï¼Œéƒ½è„±äº†ä¸€å±‚çš®äº†ï¼Œç°åœ¨æ”¾ä¸Šå»éƒ½æœ‰ç‚¹ç—›ï¼Œæ‰“å°è®ºæ–‡å¥½åƒæ‰“å°äº†7ä»½ï¼Œçƒ§é’±å•Šã€‚å‘ç°æˆ‘çš„è®°å¿†è¿˜æ˜¯å¯ä»¥çš„ï¼Œè¿™ä¹ˆå¤šäº‹ç«Ÿç„¶è¿˜èƒ½è®°å¾—ï¼Œæå¾—æ•´ç¯‡æ–‡ç« æœ‰ç‚¹åƒåœ¨è®°æµæ°´è´¦ï¼Œå“ˆå“ˆå“ˆã€‚åæ­£ä¹Ÿæ˜¯è®°å½•ä¸‹è‡ªå·±çš„è®ºæ–‡ç­”è¾©è¿™æ®µæ—¶é—´çš„ç»å†ã€‚è®ºæ–‡çš„æ ¼å¼å¾ˆé‡è¦ï¼Œä¸å†åƒå†™åšå®¢é‚£æ ·éšæ„ï¼Œè®ºæ–‡æ˜¯éœ€è¦ä»¥ä¸€ç§ä¸¥è°¨çš„æ€åº¦å»å¯¹å¾…çš„ã€‚</p><p>å†™ç€å†™ç€å¿˜äº†è¯´è®ºæ–‡çš„æŸ¥é‡äº†ã€‚ä¸€èˆ¬ä½ ä¸€å¼€å§‹æœ€å¥½å…ˆç”¨ç¬¬ä¸‰æ–¹çš„å…è´¹æŸ¥é‡ä¸‹ï¼Œç„¶åä¿®æ”¹ã€‚</p><p>æˆ‘å½“æ—¶ç”¨çš„æ˜¯ï¼š<a href="http://xueshu.baidu.com/usercenter/papercheck/" target="_blank" rel="noopener">http://xueshu.baidu.com/usercenter/papercheck/</a>   è¿™ä¸ªåœ°æ–¹æœ‰å‡ ä¸ªæ˜¯å¯ä»¥ç¬¬ä¸€æ¬¡å…è´¹æŸ¥é‡çš„ï¼Œå¦‚æœæ¬¡æ•°ç”¨å®Œäº†ï¼Œè®°å¾—æ¢ä¸ªç™¾åº¦è´¦å·å°±åˆæœ‰å¥½äº›æ¬¡æŸ¥é‡çš„æœºä¼šã€‚å¦‚æœä½ å®åœ¨æ˜¯ä¸æ”¾å¿ƒï¼Œå¯ä»¥å»å­¦æ ¡çš„æ‰“å°åº—é—®ä¸‹æ˜¯å¦æœ‰è®ºæ–‡æŸ¥é‡çš„ï¼Œä¹Ÿæ˜¯æŸ¥çš„çŸ¥ç½‘çš„åº“ï¼Œå’Œå­¦æ ¡çŸ¥ç½‘æŸ¥é‡çš„åŒºåˆ«ä¸å¤§ï¼Œæˆ‘æ¯”è¾ƒè‡ªä¿¡ï¼Œæ²¡èŠ±è¿™ä¸ªé’±ï¼Œæ¯•ç«Ÿå¥½è´µï¼ŒğŸ˜¯æˆ‘ç©·ï¼Œå“ˆå“ˆå“ˆã€‚å­¦æ ¡è§„å®šçš„æ˜¯ä¸èƒ½é«˜äº 30% çš„æŸ¥é‡ç‡ï¼Œå»ºè®®è¿˜æ˜¯è‡ªå·±æŠŠæŸ¥é‡é™ä½åˆ° 20% ä»¥ä¸‹ç„¶åå†æäº¤åˆ°å­¦æ ¡çŸ¥ç½‘å»ï¼Œä¸ç„¶è¶…è¿‡çš„è¯æ˜¯éœ€è¦äºŒæ¬¡æŸ¥é‡çš„ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªæ„Ÿå—å°±æ˜¯ï¼šå¤šå’Œä½ çš„å¯¼å¸ˆäº¤æµï¼Œé‡åˆ°ä¸ä¼šæˆ–è€…æ‹¿ä¸å‡†çš„æœ€å¥½åœ¨ç¾¤é‡Œé—®ä»–ï¼Œç„¶åä»–è¯´çš„é”™è¯¯ï¼Œä½ è¦åŠæ—¶æ›´æ”¹å¥½è¿‡æ¥ï¼Œè¯´ä½ é—®é¢˜çš„æ—¶å€™è¦å­¦ä¼šè„¸ä¸ŠæŒ‚ç€ç¬‘å®¹ï¼Œå˜»å˜»å˜»å°±è¿‡å»äº†ï¼Œç„¶åè®°ä½è¯¥é—®é¢˜çš„é”™è¯¯ï¼Œå›å»ç«‹é©¬æ”¹å¥½ï¼ŒåŠæ—¶æ‹¿ææ–™ç»™è€å¸ˆæŸ¥é˜…ä¿®æ”¹å¥½çš„è®ºæ–‡ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/006tNc79gy1frou078h61j312c0vedse.jpg&quot; alt=&quot;2018-05-26_15-01-42&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h3&gt;&lt;p&gt;æœ€è¿‘ä¸€ç›´åœ¨å­¦æ ¡å¿™æ¯•ä¸šè®ºæ–‡çš„äº‹ï¼ŒæŠ±æ­‰äº†ï¼Œå¾ˆé•¿ä¸€æ®µæ—¶é—´æ²¡æ›´æ–°æ–‡ç« äº†ï¼Œä»Šå¤©æ˜ŸæœŸå…­ï¼Œæ˜¨å¤©æ˜ŸæœŸäº”ï¼Œå¹¸å¥½æ‰€æœ‰èµ„æ–™éƒ½åœ¨å‘¨æœ«å‰äº¤é½äº†ï¼Œæ˜¨æ™šè¿˜åˆ°å‚åŠ ç­ä¸Šçš„èšä¼šï¼Œä¹Ÿå–äº†ä¸å°‘é…’ï¼Œä½†å¹¸å¥½æ²¡é†‰ï¼Œä¸ç„¶ä»Šå¤©è‚¯å®šä¸ä¼šå†™ä¸‹è¿™ç¯‡æ–‡ç« çš„ã€‚è¿™ç¯‡æ–‡ç« å°±æŠŠä»æ¥è§¦åˆ°æ¯•ä¸šè®ºæ–‡æŒ‡å¯¼è€å¸ˆåˆ°ç°åœ¨çš„è¿™åŠå¹´æ—¶é—´æœ‰å…³æ¯•ä¸šè®ºæ–‡çš„äº‹éƒ½è®²è®²ï¼Œå¸Œæœ›èƒ½å¤Ÿç•™ä¸‹ç‚¹å›å¿†ï¼&lt;br&gt;
    
    </summary>
    
    
      <category term="éšç¬”" scheme="http://yoursite.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸ƒ)ï¼šSpringApplication æ·±å…¥æ¢ç´¢</title>
    <link href="http://yoursite.com/2018/04/30/springboot_SpringApplication/"/>
    <id>http://yoursite.com/2018/04/30/springboot_SpringApplication/</id>
    <published>2018-04-29T16:00:00.000Z</published>
    <updated>2018-05-09T04:35:51.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fqxbkmfds2j31hc0oegze.jpg" alt="sunset-3325080_1920"></p><a id="more"></a><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/04/30/springboot_SpringApplication/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/04/30/springboot_SpringApplication/</a></p><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>åœ¨ Spring Boot é¡¹ç›®çš„å¯åŠ¨ç±»ä¸­å¸¸è§ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbotApplication</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(SpringbotApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ä¹Ÿå°±ä¸¤ä¸ªæ¯”è¾ƒå¼•äººæ³¨æ„çš„åœ°æ–¹ï¼š</p><ul><li><code>@SpringBootApplication</code></li><li><code>SpringApplication.run()</code></li></ul><p>å¯¹äºç¬¬ä¸€ä¸ªæ³¨è§£ <code>@SpringBootApplication</code>ï¼Œæˆ‘å·²ç»åœ¨åšå®¢ <a href="http://www.54tianzhisheng.cn/2018/04/19/SpringBootApplication-annotation/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring Boot 2.0ä¸­SpringBootApplicationæ³¨è§£è¯¦è§£</a> ä¸­è¯¦ç»†çš„è®²è§£äº†ã€‚æ¥ä¸‹æ¥å°±æ˜¯æ·±å…¥æ¢ç©¶ç¬¬äºŒä¸ªäº† <code>SpringApplication.run()</code> ã€‚</p><h3 id="æ¢ä¸ªå§¿åŠ¿"><a href="#æ¢ä¸ªå§¿åŠ¿" class="headerlink" title="æ¢ä¸ªå§¿åŠ¿"></a>æ¢ä¸ªå§¿åŠ¿</h3><p>ä¸Šé¢çš„å§¿åŠ¿å¤ªç®€å•äº†ï¼Œåªä¸€è¡Œä»£ç å°±å®Œäº‹äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SpringApplication.run(SpringbotApplication.class, args);</span><br></pre></td></tr></table></figure><p>å…¶å®æ˜¯æ”¯æŒåšä¸€äº›ä¸ªæ€§åŒ–çš„è®¾ç½®ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¢ä¸ªå§¿åŠ¿ç§ç§ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbotApplication</span> </span>&#123;  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication app = <span class="keyword">new</span> SpringApplication(SpringbotApplication.class);</span><br><span class="line"> <span class="comment">// è‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„é…ç½®</span></span><br><span class="line"> <span class="comment">//app.setXxx()</span></span><br><span class="line"> app.run(args)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ²¡é”™ï¼Œå°±æ˜¯é€šè¿‡ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç„¶åè®¾ç½®ç›¸å…³çš„å±æ€§ï¼Œä»è€Œè¾¾åˆ°å®šåˆ¶åŒ–æœåŠ¡ã€‚æœ‰å“ªäº›å±æ€§å‘¢ï¼Ÿ</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fqx6tttpf2j312618mn4w.jpg" alt="SpringApplicationFileds"></p><p>å±æ€§å¯¹åº”çš„ getï¼set æ–¹æ³•</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fqx6tz1wmyj31kw1f3qeo.jpg" alt="springapplication_getset"></p><p>çœ‹åˆ°æ²¡ï¼Œè¿˜å¾ˆå¤šå‘¢ï¼</p><p>ä¸¾ä¸ªä¾‹å­ï¼šä½ æƒ³æŠŠ Spring Boot é¡¹ç›®çš„é»˜è®¤ Banner æ¢æˆä½ è‡ªå·±çš„ï¼Œå°±éœ€è¦åœ¨è¿™é‡Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">//SpringApplication.run(Springboot2Application.class, args);</span></span><br><span class="line">  SpringApplication application = <span class="keyword">new</span> SpringApplication(Springboot2Application.class);</span><br><span class="line">  application.setBanner((environment, sourceClass, out) -&gt; &#123;</span><br><span class="line">    <span class="comment">//è¿™é‡Œæ‰“å°ä¸€ä¸ªlogo</span></span><br><span class="line">    System.out.println(<span class="string">"      _      _       _\n"</span> +</span><br><span class="line">                       <span class="string">"     | |    (_)     | |\n"</span> +</span><br><span class="line">                       <span class="string">" ____| |__   _  ___ | |__    ___  _ __    __ _\n"</span> +</span><br><span class="line">                       <span class="string">"|_  /| '_ \\ | |/ __|| '_ \\  / _ \\| '_ \\  / _` |\n"</span> +</span><br><span class="line">                       <span class="string">" / / | | | || |\\__ \\| | | ||  __/| | | || (_| |\n"</span> +</span><br><span class="line">                       <span class="string">"/___||_| |_||_||___/|_| |_| \\___||_| |_| \\__, |\n"</span> +</span><br><span class="line">                       <span class="string">"                                          __/ |\n"</span> +</span><br><span class="line">                       <span class="string">"                                         |___/\n"</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  application.setBannerMode(Banner.Mode.CONSOLE);</span><br><span class="line">  <span class="comment">//ä½ è¿˜å¯ä»¥å¹²å…¶ä»–çš„å®šåˆ¶åŒ–åˆå§‹è®¾ç½®</span></span><br><span class="line">  application.run(args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨é‡å¯é¡¹ç›®ï¼Œä½ å°±ä¼šå‘ç°ï¼Œæ§åˆ¶å°çš„ logo å·²ç»æ¢æˆä½ è‡ªå·±çš„äº†ã€‚</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fqx6tuvk6lj31kw1a6qio.jpg" alt="banner"></p><p>å½“ç„¶äº†ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—è¿™æ ·å†™æœ‰ç‚¹å¤æ‚ï¼Œå—¯å—¯ï¼Œç¡®å®ï¼Œè¿™æ ·ç¡¬ç¼–ç åœ¨ä»£ç é‡Œç¡®å®ä¸å¤ªå‹å¥½ã€‚ä½ è¿˜å¯ä»¥åœ¨<code>src/main/resources</code>è·¯å¾„ä¸‹æ–°å»ºä¸€ä¸ª<code>banner.txt</code>æ–‡ä»¶ï¼Œ<code>banner.txt</code>ä¸­å¡«å†™å¥½éœ€è¦æ‰“å°çš„å­—ç¬¦ä¸²å†…å®¹å³å¯ã€‚</p><p>ä»è¯¥ç±»ä¸­å¯ä»¥çœ‹åˆ°åœ¨ Spring Boot 2 ä¸­å¼•å…¥äº†ä¸ªæ–°çš„ WebApplicationType å’Œ WebEnvironmentã€‚</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fqx6tvo4l3j31ke1fads1.jpg" alt="springapplication-002"></p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fqx6tyfizgj31be13ujws.jpg" alt="webapplicationtype"></p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fqx6tmcuslj31im0yigtw.jpg" alt="springapplication-003"></p><p>ç¡®å®ï¼Œè¿™ä¹Ÿæ˜¯ Spring Boot 2 ä¸­æ¯”è¾ƒå¤§çš„ç‰¹æ€§ï¼Œå®ƒæ˜¯æ”¯æŒå“åº”å¼ç¼–ç¨‹çš„ã€‚æˆ‘ä¹‹å‰åœ¨æ–‡ç«  <a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-new-features/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£</a> ä¸­ä¹Ÿä»‹ç»è¿‡ï¼Œä»¥åæœ‰æœºä¼šä¼šä»‹ç»å®ƒçš„ï¼Œè¿™é‡Œæˆ‘å…ˆå–ä¸ªå…³å­ã€‚</p><h3 id="SpringApplication-åˆå§‹åŒ–"><a href="#SpringApplication-åˆå§‹åŒ–" class="headerlink" title="SpringApplication åˆå§‹åŒ–"></a>SpringApplication åˆå§‹åŒ–</h3><p><code>SpringApplication.run()</code>  çš„å®ç°æ‰æ˜¯æˆ‘ä»¬è¦æ·±å…¥æ¢ç©¶çš„ä¸»è§’ï¼Œè¯¥æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é™æ€æ–¹æ³•ï¼Œå¯ç”¨äºä½¿ç”¨é»˜è®¤é…ç½®è¿è¡Œ SpringApplication</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ConfigurableApplicationContext <span class="title">run</span><span class="params">(Class&lt;?&gt; primarySource,</span></span></span><br><span class="line"><span class="function"><span class="params">      String... args)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> run(<span class="keyword">new</span> Class&lt;?&gt;[] &#123; primarySource &#125;, args);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ConfigurableApplicationContext <span class="title">run</span><span class="params">(Class&lt;?&gt;[] primarySources,</span></span></span><br><span class="line"><span class="function"><span class="params">String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> SpringApplication(primarySources).run(args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªé™æ€æ–¹æ³•ä¸­ï¼Œåˆ›å»º SpringApplication å¯¹è±¡ï¼Œå¹¶è°ƒç”¨è¯¥å¯¹è±¡çš„ run æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">SpringApplication</span><span class="params">(Class&lt;?&gt;... primarySources)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>(<span class="keyword">null</span>, primarySources);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ª SpringApplication å®ä¾‹ï¼Œåº”ç”¨ä¸Šä¸‹æ–‡ä¼šæ ¹æ®æŒ‡å®šçš„ä¸»è¦èµ„æºåŠ è½½ beans ï¼Œå®ä¾‹åœ¨è°ƒç”¨ run æ–¹æ³•ä¹‹å‰å¯ä»¥å®šåˆ¶åŒ–</span></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(&#123; <span class="string">"unchecked"</span>, <span class="string">"rawtypes"</span> &#125;)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">SpringApplication</span><span class="params">(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.resourceLoader = resourceLoader;</span><br><span class="line">  Assert.notNull(primarySources, <span class="string">"PrimarySources must not be null"</span>);</span><br><span class="line">  <span class="keyword">this</span>.primarySources = <span class="keyword">new</span> LinkedHashSet&lt;&gt;(Arrays.asList(primarySources));</span><br><span class="line">  <span class="keyword">this</span>.webApplicationType = deduceWebApplicationType();</span><br><span class="line">  setInitializers((Collection) getSpringFactoriesInstances(</span><br><span class="line">    ApplicationContextInitializer.class));</span><br><span class="line">  setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));</span><br><span class="line">  <span class="keyword">this</span>.mainApplicationClass = deduceMainApplicationClass();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆæ˜¯è¿›å…¥å•ä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œç„¶åè¿›å…¥ä¸¤å‚æ•°çš„æ„é€ æ–¹æ³•ï¼ˆResourceLoader ä¸º nullï¼‰ï¼Œç„¶åè¿›è¡Œåˆå§‹åŒ–ã€‚</p><p><strong>1ã€deduceWebApplicationType()</strong> : æ¨æ–­åº”ç”¨çš„ç±»å‹ ï¼Œåˆ›å»ºçš„æ˜¯ä¸€ä¸ª SERVLET åº”ç”¨è¿˜æ˜¯ REACTIVEåº”ç”¨æˆ–è€…æ˜¯ NONE</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String REACTIVE_WEB_ENVIRONMENT_CLASS = <span class="string">"org.springframework.web.reactive.DispatcherHandler"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String MVC_WEB_ENVIRONMENT_CLASS = <span class="string">"org.springframework.web.servlet.DispatcherServlet"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] WEB_ENVIRONMENT_CLASSES = &#123; <span class="string">"javax.servlet.Servlet"</span>,</span><br><span class="line"><span class="string">"org.springframework.web.context.ConfigurableWebApplicationContext"</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> WebApplicationType <span class="title">deduceWebApplicationType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (ClassUtils.isPresent(REACTIVE_WEB_ENVIRONMENT_CLASS, <span class="keyword">null</span>)</span><br><span class="line">      &amp;&amp; !ClassUtils.isPresent(MVC_WEB_ENVIRONMENT_CLASS, <span class="keyword">null</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> WebApplicationType.REACTIVE;<span class="comment">//è¯¥ç¨‹åºæ˜¯ REACTIVE ç¨‹åº</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (String className : WEB_ENVIRONMENT_CLASSES) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!ClassUtils.isPresent(className, <span class="keyword">null</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span> WebApplicationType.NONE;<span class="comment">//è¯¥ç¨‹åºä¸º NONE</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> WebApplicationType.SERVLET;<span class="comment">//é»˜è®¤è¿”å›æ˜¯ SERVLET ç¨‹åº</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2ã€setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class))</strong>ï¼šåˆå§‹åŒ– classpath ä¸‹çš„æ‰€æœ‰çš„å¯ç”¨çš„ ApplicationContextInitializerã€‚</p><p>1ï¼‰ã€getSpringFactoriesInstances()</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> &lt;T&gt; <span class="function">Collection&lt;T&gt; <span class="title">getSpringFactoriesInstances</span><span class="params">(Class&lt;T&gt; type)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> getSpringFactoriesInstances(type, <span class="keyword">new</span> Class&lt;?&gt;[] &#123;&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è·å–æ‰€æœ‰çš„ Spring å·¥å‚å®ä¾‹</span></span><br><span class="line"><span class="keyword">private</span> &lt;T&gt; <span class="function">Collection&lt;T&gt; <span class="title">getSpringFactoriesInstances</span><span class="params">(Class&lt;T&gt; type,</span></span></span><br><span class="line"><span class="function"><span class="params">Class&lt;?&gt;[] parameterTypes, Object... args)</span> </span>&#123;</span><br><span class="line">  ClassLoader classLoader = Thread.currentThread().getContextClassLoader();</span><br><span class="line">  <span class="comment">// Use names and ensure unique to protect against duplicates</span></span><br><span class="line">  Set&lt;String&gt; names = <span class="keyword">new</span> LinkedHashSet&lt;&gt;(SpringFactoriesLoader.loadFactoryNames(type, classLoader)); <span class="comment">//è·å–æ‰€æœ‰ Spring Factories çš„åå­—</span></span><br><span class="line">  List&lt;T&gt; instances = createSpringFactoriesInstances(type, parameterTypes,</span><br><span class="line">                                                     classLoader, args, names);</span><br><span class="line">  AnnotationAwareOrderComparator.sort(instances); <span class="comment">//Spring å·¥å‚å®ä¾‹æ’åº</span></span><br><span class="line">  <span class="keyword">return</span> instances;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ ¹æ®è¯»å–åˆ°çš„åå­—åˆ›å»ºå¯¹è±¡ï¼ˆSpring å·¥å‚å®ä¾‹ï¼‰</span></span><br><span class="line"><span class="keyword">private</span> &lt;T&gt; <span class="function">List&lt;T&gt; <span class="title">createSpringFactoriesInstances</span><span class="params">(Class&lt;T&gt; type,</span></span></span><br><span class="line"><span class="function"><span class="params"> Class&lt;?&gt;[] parameterTypes, ClassLoader classLoader, Object[] args, Set&lt;String&gt; names)</span> </span>&#123;</span><br><span class="line">  List&lt;T&gt; instances = <span class="keyword">new</span> ArrayList&lt;&gt;(names.size());</span><br><span class="line">  <span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      Class&lt;?&gt; instanceClass = ClassUtils.forName(name, classLoader);</span><br><span class="line">      Assert.isAssignable(type, instanceClass);</span><br><span class="line">      Constructor&lt;?&gt; constructor = instanceClass.getDeclaredConstructor(parameterTypes);</span><br><span class="line">      T instance = (T) BeanUtils.instantiateClass(constructor, args);</span><br><span class="line">      instances.add(instance);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(</span><br><span class="line">        <span class="string">"Cannot instantiate "</span> + type + <span class="string">" : "</span> + name, ex);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> instances;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ SpringFactoriesLoader.loadFactoryNames() ï¼Œæ˜¯ä»  META-INF/spring.factories çš„èµ„æºæ–‡ä»¶ä¸­ï¼Œè¯»å– key ä¸ºorg.springframework.context.ApplicationContextInitializer çš„ valueã€‚</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fqx6xo1yhjj31kw1cinbe.jpg" alt="springfactoriesloader"></p><p>è€Œ spring.factories çš„éƒ¨åˆ†å†…å®¹å¦‚ä¸‹ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fqx6tt63ojj31kw0kotk4.jpg" alt="2018-05-01_22-21-20"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæœ€è¿‘çš„å¾—åˆ°çš„ï¼Œæ˜¯ ConfigurationWarningsApplicationContextInitializerï¼ŒContextIdApplicationContextInitializerï¼ŒDelegatingApplicationContextInitializerï¼ŒServerPortInfoApplicationContextInitializer è¿™å››ä¸ªç±»çš„åå­—ã€‚</p><p>2ï¼‰ã€setInitializers()ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInitializers</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">Collection&lt;? extends ApplicationContextInitializer&lt;?&gt;&gt; initializers)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.initializers = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  <span class="keyword">this</span>.initializers.addAll(initializers);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œè¿™é‡Œ setInitializers() æ‰€å¾—åˆ°çš„æˆå‘˜å˜é‡ initializers å°±è¢«åˆå§‹åŒ–ä¸ºConfigurationWarningsApplicationContextInitializerï¼ŒContextIdApplicationContextInitializerï¼ŒDelegatingApplicationContextInitializerï¼ŒServerPortInfoApplicationContextInitializer è¿™å››ä¸ªç±»çš„å¯¹è±¡ç»„æˆçš„ listã€‚</p><p><strong>3ã€setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class))</strong>ï¼šåˆå§‹åŒ– classpath ä¸‹çš„æ‰€æœ‰çš„å¯ç”¨çš„ ApplicationListenerã€‚</p><p>1ï¼‰ã€getSpringFactoriesInstances() å’Œä¸Šé¢çš„ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒæ˜¯ä»  META-INF/spring.factories çš„èµ„æºæ–‡ä»¶ä¸­ï¼Œè·å–åˆ° key ä¸º org.springframework.context.ApplicationListener çš„ valueã€‚</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fqx6ty24gvj31kw0l3n7h.jpg" alt="2018-05-01_22-33-56"></p><p>2ï¼‰ã€setListeners()ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setListeners</span><span class="params">(Collection&lt;? extends ApplicationListener&lt;?&gt;&gt; listeners)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.listeners = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  <span class="keyword">this</span>.listeners.addAll(listeners);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œè¿™é‡Œ setListeners() æ‰€å¾—åˆ°çš„æˆå‘˜å˜é‡ listeners å°±è¢«åˆå§‹åŒ–ä¸º ClearCachesApplicationListenerï¼ŒParentContextCloserApplicationListenerï¼ŒFileEncodingApplicationListenerï¼ŒAnsiOutputApplicationListener ï¼ŒConfigFileApplicationListenerï¼ŒDelegatingApplicationListenerï¼ŒClasspathLoggingApplicationListenerï¼ŒLoggingApplicationListenerï¼ŒLiquibaseServiceLocatorApplicationListener  è¿™ä¹ä¸ªç±»çš„å¯¹è±¡ç»„æˆçš„ listã€‚</p><p><strong>4ã€deduceMainApplicationClass()</strong> ï¼šæ ¹æ®è°ƒç”¨æ ˆï¼Œæ¨æ–­å‡º main æ–¹æ³•çš„ç±»å</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Class&lt;?&gt; deduceMainApplicationClass() &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    StackTraceElement[] stackTrace = <span class="keyword">new</span> RuntimeException().getStackTrace();</span><br><span class="line">    <span class="keyword">for</span> (StackTraceElement stackTraceElement : stackTrace) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="string">"main"</span>.equals(stackTraceElement.getMethodName())) &#123;</span><br><span class="line">        <span class="keyword">return</span> Class.forName(stackTraceElement.getClassName());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">catch</span> (ClassNotFoundException ex) &#123;</span><br><span class="line">    <span class="comment">// Swallow and continue</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="run-æ–¹æ³•èƒŒåçš„ç§˜å¯†"><a href="#run-æ–¹æ³•èƒŒåçš„ç§˜å¯†" class="headerlink" title="run æ–¹æ³•èƒŒåçš„ç§˜å¯†"></a>run æ–¹æ³•èƒŒåçš„ç§˜å¯†</h3><p>ä¸Šé¢çœ‹å®Œäº†æ„é€ æ–¹æ³•åï¼Œå·²ç»åˆå§‹åŒ–äº†ä¸€ä¸ª SpringApplication å¯¹è±¡ï¼Œæ¥ä¸‹æ¥è°ƒç”¨å…¶ run æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿è¡Œ Spring åº”ç”¨ç¨‹åºï¼Œåˆ›å»ºå¹¶åˆ·æ–°ä¸€ä¸ªæ–°çš„ ApplicationContext</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ConfigurableApplicationContext <span class="title">run</span><span class="params">(String... args)</span> </span>&#123;</span><br><span class="line">StopWatch stopWatch = <span class="keyword">new</span> StopWatch();</span><br><span class="line">stopWatch.start();</span><br><span class="line">ConfigurableApplicationContext context = <span class="keyword">null</span>;</span><br><span class="line">Collection&lt;SpringBootExceptionReporter&gt; exceptionReporters = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">configureHeadlessProperty();</span><br><span class="line">SpringApplicationRunListeners listeners = getRunListeners(args);</span><br><span class="line">listeners.starting();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">ApplicationArguments applicationArguments = <span class="keyword">new</span> DefaultApplicationArguments(</span><br><span class="line">args);</span><br><span class="line">ConfigurableEnvironment environment = prepareEnvironment(listeners,</span><br><span class="line">applicationArguments);</span><br><span class="line">configureIgnoreBeanInfo(environment);</span><br><span class="line">Banner printedBanner = printBanner(environment);</span><br><span class="line">context = createApplicationContext();</span><br><span class="line">exceptionReporters = getSpringFactoriesInstances(</span><br><span class="line">SpringBootExceptionReporter.class,</span><br><span class="line"><span class="keyword">new</span> Class[] &#123; ConfigurableApplicationContext.class &#125;, context);</span><br><span class="line">prepareContext(context, environment, listeners, applicationArguments,</span><br><span class="line">printedBanner);</span><br><span class="line">refreshContext(context);</span><br><span class="line">afterRefresh(context, applicationArguments);</span><br><span class="line">stopWatch.stop();</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>.logStartupInfo) &#123;</span><br><span class="line"><span class="keyword">new</span> StartupInfoLogger(<span class="keyword">this</span>.mainApplicationClass)</span><br><span class="line">.logStarted(getApplicationLog(), stopWatch);</span><br><span class="line">&#125;</span><br><span class="line">listeners.started(context);</span><br><span class="line">callRunners(context, applicationArguments);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">handleRunFailure(context, ex, exceptionReporters, listeners);</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(ex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">listeners.running(context);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">handleRunFailure(context, ex, exceptionReporters, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(ex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> context;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯å˜ä¸ªæ•°å‚æ•° args å³æ˜¯æˆ‘ä»¬æ•´ä¸ªåº”ç”¨ç¨‹åºçš„å…¥å£ main æ–¹æ³•çš„å‚æ•°ã€‚StopWatch æ˜¯æ¥è‡ª org.springframework.util çš„å·¥å…·ç±»ï¼Œå¯ä»¥ç”¨æ¥æ–¹ä¾¿çš„è®°å½•ç¨‹åºçš„è¿è¡Œæ—¶é—´ã€‚</p><p>å†æ¥çœ‹çœ‹ 1.5.12 ä¸ 2.0.1 ç‰ˆæœ¬çš„ run æ–¹æ³• æœ‰ä»€ä¹ˆä¸ä¸€æ ·çš„åœ°æ–¹ï¼Ÿ</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fqx6u0khy1j31kw0wuhar.jpg" alt="difference-1.5-2.0"></p><p>æ¥ä¸‹æ¥å¥½å¥½åˆ†æä¸Šé¢æ–°ç‰ˆæœ¬ï¼ˆ2.0.1ï¼‰çš„ run æ–¹æ³•çš„ä»£ç å¹¶é…åˆæ¯”è¾ƒæ—§ç‰ˆæœ¬ï¼ˆ1.5.12ï¼‰ã€‚</p><p><strong>1ã€configureHeadlessProperty()</strong>ï¼šè®¾ç½® headless æ¨¡å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String SYSTEM_PROPERTY_JAVA_AWT_HEADLESS = <span class="string">"java.awt.headless"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> headless = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">configureHeadlessProperty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  System.setProperty(SYSTEM_PROPERTY_JAVA_AWT_HEADLESS, System.getProperty(</span><br><span class="line">    SYSTEM_PROPERTY_JAVA_AWT_HEADLESS, Boolean.toString(<span class="keyword">this</span>.headless)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šæ˜¯å°±æ˜¯è®¾ç½®ç³»ç»Ÿå±æ€§ java.awt.headlessï¼Œè¯¥å±æ€§ä¼šè¢«è®¾ç½®ä¸º trueã€‚</p><p><strong>2ã€getRunListeners()</strong>ï¼šåŠ è½½ SpringApplicationRunListener å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//<span class="doctag">TODO:</span>  xxx</span></span><br><span class="line">SpringApplicationRunListeners listeners = getRunListeners(args);<span class="comment">//åˆå§‹åŒ–ç›‘å¬å™¨</span></span><br><span class="line">listeners.starting();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  prepareContext(context, environment, listeners, applicationArguments, printedBanner);</span><br><span class="line">  refreshContext(context);</span><br><span class="line">  afterRefresh(context, applicationArguments);</span><br><span class="line">  listeners.started(context);</span><br><span class="line">  callRunners(context, applicationArguments);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  listeners.running(context);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> SpringApplicationRunListeners <span class="title">getRunListeners</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  Class&lt;?&gt;[] types = <span class="keyword">new</span> Class&lt;?&gt;[] &#123; SpringApplication.class, String[].class &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> SpringApplicationRunListeners(logger, getSpringFactoriesInstances(</span><br><span class="line">    SpringApplicationRunListener.class, types, <span class="keyword">this</span>, args));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ getRunListeners() ä¸­ä¹Ÿåˆ©ç”¨ SpringFactoriesLoader åŠ è½½ META-INF/spring.factories ä¸­ key ä¸º SpringApplicationRunListener çš„å€¼ï¼Œç„¶åå†å°†è·å–åˆ°çš„å€¼ä½œä¸ºå‚æ•°ä¼ é€’åˆ° SpringApplicationRunListeners çš„æ„é€ æ–¹æ³•ä¸­å»åˆ›å»ºå¯¹è±¡ã€‚</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fqxei8t4u6j31do0ow0z9.jpg" alt="2018-05-02_23-11-01"></p><p><strong>3ã€new DefaultApplicationArguments(args)</strong> ï¼šè·å–å¯åŠ¨æ—¶ä¼ å…¥å‚æ•° argsï¼ˆmain æ–¹æ³•ä¼ è¿›æ¥çš„å‚æ•°ï¼‰ å¹¶åˆå§‹åŒ–ä¸º ApplicationArguments å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">DefaultApplicationArguments</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  Assert.notNull(args, <span class="string">"Args must not be null"</span>);</span><br><span class="line">  <span class="keyword">this</span>.source = <span class="keyword">new</span> Source(args);</span><br><span class="line">  <span class="keyword">this</span>.args = args;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4ã€prepareEnvironment(listeners, applicationArguments)</strong>ï¼šæ ¹æ® listeners å’Œ applicationArguments é…ç½®SpringBoot åº”ç”¨çš„ç¯å¢ƒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> ConfigurableEnvironment <span class="title">prepareEnvironment</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  SpringApplicationRunListeners listeners, ApplicationArguments applicationArguments)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Create and configure the environment</span></span><br><span class="line">  ConfigurableEnvironment environment = getOrCreateEnvironment();</span><br><span class="line">  configureEnvironment(environment, applicationArguments.getSourceArgs());</span><br><span class="line">  listeners.environmentPrepared(environment);</span><br><span class="line">  bindToSpringApplication(environment);</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.webApplicationType == WebApplicationType.NONE) &#123;</span><br><span class="line">    environment = <span class="keyword">new</span> EnvironmentConverter(getClassLoader())</span><br><span class="line">      .convertToStandardEnvironmentIfNecessary(environment);</span><br><span class="line">  &#125;</span><br><span class="line">  ConfigurationPropertySources.attach(environment);</span><br><span class="line">  <span class="keyword">return</span> environment;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœ environment ä¸ä¸ºç©ºï¼Œç›´æ¥ get åˆ°ï¼Œå¦åˆ™åˆ›å»º</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> ConfigurableEnvironment <span class="title">getOrCreateEnvironment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.environment != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.environment;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.webApplicationType == WebApplicationType.SERVLET) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> StandardServletEnvironment();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> StandardEnvironment();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é…ç½®ç¯å¢ƒ</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configureEnvironment</span><span class="params">(ConfigurableEnvironment environment,String[] args)</span> </span>&#123;</span><br><span class="line">  configurePropertySources(environment, args);<span class="comment">//é…ç½®è¦ä½¿ç”¨çš„PropertySources</span></span><br><span class="line">  configureProfiles(environment, args);<span class="comment">//é…ç½®è¦ä½¿ç”¨çš„Profiles</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å°†ç¯å¢ƒç»‘å®šåˆ° SpringApplication</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">bindToSpringApplication</span><span class="params">(ConfigurableEnvironment environment)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    Binder.get(environment).bind(<span class="string">"spring.main"</span>, Bindable.ofInstance(<span class="keyword">this</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"Cannot bind to SpringApplication"</span>, ex);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>5ã€configureIgnoreBeanInfo(environment)</strong>ï¼šæ ¹æ®ç¯å¢ƒä¿¡æ¯é…ç½®è¦å¿½ç•¥çš„ bean ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String IGNORE_BEANINFO_PROPERTY_NAME = <span class="string">"spring.beaninfo.ignore"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">configureIgnoreBeanInfo</span><span class="params">(ConfigurableEnvironment environment)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (System.getProperty(</span><br><span class="line">    CachedIntrospectionResults.IGNORE_BEANINFO_PROPERTY_NAME) == <span class="keyword">null</span>) &#123;</span><br><span class="line">    Boolean ignore = environment.getProperty(<span class="string">"spring.beaninfo.ignore"</span>,</span><br><span class="line">                                             Boolean.class, Boolean.TRUE);</span><br><span class="line">    System.setProperty(CachedIntrospectionResults.IGNORE_BEANINFO_PROPERTY_NAME,</span><br><span class="line">                       ignore.toString());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>6ã€printBanner(environment)</strong>ï¼šæ‰“å°æ ‡å¿—ï¼Œä¸Šé¢æˆ‘å·²ç»è¯´è¿‡äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Banner <span class="title">printBanner</span><span class="params">(ConfigurableEnvironment environment)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.bannerMode == Banner.Mode.OFF) &#123;<span class="comment">//å¦‚æœè®¾ç½®ä¸º offï¼Œä¸æ‰“å° Banner</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  ResourceLoader resourceLoader = <span class="keyword">this</span>.resourceLoader != <span class="keyword">null</span> ? <span class="keyword">this</span>.resourceLoader</span><br><span class="line">    : <span class="keyword">new</span> DefaultResourceLoader(getClassLoader());</span><br><span class="line">  SpringApplicationBannerPrinter bannerPrinter = <span class="keyword">new</span> SpringApplicationBannerPrinter(</span><br><span class="line">    resourceLoader, <span class="keyword">this</span>.banner);</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.bannerMode == Mode.LOG) &#123;</span><br><span class="line">    <span class="keyword">return</span> bannerPrinter.print(environment, <span class="keyword">this</span>.mainApplicationClass, logger);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> bannerPrinter.print(environment, <span class="keyword">this</span>.mainApplicationClass, System.out);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>7ã€createApplicationContext()</strong>ï¼šæ ¹æ®åº”ç”¨ç±»å‹æ¥ç¡®å®šè¯¥ Spring Boot é¡¹ç›®åº”è¯¥åˆ›å»ºä»€ä¹ˆç±»å‹çš„ ApplicationContext ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰æ˜ç¡®è®¾ç½®çš„åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æˆ–åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ç±»ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨è¿”å›åˆé€‚çš„é»˜è®¤å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_WEB_CONTEXT_CLASS = <span class="string">"org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_REACTIVE_WEB_CONTEXT_CLASS = <span class="string">"org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_CONTEXT_CLASS = <span class="string">"org.springframework.context.annotation.AnnotationConfigApplicationContext"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> ConfigurableApplicationContext <span class="title">createApplicationContext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Class&lt;?&gt; contextClass = <span class="keyword">this</span>.applicationContextClass;</span><br><span class="line">  <span class="keyword">if</span> (contextClass == <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">switch</span> (<span class="keyword">this</span>.webApplicationType) &#123;<span class="comment">//æ ¹æ®åº”ç”¨ç¨‹åºçš„ç±»å‹æ¥åˆå§‹åŒ–å®¹å™¨</span></span><br><span class="line">        <span class="keyword">case</span> SERVLET:<span class="comment">//servlet åº”ç”¨ç¨‹åº</span></span><br><span class="line">          contextClass = Class.forName(DEFAULT_WEB_CONTEXT_CLASS);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> REACTIVE:<span class="comment">//reactive åº”ç”¨ç¨‹åº</span></span><br><span class="line">          contextClass = Class.forName(DEFAULT_REACTIVE_WEB_CONTEXT_CLASS);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:<span class="comment">//é»˜è®¤</span></span><br><span class="line">          contextClass = Class.forName(DEFAULT_CONTEXT_CLASS);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ClassNotFoundException ex) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(</span><br><span class="line">    <span class="string">"Unable create a default ApplicationContext,please specify an     ApplicationContextClass"</span>,ex);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//æœ€åé€šè¿‡Springçš„å·¥å…·ç±» BeanUtils åˆå§‹åŒ–å®¹å™¨ç±» bean</span></span><br><span class="line">  <span class="keyword">return</span> (ConfigurableApplicationContext) BeanUtils.instantiateClass(contextClass);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥çœ‹çœ‹åœ¨ 1.5.12 ä¸­æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fqx6tx7lchj31kw0nw4gr.jpg" alt="createApplicationContext"></p><p><strong>8ã€exceptionReporters = getSpringFactoriesInstances(      SpringBootExceptionReporter.class,      new Class[] { ConfigurableApplicationContext.class }, context)</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> &lt;T&gt; <span class="function">Collection&lt;T&gt; <span class="title">getSpringFactoriesInstances</span><span class="params">(Class&lt;T&gt; type,</span></span></span><br><span class="line"><span class="function"><span class="params">            Class&lt;?&gt;[] parameterTypes, Object... args)</span> </span>&#123;</span><br><span class="line">  ClassLoader classLoader = Thread.currentThread().getContextClassLoader();</span><br><span class="line">  <span class="comment">// Use names and ensure unique to protect against duplicates</span></span><br><span class="line">  Set&lt;String&gt; names = <span class="keyword">new</span> LinkedHashSet&lt;&gt;(</span><br><span class="line">    SpringFactoriesLoader.loadFactoryNames(type, classLoader));</span><br><span class="line">  List&lt;T&gt; instances = createSpringFactoriesInstances(type, parameterTypes,</span><br><span class="line">       classLoader, args, names);<span class="comment">//æ ¹æ®ç±»å‹ key ä¸º SpringBootExceptionReporter å»åŠ è½½</span></span><br><span class="line">  AnnotationAwareOrderComparator.sort(instances);<span class="comment">//å¯¹å®ä¾‹æ’åº</span></span><br><span class="line">  <span class="keyword">return</span> instances;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¹Ÿæ˜¯é€šè¿‡ SpringFactoriesLoader åŠ è½½ META-INF/spring.factories ä¸­ key ä¸º SpringBootExceptionReporter çš„å…¨ç±»åçš„ value å€¼ã€‚</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fqx6tp9y81j31kw0tfdqv.jpg" alt="springbootexception"></p><p><strong>9ã€prepareContext(context, environment, listeners, applicationArguments, printedBanner)</strong>ï¼šå®Œæˆæ•´ä¸ªå®¹å™¨çš„åˆ›å»ºä¸å¯åŠ¨ä»¥åŠ bean çš„æ³¨å…¥åŠŸèƒ½ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è£…é… Context</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">prepareContext</span><span class="params">(ConfigurableApplicationContext context,</span></span></span><br><span class="line"><span class="function"><span class="params">   ConfigurableEnvironment environment, SpringApplicationRunListeners listeners,</span></span></span><br><span class="line"><span class="function"><span class="params">   ApplicationArguments applicationArguments, Banner printedBanner)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//å°†ä¹‹å‰å‡†å¤‡å¥½çš„ environment è®¾ç½®ç»™åˆ›å»ºå¥½çš„ ApplicationContext ä½¿ç”¨</span></span><br><span class="line">  context.setEnvironment(environment);</span><br><span class="line">  <span class="comment">//1ã€</span></span><br><span class="line">  postProcessApplicationContext(context);</span><br><span class="line">  <span class="comment">//2ã€</span></span><br><span class="line">  applyInitializers(context);</span><br><span class="line">  listeners.contextPrepared(context);</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.logStartupInfo) &#123;<span class="comment">//å¯åŠ¨æ—¥å¿—</span></span><br><span class="line">    logStartupInfo(context.getParent() == <span class="keyword">null</span>);</span><br><span class="line">    logStartupProfileInfo(context);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// Add boot specific singleton beans</span></span><br><span class="line">  context.getBeanFactory().registerSingleton(<span class="string">"springApplicationArguments"</span>,</span><br><span class="line">                                             applicationArguments);</span><br><span class="line">  <span class="keyword">if</span> (printedBanner != <span class="keyword">null</span>) &#123;</span><br><span class="line">    context.getBeanFactory().registerSingleton(<span class="string">"springBootBanner"</span>, printedBanner);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// Load the sources</span></span><br><span class="line">  Set&lt;Object&gt; sources = getAllSources();</span><br><span class="line">  Assert.notEmpty(sources, <span class="string">"Sources must not be empty"</span>);</span><br><span class="line">  <span class="comment">//3ã€</span></span><br><span class="line">  load(context, sources.toArray(<span class="keyword">new</span> Object[<span class="number">0</span>]));</span><br><span class="line">  listeners.contextLoaded(context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>1ï¼‰ã€postProcessApplicationContext(context)</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String CONFIGURATION_BEAN_NAME_GENERATOR = <span class="string">"org.springframework.context.annotation.internalConfigurationBeanNameGenerator"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">postProcessApplicationContext</span><span class="params">(ConfigurableApplicationContext context)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.beanNameGenerator != <span class="keyword">null</span>) &#123;</span><br><span class="line">    context.getBeanFactory().registerSingleton(</span><br><span class="line">      AnnotationConfigUtils.CONFIGURATION_BEAN_NAME_GENERATOR,</span><br><span class="line">      <span class="keyword">this</span>.beanNameGenerator);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.resourceLoader != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (context <span class="keyword">instanceof</span> GenericApplicationContext) &#123;</span><br><span class="line">      ((GenericApplicationContext) context)</span><br><span class="line">      .setResourceLoader(<span class="keyword">this</span>.resourceLoader);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (context <span class="keyword">instanceof</span> DefaultResourceLoader) &#123;</span><br><span class="line">      ((DefaultResourceLoader) context)</span><br><span class="line">      .setClassLoader(<span class="keyword">this</span>.resourceLoader.getClassLoader());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•å¯¹ context è¿›è¡Œäº†é¢„è®¾ç½®ï¼Œè®¾ç½®äº† ResourceLoader å’Œ ClassLoaderï¼Œå¹¶å‘ bean å·¥å‚ä¸­æ·»åŠ äº†ä¸€ä¸ªbeanNameGenerator ã€‚</p><p><strong>2ï¼‰ã€applyInitializers(context)</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">applyInitializers</span><span class="params">(ConfigurableApplicationContext context)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (ApplicationContextInitializer initializer : getInitializers()) &#123;</span><br><span class="line">    Class&lt;?&gt; requiredType = GenericTypeResolver.resolveTypeArgument(</span><br><span class="line">      initializer.getClass(), ApplicationContextInitializer.class);</span><br><span class="line">    Assert.isInstanceOf(requiredType, context, <span class="string">"Unable to call initializer."</span>);</span><br><span class="line">    initializer.initialize(context);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨åˆ·æ–°ä¹‹å‰å°†ä»»ä½• ApplicationContextInitializer åº”ç”¨äºä¸Šä¸‹æ–‡</p><p><strong>3)ã€load(context, sources.toArray(new Object[0]))</strong></p><p>ä¸»è¦æ˜¯åŠ è½½å„ç§ beans åˆ° ApplicationContext å¯¹è±¡ä¸­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">load</span><span class="params">(ApplicationContext context, Object[] sources)</span> </span>&#123;</span><br><span class="line">  BeanDefinitionLoader loader = createBeanDefinitionLoader( <span class="comment">//2</span></span><br><span class="line">    getBeanDefinitionRegistry(context), sources);<span class="comment">// 1</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.beanNameGenerator != <span class="keyword">null</span>) &#123;</span><br><span class="line">    loader.setBeanNameGenerator(<span class="keyword">this</span>.beanNameGenerator);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.resourceLoader != <span class="keyword">null</span>) &#123;</span><br><span class="line">    loader.setResourceLoader(<span class="keyword">this</span>.resourceLoader);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.environment != <span class="keyword">null</span>) &#123;</span><br><span class="line">    loader.setEnvironment(<span class="keyword">this</span>.environment);</span><br><span class="line">  &#125;</span><br><span class="line">  loader.load();<span class="comment">//3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>(1)ã€getBeanDefinitionRegistry(context)</strong></p><p>è·å– bean å®šä¹‰æ³¨å†Œè¡¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> BeanDefinitionRegistry <span class="title">getBeanDefinitionRegistry</span><span class="params">(ApplicationContext context)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (context <span class="keyword">instanceof</span> BeanDefinitionRegistry) &#123;</span><br><span class="line">    <span class="keyword">return</span> (BeanDefinitionRegistry) context;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (context <span class="keyword">instanceof</span> AbstractApplicationContext) &#123;</span><br><span class="line">    <span class="keyword">return</span> (BeanDefinitionRegistry) ((AbstractApplicationContext) context)</span><br><span class="line">      .getBeanFactory();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"Could not locate BeanDefinitionRegistry"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>(2)ã€createBeanDefinitionLoader()</strong></p><p>é€šè¿‡ BeanDefinitionLoader çš„æ„é€ æ–¹æ³•æŠŠå‚æ•°ï¼ˆæ³¨å†Œè¡¨ã€èµ„æºï¼‰ä¼ è¿›å»ï¼Œç„¶ååˆ›å»º BeanDefinitionLoaderã€‚</p><p><strong>(3)ã€load()</strong></p><p>æŠŠèµ„æºå…¨éƒ¨åŠ è½½ã€‚</p><p><strong>10ã€refreshContext(context)</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">refreshContext</span><span class="params">(ConfigurableApplicationContext context)</span> </span>&#123;</span><br><span class="line">  refresh(context);<span class="comment">//1</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.registerShutdownHook) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      context.registerShutdownHook();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (AccessControlException ex) &#123;</span><br><span class="line">      <span class="comment">// Not allowed in some environments.</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ·æ–°åº•å±‚çš„ ApplicationContext</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">refresh</span><span class="params">(ApplicationContext applicationContext)</span> </span>&#123;</span><br><span class="line">  Assert.isInstanceOf(AbstractApplicationContext.class, applicationContext);</span><br><span class="line">  ((AbstractApplicationContext) applicationContext).refresh();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>refreshContext(context) æ–¹æ³•åˆè°ƒç”¨äº† refresh(context)ã€‚åœ¨è°ƒç”¨äº† refresh(context) æ–¹æ³•ä¹‹åï¼Œè°ƒç”¨äº† registerShutdownHook æ–¹æ³•ã€‚ç»§ç»­çœ‹å®ƒçš„ refresh æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">refresh</span><span class="params">()</span> <span class="keyword">throws</span> BeansException, IllegalStateException </span>&#123;</span><br><span class="line">  <span class="keyword">synchronized</span> (<span class="keyword">this</span>.startupShutdownMonitor) &#123;</span><br><span class="line">    <span class="comment">// Prepare this context for refreshing.</span></span><br><span class="line">    prepareRefresh();</span><br><span class="line">    <span class="comment">// Tell the subclass to refresh the internal bean factory.</span></span><br><span class="line">    ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();</span><br><span class="line">    <span class="comment">// Prepare the bean factory for use in this context.</span></span><br><span class="line">    prepareBeanFactory(beanFactory);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// Allows post-processing of the bean factory in context subclasses.</span></span><br><span class="line">      postProcessBeanFactory(beanFactory);</span><br><span class="line">      <span class="comment">// Invoke factory processors registered as beans in the context.</span></span><br><span class="line">      invokeBeanFactoryPostProcessors(beanFactory);</span><br><span class="line">      <span class="comment">// Register bean processors that intercept bean creation.</span></span><br><span class="line">      registerBeanPostProcessors(beanFactory);</span><br><span class="line">      <span class="comment">// Initialize message source for this context.</span></span><br><span class="line">      initMessageSource();</span><br><span class="line">      <span class="comment">// Initialize event multicaster for this context.</span></span><br><span class="line">      initApplicationEventMulticaster();</span><br><span class="line">      <span class="comment">// Initialize other special beans in specific context subclasses.</span></span><br><span class="line">      onRefresh();</span><br><span class="line">      <span class="comment">// Check for listener beans and register them.</span></span><br><span class="line">      registerListeners();</span><br><span class="line">      <span class="comment">// Instantiate all remaining (non-lazy-init) singletons.</span></span><br><span class="line">      finishBeanFactoryInitialization(beanFactory); <span class="comment">//1</span></span><br><span class="line">      <span class="comment">// Last step: publish corresponding event.</span></span><br><span class="line">      finishRefresh();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (BeansException ex) &#123;</span><br><span class="line">      ã€‚ã€‚ã€‚</span><br><span class="line">        <span class="comment">// Destroy already created singletons to avoid dangling resources.</span></span><br><span class="line">        destroyBeans();</span><br><span class="line">      <span class="comment">// Reset 'active' flag.</span></span><br><span class="line">      cancelRefresh(ex);</span><br><span class="line">      <span class="comment">// Propagate exception to caller.</span></span><br><span class="line">      <span class="keyword">throw</span> ex;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      <span class="comment">// Reset common introspection caches in Spring's core, since we</span></span><br><span class="line">      <span class="comment">// might not ever need metadata for singleton beans anymore...</span></span><br><span class="line">      resetCommonCaches();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±çœ‹è§é‡ç‚¹äº†ï¼Œä»”ç»†çœ‹ä¸Šçš„æ³¨é‡Šï¼Œæ­£åœ¨åšå„ç§åˆå§‹åŒ–å·¥ä½œï¼Œè€Œä»Šå¤©æˆ‘ä»¬å…³æ³¨çš„é‡ç‚¹å°±æ˜¯æ–¹æ³• finishBeanFactoryInitialization(beanFactory)ã€‚è¯¥æ–¹æ³•è¿›è¡Œäº†éæ‡’åŠ è½½ beans çš„åˆå§‹åŒ–å·¥ä½œã€‚ç°åœ¨æˆ‘ä»¬è¿›å…¥è¯¥æ–¹æ³•å†…éƒ¨ï¼Œä¸€æ¢ç©¶ç«Ÿã€‚</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fqx6tli7pjj31kw1757h0.jpg" alt="finishbeanFactoryini"></p><p>çœ‹ä¸Šå›¾æ–¹æ³•ä¸­çš„æœ€åä¸€æ­¥ï¼Œè°ƒç”¨äº† beanFactory çš„ preInstantiateSingletons() æ–¹æ³•ã€‚æ­¤å¤„çš„ beanFactory æ˜¯å“ªä¸ªç±»çš„å®ä¾‹å¯¹è±¡å‘¢ï¼Ÿ</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fqx6xir0iaj31kw0urjuy.jpg" alt="2018-05-02_16-17-50"></p><p>å¯ä»¥çœ‹åˆ° ConfigurableListableBeanFactory æ¥å£çš„å®ç°ç±»åªæœ‰ DefaultListableBeanFactoryï¼Œæˆ‘ä»¬çœ‹ä¸‹å®ç°ç±»ä¸­çš„ preInstantiateSingletons æ–¹æ³•æ˜¯æ€ä¹ˆåšçš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">preInstantiateSingletons</span><span class="params">()</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">  <span class="comment">// Iterate over a copy to allow for init methods which in turn register new bean definitions.</span></span><br><span class="line">  <span class="comment">// While this may not be part of the regular factory bootstrap, it does otherwise work fine.</span></span><br><span class="line">  List&lt;String&gt; beanNames = <span class="keyword">new</span> ArrayList&lt;&gt;(<span class="keyword">this</span>.beanDefinitionNames);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Trigger initialization of all non-lazy singleton beans...</span></span><br><span class="line">  <span class="keyword">for</span> (String beanName : beanNames) &#123;</span><br><span class="line">    RootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);</span><br><span class="line">    <span class="keyword">if</span> (!bd.isAbstract() &amp;&amp; bd.isSingleton() &amp;&amp; !bd.isLazyInit()) &#123;</span><br><span class="line">      <span class="keyword">if</span> (isFactoryBean(beanName)) &#123;</span><br><span class="line">        Object bean = getBean(FACTORY_BEAN_PREFIX + beanName);</span><br><span class="line">        <span class="keyword">if</span> (bean <span class="keyword">instanceof</span> FactoryBean) &#123;</span><br><span class="line">          <span class="keyword">final</span> FactoryBean&lt;?&gt; factory = (FactoryBean&lt;?&gt;) bean;</span><br><span class="line">          <span class="keyword">boolean</span> isEagerInit;</span><br><span class="line">         <span class="keyword">if</span> (System.getSecurityManager() != <span class="keyword">null</span> &amp;&amp; factory <span class="keyword">instanceof</span> SmartFactoryBean)&#123;</span><br><span class="line">            isEagerInit = AccessController.doPrivileged((PrivilegedAction&lt;Boolean&gt;)</span><br><span class="line">             ((SmartFactoryBean&lt;?&gt;) factory)::isEagerInit, getAccessControlContext());</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            isEagerInit = (factory <span class="keyword">instanceof</span> SmartFactoryBean &amp;&amp;</span><br><span class="line">                           ((SmartFactoryBean&lt;?&gt;) factory).isEagerInit());</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> (isEagerInit) &#123;</span><br><span class="line">            getBean(beanName);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        getBean(beanName);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Trigger post-initialization callback for all applicable beans...</span></span><br><span class="line">  <span class="keyword">for</span> (String beanName : beanNames) &#123;</span><br><span class="line">    Object singletonInstance = getSingleton(beanName);</span><br><span class="line">    <span class="keyword">if</span> (singletonInstance <span class="keyword">instanceof</span> SmartInitializingSingleton) &#123;</span><br><span class="line">      <span class="keyword">final</span> SmartInitializingSingleton smartSingleton = (SmartInitializingSingleton) singletonInstance;</span><br><span class="line">      <span class="keyword">if</span> (System.getSecurityManager() != <span class="keyword">null</span>) &#123;</span><br><span class="line">        AccessController.doPrivileged((PrivilegedAction&lt;Object&gt;) () -&gt; &#123;</span><br><span class="line">          smartSingleton.afterSingletonsInstantiated();</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;, getAccessControlContext());</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        smartSingleton.afterSingletonsInstantiated();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°å¾ˆå¤šè°ƒç”¨äº† getBean(beanName) æ–¹æ³•ï¼Œè·Ÿè¸ªæ­¤æ–¹æ³•è¿›å»åï¼Œæœ€ç»ˆå‘ç° getBean è°ƒç”¨äº†AbstractBeanFactory ç±»çš„ doGetBean(xxx) æ–¹æ³•ï¼ŒdoGetBean(xxx) æ–¹æ³•ä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fqx6tr2ukqj31je1fegwm.jpg" alt="2018-05-02_17-17-39"></p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fqx6xjtn0hj31ja17g15o.jpg" alt="2018-05-02_17-19-31"></p><p>ä½†æ˜¯ createBean() æ–¹æ³•å¹¶æ²¡æœ‰å¾—åˆ°å®ç°ï¼Œå®ç°ç±»åœ¨ AbstractAutowireCapableBeanFactory ä¸­ã€‚è¿™æ‰æ˜¯åˆ›å»º bean çš„æ ¸å¿ƒæ–¹æ³•ã€‚</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fqx6toc4dxj31kw1bana4.jpg" alt="createBean"></p><p>ä¸çŸ¥ä¸è§‰ï¼Œä»£ç çœ‹çš„è¶Šæ¥è¶Šæ·±ï¼Œæ„Ÿè§‰æ€ç»´éƒ½å·®ç‚¹å›ä¸å» run æ–¹æ³•äº†ï¼Œåˆ‡å›å¤§è„‘çš„ä¸Šä¸‹æ–‡çº¿ç¨‹åˆ° run æ–¹æ³•å»ã€‚</p><p><strong>11ã€afterRefresh(context, applicationArguments)</strong>ï¼šåœ¨ä¸Šä¸‹æ–‡åˆ·æ–°åè°ƒç”¨è¯¥æ–¹æ³•ï¼Œå…¶å†…éƒ¨æ²¡æœ‰åšä»»ä½•æ“ä½œã€‚</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fqx6tnnz8vj31bs0pkgrg.jpg" alt="2018-05-02_17-43-23"></p><p>å‘ç°æ²¡åšä»»ä½•æ“ä½œäº†ä¹‹åï¼Œå°±è§‰å¾—æœ‰ç‚¹å¥‡æ€ªï¼Œæ‰€ä»¥æŠŠå½“å‰ç‰ˆæœ¬å’Œ 1.5.12  å¯¹æ¯”äº†ä¸‹ï¼Œå‘ç°ï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fqx6ts33l2j31kw0witww.jpg" alt="afterRefresh"></p><p>åœ¨ 1.5.12 ä¸­çš„ afterRefresh() æ–¹æ³•ä¸­è°ƒç”¨äº† callRunners() æ–¹æ³•ï¼Œä½†æ˜¯åœ¨ 2.0.1 ç‰ˆæœ¬ä¸­çš„ run æ–¹æ³•ä¸­è°ƒç”¨äº† callRunners () æ–¹æ³•:</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fqx6xmgbpvj31kw0x8hc4.jpg" alt="2018-05-02_17-57-52"></p><p>è¿™é‡Œä¸å¾—ä¸è¯´ SpringApplicationRunListeners åœ¨ 2.0.1 ä¸­çš„æ”¹å˜ï¼š</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fqx6tq6fzhj31kw0y5azk.jpg" alt="2018-05-02_18-28-17"></p><p>å¯ä»¥å‘ç°åœ¨ run æ–¹æ³•ä¸­ï¼ŒSpringApplicationRunListeners ç›‘å¬å™¨çš„çŠ¶æ€èŠ±ç”Ÿäº†å˜åŒ–ï¼Œè¿™ä¹Ÿæ˜¯é€šè¿‡å¯¹æ¯”ä¸åŒç‰ˆæœ¬çš„ä»£ç æ‰çŸ¥é“çš„åŒºåˆ«ï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬çœ‹æºç éœ€è¦å¤šå¯¹æ¯”ç€çœ‹ã€‚</p><p>soï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹è¿™ä¸ª SpringApplicationRunListener è¿™ä¸ªæ¥å£ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fqx6xla7afj31kw0unx1j.jpg" alt="2018-05-02_18-33-20"></p><p>started çŠ¶æ€ï¼šThe context has been refreshed and the application has started but CommandLineRunner and ApplicationRunner have not been called</p><p>running çŠ¶æ€ï¼šCalled immediately before the run method finishes, when the application context has been refreshed and all CommandLineRunner and ApplicationRunners have been called.</p><h3 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h3><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-Migration-Guide/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å—</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-new-features/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2018/04/13/Spring_Boot_2.0_Configuration_Changelog/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2018/04/15/springboot2_code/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º</a></p><p>5ã€<a href="http://www.54tianzhisheng.cn/2018/04/18/spring_boot2_project/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ</a></p><p>6ã€<a href="http://www.54tianzhisheng.cn/2018/04/19/SpringBootApplication-annotation/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring boot 2.0 ä¸­ SpringBootApplication æ³¨è§£è¯¦è§£</a></p><p>7ã€<a href="http://www.54tianzhisheng.cn/2018/04/30/springboot_SpringApplication/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸ƒ)ï¼šSpringApplication æ·±å…¥æ¢ç´¢</a></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æœ¬æ–‡ä»æºç çº§åˆ«åˆ†æäº† Spring Boot åº”ç”¨ç¨‹åºçš„å¯åŠ¨è¿‡ç¨‹ï¼Œç€é‡çœ‹äº† SpringApplication ç±»ä¸­çš„æ„é€ å‡½æ•°çš„åˆå§‹åŒ–å’Œå…¶ run æ–¹æ³•å†…éƒ¨å®ç°ï¼Œå¹¶æŠŠæ¶‰åŠåˆ°çš„æµç¨‹ä»£ç éƒ½è¿‡äº†ä¸€éã€‚</p><p>æ„Ÿæ‚Ÿï¼šæœ‰æ—¶å€™è·Ÿä»£ç è·Ÿç€è·Ÿç€ï¼Œå‘ç°è¶Šé™·è¶Šæ·±ï¼Œå¥½éš¾è·³å‡ºæ¥ï¼åé¢è¿˜éœ€å¤šå‘åˆ«äººè¯·æ•™é˜…è¯»æºç çš„æŠ€å·§ï¼</p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>è™½ç„¶æºç å¾ˆéš¾ï¼Œä½†éšç€ä¸æ–­çš„æ¢ç´¢ï¼Œæºç åœ¨ä½ é¢å‰å°†ä¼šä¸€è§ˆæ— é—ï¼Œäº«å—è¿™ç§æ¢ç´¢åçš„æˆå°±æ„Ÿï¼åŠ æ²¹ï¼éªšå¹´ï¼</p><p>è‡ªå·±æœ¬äººèƒ½åŠ›æœ‰é™ï¼Œæºç çœ‹çš„ä¸å¤šï¼Œä¸Šé¢å¦‚æœ‰ä¸å¯¹çš„è¿˜è¯·ç•™è¨€äº¤æµã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws3.sinaimg.cn/large/006tKfTcgy1fqxbkmfds2j31hc0oegze.jpg&quot; alt=&quot;sunset-3325080_1920&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>åˆ†å¸ƒå¼é”çœ‹è¿™ç¯‡å°±å¤Ÿäº†</title>
    <link href="http://yoursite.com/2018/04/24/Distributed_lock/"/>
    <id>http://yoursite.com/2018/04/24/Distributed_lock/</id>
    <published>2018-04-23T16:00:00.000Z</published>
    <updated>2018-05-02T13:21:14.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fqp2lqscrwj31hc0zk46a.jpg" alt="meadow-811339_1920"></p><a id="more"></a><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/04/24/Distributed_lock/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/04/24/Distributed_lock/</a></p><h3 id="ä»€ä¹ˆæ˜¯é”ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯é”ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯é”ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯é”ï¼Ÿ</h3><ul><li>åœ¨å•è¿›ç¨‹çš„ç³»ç»Ÿä¸­ï¼Œå½“å­˜åœ¨å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶æ”¹å˜æŸä¸ªå˜é‡ï¼ˆå¯å˜å…±äº«å˜é‡ï¼‰æ—¶ï¼Œå°±éœ€è¦å¯¹å˜é‡æˆ–ä»£ç å—åšåŒæ­¥ï¼Œä½¿å…¶åœ¨ä¿®æ”¹è¿™ç§å˜é‡æ—¶èƒ½å¤Ÿçº¿æ€§æ‰§è¡Œæ¶ˆé™¤å¹¶å‘ä¿®æ”¹å˜é‡ã€‚</li><li>è€ŒåŒæ­¥çš„æœ¬è´¨æ˜¯é€šè¿‡é”æ¥å®ç°çš„ã€‚ä¸ºäº†å®ç°å¤šä¸ªçº¿ç¨‹åœ¨ä¸€ä¸ªæ—¶åˆ»åŒä¸€ä¸ªä»£ç å—åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯æ‰§è¡Œï¼Œé‚£ä¹ˆéœ€è¦åœ¨æŸä¸ªåœ°æ–¹åšä¸ªæ ‡è®°ï¼Œè¿™ä¸ªæ ‡è®°å¿…é¡»æ¯ä¸ªçº¿ç¨‹éƒ½èƒ½çœ‹åˆ°ï¼Œå½“æ ‡è®°ä¸å­˜åœ¨æ—¶å¯ä»¥è®¾ç½®è¯¥æ ‡è®°ï¼Œå…¶ä½™åç»­çº¿ç¨‹å‘ç°å·²ç»æœ‰æ ‡è®°äº†åˆ™ç­‰å¾…æ‹¥æœ‰æ ‡è®°çš„çº¿ç¨‹ç»“æŸåŒæ­¥ä»£ç å—å–æ¶ˆæ ‡è®°åå†å»å°è¯•è®¾ç½®æ ‡è®°ã€‚è¿™ä¸ªæ ‡è®°å¯ä»¥ç†è§£ä¸ºé”ã€‚</li><li>ä¸åŒåœ°æ–¹å®ç°é”çš„æ–¹å¼ä¹Ÿä¸ä¸€æ ·ï¼Œåªè¦èƒ½æ»¡è¶³æ‰€æœ‰çº¿ç¨‹éƒ½èƒ½çœ‹å¾—åˆ°æ ‡è®°å³å¯ã€‚å¦‚ Java ä¸­ synchronize æ˜¯åœ¨å¯¹è±¡å¤´è®¾ç½®æ ‡è®°ï¼ŒLock æ¥å£çš„å®ç°ç±»åŸºæœ¬ä¸Šéƒ½åªæ˜¯æŸä¸€ä¸ª volitile ä¿®é¥°çš„ int å‹å˜é‡å…¶ä¿è¯æ¯ä¸ªçº¿ç¨‹éƒ½èƒ½æ‹¥æœ‰å¯¹è¯¥ int çš„å¯è§æ€§å’ŒåŸå­ä¿®æ”¹ï¼Œlinux å†…æ ¸ä¸­ä¹Ÿæ˜¯åˆ©ç”¨äº’æ–¥é‡æˆ–ä¿¡å·é‡ç­‰å†…å­˜æ•°æ®åšæ ‡è®°ã€‚</li><li>é™¤äº†åˆ©ç”¨å†…å­˜æ•°æ®åšé”å…¶å®ä»»ä½•äº’æ–¥çš„éƒ½èƒ½åšé”ï¼ˆåªè€ƒè™‘äº’æ–¥æƒ…å†µï¼‰ï¼Œå¦‚æµæ°´è¡¨ä¸­æµæ°´å·ä¸æ—¶é—´ç»“åˆåšå¹‚ç­‰æ ¡éªŒå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªä¸ä¼šé‡Šæ”¾çš„é”ï¼Œæˆ–è€…ä½¿ç”¨æŸä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ä½œä¸ºé”ç­‰ã€‚åªéœ€è¦æ»¡è¶³åœ¨å¯¹æ ‡è®°è¿›è¡Œä¿®æ”¹èƒ½ä¿è¯åŸå­æ€§å’Œå†…å­˜å¯è§æ€§å³å¯ã€‚</li></ul><h3 id="ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ï¼Ÿ</h3><p>åˆ†å¸ƒå¼çš„ CAP ç†è®ºå‘Šè¯‰æˆ‘ä»¬:</p><blockquote><p>ä»»ä½•ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿéƒ½æ— æ³•åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰å’Œåˆ†åŒºå®¹é”™æ€§ï¼ˆPartition toleranceï¼‰ï¼Œæœ€å¤šåªèƒ½åŒæ—¶æ»¡è¶³ä¸¤é¡¹ã€‚</p></blockquote><p>ç›®å‰å¾ˆå¤šå¤§å‹ç½‘ç«™åŠåº”ç”¨éƒ½æ˜¯åˆ†å¸ƒå¼éƒ¨ç½²çš„ï¼Œåˆ†å¸ƒå¼åœºæ™¯ä¸­çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ä¸€ç›´æ˜¯ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„è¯é¢˜ã€‚åŸºäº CAPç†è®ºï¼Œå¾ˆå¤šç³»ç»Ÿåœ¨è®¾è®¡ä¹‹åˆå°±è¦å¯¹è¿™ä¸‰è€…åšå‡ºå–èˆã€‚åœ¨äº’è”ç½‘é¢†åŸŸçš„ç»å¤§å¤šæ•°çš„åœºæ™¯ä¸­ï¼Œéƒ½éœ€è¦ç‰ºç‰²å¼ºä¸€è‡´æ€§æ¥æ¢å–ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§ï¼Œç³»ç»Ÿå¾€å¾€åªéœ€è¦ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</p><h4 id="åˆ†å¸ƒå¼åœºæ™¯"><a href="#åˆ†å¸ƒå¼åœºæ™¯" class="headerlink" title="åˆ†å¸ƒå¼åœºæ™¯"></a>åˆ†å¸ƒå¼åœºæ™¯</h4><blockquote><p>æ­¤å¤„ä¸»è¦æŒ‡é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œå¤šä¸ªç›¸åŒæœåŠ¡åŒæ—¶å¼€å¯.</p></blockquote><p>åœ¨è®¸å¤šçš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä¸ºäº†ä¿è¯æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œéœ€è¦å¾ˆå¤šçš„æŠ€æœ¯æ–¹æ¡ˆæ¥æ”¯æŒï¼Œæ¯”å¦‚<strong>åˆ†å¸ƒå¼äº‹åŠ¡</strong>ã€<strong>åˆ†å¸ƒå¼é”</strong>ç­‰ã€‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦ä¿è¯ä¸€ä¸ªæ–¹æ³•åœ¨åŒä¸€æ—¶é—´å†…åªèƒ½è¢«åŒä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚åœ¨å•æœºç¯å¢ƒä¸­ï¼Œé€šè¿‡ Java æä¾›çš„å¹¶å‘ API æˆ‘ä»¬å¯ä»¥è§£å†³ï¼Œä½†æ˜¯åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œå°±æ²¡æœ‰é‚£ä¹ˆç®€å•å•¦ã€‚</p><ul><li>åˆ†å¸ƒå¼ä¸å•æœºæƒ…å†µä¸‹æœ€å¤§çš„ä¸åŒåœ¨äºå…¶ä¸æ˜¯å¤šçº¿ç¨‹è€Œæ˜¯<strong>å¤šè¿›ç¨‹</strong>ã€‚</li><li>å¤šçº¿ç¨‹ç”±äºå¯ä»¥å…±äº«å †å†…å­˜ï¼Œå› æ­¤å¯ä»¥ç®€å•çš„é‡‡å–å†…å­˜ä½œä¸ºæ ‡è®°å­˜å‚¨ä½ç½®ã€‚è€Œè¿›ç¨‹ä¹‹é—´ç”šè‡³å¯èƒ½éƒ½ä¸åœ¨åŒä¸€å°ç‰©ç†æœºä¸Šï¼Œå› æ­¤éœ€è¦å°†æ ‡è®°å­˜å‚¨åœ¨ä¸€ä¸ªæ‰€æœ‰è¿›ç¨‹éƒ½èƒ½çœ‹åˆ°çš„åœ°æ–¹ã€‚</li></ul><h4 id="ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼é”ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼é”ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼é”ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼é”ï¼Ÿ</h4><ul><li>å½“åœ¨åˆ†å¸ƒå¼æ¨¡å‹ä¸‹ï¼Œæ•°æ®åªæœ‰ä¸€ä»½ï¼ˆæˆ–æœ‰é™åˆ¶ï¼‰ï¼Œæ­¤æ—¶éœ€è¦åˆ©ç”¨é”çš„æŠ€æœ¯æ§åˆ¶æŸä¸€æ—¶åˆ»ä¿®æ”¹æ•°æ®çš„è¿›ç¨‹æ•°ã€‚</li><li>ä¸å•æœºæ¨¡å¼ä¸‹çš„é”ä¸ä»…éœ€è¦ä¿è¯è¿›ç¨‹å¯è§ï¼Œè¿˜éœ€è¦è€ƒè™‘è¿›ç¨‹ä¸é”ä¹‹é—´çš„ç½‘ç»œé—®é¢˜ã€‚ï¼ˆæˆ‘è§‰å¾—åˆ†å¸ƒå¼æƒ…å†µä¸‹ä¹‹æ‰€ä»¥é—®é¢˜å˜å¾—å¤æ‚ï¼Œä¸»è¦å°±æ˜¯éœ€è¦è€ƒè™‘åˆ°<strong>ç½‘ç»œçš„å»¶æ—¶å’Œä¸å¯é </strong>ã€‚ã€‚ã€‚ä¸€ä¸ªå¤§å‘ï¼‰</li><li>åˆ†å¸ƒå¼é”è¿˜æ˜¯å¯ä»¥å°†æ ‡è®°å­˜åœ¨å†…å­˜ï¼Œåªæ˜¯è¯¥å†…å­˜ä¸æ˜¯æŸä¸ªè¿›ç¨‹åˆ†é…çš„å†…å­˜è€Œæ˜¯å…¬å…±å†…å­˜å¦‚ Redisã€Memcacheã€‚è‡³äºåˆ©ç”¨æ•°æ®åº“ã€æ–‡ä»¶ç­‰åšé”ä¸å•æœºçš„å®ç°æ˜¯ä¸€æ ·çš„ï¼Œåªè¦ä¿è¯æ ‡è®°èƒ½äº’æ–¥å°±è¡Œã€‚</li></ul><h3 id="æˆ‘ä»¬éœ€è¦æ€æ ·çš„åˆ†å¸ƒå¼é”ï¼Ÿ"><a href="#æˆ‘ä»¬éœ€è¦æ€æ ·çš„åˆ†å¸ƒå¼é”ï¼Ÿ" class="headerlink" title="æˆ‘ä»¬éœ€è¦æ€æ ·çš„åˆ†å¸ƒå¼é”ï¼Ÿ"></a>æˆ‘ä»¬éœ€è¦æ€æ ·çš„åˆ†å¸ƒå¼é”ï¼Ÿ</h3><ul><li>å¯ä»¥ä¿è¯åœ¨åˆ†å¸ƒå¼éƒ¨ç½²çš„åº”ç”¨é›†ç¾¤ä¸­ï¼ŒåŒä¸€ä¸ªæ–¹æ³•åœ¨åŒä¸€æ—¶é—´åªèƒ½è¢«ä¸€å°æœºå™¨ä¸Šçš„ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚</li><li>è¿™æŠŠé”è¦æ˜¯ä¸€æŠŠå¯é‡å…¥é”ï¼ˆé¿å…æ­»é”ï¼‰</li><li>è¿™æŠŠé”æœ€å¥½æ˜¯ä¸€æŠŠé˜»å¡é”ï¼ˆæ ¹æ®ä¸šåŠ¡éœ€æ±‚è€ƒè™‘è¦ä¸è¦è¿™æ¡ï¼‰</li><li>è¿™æŠŠé”æœ€å¥½æ˜¯ä¸€æŠŠå…¬å¹³é”ï¼ˆæ ¹æ®ä¸šåŠ¡éœ€æ±‚è€ƒè™‘è¦ä¸è¦è¿™æ¡ï¼‰</li><li>æœ‰é«˜å¯ç”¨çš„è·å–é”å’Œé‡Šæ”¾é”åŠŸèƒ½</li><li>è·å–é”å’Œé‡Šæ”¾é”çš„æ€§èƒ½è¦å¥½</li></ul><h3 id="åŸºäºæ•°æ®åº“åšåˆ†å¸ƒå¼é”"><a href="#åŸºäºæ•°æ®åº“åšåˆ†å¸ƒå¼é”" class="headerlink" title="åŸºäºæ•°æ®åº“åšåˆ†å¸ƒå¼é”"></a>åŸºäºæ•°æ®åº“åšåˆ†å¸ƒå¼é”</h3><blockquote><p>åŸºäºä¹è§‚é”</p></blockquote><h4 id="åŸºäºè¡¨ä¸»é”®å”¯ä¸€åšåˆ†å¸ƒå¼é”"><a href="#åŸºäºè¡¨ä¸»é”®å”¯ä¸€åšåˆ†å¸ƒå¼é”" class="headerlink" title="åŸºäºè¡¨ä¸»é”®å”¯ä¸€åšåˆ†å¸ƒå¼é”"></a>åŸºäºè¡¨ä¸»é”®å”¯ä¸€åšåˆ†å¸ƒå¼é”</h4><p>åˆ©ç”¨ä¸»é”®å”¯ä¸€çš„ç‰¹æ€§ï¼Œå¦‚æœæœ‰å¤šä¸ªè¯·æ±‚åŒæ—¶æäº¤åˆ°æ•°æ®åº“çš„è¯ï¼Œæ•°æ®åº“ä¼šä¿è¯åªæœ‰ä¸€ä¸ªæ“ä½œå¯ä»¥æˆåŠŸï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºæ“ä½œæˆåŠŸçš„é‚£ä¸ªçº¿ç¨‹è·å¾—äº†è¯¥æ–¹æ³•çš„é”ï¼Œå½“æ–¹æ³•æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæƒ³è¦é‡Šæ”¾é”çš„è¯ï¼Œåˆ é™¤è¿™æ¡æ•°æ®åº“è®°å½•å³å¯ã€‚</p><p>ä¸Šé¢è¿™ç§ç®€å•çš„å®ç°æœ‰ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p><ul><li>è¿™æŠŠé”å¼ºä¾èµ–æ•°æ®åº“çš„å¯ç”¨æ€§ï¼Œæ•°æ®åº“æ˜¯ä¸€ä¸ªå•ç‚¹ï¼Œä¸€æ—¦æ•°æ®åº“æŒ‚æ‰ï¼Œä¼šå¯¼è‡´ä¸šåŠ¡ç³»ç»Ÿä¸å¯ç”¨ã€‚</li><li>è¿™æŠŠé”æ²¡æœ‰å¤±æ•ˆæ—¶é—´ï¼Œä¸€æ—¦è§£é”æ“ä½œå¤±è´¥ï¼Œå°±ä¼šå¯¼è‡´é”è®°å½•ä¸€ç›´åœ¨æ•°æ®åº“ä¸­ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•å†è·å¾—åˆ°é”ã€‚</li><li>è¿™æŠŠé”åªèƒ½æ˜¯éé˜»å¡çš„ï¼Œå› ä¸ºæ•°æ®çš„ insert æ“ä½œï¼Œä¸€æ—¦æ’å…¥å¤±è´¥å°±ä¼šç›´æ¥æŠ¥é”™ã€‚æ²¡æœ‰è·å¾—é”çš„çº¿ç¨‹å¹¶ä¸ä¼šè¿›å…¥æ’é˜Ÿé˜Ÿåˆ—ï¼Œè¦æƒ³å†æ¬¡è·å¾—é”å°±è¦å†æ¬¡è§¦å‘è·å¾—é”æ“ä½œã€‚</li><li>è¿™æŠŠé”æ˜¯éé‡å…¥çš„ï¼ŒåŒä¸€ä¸ªçº¿ç¨‹åœ¨æ²¡æœ‰é‡Šæ”¾é”ä¹‹å‰æ— æ³•å†æ¬¡è·å¾—è¯¥é”ã€‚å› ä¸ºæ•°æ®ä¸­æ•°æ®å·²ç»å­˜åœ¨äº†ã€‚</li><li>è¿™æŠŠé”æ˜¯éå…¬å¹³é”ï¼Œæ‰€æœ‰ç­‰å¾…é”çš„çº¿ç¨‹å‡­è¿æ°”å»äº‰å¤ºé”ã€‚</li><li>åœ¨ MySQL æ•°æ®åº“ä¸­é‡‡ç”¨ä¸»é”®å†²çªé˜²é‡ï¼Œåœ¨å¤§å¹¶å‘æƒ…å†µä¸‹æœ‰å¯èƒ½ä¼šé€ æˆé”è¡¨ç°è±¡ã€‚</li></ul><p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æœ‰å…¶ä»–æ–¹å¼è§£å†³ä¸Šé¢çš„é—®é¢˜ã€‚</p><ul><li>æ•°æ®åº“æ˜¯å•ç‚¹ï¼Ÿæä¸¤ä¸ªæ•°æ®åº“ï¼Œæ•°æ®ä¹‹å‰åŒå‘åŒæ­¥ï¼Œä¸€æ—¦æŒ‚æ‰å¿«é€Ÿåˆ‡æ¢åˆ°å¤‡åº“ä¸Šã€‚</li><li>æ²¡æœ‰å¤±æ•ˆæ—¶é—´ï¼Ÿåªè¦åšä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯éš”ä¸€å®šæ—¶é—´æŠŠæ•°æ®åº“ä¸­çš„è¶…æ—¶æ•°æ®æ¸…ç†ä¸€éã€‚</li><li>éé˜»å¡çš„ï¼Ÿæä¸€ä¸ª while å¾ªç¯ï¼Œç›´åˆ° insert æˆåŠŸå†è¿”å›æˆåŠŸã€‚</li><li>éé‡å…¥çš„ï¼Ÿåœ¨æ•°æ®åº“è¡¨ä¸­åŠ ä¸ªå­—æ®µï¼Œè®°å½•å½“å‰è·å¾—é”çš„æœºå™¨çš„ä¸»æœºä¿¡æ¯å’Œçº¿ç¨‹ä¿¡æ¯ï¼Œé‚£ä¹ˆä¸‹æ¬¡å†è·å–é”çš„æ—¶å€™å…ˆæŸ¥è¯¢æ•°æ®åº“ï¼Œå¦‚æœå½“å‰æœºå™¨çš„ä¸»æœºä¿¡æ¯å’Œçº¿ç¨‹ä¿¡æ¯åœ¨æ•°æ®åº“å¯ä»¥æŸ¥åˆ°çš„è¯ï¼Œç›´æ¥æŠŠé”åˆ†é…ç»™ä»–å°±å¯ä»¥äº†ã€‚</li><li>éå…¬å¹³çš„ï¼Ÿå†å»ºä¸€å¼ ä¸­é—´è¡¨ï¼Œå°†ç­‰å¾…é”çš„çº¿ç¨‹å…¨è®°å½•ä¸‹æ¥ï¼Œå¹¶æ ¹æ®åˆ›å»ºæ—¶é—´æ’åºï¼Œåªæœ‰æœ€å…ˆåˆ›å»ºçš„å…è®¸è·å–é”ã€‚</li><li>æ¯”è¾ƒå¥½çš„åŠæ³•æ˜¯åœ¨ç¨‹åºä¸­ç”Ÿäº§ä¸»é”®è¿›è¡Œé˜²é‡ã€‚</li></ul><h4 id="åŸºäºè¡¨å­—æ®µç‰ˆæœ¬å·åšåˆ†å¸ƒå¼é”"><a href="#åŸºäºè¡¨å­—æ®µç‰ˆæœ¬å·åšåˆ†å¸ƒå¼é”" class="headerlink" title="åŸºäºè¡¨å­—æ®µç‰ˆæœ¬å·åšåˆ†å¸ƒå¼é”"></a>åŸºäºè¡¨å­—æ®µç‰ˆæœ¬å·åšåˆ†å¸ƒå¼é”</h4><p>è¿™ä¸ªç­–ç•¥æºäº mysql çš„ mvcc æœºåˆ¶ï¼Œä½¿ç”¨è¿™ä¸ªç­–ç•¥å…¶å®æœ¬èº«æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå”¯ä¸€çš„é—®é¢˜å°±æ˜¯å¯¹æ•°æ®è¡¨ä¾µå…¥è¾ƒå¤§ï¼Œæˆ‘ä»¬è¦ä¸ºæ¯ä¸ªè¡¨è®¾è®¡ä¸€ä¸ªç‰ˆæœ¬å·å­—æ®µï¼Œç„¶åå†™ä¸€æ¡åˆ¤æ–­ sql æ¯æ¬¡è¿›è¡Œåˆ¤æ–­ï¼Œå¢åŠ äº†æ•°æ®åº“æ“ä½œçš„æ¬¡æ•°ï¼Œåœ¨é«˜å¹¶å‘çš„è¦æ±‚ä¸‹ï¼Œå¯¹æ•°æ®åº“è¿æ¥çš„å¼€é”€ä¹Ÿæ˜¯æ— æ³•å¿å—çš„ã€‚</p><blockquote><p>åŸºäºæ‚²è§‚é”</p></blockquote><h4 id="åŸºäºæ•°æ®åº“æ’ä»–é”åšåˆ†å¸ƒå¼é”"><a href="#åŸºäºæ•°æ®åº“æ’ä»–é”åšåˆ†å¸ƒå¼é”" class="headerlink" title="åŸºäºæ•°æ®åº“æ’ä»–é”åšåˆ†å¸ƒå¼é”"></a>åŸºäºæ•°æ®åº“æ’ä»–é”åšåˆ†å¸ƒå¼é”</h4><p>åœ¨æŸ¥è¯¢è¯­å¥åé¢å¢åŠ <code>for update</code>ï¼Œæ•°æ®åº“ä¼šåœ¨æŸ¥è¯¢è¿‡ç¨‹ä¸­ç»™æ•°æ®åº“è¡¨å¢åŠ æ’ä»–é” (æ³¨æ„ï¼š InnoDB å¼•æ“åœ¨åŠ é”çš„æ—¶å€™ï¼Œåªæœ‰é€šè¿‡ç´¢å¼•è¿›è¡Œæ£€ç´¢çš„æ—¶å€™æ‰ä¼šä½¿ç”¨è¡Œçº§é”ï¼Œå¦åˆ™ä¼šä½¿ç”¨è¡¨çº§é”ã€‚è¿™é‡Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨è¡Œçº§é”ï¼Œå°±è¦ç»™è¦æ‰§è¡Œçš„æ–¹æ³•å­—æ®µåæ·»åŠ ç´¢å¼•ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªç´¢å¼•ä¸€å®šè¦åˆ›å»ºæˆå”¯ä¸€ç´¢å¼•ï¼Œå¦åˆ™ä¼šå‡ºç°å¤šä¸ªé‡è½½æ–¹æ³•ä¹‹é—´æ— æ³•åŒæ—¶è¢«è®¿é—®çš„é—®é¢˜ã€‚é‡è½½æ–¹æ³•çš„è¯å»ºè®®æŠŠå‚æ•°ç±»å‹ä¹ŸåŠ ä¸Šã€‚)ã€‚å½“æŸæ¡è®°å½•è¢«åŠ ä¸Šæ’ä»–é”ä¹‹åï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•å†åœ¨è¯¥è¡Œè®°å½•ä¸Šå¢åŠ æ’ä»–é”ã€‚</p><p>æˆ‘ä»¬å¯ä»¥è®¤ä¸ºè·å¾—æ’ä»–é”çš„çº¿ç¨‹å³å¯è·å¾—åˆ†å¸ƒå¼é”ï¼Œå½“è·å–åˆ°é”ä¹‹åï¼Œå¯ä»¥æ‰§è¡Œæ–¹æ³•çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ‰§è¡Œå®Œæ–¹æ³•ä¹‹åï¼Œé€šè¿‡<code>connection.commit()</code>æ“ä½œæ¥é‡Šæ”¾é”ã€‚</p><p>è¿™ç§æ–¹æ³•å¯ä»¥æœ‰æ•ˆçš„è§£å†³ä¸Šé¢æåˆ°çš„æ— æ³•é‡Šæ”¾é”å’Œé˜»å¡é”çš„é—®é¢˜ã€‚</p><ul><li>é˜»å¡é”ï¼Ÿ <code>for update</code>è¯­å¥ä¼šåœ¨æ‰§è¡ŒæˆåŠŸåç«‹å³è¿”å›ï¼Œåœ¨æ‰§è¡Œå¤±è´¥æ—¶ä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ï¼Œç›´åˆ°æˆåŠŸã€‚</li><li>é”å®šä¹‹åæœåŠ¡å®•æœºï¼Œæ— æ³•é‡Šæ”¾ï¼Ÿä½¿ç”¨è¿™ç§æ–¹å¼ï¼ŒæœåŠ¡å®•æœºä¹‹åæ•°æ®åº“ä¼šè‡ªå·±æŠŠé”é‡Šæ”¾æ‰ã€‚</li></ul><p>ä½†æ˜¯è¿˜æ˜¯æ— æ³•ç›´æ¥è§£å†³æ•°æ®åº“å•ç‚¹å’Œå¯é‡å…¥é—®é¢˜ã€‚</p><p>è¿™é‡Œè¿˜å¯èƒ½å­˜åœ¨å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œè™½ç„¶æˆ‘ä»¬å¯¹æ–¹æ³•å­—æ®µåä½¿ç”¨äº†å”¯ä¸€ç´¢å¼•ï¼Œå¹¶ä¸”æ˜¾ç¤ºä½¿ç”¨ for update æ¥ä½¿ç”¨è¡Œçº§é”ã€‚ä½†æ˜¯ï¼ŒMySQL ä¼šå¯¹æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ï¼Œå³ä¾¿åœ¨æ¡ä»¶ä¸­ä½¿ç”¨äº†ç´¢å¼•å­—æ®µï¼Œä½†æ˜¯å¦ä½¿ç”¨ç´¢å¼•æ¥æ£€ç´¢æ•°æ®æ˜¯ç”± MySQL é€šè¿‡åˆ¤æ–­ä¸åŒæ‰§è¡Œè®¡åˆ’çš„ä»£ä»·æ¥å†³å®šçš„ï¼Œå¦‚æœ MySQL è®¤ä¸ºå…¨è¡¨æ‰«æ•ˆç‡æ›´é«˜ï¼Œæ¯”å¦‚å¯¹ä¸€äº›å¾ˆå°çš„è¡¨ï¼Œå®ƒå°±ä¸ä¼šä½¿ç”¨ç´¢å¼•ï¼Œè¿™ç§æƒ…å†µä¸‹ InnoDB å°†ä½¿ç”¨è¡¨é”ï¼Œè€Œä¸æ˜¯è¡Œé”ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µå°±æ‚²å‰§äº†ã€‚ã€‚ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬è¦ä½¿ç”¨æ’ä»–é”æ¥è¿›è¡Œåˆ†å¸ƒå¼é”çš„ lockï¼Œé‚£ä¹ˆä¸€ä¸ªæ’ä»–é”é•¿æ—¶é—´ä¸æäº¤ï¼Œå°±ä¼šå ç”¨æ•°æ®åº“è¿æ¥ã€‚ä¸€æ—¦ç±»ä¼¼çš„è¿æ¥å˜å¾—å¤šäº†ï¼Œå°±å¯èƒ½æŠŠæ•°æ®åº“è¿æ¥æ± æ’‘çˆ†ã€‚</p><h4 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h4><p><strong>ä¼˜ç‚¹</strong>ï¼šç®€å•ï¼Œæ˜“äºç†è§£</p><p><strong>ç¼ºç‚¹</strong>ï¼šä¼šæœ‰å„ç§å„æ ·çš„é—®é¢˜ï¼ˆæ“ä½œæ•°æ®åº“éœ€è¦ä¸€å®šçš„å¼€é”€ï¼Œä½¿ç”¨æ•°æ®åº“çš„è¡Œçº§é”å¹¶ä¸ä¸€å®šé è°±ï¼Œæ€§èƒ½ä¸é è°±ï¼‰</p><h3 id="åŸºäº-Redis-åšåˆ†å¸ƒå¼é”"><a href="#åŸºäº-Redis-åšåˆ†å¸ƒå¼é”" class="headerlink" title="åŸºäº Redis åšåˆ†å¸ƒå¼é”"></a>åŸºäº Redis åšåˆ†å¸ƒå¼é”</h3><h4 id="åŸºäº-redis-çš„-setnx-ã€expire-æ–¹æ³•åšåˆ†å¸ƒå¼é”"><a href="#åŸºäº-redis-çš„-setnx-ã€expire-æ–¹æ³•åšåˆ†å¸ƒå¼é”" class="headerlink" title="åŸºäº redis çš„ setnx()ã€expire() æ–¹æ³•åšåˆ†å¸ƒå¼é”"></a>åŸºäº redis çš„ setnx()ã€expire() æ–¹æ³•åšåˆ†å¸ƒå¼é”</h4><h5 id="setnx"><a href="#setnx" class="headerlink" title="setnx()"></a>setnx()</h5><p>setnx çš„å«ä¹‰å°±æ˜¯ SET if Not Existsï¼Œå…¶ä¸»è¦æœ‰ä¸¤ä¸ªå‚æ•° setnx(key, value)ã€‚è¯¥æ–¹æ³•æ˜¯åŸå­çš„ï¼Œå¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®å½“å‰ key æˆåŠŸï¼Œè¿”å› 1ï¼›å¦‚æœå½“å‰ key å·²ç»å­˜åœ¨ï¼Œåˆ™è®¾ç½®å½“å‰ key å¤±è´¥ï¼Œè¿”å› 0ã€‚</p><h5 id="expire"><a href="#expire" class="headerlink" title="expire()"></a>expire()</h5><p>expire è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¦æ³¨æ„çš„æ˜¯ setnx å‘½ä»¤ä¸èƒ½è®¾ç½® key çš„è¶…æ—¶æ—¶é—´ï¼Œåªèƒ½é€šè¿‡ expire() æ¥å¯¹ key è®¾ç½®ã€‚</p><h5 id="ä½¿ç”¨æ­¥éª¤"><a href="#ä½¿ç”¨æ­¥éª¤" class="headerlink" title="ä½¿ç”¨æ­¥éª¤"></a>ä½¿ç”¨æ­¥éª¤</h5><p>1ã€setnx(lockkey, 1)  å¦‚æœè¿”å› 0ï¼Œåˆ™è¯´æ˜å ä½å¤±è´¥ï¼›å¦‚æœè¿”å› 1ï¼Œåˆ™è¯´æ˜å ä½æˆåŠŸ</p><p>2ã€expire() å‘½ä»¤å¯¹ lockkey è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œä¸ºçš„æ˜¯é¿å…æ­»é”é—®é¢˜ã€‚</p><p>3ã€æ‰§è¡Œå®Œä¸šåŠ¡ä»£ç åï¼Œå¯ä»¥é€šè¿‡ delete å‘½ä»¤åˆ é™¤ keyã€‚</p><p>è¿™ä¸ªæ–¹æ¡ˆå…¶å®æ˜¯å¯ä»¥è§£å†³æ—¥å¸¸å·¥ä½œä¸­çš„éœ€æ±‚çš„ï¼Œä½†ä»æŠ€æœ¯æ–¹æ¡ˆçš„æ¢è®¨ä¸Šæ¥è¯´ï¼Œå¯èƒ½è¿˜æœ‰ä¸€äº›å¯ä»¥å®Œå–„çš„åœ°æ–¹ã€‚<strong>æ¯”å¦‚ï¼Œå¦‚æœåœ¨ç¬¬ä¸€æ­¥ setnx æ‰§è¡ŒæˆåŠŸåï¼Œåœ¨ expire() å‘½ä»¤æ‰§è¡ŒæˆåŠŸå‰ï¼Œå‘ç”Ÿäº†å®•æœºçš„ç°è±¡ï¼Œé‚£ä¹ˆå°±ä¾ç„¶ä¼šå‡ºç°æ­»é”çš„é—®é¢˜ï¼Œæ‰€ä»¥å¦‚æœè¦å¯¹å…¶è¿›è¡Œå®Œå–„çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ redis çš„ setnx()ã€get() å’Œ getset() æ–¹æ³•æ¥å®ç°åˆ†å¸ƒå¼é”ã€‚</strong></p><h4 id="åŸºäº-redis-çš„-setnx-ã€get-ã€getset-æ–¹æ³•åšåˆ†å¸ƒå¼é”"><a href="#åŸºäº-redis-çš„-setnx-ã€get-ã€getset-æ–¹æ³•åšåˆ†å¸ƒå¼é”" class="headerlink" title="åŸºäº redis çš„ setnx()ã€get()ã€getset()æ–¹æ³•åšåˆ†å¸ƒå¼é”"></a>åŸºäº redis çš„ setnx()ã€get()ã€getset()æ–¹æ³•åšåˆ†å¸ƒå¼é”</h4><p>è¿™ä¸ªæ–¹æ¡ˆçš„èƒŒæ™¯ä¸»è¦æ˜¯åœ¨ setnx() å’Œ expire() çš„æ–¹æ¡ˆä¸Šé’ˆå¯¹å¯èƒ½å­˜åœ¨çš„æ­»é”é—®é¢˜ï¼Œåšäº†ä¸€äº›ä¼˜åŒ–ã€‚</p><h5 id="getset"><a href="#getset" class="headerlink" title="getset()"></a>getset()</h5><p>è¿™ä¸ªå‘½ä»¤ä¸»è¦æœ‰ä¸¤ä¸ªå‚æ•° getset(keyï¼ŒnewValue)ã€‚è¯¥æ–¹æ³•æ˜¯åŸå­çš„ï¼Œå¯¹ key è®¾ç½® newValue è¿™ä¸ªå€¼ï¼Œå¹¶ä¸”è¿”å› key åŸæ¥çš„æ—§å€¼ã€‚å‡è®¾ key åŸæ¥æ˜¯ä¸å­˜åœ¨çš„ï¼Œé‚£ä¹ˆå¤šæ¬¡æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œä¼šå‡ºç°ä¸‹è¾¹çš„æ•ˆæœï¼š</p><ol><li>getset(key, â€œvalue1â€)  è¿”å› null   æ­¤æ—¶ key çš„å€¼ä¼šè¢«è®¾ç½®ä¸º value1</li><li>getset(key, â€œvalue2â€)  è¿”å› value1   æ­¤æ—¶ key çš„å€¼ä¼šè¢«è®¾ç½®ä¸º value2</li><li>ä¾æ¬¡ç±»æ¨ï¼</li></ol><h5 id="ä½¿ç”¨æ­¥éª¤-1"><a href="#ä½¿ç”¨æ­¥éª¤-1" class="headerlink" title="ä½¿ç”¨æ­¥éª¤"></a>ä½¿ç”¨æ­¥éª¤</h5><ol><li>setnx(lockkey, å½“å‰æ—¶é—´+è¿‡æœŸè¶…æ—¶æ—¶é—´)ï¼Œå¦‚æœè¿”å› 1ï¼Œåˆ™è·å–é”æˆåŠŸï¼›å¦‚æœè¿”å› 0 åˆ™æ²¡æœ‰è·å–åˆ°é”ï¼Œè½¬å‘ 2ã€‚</li><li>get(lockkey) è·å–å€¼ oldExpireTime ï¼Œå¹¶å°†è¿™ä¸ª value å€¼ä¸å½“å‰çš„ç³»ç»Ÿæ—¶é—´è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå°äºå½“å‰ç³»ç»Ÿæ—¶é—´ï¼Œåˆ™è®¤ä¸ºè¿™ä¸ªé”å·²ç»è¶…æ—¶ï¼Œå¯ä»¥å…è®¸åˆ«çš„è¯·æ±‚é‡æ–°è·å–ï¼Œè½¬å‘ 3ã€‚</li><li>è®¡ç®— newExpireTime = å½“å‰æ—¶é—´+è¿‡æœŸè¶…æ—¶æ—¶é—´ï¼Œç„¶å getset(lockkey, newExpireTime) ä¼šè¿”å›å½“å‰ lockkey çš„å€¼currentExpireTimeã€‚</li><li>åˆ¤æ–­ currentExpireTime ä¸ oldExpireTime æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œè¯´æ˜å½“å‰ getset è®¾ç½®æˆåŠŸï¼Œè·å–åˆ°äº†é”ã€‚å¦‚æœä¸ç›¸ç­‰ï¼Œè¯´æ˜è¿™ä¸ªé”åˆè¢«åˆ«çš„è¯·æ±‚è·å–èµ°äº†ï¼Œé‚£ä¹ˆå½“å‰è¯·æ±‚å¯ä»¥ç›´æ¥è¿”å›å¤±è´¥ï¼Œæˆ–è€…ç»§ç»­é‡è¯•ã€‚</li><li>åœ¨è·å–åˆ°é”ä¹‹åï¼Œå½“å‰çº¿ç¨‹å¯ä»¥å¼€å§‹è‡ªå·±çš„ä¸šåŠ¡å¤„ç†ï¼Œå½“å¤„ç†å®Œæ¯•åï¼Œæ¯”è¾ƒè‡ªå·±çš„å¤„ç†æ—¶é—´å’Œå¯¹äºé”è®¾ç½®çš„è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœå°äºé”è®¾ç½®çš„è¶…æ—¶æ—¶é—´ï¼Œåˆ™ç›´æ¥æ‰§è¡Œ delete é‡Šæ”¾é”ï¼›å¦‚æœå¤§äºé”è®¾ç½®çš„è¶…æ—¶æ—¶é—´ï¼Œåˆ™ä¸éœ€è¦å†é”è¿›è¡Œå¤„ç†ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.com.tpig.cache.redis.RedisService;</span><br><span class="line"><span class="keyword">import</span> cn.com.tpig.utils.SpringUtils;</span><br><span class="line"></span><br><span class="line"><span class="comment">//redisåˆ†å¸ƒå¼é”</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisLockUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> defaultExpire = <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">RedisLockUtil</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŠ é”</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key redis key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> expire è¿‡æœŸæ—¶é—´ï¼Œå•ä½ç§’</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true:åŠ é”æˆåŠŸï¼Œfalseï¼ŒåŠ é”å¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">lock</span><span class="params">(String key, <span class="keyword">int</span> expire)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        RedisService redisService = SpringUtils.getBean(RedisService.class);</span><br><span class="line">        <span class="keyword">long</span> status = redisService.setnx(key, <span class="string">"1"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(status == <span class="number">1</span>) &#123;</span><br><span class="line">            redisService.expire(key, expire);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">lock</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> lock2(key, defaultExpire);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŠ é”</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key redis key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> expire è¿‡æœŸæ—¶é—´ï¼Œå•ä½ç§’</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true:åŠ é”æˆåŠŸï¼Œfalseï¼ŒåŠ é”å¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">lock2</span><span class="params">(String key, <span class="keyword">int</span> expire)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        RedisService redisService = SpringUtils.getBean(RedisService.class);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> value = System.currentTimeMillis() + expire;</span><br><span class="line">        <span class="keyword">long</span> status = redisService.setnx(key, String.valueOf(value));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(status == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> oldExpireTime = Long.parseLong(redisService.get(key, <span class="string">"0"</span>));</span><br><span class="line">        <span class="keyword">if</span>(oldExpireTime &lt; System.currentTimeMillis()) &#123;</span><br><span class="line">            <span class="comment">//è¶…æ—¶</span></span><br><span class="line">            <span class="keyword">long</span> newExpireTime = System.currentTimeMillis() + expire;</span><br><span class="line">            <span class="keyword">long</span> currentExpireTime = Long.parseLong(redisService.getSet(key, String.valueOf(newExpireTime)));</span><br><span class="line">            <span class="keyword">if</span>(currentExpireTime == oldExpireTime) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">unLock1</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        RedisService redisService = SpringUtils.getBean(RedisService.class);</span><br><span class="line">        redisService.del(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">unLock2</span><span class="params">(String key)</span> </span>&#123;    </span><br><span class="line">        RedisService redisService = SpringUtils.getBean(RedisService.class);    </span><br><span class="line">        <span class="keyword">long</span> oldExpireTime = Long.parseLong(redisService.get(key, <span class="string">"0"</span>));   </span><br><span class="line">        <span class="keyword">if</span>(oldExpireTime &gt; System.currentTimeMillis()) &#123;        </span><br><span class="line">            redisService.del(key);    </span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">drawRedPacket</span><span class="params">(<span class="keyword">long</span> userId)</span> </span>&#123;</span><br><span class="line">    String key = <span class="string">"draw.redpacket.userid:"</span> + userId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span> lock = RedisLockUtil.lock2(key, <span class="number">60</span>);</span><br><span class="line">    <span class="keyword">if</span>(lock) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//é¢†å–æ“ä½œ</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//é‡Šæ”¾é”</span></span><br><span class="line">            RedisLockUtil.unLock(key);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> RuntimeException(<span class="string">"é‡å¤é¢†å–å¥–åŠ±"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åŸºäº-Redlock-åšåˆ†å¸ƒå¼é”"><a href="#åŸºäº-Redlock-åšåˆ†å¸ƒå¼é”" class="headerlink" title="åŸºäº Redlock åšåˆ†å¸ƒå¼é”"></a>åŸºäº Redlock åšåˆ†å¸ƒå¼é”</h4><p>Redlock æ˜¯ Redis çš„ä½œè€… antirez ç»™å‡ºçš„é›†ç¾¤æ¨¡å¼çš„ Redis åˆ†å¸ƒå¼é”ï¼Œå®ƒåŸºäº N ä¸ªå®Œå…¨ç‹¬ç«‹çš„ Redis èŠ‚ç‚¹ï¼ˆé€šå¸¸æƒ…å†µä¸‹ N å¯ä»¥è®¾ç½®æˆ 5ï¼‰ã€‚</p><p>ç®—æ³•çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>1ã€å®¢æˆ·ç«¯è·å–å½“å‰æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</li><li>2ã€å®¢æˆ·ç«¯å°è¯•è·å– N ä¸ªèŠ‚ç‚¹çš„é”ï¼Œï¼ˆæ¯ä¸ªèŠ‚ç‚¹è·å–é”çš„æ–¹å¼å’Œå‰é¢è¯´çš„ç¼“å­˜é”ä¸€æ ·ï¼‰ï¼ŒN ä¸ªèŠ‚ç‚¹ä»¥ç›¸åŒçš„ key å’Œ value è·å–é”ã€‚å®¢æˆ·ç«¯éœ€è¦è®¾ç½®æ¥å£è®¿é—®è¶…æ—¶ï¼Œæ¥å£è¶…æ—¶æ—¶é—´éœ€è¦è¿œè¿œå°äºé”è¶…æ—¶æ—¶é—´ï¼Œæ¯”å¦‚é”è‡ªåŠ¨é‡Šæ”¾çš„æ—¶é—´æ˜¯ 10sï¼Œé‚£ä¹ˆæ¥å£è¶…æ—¶å¤§æ¦‚è®¾ç½® 5-50msã€‚è¿™æ ·å¯ä»¥åœ¨æœ‰ redis èŠ‚ç‚¹å®•æœºåï¼Œè®¿é—®è¯¥èŠ‚ç‚¹æ—¶èƒ½å°½å¿«è¶…æ—¶ï¼Œè€Œå‡å°é”çš„æ­£å¸¸ä½¿ç”¨ã€‚</li><li>3ã€å®¢æˆ·ç«¯è®¡ç®—åœ¨è·å¾—é”çš„æ—¶å€™èŠ±è´¹äº†å¤šå°‘æ—¶é—´ï¼Œæ–¹æ³•æ˜¯ç”¨å½“å‰æ—¶é—´å‡å»åœ¨æ­¥éª¤ä¸€è·å–çš„æ—¶é—´ï¼Œåªæœ‰å®¢æˆ·ç«¯è·å¾—äº†è¶…è¿‡ 3 ä¸ªèŠ‚ç‚¹çš„é”ï¼Œè€Œä¸”è·å–é”çš„æ—¶é—´å°äºé”çš„è¶…æ—¶æ—¶é—´ï¼Œå®¢æˆ·ç«¯æ‰è·å¾—äº†åˆ†å¸ƒå¼é”ã€‚</li><li>4ã€å®¢æˆ·ç«¯è·å–çš„é”çš„æ—¶é—´ä¸ºè®¾ç½®çš„é”è¶…æ—¶æ—¶é—´å‡å»æ­¥éª¤ä¸‰è®¡ç®—å‡ºçš„è·å–é”èŠ±è´¹æ—¶é—´ã€‚</li><li>5ã€å¦‚æœå®¢æˆ·ç«¯è·å–é”å¤±è´¥äº†ï¼Œå®¢æˆ·ç«¯ä¼šä¾æ¬¡åˆ é™¤æ‰€æœ‰çš„é”ã€‚<br>ä½¿ç”¨ Redlock ç®—æ³•ï¼Œå¯ä»¥ä¿è¯åœ¨æŒ‚æ‰æœ€å¤š 2 ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œåˆ†å¸ƒå¼é”æœåŠ¡ä»ç„¶èƒ½å·¥ä½œï¼Œè¿™ç›¸æ¯”ä¹‹å‰çš„æ•°æ®åº“é”å’Œç¼“å­˜é”å¤§å¤§æé«˜äº†å¯ç”¨æ€§ï¼Œç”±äº redis çš„é«˜æ•ˆæ€§èƒ½ï¼Œåˆ†å¸ƒå¼ç¼“å­˜é”æ€§èƒ½å¹¶ä¸æ¯”æ•°æ®åº“é”å·®ã€‚</li></ul><p>ä½†æ˜¯ï¼Œæœ‰ä¸€ä½åˆ†å¸ƒå¼çš„ä¸“å®¶å†™äº†ä¸€ç¯‡æ–‡ç« ã€ŠHow to do distributed lockingã€‹ï¼Œè´¨ç–‘ Redlock çš„æ­£ç¡®æ€§ã€‚</p><p><a href="">https://mp.weixin.qq.com/s/1bPLk_VZhZ0QYNZS8LkviA</a></p><p><a href="">https://blog.csdn.net/jek123456/article/details/72954106</a></p><h4 id="ä¼˜ç¼ºç‚¹-1"><a href="#ä¼˜ç¼ºç‚¹-1" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h4><p><strong>ä¼˜ç‚¹ï¼š</strong></p><p>æ€§èƒ½é«˜</p><p><strong>ç¼ºç‚¹ï¼š</strong></p><p>å¤±æ•ˆæ—¶é—´è®¾ç½®å¤šé•¿æ—¶é—´ä¸ºå¥½ï¼Ÿå¦‚ä½•è®¾ç½®çš„å¤±æ•ˆæ—¶é—´å¤ªçŸ­ï¼Œæ–¹æ³•æ²¡ç­‰æ‰§è¡Œå®Œï¼Œé”å°±è‡ªåŠ¨é‡Šæ”¾äº†ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿå¹¶å‘é—®é¢˜ã€‚å¦‚æœè®¾ç½®çš„æ—¶é—´å¤ªé•¿ï¼Œå…¶ä»–è·å–é”çš„çº¿ç¨‹å°±å¯èƒ½è¦å¹³ç™½çš„å¤šç­‰ä¸€æ®µæ—¶é—´ã€‚</p><h4 id="åŸºäº-redisson-åšåˆ†å¸ƒå¼é”"><a href="#åŸºäº-redisson-åšåˆ†å¸ƒå¼é”" class="headerlink" title="åŸºäº redisson åšåˆ†å¸ƒå¼é”"></a>åŸºäº redisson åšåˆ†å¸ƒå¼é”</h4><p>redisson æ˜¯ redis å®˜æ–¹çš„åˆ†å¸ƒå¼é”ç»„ä»¶ã€‚GitHub åœ°å€ï¼š<a href="">https://github.com/redisson/redisson</a></p><p>ä¸Šé¢çš„è¿™ä¸ªé—®é¢˜ â€”â€”&gt; å¤±æ•ˆæ—¶é—´è®¾ç½®å¤šé•¿æ—¶é—´ä¸ºå¥½ï¼Ÿè¿™ä¸ªé—®é¢˜åœ¨ redisson çš„åšæ³•æ˜¯ï¼šæ¯è·å¾—ä¸€ä¸ªé”æ—¶ï¼Œåªè®¾ç½®ä¸€ä¸ªå¾ˆçŸ­çš„è¶…æ—¶æ—¶é—´ï¼ŒåŒæ—¶èµ·ä¸€ä¸ªçº¿ç¨‹åœ¨æ¯æ¬¡å¿«è¦åˆ°è¶…æ—¶æ—¶é—´æ—¶å»åˆ·æ–°é”çš„è¶…æ—¶æ—¶é—´ã€‚åœ¨é‡Šæ”¾é”çš„åŒæ—¶ç»“æŸè¿™ä¸ªçº¿ç¨‹ã€‚</p><h3 id="åŸºäº-ZooKeeper-åšåˆ†å¸ƒå¼é”"><a href="#åŸºäº-ZooKeeper-åšåˆ†å¸ƒå¼é”" class="headerlink" title="åŸºäº ZooKeeper åšåˆ†å¸ƒå¼é”"></a>åŸºäº ZooKeeper åšåˆ†å¸ƒå¼é”</h3><h4 id="zookeeper-é”ç›¸å…³åŸºç¡€çŸ¥è¯†"><a href="#zookeeper-é”ç›¸å…³åŸºç¡€çŸ¥è¯†" class="headerlink" title="zookeeper é”ç›¸å…³åŸºç¡€çŸ¥è¯†"></a>zookeeper é”ç›¸å…³åŸºç¡€çŸ¥è¯†</h4><ul><li>zk ä¸€èˆ¬ç”±å¤šä¸ªèŠ‚ç‚¹æ„æˆï¼ˆå•æ•°ï¼‰ï¼Œé‡‡ç”¨ zab ä¸€è‡´æ€§åè®®ã€‚å› æ­¤å¯ä»¥å°† zk çœ‹æˆä¸€ä¸ªå•ç‚¹ç»“æ„ï¼Œå¯¹å…¶ä¿®æ”¹æ•°æ®å…¶å†…éƒ¨è‡ªåŠ¨å°†æ‰€æœ‰èŠ‚ç‚¹æ•°æ®è¿›è¡Œä¿®æ”¹è€Œåæ‰æä¾›æŸ¥è¯¢æœåŠ¡ã€‚</li><li>zk çš„æ•°æ®ä»¥ç›®å½•æ ‘çš„å½¢å¼ï¼Œæ¯ä¸ªç›®å½•ç§°ä¸º  znodeï¼Œ znode ä¸­å¯å­˜å‚¨æ•°æ®ï¼ˆä¸€èˆ¬ä¸è¶…è¿‡ 1Mï¼‰ï¼Œè¿˜å¯ä»¥åœ¨å…¶ä¸­å¢åŠ å­èŠ‚ç‚¹ã€‚</li><li>å­èŠ‚ç‚¹æœ‰ä¸‰ç§ç±»å‹ã€‚åºåˆ—åŒ–èŠ‚ç‚¹ï¼Œæ¯åœ¨è¯¥èŠ‚ç‚¹ä¸‹å¢åŠ ä¸€ä¸ªèŠ‚ç‚¹è‡ªåŠ¨ç»™è¯¥èŠ‚ç‚¹çš„åç§°ä¸Šè‡ªå¢ã€‚ä¸´æ—¶èŠ‚ç‚¹ï¼Œä¸€æ—¦åˆ›å»ºè¿™ä¸ª znode çš„å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å¤±å»è”ç³»ï¼Œè¿™ä¸ª znode ä¹Ÿå°†è‡ªåŠ¨åˆ é™¤ã€‚æœ€åå°±æ˜¯æ™®é€šèŠ‚ç‚¹ã€‚</li><li>Watch æœºåˆ¶ï¼Œclient å¯ä»¥ç›‘æ§æ¯ä¸ªèŠ‚ç‚¹çš„å˜åŒ–ï¼Œå½“äº§ç”Ÿå˜åŒ–ä¼šç»™ client äº§ç”Ÿä¸€ä¸ªäº‹ä»¶ã€‚</li></ul><h4 id="zk-åŸºæœ¬é”"><a href="#zk-åŸºæœ¬é”" class="headerlink" title="zk åŸºæœ¬é”"></a>zk åŸºæœ¬é”</h4><ul><li>åŸç†ï¼šåˆ©ç”¨ä¸´æ—¶èŠ‚ç‚¹ä¸ watch æœºåˆ¶ã€‚æ¯ä¸ªé”å ç”¨ä¸€ä¸ªæ™®é€šèŠ‚ç‚¹ /lockï¼Œå½“éœ€è¦è·å–é”æ—¶åœ¨ /lock ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹ï¼Œåˆ›å»ºæˆåŠŸåˆ™è¡¨ç¤ºè·å–é”æˆåŠŸï¼Œå¤±è´¥åˆ™ watch/lock èŠ‚ç‚¹ï¼Œæœ‰åˆ é™¤æ“ä½œåå†å»äº‰é”ã€‚ä¸´æ—¶èŠ‚ç‚¹å¥½å¤„åœ¨äºå½“è¿›ç¨‹æŒ‚æ‰åèƒ½è‡ªåŠ¨ä¸Šé”çš„èŠ‚ç‚¹è‡ªåŠ¨åˆ é™¤å³å–æ¶ˆé”ã€‚</li><li>ç¼ºç‚¹ï¼šæ‰€æœ‰å–é”å¤±è´¥çš„è¿›ç¨‹éƒ½ç›‘å¬çˆ¶èŠ‚ç‚¹ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿç¾Šç¾¤æ•ˆåº”ï¼Œå³å½“é‡Šæ”¾é”åæ‰€æœ‰ç­‰å¾…è¿›ç¨‹ä¸€èµ·æ¥åˆ›å»ºèŠ‚ç‚¹ï¼Œå¹¶å‘é‡å¾ˆå¤§ã€‚</li></ul><h4 id="zk-é”ä¼˜åŒ–"><a href="#zk-é”ä¼˜åŒ–" class="headerlink" title="zk é”ä¼˜åŒ–"></a>zk é”ä¼˜åŒ–</h4><ul><li>åŸç†ï¼šä¸Šé”æ”¹ä¸ºåˆ›å»ºä¸´æ—¶æœ‰åºèŠ‚ç‚¹ï¼Œæ¯ä¸ªä¸Šé”çš„èŠ‚ç‚¹å‡èƒ½åˆ›å»ºèŠ‚ç‚¹æˆåŠŸï¼Œåªæ˜¯å…¶åºå·ä¸åŒã€‚åªæœ‰åºå·æœ€å°çš„å¯ä»¥æ‹¥æœ‰é”ï¼Œå¦‚æœè¿™ä¸ªèŠ‚ç‚¹åºå·ä¸æ˜¯æœ€å°çš„åˆ™ watch åºå·æ¯”æœ¬èº«å°çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ (å…¬å¹³é”)ã€‚</li><li>æ­¥éª¤ï¼š</li></ul><ol><li>åœ¨ /lock èŠ‚ç‚¹ä¸‹åˆ›å»ºä¸€ä¸ªæœ‰åºä¸´æ—¶èŠ‚ç‚¹ (EPHEMERAL_SEQUENTIAL)ã€‚</li><li>åˆ¤æ–­åˆ›å»ºçš„èŠ‚ç‚¹åºå·æ˜¯å¦æœ€å°ï¼Œå¦‚æœæ˜¯æœ€å°åˆ™è·å–é”æˆåŠŸã€‚ä¸æ˜¯åˆ™å–é”å¤±è´¥ï¼Œç„¶å watch åºå·æ¯”æœ¬èº«å°çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li><li>å½“å–é”å¤±è´¥ï¼Œè®¾ç½® watch ååˆ™ç­‰å¾… watch äº‹ä»¶åˆ°æ¥åï¼Œå†æ¬¡åˆ¤æ–­æ˜¯å¦åºå·æœ€å°ã€‚</li><li>å–é”æˆåŠŸåˆ™æ‰§è¡Œä»£ç ï¼Œæœ€åé‡Šæ”¾é”ï¼ˆåˆ é™¤è¯¥èŠ‚ç‚¹ï¼‰ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Condition;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.zookeeper.CreateMode;</span><br><span class="line"><span class="keyword">import</span> org.apache.zookeeper.KeeperException;</span><br><span class="line"><span class="keyword">import</span> org.apache.zookeeper.WatchedEvent;</span><br><span class="line"><span class="keyword">import</span> org.apache.zookeeper.Watcher;</span><br><span class="line"><span class="keyword">import</span> org.apache.zookeeper.ZooDefs;</span><br><span class="line"><span class="keyword">import</span> org.apache.zookeeper.ZooKeeper;</span><br><span class="line"><span class="keyword">import</span> org.apache.zookeeper.data.Stat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DistributedLock</span> <span class="keyword">implements</span> <span class="title">Lock</span>, <span class="title">Watcher</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ZooKeeper zk;</span><br><span class="line">    <span class="keyword">private</span> String root = <span class="string">"/locks"</span>;<span class="comment">//æ ¹</span></span><br><span class="line">    <span class="keyword">private</span> String lockName;<span class="comment">//ç«äº‰èµ„æºçš„æ ‡å¿—</span></span><br><span class="line">    <span class="keyword">private</span> String waitNode;<span class="comment">//ç­‰å¾…å‰ä¸€ä¸ªé”</span></span><br><span class="line">    <span class="keyword">private</span> String myZnode;<span class="comment">//å½“å‰é”</span></span><br><span class="line">    <span class="keyword">private</span> CountDownLatch latch;<span class="comment">//è®¡æ•°å™¨</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> sessionTimeout = <span class="number">30000</span>;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Exception&gt; exception = <span class="keyword">new</span> ArrayList&lt;Exception&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºåˆ†å¸ƒå¼é”,ä½¿ç”¨å‰è¯·ç¡®è®¤configé…ç½®çš„zookeeperæœåŠ¡å¯ç”¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> config 127.0.0.1:2181</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> lockName ç«äº‰èµ„æºæ ‡å¿—,lockNameä¸­ä¸èƒ½åŒ…å«å•è¯lock</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DistributedLock</span><span class="params">(String config, String lockName)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.lockName = lockName;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªä¸æœåŠ¡å™¨çš„è¿æ¥</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            zk = <span class="keyword">new</span> ZooKeeper(config, sessionTimeout, <span class="keyword">this</span>);</span><br><span class="line">            Stat stat = zk.exists(root, <span class="keyword">false</span>);</span><br><span class="line">            <span class="keyword">if</span>(stat == <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="comment">// åˆ›å»ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">                zk.create(root, <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">0</span>], ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            exception.add(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (KeeperException e) &#123;</span><br><span class="line">            exception.add(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            exception.add(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * zookeeperèŠ‚ç‚¹çš„ç›‘è§†å™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">(WatchedEvent event)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.latch != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.latch.countDown();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(exception.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> LockException(exception.get(<span class="number">0</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">this</span>.tryLock())&#123;</span><br><span class="line">                System.out.println(<span class="string">"Thread "</span> + Thread.currentThread().getId() + <span class="string">" "</span> +myZnode + <span class="string">" get lock true"</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                waitForLock(waitNode, sessionTimeout);<span class="comment">//ç­‰å¾…é”</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (KeeperException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> LockException(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> LockException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">tryLock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String splitStr = <span class="string">"_lock_"</span>;</span><br><span class="line">            <span class="keyword">if</span>(lockName.contains(splitStr))</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> LockException(<span class="string">"lockName can not contains \\u000B"</span>);</span><br><span class="line">            <span class="comment">//åˆ›å»ºä¸´æ—¶å­èŠ‚ç‚¹</span></span><br><span class="line">            myZnode = zk.create(root + <span class="string">"/"</span> + lockName + splitStr, <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">0</span>], ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL_SEQUENTIAL);</span><br><span class="line">            System.out.println(myZnode + <span class="string">" is created "</span>);</span><br><span class="line">            <span class="comment">//å–å‡ºæ‰€æœ‰å­èŠ‚ç‚¹</span></span><br><span class="line">            List&lt;String&gt; subNodes = zk.getChildren(root, <span class="keyword">false</span>);</span><br><span class="line">            <span class="comment">//å–å‡ºæ‰€æœ‰lockNameçš„é”</span></span><br><span class="line">            List&lt;String&gt; lockObjNodes = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">            <span class="keyword">for</span> (String node : subNodes) &#123;</span><br><span class="line">                String _node = node.split(splitStr)[<span class="number">0</span>];</span><br><span class="line">                <span class="keyword">if</span>(_node.equals(lockName))&#123;</span><br><span class="line">                    lockObjNodes.add(node);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            Collections.sort(lockObjNodes);</span><br><span class="line">            System.out.println(myZnode + <span class="string">"=="</span> + lockObjNodes.get(<span class="number">0</span>));</span><br><span class="line">            <span class="keyword">if</span>(myZnode.equals(root+<span class="string">"/"</span>+lockObjNodes.get(<span class="number">0</span>)))&#123;</span><br><span class="line">                <span class="comment">//å¦‚æœæ˜¯æœ€å°çš„èŠ‚ç‚¹,åˆ™è¡¨ç¤ºå–å¾—é”</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å¦‚æœä¸æ˜¯æœ€å°çš„èŠ‚ç‚¹ï¼Œæ‰¾åˆ°æ¯”è‡ªå·±å°1çš„èŠ‚ç‚¹</span></span><br><span class="line">            String subMyZnode = myZnode.substring(myZnode.lastIndexOf(<span class="string">"/"</span>) + <span class="number">1</span>);</span><br><span class="line">            waitNode = lockObjNodes.get(Collections.binarySearch(lockObjNodes, subMyZnode) - <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (KeeperException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> LockException(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> LockException(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">tryLock</span><span class="params">(<span class="keyword">long</span> time, TimeUnit unit)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">this</span>.tryLock())&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> waitForLock(waitNode,time);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">waitForLock</span><span class="params">(String lower, <span class="keyword">long</span> waitTime)</span> <span class="keyword">throws</span> InterruptedException, KeeperException </span>&#123;</span><br><span class="line">        Stat stat = zk.exists(root + <span class="string">"/"</span> + lower,<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ¯”è‡ªå·±å°ä¸€ä¸ªæ•°çš„èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨,å¦‚æœä¸å­˜åœ¨åˆ™æ— éœ€ç­‰å¾…é”,åŒæ—¶æ³¨å†Œç›‘å¬</span></span><br><span class="line">        <span class="keyword">if</span>(stat != <span class="keyword">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">"Thread "</span> + Thread.currentThread().getId() + <span class="string">" waiting for "</span> + root + <span class="string">"/"</span> + lower);</span><br><span class="line">            <span class="keyword">this</span>.latch = <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">this</span>.latch.await(waitTime, TimeUnit.MILLISECONDS);</span><br><span class="line">            <span class="keyword">this</span>.latch = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"unlock "</span> + myZnode);</span><br><span class="line">            zk.delete(myZnode,-<span class="number">1</span>);</span><br><span class="line">            myZnode = <span class="keyword">null</span>;</span><br><span class="line">            zk.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (KeeperException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lockInterruptibly</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.lock();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Condition <span class="title">newCondition</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">LockException</span><span class="params">(String e)</span></span>&#123;</span><br><span class="line">            <span class="keyword">super</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">LockException</span><span class="params">(Exception e)</span></span>&#123;</span><br><span class="line">            <span class="keyword">super</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¼˜ç¼ºç‚¹-2"><a href="#ä¼˜ç¼ºç‚¹-2" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h4><p><strong>ä¼˜ç‚¹ï¼š</strong></p><p>æœ‰æ•ˆçš„è§£å†³å•ç‚¹é—®é¢˜ï¼Œä¸å¯é‡å…¥é—®é¢˜ï¼Œéé˜»å¡é—®é¢˜ä»¥åŠé”æ— æ³•é‡Šæ”¾çš„é—®é¢˜ã€‚å®ç°èµ·æ¥è¾ƒä¸ºç®€å•ã€‚</p><p><strong>ç¼ºç‚¹ï¼š</strong></p><p>æ€§èƒ½ä¸Šå¯èƒ½å¹¶æ²¡æœ‰ç¼“å­˜æœåŠ¡é‚£ä¹ˆé«˜ï¼Œå› ä¸ºæ¯æ¬¡åœ¨åˆ›å»ºé”å’Œé‡Šæ”¾é”çš„è¿‡ç¨‹ä¸­ï¼Œéƒ½è¦åŠ¨æ€åˆ›å»ºã€é”€æ¯ä¸´æ—¶èŠ‚ç‚¹æ¥å®ç°é”åŠŸèƒ½ã€‚ZK ä¸­åˆ›å»ºå’Œåˆ é™¤èŠ‚ç‚¹åªèƒ½é€šè¿‡ Leader æœåŠ¡å™¨æ¥æ‰§è¡Œï¼Œç„¶åå°†æ•°æ®åŒæ­¥åˆ°æ‰€æœ‰çš„ Follower æœºå™¨ä¸Šã€‚è¿˜éœ€è¦å¯¹ ZKçš„åŸç†æœ‰æ‰€äº†è§£ã€‚</p><h3 id="åŸºäº-Consul-åšåˆ†å¸ƒå¼é”"><a href="#åŸºäº-Consul-åšåˆ†å¸ƒå¼é”" class="headerlink" title="åŸºäº Consul åšåˆ†å¸ƒå¼é”"></a>åŸºäº Consul åšåˆ†å¸ƒå¼é”</h3><p>DD å†™è¿‡ç±»ä¼¼æ–‡ç« ï¼Œå…¶å®ä¸»è¦åˆ©ç”¨ Consul çš„ Key / Value å­˜å‚¨ API ä¸­çš„ acquire å’Œ release æ“ä½œæ¥å®ç°ã€‚</p><p>æ–‡ç« åœ°å€ï¼š<a href="">http://blog.didispace.com/spring-cloud-consul-lock-and-semphore/</a></p><h3 id="ä½¿ç”¨åˆ†å¸ƒå¼é”çš„æ³¨æ„äº‹é¡¹"><a href="#ä½¿ç”¨åˆ†å¸ƒå¼é”çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="ä½¿ç”¨åˆ†å¸ƒå¼é”çš„æ³¨æ„äº‹é¡¹"></a>ä½¿ç”¨åˆ†å¸ƒå¼é”çš„æ³¨æ„äº‹é¡¹</h3><p>1ã€æ³¨æ„åˆ†å¸ƒå¼é”çš„å¼€é”€</p><p>2ã€æ³¨æ„åŠ é”çš„ç²’åº¦</p><p>3ã€åŠ é”çš„æ–¹å¼</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æ— è®ºä½ èº«å¤„ä¸€ä¸ªä»€ä¹ˆæ ·çš„å…¬å¸ï¼Œæœ€å¼€å§‹çš„å·¥ä½œå¯èƒ½éƒ½éœ€è¦ä»æœ€ç®€å•çš„åšèµ·ã€‚ä¸è¦æé˜¿é‡Œå’Œè…¾è®¯çš„ä¸šåŠ¡åœºæ™¯ qps å¦‚ä½•å¤§ï¼Œå› ä¸ºåœ¨è¿™æ ·çš„å¤§åœºæ™¯ä¸­ä½ æœªå¿…èƒ½äº²è‡ªå‚ä¸é¡¹ç›®ï¼Œäº²è‡ªå‚ä¸é¡¹ç›®æœªå¿…èƒ½æ˜¯æ ¸å¿ƒçš„è®¾è®¡è€…ï¼Œæ˜¯æ ¸å¿ƒçš„è®¾è®¡è€…æœªå¿…èƒ½ç‹¬è‡ªè®¾è®¡ã€‚å¸Œæœ›å¤§å®¶èƒ½æ ¹æ®è‡ªå·±å…¬å¸ä¸šåŠ¡åœºæ™¯ï¼Œé€‰æ‹©é€‚åˆè‡ªå·±é¡¹ç›®çš„æ–¹æ¡ˆã€‚</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="">http://www.hollischuang.com/archives/1716</a></p><p><a href="">http://www.spring4all.com/question/158</a></p><p><a href="">https://www.cnblogs.com/PurpleDream/p/5559352.html</a></p><p><a href="">http://www.cnblogs.com/PurpleDream/p/5573040.html</a></p><p><a href="">https://www.cnblogs.com/suolu/p/6588902.html</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws3.sinaimg.cn/large/006tKfTcgy1fqp2lqscrwj31hc0zk46a.jpg&quot; alt=&quot;meadow-811339_1920&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="æ•°æ®åº“" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="åˆ†å¸ƒå¼é”" scheme="http://yoursite.com/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/"/>
    
      <category term="Redis" scheme="http://yoursite.com/tags/Redis/"/>
    
      <category term="Zookeeper" scheme="http://yoursite.com/tags/Zookeeper/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring Boot 2.0ä¸­SpringBootApplicationæ³¨è§£è¯¦è§£</title>
    <link href="http://yoursite.com/2018/04/19/SpringBootApplication-annotation/"/>
    <id>http://yoursite.com/2018/04/19/SpringBootApplication-annotation/</id>
    <published>2018-04-18T16:00:00.000Z</published>
    <updated>2018-05-02T13:27:38.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fqifa86vplj31hc0p0n7e.jpg" alt="nature-3201015_1920"></p><a id="more"></a><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/04/19/SpringBootApplication-annotation/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/04/19/SpringBootApplication-annotation/</a></p><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>è®¸å¤š Spring Boot å¼€å‘è€…å–œæ¬¢ä»–ä»¬çš„åº”ç”¨ç¨‹åºä½¿ç”¨è‡ªåŠ¨é…ç½®ã€ç»„ä»¶æ‰«æã€å¹¶èƒ½å¤Ÿåœ¨ä»–ä»¬çš„ â€œApplicationâ€ ç±»ä¸Šå®šä¹‰é¢å¤–çš„é…ç½®ã€‚ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª <code>@SpringBootApplication</code> æ³¨è§£æ¥å¯ç”¨è¿™äº›åŠŸèƒ½ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(Application.class, args);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="SpringBootApplication"><a href="#SpringBootApplication" class="headerlink" title="@SpringBootApplication"></a>@SpringBootApplication</h3><p>è·Ÿè¿›å» <code>@SpringBootApplication</code>  æ³¨è§£å¯ä»¥å‘ç°ä¸‹å›¾ï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fqifa18tt5j31kw17uap2.jpg" alt="springbootapplication"></p><p>å…¶ä¸­æ ‡æ³¨çš„ä¸‰ä¸ªæ³¨è§£æ­£èƒ½è§£å†³æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„ä¸‰ç§åŠŸèƒ½ï¼Œå®ƒä»¬æ˜¯ï¼š</p><ul><li><code>@SpringBootConfiguration</code></li><li><code>@EnableAutoConfiguration</code></li><li><code>@ComponentScan</code></li></ul><p>è¯¥æ¥å£é™¤äº†ä¸Šé¢ä¸‰ä¸ªæ³¨è§£å¤–ï¼Œè¿˜æœ‰å››ä¸ªæ–¹æ³•å¦‚ä¸‹ï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fqifa27hu2j31kw1aqgy0.jpg" alt="springbootapplication"></p><ul><li>Class&lt;?&gt;[] exclude() default {}:<br>æ ¹æ® class æ¥æ’é™¤ï¼Œæ’é™¤ç‰¹å®šçš„ç±»åŠ å…¥ spring å®¹å™¨ï¼Œä¼ å…¥å‚æ•° value ç±»å‹æ˜¯ class ç±»å‹ã€‚</li><li>String[] excludeName() default {}:<br>æ ¹æ® class name æ¥æ’é™¤ï¼Œæ’é™¤ç‰¹å®šçš„ç±»åŠ å…¥ spring å®¹å™¨ï¼Œä¼ å…¥å‚æ•° value ç±»å‹æ˜¯ class çš„å…¨ç±»åå­—ç¬¦ä¸²æ•°ç»„ã€‚</li><li>String[] scanBasePackages() default {}:<br>æŒ‡å®šæ‰«æåŒ…ï¼Œå‚æ•°æ˜¯åŒ…åçš„å­—ç¬¦ä¸²æ•°ç»„ã€‚</li><li>Class&lt;?&gt;[] scanBasePackageClasses() default {}:<br>æ‰«æç‰¹å®šçš„åŒ…ï¼Œå‚æ•°ç±»ä¼¼æ˜¯ Class ç±»å‹æ•°ç»„ã€‚</li></ul><p>å°±æ‹¿ scanBasePackages æ¥ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span>(scanBasePackages = &#123;<span class="string">"com.zhisheng.controller"</span>,<span class="string">"com.zhisheng.model"</span>&#125;)</span><br></pre></td></tr></table></figure><p>å°†ä¸éœ€è¦çš„ bean æ’é™¤åœ¨ spring å®¹å™¨ä¸­ï¼Œå¦‚ä½•æ“ä½œï¼Ÿçœ‹çœ‹å®˜æ–¹çš„ä»£ç æ€ä¹ˆç”¨çš„ï¼š</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fqifa5xheaj31kw12rwsj.jpg" alt="sb-enableautoconfig-exclude"></p><h3 id="SpringBootConfiguration"><a href="#SpringBootConfiguration" class="headerlink" title="@SpringBootConfiguration"></a>@SpringBootConfiguration</h3><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fqifab18l3j31kw0w4jyu.jpg" alt="springbootconfiguration"></p><p><code>@SpringBootConfiguration</code>ç»§æ‰¿è‡ª<code>@Configuration</code>ï¼ŒäºŒè€…åŠŸèƒ½ä¹Ÿä¸€è‡´ï¼Œæ ‡æ³¨å½“å‰ç±»æ˜¯é…ç½®ç±»ï¼Œå¹¶ä¼šå°†å½“å‰ç±»å†…å£°æ˜çš„ä¸€ä¸ªæˆ–å¤šä¸ªä»¥<code>@Bean</code>æ³¨è§£æ ‡è®°çš„æ–¹æ³•çš„å®ä¾‹çº³å…¥åˆ°<code>srping</code>å®¹å™¨ä¸­ï¼Œå¹¶ä¸”å®ä¾‹åå°±æ˜¯æ–¹æ³•åã€‚</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fqifa4wulcj31h80qgjy9.jpg" alt="configuration"></p><p>è™½è¯´ç°åœ¨å·²ç»æ¨èä½¿ç”¨ Spring Boot é‡Œé¢çš„ <code>@SpringBootConfiguration</code> æ³¨è§£ï¼Œä¸ºäº†æ¢ä¸ªç©¶ç«Ÿï¼Œæˆ‘ä»¬è¿˜æ˜¯ç»§ç»­ç ”ç©¶ä¸‹ <code>@Configuration</code> æ³¨è§£ã€‚</p><h4 id="Configuration"><a href="#Configuration" class="headerlink" title="@Configuration"></a>@Configuration</h4><p>@Configuration æ ‡æ³¨åœ¨ç±»ä¸Šï¼Œç›¸å½“äºæŠŠè¯¥ç±»ä½œä¸º spring çš„ xml é…ç½®æ–‡ä»¶ä¸­çš„ <code>&lt;beans&gt;</code>ï¼Œä½œç”¨ä¸ºï¼šé…ç½® spring å®¹å™¨(åº”ç”¨ä¸Šä¸‹æ–‡)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Bean"><a href="#Bean" class="headerlink" title="@Bean"></a>@Bean</h4><p>@Bean æ ‡æ³¨åœ¨æ–¹æ³•ä¸Š(è¿”å›æŸä¸ªå®ä¾‹çš„æ–¹æ³•)ï¼Œç­‰ä»·äº spring çš„ xml é…ç½®æ–‡ä»¶ä¸­çš„<code>&lt;bean&gt;</code>ï¼Œä½œç”¨ä¸ºï¼šæ³¨å†Œ bean å¯¹è±¡</p><p>å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="">https://www.ibm.com/developerworks/cn/webservices/ws-springjava/index.html</a></p><h3 id="ComponentScan"><a href="#ComponentScan" class="headerlink" title="@ComponentScan"></a>@ComponentScan</h3><p>å¯ä»¥é€šè¿‡è¯¥æ³¨è§£æŒ‡å®šæ‰«ææŸäº›åŒ…ä¸‹åŒ…å«å¦‚ä¸‹æ³¨è§£çš„å‡è‡ªåŠ¨æ³¨å†Œä¸º spring beansï¼š</p><p>@Componentã€@Serviceã€ @Repositoryã€ @Controllerã€@Entity ç­‰ç­‰</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ComponentScan</span>(basePackages = &#123;<span class="string">"com.zhisheng.controller"</span>,<span class="string">"com.zhisheng.model"</span>&#125;)</span><br></pre></td></tr></table></figure><p>ä»¥å‰æ˜¯åœ¨ xml é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¦‚ä¸‹æ ‡ç­¾ï¼š<code>&lt;context:component-scan&gt;</code>ï¼ˆç”¨æ¥æ‰«æåŒ…é…ç½®ï¼‰</p><p>é™¤äº†å¯ä»¥ä½¿ç”¨ <code>@ComponentScan</code>  æ³¨è§£æ¥åŠ è½½æˆ‘ä»¬çš„ beanï¼Œè¿˜å¯ä»¥åœ¨ Application ç±»ä¸­ä½¿ç”¨ <code>@Import</code> æŒ‡å®šè¯¥ç±»ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import</span>(&#123;ConsulConfig.class, Log4jEndPointConfiguration.class&#125;)<span class="comment">//ç›´æ¥ imoport è¦å¼•å…¥çš„ç±»</span></span><br></pre></td></tr></table></figure><h3 id="EnableAutoConfiguration"><a href="#EnableAutoConfiguration" class="headerlink" title="@EnableAutoConfiguration"></a>@EnableAutoConfiguration</h3><p><code>@EnableAutoConfiguration</code>çš„ä½œç”¨å¯åŠ¨è‡ªåŠ¨çš„é…ç½®ï¼Œ<code>@EnableAutoConfiguration</code>æ³¨è§£çš„æ„æ€å°±æ˜¯<code>Springboot</code>æ ¹æ®ä½ æ·»åŠ çš„ jar åŒ…æ¥é…ç½®ä½ é¡¹ç›®çš„é»˜è®¤é…ç½®ï¼Œæ¯”å¦‚æ ¹æ®<code>spring-boot-starter-web</code> ï¼Œæ¥åˆ¤æ–­ä½ çš„é¡¹ç›®æ˜¯å¦éœ€è¦æ·»åŠ äº†<code>webmvc</code>å’Œ<code>tomcat</code>ï¼Œå°±ä¼šè‡ªåŠ¨çš„å¸®ä½ é…ç½® web é¡¹ç›®ä¸­æ‰€éœ€è¦çš„é»˜è®¤é…ç½®ã€‚ç®€å•ç‚¹è¯´å°±æ˜¯å®ƒä¼šæ ¹æ®å®šä¹‰åœ¨ classpath ä¸‹çš„ç±»ï¼Œè‡ªåŠ¨çš„ç»™ä½ ç”Ÿæˆä¸€äº› Beanï¼Œå¹¶åŠ è½½åˆ° Spring çš„ Context ä¸­ã€‚</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fqifa6z9noj31kw1c8k9o.jpg" alt="enable-autoconfiguration"></p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fqifaa174hj317i0tun1o.jpg" alt="2018-04-19_18-44-22"></p><p>å¯ä»¥çœ‹åˆ° import  å¼•å…¥äº† AutoConfigurationImportSelector ç±»ã€‚è¯¥ç±»ä½¿ç”¨äº† Spring Core åŒ…çš„ SpringFactoriesLoader ç±»çš„ loadFactoryNamesof() æ–¹æ³•ã€‚</p><p>AutoConfigurationImportSelector ç±»å®ç°äº† DeferredImportSelector æ¥å£ï¼Œå¹¶å®ç°äº† <strong>selectImports</strong> æ–¹æ³•ï¼Œç”¨æ¥å¯¼å‡º<em>Configuration</em> ç±»ã€‚</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fqifad0xvxj31kw0xw1eq.jpg" alt="getconfigurations"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes);</span><br></pre></td></tr></table></figure><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fqifabw5ksj31bk0mwdlf.jpg" alt="getconfigurations01"></p><p>å¯¼å‡ºçš„ç±»æ˜¯é€šè¿‡ <em>SpringFactoriesLoader.loadFactoryNames()</em> è¯»å–äº† <em>ClassPath</em> ä¸‹é¢çš„ <em>META-INF/spring.factories</em> æ–‡ä»¶ã€‚</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fqifa972ujj31kw0wj4d6.jpg" alt="loadfactoryname"></p><p>è¿™ä¸ªæ–‡ä»¶å†…å®¹å¤§è‡´å¦‚ä¸‹ã€‚</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fqifa3k9x8j31k41f2h3x.jpg" alt="springfactories"></p><p>åé¢ç»§ç»­ä¼šå†™è‡ªåŠ¨é…ç½®æ–¹é¢çš„åšå®¢ï¼Œè¯·ç»§ç»­å…³æ³¨ï¼</p><p>å¦‚æœä½ å‘ç°è‡ªåŠ¨è£…é…çš„ Bean ä¸æ˜¯ä½ æƒ³è¦çš„ï¼Œä½ ä¹Ÿå¯ä»¥ disable å®ƒã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä¸æƒ³è¦è‡ªåŠ¨è£…é… Database çš„é‚£äº›Beanï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableAutoConfiguration</span>(exclude = &#123;DataSourceAutoConfiguration.class&#125;)</span><br></pre></td></tr></table></figure><h3 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h3><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-Migration-Guide/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å—</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-new-features/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2018/04/13/Spring_Boot_2.0_Configuration_Changelog/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2018/04/15/springboot2_code/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º</a></p><p>5ã€<a href="http://www.54tianzhisheng.cn/2018/04/18/spring_boot2_project/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ</a></p><p>6ã€<a href="http://www.54tianzhisheng.cn/2018/04/19/SpringBootApplication-annotation/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring boot 2.0 ä¸­ SpringBootApplication æ³¨è§£è¯¦è§£</a></p><p>7ã€<a href="http://www.54tianzhisheng.cn/2018/04/30/springboot_SpringApplication/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸ƒ)ï¼šSpringApplication æ·±å…¥æ¢ç´¢</a></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æœ¬æ–‡ä¸»è¦è®²äº† SpringBootApplication æ³¨è§£ï¼Œç„¶åå±•å¼€å†™äº†å…¶åŒ…å«çš„ä¸‰ä¸ªæ³¨è§£ SpringBootConfigurationã€ComponentScanã€EnableAutoConfiguration</p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>è™½ç„¶æºç å¾ˆéš¾ï¼Œä½†éšç€ä¸æ–­çš„æ¢ç´¢ï¼Œæºç åœ¨ä½ é¢å‰å°†ä¼šä¸€è§ˆæ— é—ï¼Œäº«å—è¿™ç§æ¢ç´¢åçš„æˆå°±æ„Ÿï¼åŠ æ²¹ï¼éªšå¹´ï¼</p><p>è‡ªå·±æœ¬äººèƒ½åŠ›æœ‰é™ï¼Œæºç çœ‹çš„ä¸å¤šï¼Œä¸Šé¢å¦‚æœ‰ä¸å¯¹çš„è¿˜è¯·ç•™è¨€äº¤æµã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws4.sinaimg.cn/large/006tKfTcgy1fqifa86vplj31hc0p0n7e.jpg&quot; alt=&quot;nature-3201015_1920&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ</title>
    <link href="http://yoursite.com/2018/04/18/spring_boot2_project/"/>
    <id>http://yoursite.com/2018/04/18/spring_boot2_project/</id>
    <published>2018-04-17T16:00:00.000Z</published>
    <updated>2018-05-02T13:27:46.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fqhraflay7j31hc0zk0z1.jpg" alt="fireworks-2585843_1920"></p><a id="more"></a><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/04/18/spring_boot2_project/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/04/15/springboot2_code/</a></p><h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fqhsa07r59j30ps104gpd.jpg" alt="springboot2001"></p><p>ç»“æ„åˆ†æï¼š</p><ul><li>Spring-boot-project   æ ¸å¿ƒä»£ç ï¼Œä»£ç é‡å¾ˆå¤šï¼ˆ197508 è¡Œï¼‰</li><li>Spring-boot-samples  ä¸€äº›æ ·ä¾‹ demoï¼Œä»£ç é‡ä¸å¤šï¼ˆ9685 è¡Œï¼‰ï¼Œè›®æœ‰ç”¨çš„</li><li>Spring-boot-samples-invoker  é‡Œé¢æ— ä»£ç </li><li>Spring-boot-tests   æµ‹è¯•ä»£ç ï¼ˆ1640 è¡Œï¼‰</li></ul><h3 id="spring-boot-project"><a href="#spring-boot-project" class="headerlink" title="spring-boot-project"></a>spring-boot-project</h3><p>Spring-boot-project ä¸‹é¢æœ‰å¾ˆå¤šæ¨¡å—ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fqhs874239j30p00n2dip.jpg" alt="springboot2002"></p><h4 id="Spirng-boot"><a href="#Spirng-boot" class="headerlink" title="Spirng-boot"></a>Spirng-boot</h4><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fqhs885a4zj30xk1ea78a.jpg" alt="springboot"></p><p>è¯¥æ¨¡å— 47760 è¡Œä»£ç ï¼ˆå«æµ‹è¯•ä»£ç ï¼‰ï¼ŒSpring boot ä¸»è¦çš„åº“ï¼Œæä¾›äº†æ”¯æŒ Spring Boot å…¶ä»–éƒ¨åˆ†çš„åŠŸèƒ½ï¼Œå…¶ä¸­åŒ…æ‹¬äº†ï¼š</p><ul><li>åœ¨<code>SpringApplication</code>ç±»ï¼Œæä¾›é™æ€ä¾¿æ·æ–¹æ³•ï¼Œå¯ä»¥å¾ˆå®¹æ˜“å†™ä¸€ä¸ªç‹¬ç«‹çš„ Spring åº”ç”¨ç¨‹åºã€‚å®ƒå”¯ä¸€çš„å·¥ä½œå°±æ˜¯åˆ›é€ å¹¶æ›´æ–°ä¸€ä¸ªåˆé€‚çš„ Spring<code>ApplicationContext</code></li><li>å¸¦æœ‰å¯é€‰å®¹å™¨çš„åµŒå…¥å¼ Web åº”ç”¨ç¨‹åºï¼ˆTomcatï¼ŒJetty æˆ– Undertowï¼‰</li><li>ä¸€æµçš„å¤–éƒ¨é…ç½®æ”¯æŒ</li><li>ä¾¿æ·<code>ApplicationContext</code>åˆå§‹åŒ–ç¨‹åºï¼ŒåŒ…æ‹¬å¯¹æ•æ„Ÿæ—¥å¿—è®°å½•é»˜è®¤å€¼çš„æ”¯æŒ</li></ul><h4 id="spring-boot-actuator"><a href="#spring-boot-actuator" class="headerlink" title="spring-boot-actuator"></a>spring-boot-actuator</h4><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fqhs8ibzjzj30xk15mjv8.jpg" alt="springboot-actuator"></p><p>è¯¥æ¨¡å— 18398 è¡Œä»£ç ï¼ˆå«æµ‹è¯•ä»£ç ï¼‰ï¼Œspring-boot-actuator æ¨¡å—å®ƒå®Œå…¨æ˜¯ä¸€ä¸ªç”¨äºæš´éœ²è‡ªèº«ä¿¡æ¯çš„æ¨¡å—ï¼Œæä¾›äº†ä¸€ä¸ªç›‘æ§å’Œç®¡ç†ç”Ÿäº§ç¯å¢ƒçš„æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨ httpã€jmxã€sshã€telnet ç­‰ç®¡ç†å’Œç›‘æ§åº”ç”¨ã€‚å®¡è®¡ï¼ˆAuditingï¼‰ã€ å¥åº·ï¼ˆhealthï¼‰ã€æ•°æ®é‡‡é›†ï¼ˆmetrics gatheringï¼‰ä¼šè‡ªåŠ¨åŠ å…¥åˆ°åº”ç”¨é‡Œé¢ã€‚</p><h4 id="spring-boot-actuator-autoconfigure"><a href="#spring-boot-actuator-autoconfigure" class="headerlink" title="spring-boot-actuator-autoconfigure"></a>spring-boot-actuator-autoconfigure</h4><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fqhs8hfazpj30wi1dy0xb.jpg" alt="springboot-actoator-autoconfig"></p><p>è¯¥æ¨¡å— 16721 è¡Œä»£ç ï¼ˆå«æµ‹è¯•ä»£ç ï¼‰ï¼ŒSpring Boot Actuator æä¾›äº†é¢å¤–çš„è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å®ç°å¯å³æ—¶éƒ¨ç½²å’Œæ”¯æŒçš„åŠŸèƒ½ï¼Œä»è€Œè£…é¥°ä½ çš„åº”ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ­£åœ¨ç¼–å†™ JSON Web æœåŠ¡ï¼Œé‚£ä¹ˆå®ƒå°†æä¾›æœåŠ¡å™¨ï¼Œå®‰å…¨æ€§ï¼Œæ—¥å¿—è®°å½•ï¼Œå¤–éƒ¨é…ç½®ï¼Œç®¡ç†ç«¯ç‚¹ï¼Œå®¡è®¡æŠ½è±¡ç­‰ç­‰åŠŸèƒ½ã€‚å¦‚æœæ‚¨æƒ³å…³é—­å†…ç½®åŠŸèƒ½ï¼Œæˆ–è€…æ‰©å±•æˆ–æ›¿æ¢å®ƒä»¬ï¼Œå®ƒä¹Ÿä¼šå˜å¾—éå¸¸ç®€å•ã€‚</p><h4 id="spring-boot-autoconfigure"><a href="#spring-boot-autoconfigure" class="headerlink" title="spring-boot-autoconfigure"></a>spring-boot-autoconfigure</h4><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fqhs89img2j30xs0og0uz.jpg" alt="springboot-autoconfig"></p><p>è¯¥æ¨¡å— 51100 è¡Œä»£ç ï¼ˆå«æµ‹è¯•ä»£ç ï¼‰ï¼Œ Spring Boot å¯ä»¥æ ¹æ®ç±»è·¯å¾„çš„å†…å®¹é…ç½®å¤§éƒ¨åˆ†å¸¸ç”¨åº”ç”¨ç¨‹åºã€‚å•ä¸ª<code>@EnableAutoConfiguration</code>æ³¨é‡Šä¼šè§¦å‘ Springä¸Šä¸‹æ–‡çš„è‡ªåŠ¨é…ç½®ã€‚</p><p>è‡ªåŠ¨é…ç½®å°è¯•æ¨æ–­ç”¨æˆ·å¯èƒ½éœ€è¦å“ªäº› beanã€‚ä¾‹å¦‚ï¼Œå¦‚æœ <code>HSQLDB</code>åœ¨ç±»è·¯å¾„ä¸­ï¼Œå¹¶ä¸”ç”¨æˆ·å°šæœªé…ç½®ä»»ä½•æ•°æ®åº“è¿æ¥ï¼Œåˆ™ä»–ä»¬å¯èƒ½éœ€è¦å®šä¹‰å†…å­˜æ•°æ®åº“ã€‚å½“ç”¨æˆ·å¼€å§‹å®šä¹‰ä»–ä»¬è‡ªå·±çš„ bean æ—¶ï¼Œè‡ªåŠ¨é…ç½®å°†æ°¸è¿œè¿œç¦»ã€‚</p><h4 id="spring-boot-cli"><a href="#spring-boot-cli" class="headerlink" title="spring-boot-cli"></a>spring-boot-cli</h4><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fqhsa2hmasj30x21aqq6j.jpg" alt="springboot-cli"></p><p>è¯¥æ¨¡å— 9346 è¡Œä»£ç ï¼ˆå«æµ‹è¯•ä»£ç ï¼‰ï¼ŒSpring å‘½ä»¤è¡Œåº”ç”¨ç¨‹åºç¼–è¯‘å¹¶è¿è¡Œ Groovy æºä»£ç ï¼Œä½¿å¾—å¯ä»¥ç¼–å†™å°‘é‡ä»£ç å°±èƒ½è¿è¡Œåº”ç”¨ç¨‹åºã€‚Spring CLI ä¹Ÿå¯ä»¥ç›‘è§†æ–‡ä»¶ï¼Œå½“å®ƒä»¬æ”¹å˜æ—¶è‡ªåŠ¨é‡æ–°ç¼–è¯‘å¹¶é‡æ–°å¯åŠ¨ã€‚</p><h4 id="spring-boot-dependencies"><a href="#spring-boot-dependencies" class="headerlink" title="spring-boot-dependencies"></a>spring-boot-dependencies</h4><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fqhs9xrj6qj31kw16be31.jpg" alt="springboot-dependencies"></p><p>è¯¥æ¨¡å—é‡Œé¢æ²¡æœ‰æºç ï¼Œåªæœ‰æ‰€æœ‰ä¾èµ–å’Œæ’ä»¶çš„ç‰ˆæœ¬å·ä¿¡æ¯ã€‚</p><h4 id="spring-boot-devtools"><a href="#spring-boot-devtools" class="headerlink" title="spring-boot-devtools"></a>spring-boot-devtools</h4><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fqhs9z88hrj30v41bw785.jpg" alt="springboot-devtools"></p><p>è¯¥æ¨¡å— 9418 è¡Œä»£ç ï¼ˆå«æµ‹è¯•ä»£ç ï¼‰ï¼Œspring-boot-devtools æ¨¡å—æ¥ä½¿ Spring Boot åº”ç”¨æ”¯æŒçƒ­éƒ¨ç½²ï¼Œæé«˜å¼€å‘è€…çš„å¼€å‘æ•ˆç‡ï¼Œæ— éœ€æ‰‹åŠ¨é‡å¯ Spring Boot åº”ç”¨ã€‚</p><h4 id="spring-boot-docs"><a href="#spring-boot-docs" class="headerlink" title="spring-boot-docs"></a>spring-boot-docs</h4><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fqhs8affekj30xo1ecdkr.jpg" alt="springboot-docs"></p><p>è¯¥æ¨¡å— 671 è¡Œä»£ç ï¼Œspringboot å‚è€ƒæ–‡ä»¶ã€‚</p><h4 id="spring-boot-parent"><a href="#spring-boot-parent" class="headerlink" title="spring-boot-parent"></a>spring-boot-parent</h4><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fqhs8dxfnij31kw0zrqkw.jpg" alt="springboot-parent"></p><p>è¯¥æ¨¡å—æ˜¯å…¶ä»–é¡¹ç›®çš„ parentï¼Œè¯¥æ¨¡å—çš„çˆ¶æ¨¡å—æ˜¯ spring-boot-dependenciesã€‚</p><h4 id="spring-boot-properties-migrator"><a href="#spring-boot-properties-migrator" class="headerlink" title="spring-boot-properties-migrator"></a>spring-boot-properties-migrator</h4><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fqhs9wkyvsj30um18678o.jpg" alt="springboot-properties-migrator"></p><p>è¯¥æ¨¡å—æœ‰ 495 è¡Œä»£ç ï¼Œåœ¨ Spring Boot 2.0 ä¸­ï¼Œè®¸å¤šé…ç½®å±æ€§è¢«é‡æ–°å‘½å/åˆ é™¤ï¼Œå¼€å‘äººå‘˜éœ€è¦æ›´æ–°<code>application.properties</code>/ <code>application.yml</code>ç›¸åº”çš„é…ç½®ã€‚ä¸ºäº†å¸®åŠ©ä½ è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒSpring Boot å‘å¸ƒäº†ä¸€ä¸ªæ–°<code>spring-boot-properties-migrator</code>æ¨¡å—ã€‚ä¸€æ—¦ä½œä¸ºè¯¥æ¨¡å—ä½œä¸ºä¾èµ–è¢«æ·»åŠ åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œå®ƒä¸ä»…ä¼šåˆ†æåº”ç”¨ç¨‹åºçš„ç¯å¢ƒï¼Œè€Œä¸”è¿˜ä¼šåœ¨å¯åŠ¨æ—¶æ‰“å°è¯Šæ–­ä¿¡æ¯ï¼Œè€Œä¸”è¿˜ä¼šåœ¨è¿è¡Œæ—¶ä¸ºæ‚¨æš‚æ—¶è¿ç§»å±æ€§ã€‚åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºè¿ç§»æœŸé—´ï¼Œè¿™ä¸ªæ¨¡å—æ˜¯å¿…å¤‡çš„ï¼Œå®Œæˆè¿ç§»åï¼Œè¯·ç¡®ä¿ä»é¡¹ç›®çš„ä¾èµ–å…³ç³»ä¸­åˆ é™¤æ­¤æ¨¡å—ã€‚</p><h4 id="spring-boot-starters"><a href="#spring-boot-starters" class="headerlink" title="spring-boot-starters"></a>spring-boot-starters</h4><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fqhs8foqadj31he1hwh5l.jpg" alt="springboot-starter"></p><p>Starter POMs æ˜¯ç”±å¾ˆå¤šæ–¹ä¾¿çš„ä¾èµ–é›†åˆç»„æˆï¼Œå¦‚æœä½ éœ€è¦ä½¿ç”¨æŸç§æŠ€æœ¯ï¼Œé€šè¿‡æ·»åŠ å°‘é‡çš„jarå°±å¯ä»¥æŠŠç›¸å…³çš„ä¾èµ–åŠ å…¥åˆ°é¡¹ç›®ä¸­å»ã€‚</p><p>è™½ç„¶ä½ çœ‹å¾—åˆ°æœ‰è¿™ä¹ˆå¤š starterï¼Œä½†æ˜¯å´æ²¡æœ‰ä¸€è¡Œ Java ä»£ç ï¼Œæ„ä¸æ„å¤–ï¼Ÿ</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fqhs84zby0j31kw0xdkb0.jpg" alt="springboot-starter-activemq"></p><p>è¿™ç¡®å®æ˜¯ Spring Boot è‡ªåŠ¨é…ç½®çš„å…³é”®ä¹‹å¤„ï¼Œåé¢æˆ‘å¯ä»¥è®²è®²ã€‚</p><h4 id="spring-boot-test"><a href="#spring-boot-test" class="headerlink" title="spring-boot-test"></a>spring-boot-test</h4><p>æµ‹è¯•ä»£ç ï¼æœ‰ 10980 è¡Œä»£ç ã€‚</p><h4 id="spring-boot-test-autoconfigure"><a href="#spring-boot-test-autoconfigure" class="headerlink" title="spring-boot-test-autoconfigure"></a>spring-boot-test-autoconfigure</h4><p>è‡ªåŠ¨é…ç½®çš„æµ‹è¯•ä»£ç ï¼Œæœ‰ 6063 è¡Œä»£ç ã€‚</p><h4 id="spring-boot-tools"><a href="#spring-boot-tools" class="headerlink" title="spring-boot-tools"></a>spring-boot-tools</h4><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fqhs8kcu5ej30ri0lqwh5.jpg" alt="springboot-tools"></p><ul><li><p>spring-boot-antlib</p><p>Spring Boot AntLib æ¨¡å—ä¸º Apache Ant æä¾›äº†åŸºæœ¬çš„ Spring Boot æ”¯æŒã€‚ æ‚¨å¯ä»¥ä½¿ç”¨è¯¥æ¨¡å—åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶å¤¹ã€‚ è¦ä½¿ç”¨è¯¥æ¨¡å—ï¼Œæ‚¨éœ€è¦åœ¨ build.xml ä¸­å£°æ˜ä¸€ä¸ªé¢å¤–çš„ spring-boot å‘½åç©ºé—´ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns:ivy</span>=<span class="string">"antlib:org.apache.ivy.ant"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:spring-boot</span>=<span class="string">"antlib:org.springframework.boot.ant"</span></span></span><br><span class="line"><span class="tag"><span class="attr">name</span>=<span class="string">"myapp"</span> <span class="attr">default</span>=<span class="string">"build"</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ‚¨éœ€è¦è®°ä½ä½¿ç”¨ -lib é€‰é¡¹å¯åŠ¨ Antï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ant -lib &lt;folder containing spring-boot-antlib-2.1.0.BUILD-SNAPSHOT.jar&gt;</span><br></pre></td></tr></table></figure></li><li><p>Spring-boot-autoconfigure-processor</p><p>spring boot è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒç±»</p></li><li><p>Spring-boot-configuration-metadata</p><p>Spring boot é…ç½®å…ƒæ•°æ®</p></li><li><p>Spring-boot-configuration-processor</p><p>spring boot é…ç½®çš„æ ¸å¿ƒ</p></li><li><p>Spring-boot-gradle-plugin</p><p>Spring Boot Gradle æ’ä»¶åœ¨ Gradle ä¸­æä¾›äº† Spring Boot æ”¯æŒï¼Œå¯ä»¥æ‰“åŒ…æˆå¯æ‰§è¡Œ jar æˆ– war ï¼Œè¿è¡Œ Spring Boot åº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç”¨ spring-boot-dependencies æä¾›çš„ä¾èµ–å…³ç³»ç®¡ç†ã€‚ å®ƒéœ€è¦ Gradle 4.0 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚</p></li><li><p>Spring-boot-maven-plugin</p><p>Spring Boot Maven Plugin åœ¨ Maven ä¸­æä¾›äº† Spring Boot æ”¯æŒï¼Œè®©æ‚¨å¯ä»¥æ‰“åŒ…æˆå¯æ‰§è¡Œ jar æˆ– war åº”ç”¨ï¼Œå¹¶â€œå°±åœ°â€è¿è¡Œåº”ç”¨ç¨‹åºã€‚ è¦ä½¿ç”¨å®ƒï¼Œä½ å¿…é¡»ä½¿ç”¨ Maven 3.2ï¼ˆæˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ã€‚</p></li><li><p>Spring-boot-loader</p><p>spring-boot-load æ¨¡å—é€šè¿‡è‡ªå®šä¹‰ jar åŒ…ç»“æ„ï¼Œè‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œä¼˜é›…çš„å®ç°äº†åµŒå¥— jar èµ„æºçš„åŠ è½½ï¼Œé€šè¿‡æ‰“åŒ…æ—¶å€™é‡æ–°è®¾ç½®å¯åŠ¨ç±»å’Œç»„ç»‡ jar ç»“æ„ï¼Œé€šè¿‡è¿è¡Œæ—¶è®¾ç½®è‡ªå®šä¹‰åŠ è½½å™¨æ¥å®ç°åµŒå¥— jar èµ„æºåŠ è½½ã€‚</p></li><li><p>Spring-boot-loader-tools</p><p>spring-boot-load æ¨¡å—çš„å·¥å…·æ¨¡å—</p></li><li><p>Spring-boot-test-support</p><p>æµ‹è¯•</p></li></ul><h3 id="spring-boot-samples"><a href="#spring-boot-samples" class="headerlink" title="spring-boot-samples"></a>spring-boot-samples</h3><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fqhsa4qklcj31kw11y7ud.jpg" alt="springboot-samples"></p><p>æ ·ä¾‹ demo æ¯”è¾ƒå¤šï¼Œå¤§å®¶çœ‹æºç çš„æ—¶å€™å¯ä»¥æ‹¿è¿™äº›ç°æˆ demo æµ‹è¯•ã€‚</p><h3 id="spring-boot-tests"><a href="#spring-boot-tests" class="headerlink" title="spring-boot-tests"></a>spring-boot-tests</h3><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fqhs8cezdbj30ui1dqagt.jpg" alt="springboot-tests"></p><h3 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h3><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-Migration-Guide/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å—</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-new-features/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2018/04/13/Spring_Boot_2.0_Configuration_Changelog/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2018/04/15/springboot2_code/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º</a></p><p>5ã€<a href="http://www.54tianzhisheng.cn/2018/04/18/spring_boot2_project/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ</a></p><p>6ã€<a href="http://www.54tianzhisheng.cn/2018/04/19/SpringBootApplication-annotation/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring boot 2.0 ä¸­ SpringBootApplication æ³¨è§£è¯¦è§£</a></p><p>7ã€<a href="http://www.54tianzhisheng.cn/2018/04/30/springboot_SpringApplication/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸ƒ)ï¼šSpringApplication æ·±å…¥æ¢ç´¢</a></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æœ¬æ–‡ä¸»è¦åˆ†æäº†ä¸‹ Spring boot é¡¹ç›®æºç ç»“æ„ã€‚åŒ…å« Spring boot æ ¸å¿ƒæºç ã€æ ·ä¾‹ demoã€æµ‹è¯•ã€‚åˆ†æäº†é¡¹ç›®çš„æ•´ä½“ç»“æ„åï¼Œåé¢æ‰èƒ½å¤Ÿæœ‰çš„æ”¾çŸ¢çš„å»è¯»æºç ã€‚</p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>è™½ç„¶æºç å¾ˆéš¾ï¼Œä½†éšç€ä¸æ–­çš„æ¢ç´¢ï¼Œæºç åœ¨ä½ é¢å‰å°†ä¼šä¸€è§ˆæ— é—ï¼Œäº«å—è¿™ç§æ¢ç´¢åçš„æˆå°±æ„Ÿï¼åŠ æ²¹ï¼éªšå¹´ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/006tKfTcgy1fqhraflay7j31hc0zk0z1.jpg&quot; alt=&quot;fireworks-2585843_1920&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º</title>
    <link href="http://yoursite.com/2018/04/15/springboot2_code/"/>
    <id>http://yoursite.com/2018/04/15/springboot2_code/</id>
    <published>2018-04-14T16:00:00.000Z</published>
    <updated>2018-05-02T13:28:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fqdma0kpk1j31hc0zkqox.jpg" alt="night-photograph-2183637_1920"></p><a id="more"></a><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>å‰å‡ å¤©é¢è¯•çš„æ—¶å€™ï¼Œè¢«é—®è¿‡ Spring Boot çš„è‡ªåŠ¨é…ç½®æºç æ€ä¹ˆå®ç°çš„ï¼Œæ²¡çœ‹è¿‡æºç çš„æˆ‘åªèƒ½æŠ•é™ğŸ‘¦äº†ã€‚</p><p>è¿™ä¸ï¼Œèµ¶ç´§æ¥è¡¥è¡¥äº†ï¼Œæ‰€ä»¥æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« çš„å‡ºç°ï¼ŒSpring Boot 2. 0 æºç é˜…è¯»ç¯å¢ƒçš„æ­å»ºä¸­è¿˜é‡åˆ°ç‚¹é—®é¢˜ï¼Œè¢«å‘æ­»äº†ï¼Œè¿˜å¥½è§£å†³äº†ï¼Œæ„Ÿè°¢ç¾¤é‡Œçš„å°ä¼™ä¼´ï¼</p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/04/15/springboot2_code/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/04/15/springboot2_code/</a></p><h3 id="é¡¹ç›®ä¸‹è½½"><a href="#é¡¹ç›®ä¸‹è½½" class="headerlink" title="é¡¹ç›®ä¸‹è½½"></a>é¡¹ç›®ä¸‹è½½</h3><p>ä» <a href="https://github.com/spring-projects/spring-boot/releases" target="_blank" rel="noopener">https://github.com/spring-projects/spring-boot/releases</a> å¯ä»¥çœ‹åˆ°æ‰€æœ‰ç‰ˆæœ¬çš„ä¸‹è½½åœ°å€ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ Spring Boot 2 ä¸­æœ€æ–°çš„  <a href="https://github.com/spring-projects/spring-boot/releases/tag/v2.0.1.RELEASE" target="_blank" rel="noopener">v2.0.1.RELEASE </a> ç‰ˆæœ¬ï¼Œä¸‹è½½åï¼Œç„¶åè§£å‹ã€‚è·å–ä»£ç ä¹‹å‰ï¼Œè¯·å…ˆç¡®ä¿ä½ çš„ JDK ç‰ˆæœ¬æ˜¯ 1.8 ä»¥ä¸Šå“¦ã€‚</p><h3 id="é¡¹ç›®ç¼–è¯‘"><a href="#é¡¹ç›®ç¼–è¯‘" class="headerlink" title="é¡¹ç›®ç¼–è¯‘"></a>é¡¹ç›®ç¼–è¯‘</h3><p>è¿›å…¥ spring-boot-2.0.1.RELEASE çš„ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚</p><h4 id="è·³è¿‡æµ‹è¯•ç”¨ä¾‹ç¼–è¯‘"><a href="#è·³è¿‡æµ‹è¯•ç”¨ä¾‹ç¼–è¯‘" class="headerlink" title="è·³è¿‡æµ‹è¯•ç”¨ä¾‹ç¼–è¯‘"></a>è·³è¿‡æµ‹è¯•ç”¨ä¾‹ç¼–è¯‘</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mvn clean install -DskipTests -Pfast //è·³è¿‡æµ‹è¯•ç”¨ä¾‹</span><br></pre></td></tr></table></figure><p>è·³è¿‡æµ‹è¯•ç”¨ä¾‹å¯ä»¥åŠ å¿«ç¼–è¯‘çš„é€Ÿåº¦ã€‚</p><p>å…ˆçœ‹ä¸‹è¿è¡ŒæˆåŠŸçš„æ•ˆæœï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fqdm9wd342j31gc1mc7n7.jpg" alt="springboot201"></p><p>åªèŠ±äº† 6 åˆ†å¤šé’Ÿå°±å¥½äº†ã€‚</p><h4 id="å…¨é‡ç¼–è¯‘"><a href="#å…¨é‡ç¼–è¯‘" class="headerlink" title="å…¨é‡ç¼–è¯‘"></a>å…¨é‡ç¼–è¯‘</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mvn -f spring-boot-project -Pfull clean install</span><br></pre></td></tr></table></figure><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fqdm9xd4pdj31kw18l7s3.jpg" alt="springboot2-error3"></p><p>å…¨é‡ç¼–è¯‘ç«Ÿç„¶æŠ¥é”™ï¼Œä¸€æ³¢æœªå¹³ï¼Œä¸€æ³¢åˆèµ·ï¼</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fqdm9y57j4j31kw0e7wls.jpg" alt="2018-04-15_15-37-25"></p><p>çœ‹ç½‘ä¸Šçš„è§£å†³æ–¹æ³•æ˜¯ï¼šåœ¨é¡¹ç›®çš„ pom.xml æ–‡ä»¶ä¸­çš„ <code>&lt;properties&gt;</code> æ·»åŠ  <code>&lt;javadocExecutable&gt;</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">javadocExecutable</span>&gt;</span>$&#123;java.home&#125;/../bin/javadoc<span class="tag">&lt;/<span class="name">javadocExecutable</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤æ–¹æ³•è™½ç„¶ç®¡ç”¨ï¼Œä½†æ˜¯åªæ˜¯ä¸´æ—¶çš„ï¼Œéœ€è¦å¯¹æ¯ä¸ªé¡¹ç›®éƒ½è¿›è¡Œæ·»åŠ ã€‚</p><p>é—®é¢˜äº§ç”Ÿçš„åŸå› åº”è¯¥æ˜¯ï¼Œmvn æ‹¿åˆ°çš„ JAVA_HOME ä½ç½®åº”è¯¥æ˜¯ ${JAVA_HOME}/jre è€Œä¸æ˜¯ jdk ä½ç½®ã€‚</p><p>åé¢åˆçœ‹å®˜æ–¹çš„ README ä¸Šé¢å†™çš„æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mvn clean install</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œåä¹Ÿæ˜¯æœ‰å„ç§æŠ¥é”™ï¼Œå°è¯•äº†å¾ˆä¹…è§£å†³ï¼Œæœ€åèŠ±äº†å¥½å‡ ä¸ªå°æ—¶æ‰åˆ°ä¸‹é¢è¿™å›¾ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fqdma1lfkdj31kw0yqh5s.jpg" alt="springboot2-error4"></p><p>å¤ªæŠ˜è…¾äººäº†ï¼Œå¤ªéº»çƒ¦äº†ï¼</p><p>æš‚æ—¶å°±ä¸å…¨é‡ç¼–è¯‘äº†ï¼Œæˆ‘ä»¬å°±ç›´æ¥æŠŠç°åœ¨ <code>è·³è¿‡æµ‹è¯•ç”¨ä¾‹ç¼–è¯‘</code>  åçš„é¡¹ç›®å¯¼å…¥åˆ° IDEA ä¸­å»ã€‚</p><h3 id="å¯¼å…¥é¡¹ç›®å·¥ç¨‹"><a href="#å¯¼å…¥é¡¹ç›®å·¥ç¨‹" class="headerlink" title="å¯¼å…¥é¡¹ç›®å·¥ç¨‹"></a>å¯¼å…¥é¡¹ç›®å·¥ç¨‹</h3><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fqdma2dis9j31ia10447y.jpg" alt="import"></p><p>å¯¼å…¥åå°†é‚£äº›æµ‹è¯•çš„ module æ ‡è®°ä¸º maven é¡¹ç›®ï¼Œç„¶ååé¢è‡ªå·±å†æ ¹æ®æµ‹è¯•ç”¨ä¾‹å»è·Ÿæºç å§ã€‚</p><p>å¯¼å…¥åé¡¹ç›®æ²¡å‡ºç°æŠ¥é”™ï¼Œç¾æ»‹æ»‹ï¼Œåé¢æºç å¯ä»¥çœ‹èµ·æ¥ã€‚</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fqdm9ipwfhj31kw0zkkj1.jpg" alt="success02"></p><h3 id="é‡åˆ°çš„å‘"><a href="#é‡åˆ°çš„å‘" class="headerlink" title="é‡åˆ°çš„å‘"></a>é‡åˆ°çš„å‘</h3><p>åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘è‡ªå·±åˆ›å»ºé¡¹ç›® Spring Boot 2 é¡¹ç›®éƒ½æ˜¯å¤±è´¥çš„ï¼Œmaven è¿è¡Œé¡¹ç›®ï¼ˆmvn clean installï¼‰æŠ¥é”™å¦‚ä¸‹ï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fqdm9wsmiqj31gc1mc7n7.jpg" alt="springboot2-error2"></p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fqdm9zrq04j31kw0wru0p.jpg" alt="springboot2-error"></p><p>é€šè¿‡ä¸Šå›¾å¯ä»¥å‘ç°æŠ¥é”™çš„ç½ªé­ç¥¸é¦–æ˜¯ç”±äºæ‰¾ä¸åˆ° org.yaml.snakeyaml  1.19 çš„åŒ…ï¼Œè¿™ä¸ªä¾èµ–æ­»æ´»ä¸‹ä¸ä¸‹æ¥ï¼Œè‹¦é€¼äº†ğŸ˜¢ã€‚</p><p>ä¸€å¼€å§‹ä»¥ä¸ºæ˜¯å…¬å¸é…çš„ maven setting.xml æ–‡ä»¶æœ‰é—®é¢˜ï¼ˆå…¬å¸ç§æœæœ‰é—®é¢˜ï¼‰ï¼Œå¯¼è‡´æˆ‘è¿™ä¸ª  org.yaml.snakeyaml  1.19 çš„åŒ…ä¸€ç›´ä¸‹è½½ä¸æ¥ã€‚åæ¥æˆ‘å«ç¾¤é‡Œçš„å¥½å‹å¸®å¿™æµ‹è¯•ä¸‹èƒ½ä¸èƒ½åˆ›å»º Spring Boot 2 é¡¹ç›®ï¼Œç»“æœä»–ä»¬éƒ½è¡Œçš„ã€‚æˆ‘å°±æ¢æˆäº†ä»–ä»¬é˜¿é‡Œäº‘é•œåƒçš„ setting æ–‡ä»¶ï¼Œç»“æœåœ¨æˆ‘è¿™è¿˜æ˜¯ä¸è¡Œçš„ã€‚çœŸæ˜¯é†‰äº†ï¼Œæˆ‘å¹²è„†ç›´æ¥å«ä»–æŠŠ maven æœ¬åœ°ä»“åº“ä¸­çš„ org.yaml.snakeyaml  1.19 æ•´ä¸ªåŒ…éƒ½å‘ç»™æˆ‘ï¼Œç»“æœå†æ¬¡åˆ›å»º Spring Boot 2 é¡¹ç›®å°±èƒ½æˆåŠŸäº†ã€‚ç¾æ»‹æ»‹ğŸ˜„ï¼</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fqdm9yr6s8j31kw0o3tkj.jpg" alt="springboot2-success"></p><p>ç„¶åå°±è¹­ç€ç°åœ¨ç¯å¢ƒ OKï¼Œå¼€å§‹æ­å»ºæˆ‘çš„ Spring Boot 2 æºç é˜…è¯»ç¯å¢ƒï¼</p><h3 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h3><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-Migration-Guide/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å—</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-new-features/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2018/04/13/Spring_Boot_2.0_Configuration_Changelog/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2018/04/15/springboot2_code/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º</a></p><p>5ã€<a href="http://www.54tianzhisheng.cn/2018/04/18/spring_boot2_project/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ</a></p><p>6ã€<a href="http://www.54tianzhisheng.cn/2018/04/19/SpringBootApplication-annotation/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring boot 2.0 ä¸­ SpringBootApplication æ³¨è§£è¯¦è§£</a></p><p>7ã€<a href="http://www.54tianzhisheng.cn/2018/04/30/springboot_SpringApplication/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸ƒ)ï¼šSpringApplication æ·±å…¥æ¢ç´¢</a></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æºç ä¸éª—äººï¼Œå¤šçœ‹çœ‹ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws3.sinaimg.cn/large/006tNc79gy1fqdma0kpk1j31hc0zkqox.jpg&quot; alt=&quot;night-photograph-2183637_1920&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜</title>
    <link href="http://yoursite.com/2018/04/13/Spring_Boot_2.0_Configuration_Changelog/"/>
    <id>http://yoursite.com/2018/04/13/Spring_Boot_2.0_Configuration_Changelog/</id>
    <published>2018-04-12T16:00:00.000Z</published>
    <updated>2018-04-19T16:10:55.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fqc4n57tj4j31hc0zktmm.jpg" alt="pocket-watch-3156771_1920"></p><a id="more"></a><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>å¥½ä¹…æ²¡æ›´æ–°æ–‡ç« äº†ï¼Œæœ¬æ¥æ‰“ç®—åœ¨æ¯•ä¸šä¹‹å‰ä¸æ›´æ–°äº†ï¼Œè¿™é‡Œï¼Œå¯¹ä¸ä½äº†ï¼Œæˆ‘åˆæ›´æ–°äº†ã€‚ğŸ˜ğŸ˜</p><p>ä¹‹å‰ç¿»è¯‘äº†ä¸¤ç¯‡ Spring Boot 2.0 çš„æ–‡ç« ï¼Œ<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-Migration-Guide/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å—</a>   å’Œ  <a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-new-features/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£</a></p><p>ä»Šå¤©å°±ç»§ç»­è¯¦ç»†æ¢ç©¶ Spring Boot 2.0 é‡Œé¢çš„æ”¹å˜ã€‚</p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/04/13/Spring_Boot_2.0_Configuration_Changelog/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/04/13/Spring_Boot_2.0_Configuration_Changelog/</a></p><h3 id="é…ç½®æ”¹å˜"><a href="#é…ç½®æ”¹å˜" class="headerlink" title="é…ç½®æ”¹å˜"></a>é…ç½®æ”¹å˜</h3><p>é…ç½®å±æ€§åœ¨ 1.5.10.RELEASE å’Œ 2.0.0.RELEASE ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„æ”¹å˜ï¼š</p><h4 id="å¯ç”¨é”®"><a href="#å¯ç”¨é”®" class="headerlink" title="å¯ç”¨é”®"></a>å¯ç”¨é”®</h4><p>ä¸‹é¢çš„è¡¨æ˜¯ 2.0.0.RELEASE ç‰ˆæœ¬ä¸­çš„å¼ƒç”¨é”®ï¼š</p><table><thead><tr><th>Key</th><th>Replacementï¼ˆæ›¿ä»£ï¼‰</th><th>åŸå› </th></tr></thead><tbody><tr><td><code>spring.datasource.hikari.initialization-fail-fast</code></td><td></td><td></td></tr><tr><td><code>spring.main.web-environment</code></td><td><code>spring.main.web-application-type</code></td></tr></tbody></table><h4 id="æ–°é”®"><a href="#æ–°é”®" class="headerlink" title="æ–°é”®"></a>æ–°é”®</h4><p>ä¸‹é¢çš„è¡¨æ˜¯ 2.0.0.RELEASE ç‰ˆæœ¬ä¸­æ–°çš„é”®ï¼š</p><table><thead><tr><th>Key</th><th>Default valueï¼ˆé»˜è®¤å€¼ï¼‰</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>logging.file.max-history</code></td><td><code>0</code></td><td>è¦ä¿å­˜çš„å½’æ¡£æ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å€¼</td></tr><tr><td><code>logging.file.max-size</code></td><td><code>10MB</code></td><td>æ—¥å¿—æ–‡ä»¶æœ€å¤§å®¹é‡</td></tr><tr><td><code>logging.pattern.dateformat</code></td><td><code>yyyy-MM-dd HH:mm:ss.SSS</code></td><td>æ—¥å¿—çš„æ—¥æœŸæ ¼å¼</td></tr><tr><td><code>management.endpoint.auditevents.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.auditevents.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ auditevents ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.beans.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.beans.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ bean ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.conditions.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.conditions.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ conditions ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.configprops.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.configprops.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ configprops ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.configprops.keys-to-sanitize</code></td><td><code>password,secret,key,token,    .credentials.,vcap_services</code></td><td>Keys that should be sanitized</td></tr><tr><td><code>management.endpoint.env.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.env.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ env ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.env.keys-to-sanitize</code></td><td><code>password,secret,key,token,   .credentials.,vcap_services</code></td><td>Keys that should be sanitized.</td></tr><tr><td><code>management.endpoint.flyway.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.flyway.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ flyway ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.health.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.health.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ health ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.health.roles</code></td><td></td><td>è§’è‰²ç”¨äºç¡®å®šç”¨æˆ·æ˜¯å¦æœ‰æƒæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</td></tr><tr><td><code>management.endpoint.health.show-details</code></td><td><code>never</code></td><td>ä½•æ—¶æ˜¾ç¤ºå®Œæ•´çš„å¥åº·è¯¦æƒ…</td></tr><tr><td><code>management.endpoint.heapdump.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.heapdump.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ heapdump ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.httptrace.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.httptrace.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ httptrace ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.info.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.info.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ info ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.jolokia.config</code></td><td></td><td>Jolokia è®¾ç½®</td></tr><tr><td><code>management.endpoint.jolokia.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ jolokia ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.liquibase.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.liquibase.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ liquibase ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.logfile.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.logfile.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ logfile ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.logfile.external-file</code></td><td></td><td>è¦è®¿é—®çš„å¤–éƒ¨æ—¥å¿—æ–‡ä»¶</td></tr><tr><td><code>management.endpoint.loggers.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.loggers.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ loggers ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.mappings.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.mappings.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ mappings ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.metrics.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.metrics.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ metrics ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.prometheus.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.prometheus.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ prometheus ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.scheduledtasks.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.scheduledtasks.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ scheduledtasks ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.sessions.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ sessions ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.shutdown.enabled</code></td><td><code>false</code></td><td>æ˜¯å¦å¯ç”¨ shutdown ç«¯ç‚¹</td></tr><tr><td><code>management.endpoint.threaddump.cache.time-to-live</code></td><td><code>0ms</code></td><td>å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´</td></tr><tr><td><code>management.endpoint.threaddump.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ threaddump ç«¯ç‚¹</td></tr><tr><td><code>management.endpoints.enabled-by-default</code></td><td></td><td>æ˜¯å¦å¯ç”¨æˆ–è€…å…³é—­æ‰€æœ‰çš„ç«¯ç‚¹</td></tr><tr><td><code>management.endpoints.jmx.domain</code></td><td><code>org.springframework.boot</code></td><td>ç«¯ç‚¹ JMX åŸŸå</td></tr><tr><td><code>management.endpoints.jmx.exposure.exclude</code></td><td></td><td>åº”æ’é™¤çš„ç«¯ç‚¹ ID</td></tr><tr><td><code>management.endpoints.jmx.exposure.include</code></td><td><code>*</code></td><td>åº”åŒ…å«çš„ç«¯ç‚¹ ID æˆ–å…¨éƒ¨ <code>*</code></td></tr><tr><td><code>management.endpoints.jmx.static-names</code></td><td></td><td>è¿½åŠ åˆ°æ‰€æœ‰è¡¨ç¤ºç«¯ç‚¹çš„ MBean çš„ObjectName çš„é™æ€å±æ€§.</td></tr><tr><td><code>management.endpoints.jmx.unique-names</code></td><td><code>false</code></td><td>æ˜¯å¦ç¡®ä¿ ObjectNames åœ¨å‘ç”Ÿå†²çªæ—¶è¢«ä¿®æ”¹</td></tr><tr><td><code>management.endpoints.web.base-path</code></td><td><code>/actuator</code></td><td>Web ç«¯ç‚¹çš„åŸºæœ¬è·¯å¾„</td></tr><tr><td><code>management.endpoints.web.cors.allow-credentials</code></td><td></td><td>æ˜¯å¦æ”¯æŒå‡­è¯</td></tr><tr><td><code>management.endpoints.web.cors.allowed-headers</code></td><td></td><td>Comma-separated list of headers to allow in a request. â€˜*â€™ allows all headers.</td></tr><tr><td><code>management.endpoints.web.cors.allowed-methods</code></td><td></td><td>Comma-separated list of methods to allow. â€˜*â€™ allows all methods.</td></tr><tr><td><code>management.endpoints.web.cors.allowed-origins</code></td><td></td><td>Comma-separated list of origins to allow. â€˜*â€™ allows all origins.</td></tr><tr><td><code>management.endpoints.web.cors.exposed-headers</code></td><td></td><td>Comma-separated list of headers to include in a response.</td></tr><tr><td><code>management.endpoints.web.cors.max-age</code></td><td><code>1800s</code></td><td>How long the response from a pre-flight request can be cached by clients.</td></tr><tr><td><code>management.endpoints.web.exposure.exclude</code></td><td></td><td>Endpoint IDs that should be excluded.</td></tr><tr><td><code>management.endpoints.web.exposure.include</code></td><td><code>health,info</code></td><td>Endpoint IDs that should be included or â€˜*â€™ for all.</td></tr><tr><td><code>management.endpoints.web.path-mapping</code></td><td></td><td>Mapping between endpoint IDs and the path that should expose them.</td></tr><tr><td><code>management.health.influxdb.enabled</code></td><td><code>true</code></td><td>Whether to enable InfluxDB health check.</td></tr><tr><td><code>management.health.neo4j.enabled</code></td><td><code>true</code></td><td>Whether to enable Neo4j health check.</td></tr><tr><td><code>management.health.status.http-mapping</code></td><td></td><td>Mapping of health statuses to HTTP status codes.</td></tr><tr><td><code>management.metrics.binders.files.enabled</code></td><td><code>true</code></td><td>Whether to enable files metrics.</td></tr><tr><td><code>management.metrics.binders.integration.enabled</code></td><td><code>true</code></td><td>Whether to enable Spring Integration metrics.</td></tr><tr><td><code>management.metrics.binders.jvm.enabled</code></td><td><code>true</code></td><td>Whether to enable JVM metrics.</td></tr><tr><td><code>management.metrics.binders.logback.enabled</code></td><td><code>true</code></td><td>Whether to enable Logback metrics.</td></tr><tr><td><code>management.metrics.binders.processor.enabled</code></td><td><code>true</code></td><td>Whether to enable processor metrics.</td></tr><tr><td><code>management.metrics.binders.uptime.enabled</code></td><td><code>true</code></td><td>Whether to enable uptime metrics.</td></tr><tr><td><code>management.metrics.distribution.percentiles</code></td><td></td><td>Specific computed non-aggregable percentiles to ship to the backend for meter IDs starting-with the specified name.</td></tr><tr><td><code>management.metrics.distribution.percentiles-histogram</code></td><td></td><td>Whether meter IDs starting-with the specified name should be publish percentile histograms.</td></tr><tr><td><code>management.metrics.distribution.sla</code></td><td></td><td>Specific SLA boundaries for meter IDs starting-with the specified name.</td></tr><tr><td><code>management.metrics.enable</code></td><td></td><td>Whether meter IDs starting-with the specified name should be enabled.</td></tr><tr><td><code>management.metrics.export.atlas.batch-size</code></td><td><code>10000</code></td><td>Number of measurements per request to use for this backend.</td></tr><tr><td><code>management.metrics.export.atlas.config-refresh-frequency</code></td><td><code>10s</code></td><td>Frequency for refreshing config settings from the LWC service.</td></tr><tr><td><code>management.metrics.export.atlas.config-time-to-live</code></td><td><code>150s</code></td><td>Time to live for subscriptions from the LWC service.</td></tr><tr><td><code>management.metrics.export.atlas.config-uri</code></td><td><code>http://localhost:7101/     lwc/api/v1/expressions/local-dev</code></td><td>URI for the Atlas LWC endpoint to retrieve current subscriptions.</td></tr><tr><td><code>management.metrics.export.atlas.connect-timeout</code></td><td><code>1s</code></td><td>Connection timeout for requests to this backend.</td></tr><tr><td><code>management.metrics.export.atlas.enabled</code></td><td><code>true</code></td><td>Whether exporting of metrics to this backend is enabled.</td></tr><tr><td><code>management.metrics.export.atlas.eval-uri</code></td><td><code>http://localhost:7101/ lwc/api/v1/evaluate</code></td><td>URI for the Atlas LWC endpoint to evaluate the data for a subscription.</td></tr><tr><td><code>management.metrics.export.atlas.lwc-enabled</code></td><td><code>false</code></td><td>Whether to enable streaming to Atlas LWC.</td></tr><tr><td><code>management.metrics.export.atlas.meter-time-to-live</code></td><td><code>15m</code></td><td>Time to live for meters that do not have any activity.</td></tr><tr><td><code>management.metrics.export.atlas.num-threads</code></td><td><code>2</code></td><td>Number of threads to use with the metrics publishing scheduler.</td></tr><tr><td><code>management.metrics.export.atlas.read-timeout</code></td><td><code>10s</code></td><td>Read timeout for requests to this backend.</td></tr><tr><td><code>management.metrics.export.atlas.step</code></td><td><code>1m</code></td><td>Step size (i.e. reporting frequency) to use.</td></tr><tr><td><code>management.metrics.export.atlas.uri</code></td><td><code>http://localhost:7101/ api/v1/publish</code></td><td>URI of the Atlas server.</td></tr><tr><td><code>management.metrics.export.datadog.api-key</code></td><td></td><td>Datadog API key.</td></tr><tr><td><code>management.metrics.export.datadog.application-key</code></td><td></td><td>Datadog application key.</td></tr><tr><td><code>management.metrics.export.datadog.batch-size</code></td><td><code>10000</code></td><td>Number of measurements per request to use for this backend.</td></tr><tr><td><code>management.metrics.export.datadog.connect-timeout</code></td><td><code>1s</code></td><td>Connection timeout for requests to this backend.</td></tr><tr><td><code>management.metrics.export.datadog.descriptions</code></td><td><code>true</code></td><td>Whether to publish descriptions metadata to Datadog.</td></tr><tr><td><code>management.metrics.export.datadog.enabled</code></td><td><code>true</code></td><td>Whether exporting of metrics to this backend is enabled.</td></tr><tr><td><code>management.metrics.export.datadog.host-tag</code></td><td><code>instance</code></td><td>Tag that will be mapped to â€œhostâ€ when shipping metrics to Datadog.</td></tr><tr><td><code>management.metrics.export.datadog.num-threads</code></td><td><code>2</code></td><td>Number of threads to use with the metrics publishing scheduler.</td></tr><tr><td><code>management.metrics.export.datadog.read-timeout</code></td><td><code>10s</code></td><td>Read timeout for requests to this backend.</td></tr><tr><td><code>management.metrics.export.datadog.step</code></td><td><code>1m</code></td><td>Step size (i.e. reporting frequency) to use.</td></tr><tr><td><code>management.metrics.export.datadog.uri</code></td><td><code>https://app.datadoghq.com</code></td><td>URI to ship metrics to.</td></tr><tr><td><code>management.metrics.export.ganglia.addressing-mode</code></td><td><code>multicast</code></td><td>UDP addressing mode, either unicast or multicast.</td></tr><tr><td><code>management.metrics.export.ganglia.duration-units</code></td><td><code>milliseconds</code></td><td>Base time unit used to report durations.</td></tr><tr><td><code>management.metrics.export.ganglia.enabled</code></td><td><code>true</code></td><td>Whether exporting of metrics to Ganglia is enabled.</td></tr><tr><td><code>management.metrics.export.ganglia.host</code></td><td><code>localhost</code></td><td>Host of the Ganglia server to receive exported metrics.</td></tr><tr><td><code>management.metrics.export.ganglia.port</code></td><td><code>8649</code></td><td>Port of the Ganglia server to receive exported metrics.</td></tr><tr><td><code>management.metrics.export.ganglia.protocol-version</code></td><td><code>3.1</code></td><td>Ganglia protocol version.</td></tr><tr><td><code>management.metrics.export.ganglia.rate-units</code></td><td><code>seconds</code></td><td>Base time unit used to report rates.</td></tr><tr><td><code>management.metrics.export.ganglia.step</code></td><td><code>1m</code></td><td>Step size (i.e. reporting frequency) to use.</td></tr><tr><td><code>management.metrics.export.ganglia.time-to-live</code></td><td><code>1</code></td><td>Time to live for metrics on Ganglia.</td></tr><tr><td><code>management.metrics.export.graphite.duration-units</code></td><td><code>milliseconds</code></td><td>Base time unit used to report durations.</td></tr><tr><td><code>management.metrics.export.graphite.enabled</code></td><td><code>true</code></td><td>Whether exporting of metrics to Graphite is enabled.</td></tr><tr><td><code>management.metrics.export.graphite.host</code></td><td><code>localhost</code></td><td>Host of the Graphite server to receive exported metrics.</td></tr><tr><td><code>management.metrics.export.graphite.port</code></td><td><code>2004</code></td><td>Port of the Graphite server to receive exported metrics.</td></tr><tr><td><code>management.metrics.export.graphite.protocol</code></td><td><code>pickled</code></td><td>Protocol to use while shipping data to Graphite.</td></tr><tr><td><code>management.metrics.export.graphite.rate-units</code></td><td><code>seconds</code></td><td>Base time unit used to report rates.</td></tr><tr><td><code>management.metrics.export.graphite.step</code></td><td><code>1m</code></td><td>Step size (i.e. reporting frequency) to use.</td></tr><tr><td><code>management.metrics.export.graphite.tags-as-prefix</code></td><td>``</td><td>For the default naming convention, turn the specified tag keys into part of the metric prefix.</td></tr><tr><td><code>management.metrics.export.influx.auto-create-db</code></td><td><code>true</code></td><td>Whether to create the Influx database if it does not exist before attempting to publish metrics to it.</td></tr><tr><td><code>management.metrics.export.influx.batch-size</code></td><td><code>10000</code></td><td>Number of measurements per request to use for this backend.</td></tr><tr><td><code>management.metrics.export.influx.compressed</code></td><td><code>true</code></td><td>Whether to enable GZIP compression of metrics batches published to Influx.</td></tr><tr><td><code>management.metrics.export.influx.connect-timeout</code></td><td><code>1s</code></td><td>Connection timeout for requests to this backend.</td></tr><tr><td><code>management.metrics.export.influx.consistency</code></td><td><code>one</code></td><td>Write consistency for each point.</td></tr><tr><td><code>management.metrics.export.influx.db</code></td><td><code>mydb</code></td><td>Tag that will be mapped to â€œhostâ€ when shipping metrics to Influx.</td></tr><tr><td><code>management.metrics.export.influx.enabled</code></td><td><code>true</code></td><td>Whether exporting of metrics to this backend is enabled.</td></tr><tr><td><code>management.metrics.export.influx.num-threads</code></td><td><code>2</code></td><td>Number of threads to use with the metrics publishing scheduler.</td></tr><tr><td><code>management.metrics.export.influx.password</code></td><td></td><td>Login password of the Influx server.</td></tr><tr><td><code>management.metrics.export.influx.read-timeout</code></td><td><code>10s</code></td><td>Read timeout for requests to this backend.</td></tr><tr><td><code>management.metrics.export.influx.retention-policy</code></td><td></td><td>Retention policy to use (Influx writes to the DEFAULT retention policy if one is not specified).</td></tr><tr><td><code>management.metrics.export.influx.step</code></td><td><code>1m</code></td><td>Step size (i.e. reporting frequency) to use.</td></tr><tr><td><code>management.metrics.export.influx.uri</code></td><td><code>http://localhost:8086</code></td><td>URI of the Influx server.</td></tr><tr><td><code>management.metrics.export.influx.user-name</code></td><td></td><td>Login user of the Influx server.</td></tr><tr><td><code>management.metrics.export.jmx.enabled</code></td><td><code>true</code></td><td>Whether exporting of metrics to JMX is enabled.</td></tr><tr><td><code>management.metrics.export.jmx.step</code></td><td><code>1m</code></td><td>Step size (i.e. reporting frequency) to use.</td></tr><tr><td><code>management.metrics.export.newrelic.account-id</code></td><td></td><td>New Relic account ID.</td></tr><tr><td><code>management.metrics.export.newrelic.api-key</code></td><td></td><td>New Relic API key.</td></tr><tr><td><code>management.metrics.export.newrelic.batch-size</code></td><td><code>10000</code></td><td>Number of measurements per request to use for this backend.</td></tr><tr><td><code>management.metrics.export.newrelic.connect-timeout</code></td><td><code>1s</code></td><td>Connection timeout for requests to this backend.</td></tr><tr><td><code>management.metrics.export.newrelic.enabled</code></td><td><code>true</code></td><td>Whether exporting of metrics to this backend is enabled.</td></tr><tr><td><code>management.metrics.export.newrelic.num-threads</code></td><td><code>2</code></td><td>Number of threads to use with the metrics publishing scheduler.</td></tr><tr><td><code>management.metrics.export.newrelic.read-timeout</code></td><td><code>10s</code></td><td>Read timeout for requests to this backend.</td></tr><tr><td><code>management.metrics.export.newrelic.step</code></td><td><code>1m</code></td><td>Step size (i.e. reporting frequency) to use.</td></tr><tr><td><code>management.metrics.export.newrelic.uri</code></td><td><code>https://insights-collector    .newrelic.com</code></td><td>URI to ship metrics to.</td></tr><tr><td><code>management.metrics.export.prometheus.descriptions</code></td><td><code>true</code></td><td>Whether to enable publishing descriptions as part of the scrape payload to Prometheus.</td></tr><tr><td><code>management.metrics.export.prometheus.enabled</code></td><td><code>true</code></td><td>Whether exporting of metrics to Prometheus is enabled.</td></tr><tr><td><code>management.metrics.export.prometheus.step</code></td><td><code>1m</code></td><td>Step size (i.e. reporting frequency) to use.</td></tr><tr><td><code>management.metrics.export.signalfx.access-token</code></td><td></td><td>SignalFX access token.</td></tr><tr><td><code>management.metrics.export.signalfx.batch-size</code></td><td><code>10000</code></td><td>Number of measurements per request to use for this backend.</td></tr><tr><td><code>management.metrics.export.signalfx.connect-timeout</code></td><td><code>1s</code></td><td>Connection timeout for requests to this backend.</td></tr><tr><td><code>management.metrics.export.signalfx.enabled</code></td><td><code>true</code></td><td>Whether exporting of metrics to this backend is enabled.</td></tr><tr><td><code>management.metrics.export.signalfx.num-threads</code></td><td><code>2</code></td><td>Number of threads to use with the metrics publishing scheduler.</td></tr><tr><td><code>management.metrics.export.signalfx.read-timeout</code></td><td><code>10s</code></td><td>Read timeout for requests to this backend.</td></tr><tr><td><code>management.metrics.export.signalfx.source</code></td><td></td><td>Uniquely identifies the app instance that is publishing metrics to SignalFx.</td></tr><tr><td><code>management.metrics.export.signalfx.step</code></td><td><code>10s</code></td><td>Step size (i.e. reporting frequency) to use.</td></tr><tr><td><code>management.metrics.export.signalfx.uri</code></td><td><code>https://ingest.signalfx.com</code></td><td>URI to ship metrics to.</td></tr><tr><td><code>management.metrics.export.simple.enabled</code></td><td><code>true</code></td><td>Whether, in the absence of any other exporter, exporting of metrics to an in-memory backend is enabled.</td></tr><tr><td><code>management.metrics.export.simple.mode</code></td><td><code>cumulative</code></td><td>Counting mode.</td></tr><tr><td><code>management.metrics.export.simple.step</code></td><td><code>1m</code></td><td>Step size (i.e. reporting frequency) to use.</td></tr><tr><td><code>management.metrics.export.statsd.enabled</code></td><td><code>true</code></td><td>Whether exporting of metrics to StatsD is enabled.</td></tr><tr><td><code>management.metrics.export.statsd.flavor</code></td><td><code>datadog</code></td><td>StatsD line protocol to use.</td></tr><tr><td><code>management.metrics.export.statsd.host</code></td><td><code>localhost</code></td><td>Host of the StatsD server to receive exported metrics.</td></tr><tr><td><code>management.metrics.export.statsd.max-packet-length</code></td><td><code>1400</code></td><td>Total length of a single payload should be kept within your networkâ€™s MTU.</td></tr><tr><td><code>management.metrics.export.statsd.polling-frequency</code></td><td><code>10s</code></td><td>How often gauges will be polled.</td></tr><tr><td><code>management.metrics.export.statsd.port</code></td><td><code>8125</code></td><td>Port of the StatsD server to receive exported metrics.</td></tr><tr><td><code>management.metrics.export.statsd.publish-unchanged-meters</code></td><td><code>true</code></td><td>Whether to send unchanged meters to the StatsD server.</td></tr><tr><td><code>management.metrics.export.statsd.queue-size</code></td><td><code>2147483647</code></td><td>Maximum size of the queue of items waiting to be sent to the StatsD server.</td></tr><tr><td><code>management.metrics.export.wavefront.api-token</code></td><td></td><td>API token used when publishing metrics directly to the Wavefront API host.</td></tr><tr><td><code>management.metrics.export.wavefront.batch-size</code></td><td><code>10000</code></td><td>Number of measurements per request to use for this backend.</td></tr><tr><td><code>management.metrics.export.wavefront.connect-timeout</code></td><td><code>1s</code></td><td>Connection timeout for requests to this backend.</td></tr><tr><td><code>management.metrics.export.wavefront.enabled</code></td><td><code>true</code></td><td>Whether exporting of metrics to this backend is enabled.</td></tr><tr><td><code>management.metrics.export.wavefront.global-prefix</code></td><td></td><td>Global prefix to separate metrics originating from this appâ€™s white box instrumentation from those originating from other Wavefront integrations when viewed in the Wavefront UI.</td></tr><tr><td><code>management.metrics.export.wavefront.num-threads</code></td><td><code>2</code></td><td>Number of threads to use with the metrics publishing scheduler.</td></tr><tr><td><code>management.metrics.export.wavefront.read-timeout</code></td><td><code>10s</code></td><td>Read timeout for requests to this backend.</td></tr><tr><td><code>management.metrics.export.wavefront.source</code></td><td></td><td>Unique identifier for the app instance that is the source of metrics being published to Wavefront.</td></tr><tr><td><code>management.metrics.export.wavefront.step</code></td><td><code>10s</code></td><td>Step size (i.e. reporting frequency) to use.</td></tr><tr><td><code>management.metrics.export.wavefront.uri</code></td><td><code>https://longboard.wavefront.com</code></td><td>URI to ship metrics to.</td></tr><tr><td><code>management.metrics.use-global-registry</code></td><td><code>true</code></td><td>Whether auto-configured MeterRegistry implementations should be bound to the global static registry on Metrics.</td></tr><tr><td><code>management.metrics.web.client.max-uri-tags</code></td><td><code>100</code></td><td>Maximum number of unique URI tag values allowed.</td></tr><tr><td><code>management.metrics.web.client.requests-metric-name</code></td><td><code>http.client.requests</code></td><td>Name of the metric for sent requests.</td></tr><tr><td><code>management.metrics.web.server.auto-time-requests</code></td><td><code>true</code></td><td>Whether requests handled by Spring MVC or WebFlux should be automatically timed.</td></tr><tr><td><code>management.metrics.web.server.requests-metric-name</code></td><td><code>http.server.requests</code></td><td>Name of the metric for received requests.</td></tr><tr><td><code>management.server.add-application-context-header</code></td><td><code>false</code></td><td>Add the â€œX-Application-Contextâ€ HTTP header in each response.</td></tr><tr><td><code>management.server.address</code></td><td></td><td>Network address to which the management endpoints should bind.</td></tr><tr><td><code>management.server.port</code></td><td></td><td>Management endpoint HTTP port (uses the same port as the application by default).</td></tr><tr><td><code>management.server.servlet.context-path</code></td><td><code>Management endpoint context-path (for instance,</code>/management).</td><td></td></tr><tr><td><code>management.server.ssl.ciphers</code></td><td></td><td></td></tr><tr><td><code>management.server.ssl.client-auth</code></td><td></td><td></td></tr><tr><td><code>management.server.ssl.enabled</code></td><td></td><td></td></tr><tr><td><code>management.server.ssl.enabled-protocols</code></td><td></td><td></td></tr><tr><td><code>management.server.ssl.key-alias</code></td><td></td><td></td></tr><tr><td><code>management.server.ssl.key-password</code></td><td></td><td></td></tr><tr><td><code>management.server.ssl.key-store</code></td><td></td><td></td></tr><tr><td><code>management.server.ssl.key-store-password</code></td><td></td><td></td></tr><tr><td><code>management.server.ssl.key-store-provider</code></td><td></td><td></td></tr><tr><td><code>management.server.ssl.key-store-type</code></td><td></td><td></td></tr><tr><td><code>management.server.ssl.protocol</code></td><td></td><td></td></tr><tr><td><code>management.server.ssl.trust-store</code></td><td></td><td></td></tr><tr><td><code>management.server.ssl.trust-store-password</code></td><td></td><td></td></tr><tr><td><code>management.server.ssl.trust-store-provider</code></td><td></td><td></td></tr><tr><td><code>management.server.ssl.trust-store-type</code></td><td></td><td></td></tr><tr><td><code>management.trace.http.enabled</code></td><td><code>true</code></td><td>Whether to enable HTTP request-response tracing.</td></tr><tr><td><code>management.trace.http.include</code></td><td><code>request-headers,response-headers, cookies,errors</code></td><td>Items to be included in the trace.</td></tr><tr><td><code>server.error.include-exception</code></td><td><code>false</code></td><td>Include the â€œexceptionâ€ attribute.</td></tr><tr><td><code>server.http2.enabled</code></td><td></td><td></td></tr><tr><td><code>server.jetty.accesslog.append</code></td><td><code>false</code></td><td>Append to log.</td></tr><tr><td><code>server.jetty.accesslog.date-format</code></td><td><code>dd/MMM/yyyy:HH:mm:ss Z</code></td><td>Timestamp format of the request log.</td></tr><tr><td><code>server.jetty.accesslog.enabled</code></td><td><code>false</code></td><td>Enable access log.</td></tr><tr><td><code>server.jetty.accesslog.extended-format</code></td><td><code>false</code></td><td>Enable extended NCSA format.</td></tr><tr><td><code>server.jetty.accesslog.file-date-format</code></td><td></td><td>Date format to place in log file name.</td></tr><tr><td><code>server.jetty.accesslog.filename</code></td><td></td><td>Log filename.</td></tr><tr><td><code>server.jetty.accesslog.locale</code></td><td></td><td>Locale of the request log.</td></tr><tr><td><code>server.jetty.accesslog.log-cookies</code></td><td><code>false</code></td><td>Enable logging of the request cookies.</td></tr><tr><td><code>server.jetty.accesslog.log-latency</code></td><td><code>false</code></td><td>Enable logging of request processing time.</td></tr><tr><td><code>server.jetty.accesslog.log-server</code></td><td><code>false</code></td><td>Enable logging of the request hostname.</td></tr><tr><td><code>server.jetty.accesslog.retention-period</code></td><td><code>31</code></td><td>Number of days before rotated log files are deleted.</td></tr><tr><td><code>server.jetty.accesslog.time-zone</code></td><td><code>GMT</code></td><td>Timezone of the request log.</td></tr><tr><td><code>server.servlet.application-display-name</code></td><td><code>application</code></td><td>Display name of the application.</td></tr><tr><td><code>server.servlet.context-parameters</code></td><td></td><td>Servlet context init parameters.</td></tr><tr><td><code>server.servlet.context-path</code></td><td></td><td>Context path of the application.</td></tr><tr><td><code>server.servlet.jsp.class-name</code></td><td></td><td></td></tr><tr><td><code>server.servlet.jsp.init-parameters</code></td><td></td><td></td></tr><tr><td><code>server.servlet.jsp.registered</code></td><td></td><td></td></tr><tr><td><code>server.servlet.path</code></td><td><code>/</code></td><td>Path of the main dispatcher servlet.</td></tr><tr><td><code>server.servlet.session.cookie.comment</code></td><td></td><td></td></tr><tr><td><code>server.servlet.session.cookie.domain</code></td><td></td><td></td></tr><tr><td><code>server.servlet.session.cookie.http-only</code></td><td></td><td></td></tr><tr><td><code>server.servlet.session.cookie.max-age</code></td><td></td><td></td></tr><tr><td><code>server.servlet.session.cookie.name</code></td><td></td><td></td></tr><tr><td><code>server.servlet.session.cookie.path</code></td><td></td><td></td></tr><tr><td><code>server.servlet.session.cookie.secure</code></td><td></td><td></td></tr><tr><td><code>server.servlet.session.persistent</code></td><td></td><td></td></tr><tr><td><code>server.servlet.session.store-dir</code></td><td></td><td></td></tr><tr><td><code>server.servlet.session.timeout</code></td><td></td><td></td></tr><tr><td><code>server.servlet.session.tracking-modes</code></td><td></td><td></td></tr><tr><td><code>server.tomcat.max-http-header-size</code></td><td><code>0</code></td><td>Maximum size, in bytes, of the HTTP message header.</td></tr><tr><td><code>server.tomcat.resource.cache-ttl</code></td><td></td><td>Time-to-live of the static resource cache.</td></tr><tr><td><code>server.tomcat.use-relative-redirects</code></td><td></td><td>Whether HTTP 1.1 and later location headers generated by a call to sendRedirect will use relative or absolute redirects.</td></tr><tr><td><code>server.undertow.eager-filter-init</code></td><td><code>true</code></td><td>Whether servlet filters should be initialized on startup.</td></tr><tr><td><code>spring.banner.charset</code></td><td><code>UTF-8</code></td><td>Banner file encoding.</td></tr><tr><td><code>spring.banner.image.height</code></td><td></td><td>Height of the banner image in chars (default based on image height).</td></tr><tr><td><code>spring.banner.image.invert</code></td><td><code>false</code></td><td>Whether images should be inverted for dark terminal themes.</td></tr><tr><td><code>spring.banner.image.location</code></td><td><code>classpath:banner.gif</code></td><td>Banner image file location (jpg or png can also be used).</td></tr><tr><td><code>spring.banner.image.margin</code></td><td><code>2</code></td><td>Left hand image margin in chars.</td></tr><tr><td><code>spring.banner.image.width</code></td><td><code>76</code></td><td>Width of the banner image in chars.</td></tr><tr><td><code>spring.banner.location</code></td><td><code>classpath:banner.txt</code></td><td>Banner text resource location.</td></tr><tr><td><code>spring.batch.initialize-schema</code></td><td><code>embedded</code></td><td>Database schema initialization mode.</td></tr><tr><td><code>spring.cache.redis.cache-null-values</code></td><td><code>true</code></td><td>Allow caching null values.</td></tr><tr><td><code>spring.cache.redis.key-prefix</code></td><td></td><td>Key prefix.</td></tr><tr><td><code>spring.cache.redis.time-to-live</code></td><td></td><td>Entry expiration.</td></tr><tr><td><code>spring.cache.redis.use-key-prefix</code></td><td><code>true</code></td><td>Whether to use the key prefix when writing to Redis.</td></tr><tr><td><code>spring.config.additional-location</code></td><td></td><td>Config file locations used in addition to the defaults.</td></tr><tr><td><code>spring.data.cassandra.connect-timeout</code></td><td></td><td>Socket option: connection time out.</td></tr><tr><td><code>spring.data.cassandra.pool.heartbeat-interval</code></td><td><code>30s</code></td><td>Heartbeat interval after which a message is sent on an idle connection to make sure itâ€™s still alive.</td></tr><tr><td><code>spring.data.cassandra.pool.idle-timeout</code></td><td><code>120s</code></td><td>Idle timeout before an idle connection is removed.</td></tr><tr><td><code>spring.data.cassandra.pool.max-queue-size</code></td><td><code>256</code></td><td>Maximum number of requests that get queued if no connection is available.</td></tr><tr><td><code>spring.data.cassandra.pool.pool-timeout</code></td><td><code>5000ms</code></td><td>Pool timeout when trying to acquire a connection from a hostâ€™s pool.</td></tr><tr><td><code>spring.data.cassandra.read-timeout</code></td><td></td><td>Socket option: read time out.</td></tr><tr><td><code>spring.data.cassandra.repositories.type</code></td><td><code>auto</code></td><td>Type of Cassandra repositories to enable.</td></tr><tr><td><code>spring.data.couchbase.repositories.type</code></td><td><code>auto</code></td><td>Type of Couchbase repositories to enable.</td></tr><tr><td><code>spring.data.mongodb.repositories.type</code></td><td><code>auto</code></td><td>Type of Mongo repositories to enable.</td></tr><tr><td><code>spring.data.neo4j.auto-index</code></td><td><code>none</code></td><td>Auto index mode.</td></tr><tr><td><code>spring.data.web.pageable.default-page-size</code></td><td><code>20</code></td><td>Default page size.</td></tr><tr><td><code>spring.data.web.pageable.max-page-size</code></td><td><code>2000</code></td><td>Maximum page size to be accepted.</td></tr><tr><td><code>spring.data.web.pageable.one-indexed-parameters</code></td><td><code>false</code></td><td>Whether to expose and assume 1-based page number indexes.</td></tr><tr><td><code>spring.data.web.pageable.page-parameter</code></td><td><code>page</code></td><td>Page index parameter name.</td></tr><tr><td><code>spring.data.web.pageable.prefix</code></td><td>``</td><td>General prefix to be prepended to the page number and page size parameters.</td></tr><tr><td><code>spring.data.web.pageable.qualifier-delimiter</code></td><td><code>_</code></td><td>Delimiter to be used between the qualifier and the actual page number and size properties.</td></tr><tr><td><code>spring.data.web.pageable.size-parameter</code></td><td><code>size</code></td><td>Page size parameter name.</td></tr><tr><td><code>spring.data.web.sort.sort-parameter</code></td><td><code>sort</code></td><td>Sort parameter name.</td></tr><tr><td><code>spring.datasource.hikari.initialization-fail-timeout</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.hikari.metrics-tracker-factory</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.hikari.scheduled-executor</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.hikari.scheduled-executor-service</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.hikari.schema</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.initialization-mode</code></td><td><code>embedded</code></td><td>Initialize the datasource with available DDL and DML scripts.</td></tr><tr><td><code>spring.devtools.restart.log-condition-evaluation-delta</code></td><td><code>true</code></td><td>Whether to log the condition evaluation delta upon restart.</td></tr><tr><td><code>spring.flyway.baseline-description</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.baseline-on-migrate</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.baseline-version</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.check-location</code></td><td><code>true</code></td><td>Whether to check that migration scripts location exists.</td></tr><tr><td><code>spring.flyway.clean-disabled</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.clean-on-validation-error</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.dry-run-output</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.enabled</code></td><td><code>true</code></td><td>æ˜¯å¦å¯ç”¨ flyway.</td></tr><tr><td><code>spring.flyway.encoding</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.error-handlers</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.group</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.ignore-future-migrations</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.ignore-missing-migrations</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.init-sqls</code></td><td></td><td>SQL statements to execute to initialize a connection immediately after obtaining it.</td></tr><tr><td><code>spring.flyway.installed-by</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.locations</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.mixed</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.out-of-order</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.password</code></td><td></td><td>å¦‚æœæ‚¨æƒ³è®© Flyway åˆ›å»ºè‡ªå·±çš„DataSourceï¼Œå¯ä»¥ä½¿ç”¨ JDBC å¯†ç </td></tr><tr><td><code>spring.flyway.placeholder-prefix</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.placeholder-replacement</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.placeholder-suffix</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.placeholders</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.repeatable-sql-migration-prefix</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.schemas</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.skip-default-callbacks</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.skip-default-resolvers</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.sql-migration-prefix</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.sql-migration-separator</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.sql-migration-suffix</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.sql-migration-suffixes</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.table</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.target</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.undo-sql-migration-prefix</code></td><td></td><td></td></tr><tr><td><code>spring.flyway.url</code></td><td></td><td>è¦è¿ç§»çš„æ•°æ®åº“çš„ JDBC URL</td></tr><tr><td><code>spring.flyway.user</code></td><td></td><td>ç™»å½•è¦è¿ç§»æ•°æ®åº“çš„ç”¨æˆ·å</td></tr><tr><td><code>spring.flyway.validate-on-migrate</code></td><td></td><td></td></tr><tr><td><code>spring.gson.date-format</code></td><td></td><td>åºåˆ—åŒ– Date å¯¹è±¡æ—¶ä½¿ç”¨çš„æ ¼å¼</td></tr><tr><td><code>spring.gson.disable-html-escaping</code></td><td></td><td>Whether to disable the escaping of HTML characters such as â€˜&lt;â€™, â€˜&gt;â€™, etc.</td></tr><tr><td><code>spring.gson.disable-inner-class-serialization</code></td><td></td><td>Whether to exclude inner classes during serialization.</td></tr><tr><td><code>spring.gson.enable-complex-map-key-serialization</code></td><td></td><td>Whether to enable serialization of complex map keys (i.e. non-primitives).</td></tr><tr><td><code>spring.gson.exclude-fields-without-expose-annotation</code></td><td></td><td>Whether to exclude all fields from consideration for serialization or deserialization that do not have the â€œExposeâ€ annotation.</td></tr><tr><td><code>spring.gson.field-naming-policy</code></td><td></td><td>Naming policy that should be applied to an objectâ€™s field during serialization and deserialization.</td></tr><tr><td><code>spring.gson.generate-non-executable-json</code></td><td></td><td>Whether to generate non executable JSON by prefixing the output with some special text.</td></tr><tr><td><code>spring.gson.lenient</code></td><td></td><td>Whether to be lenient about parsing JSON that doesnâ€™t conform to RFC 4627.</td></tr><tr><td><code>spring.gson.long-serialization-policy</code></td><td></td><td>Serialization policy for Long and long types.</td></tr><tr><td><code>spring.gson.pretty-printing</code></td><td></td><td>Whether to output serialized JSON that fits in a page for pretty printing.</td></tr><tr><td><code>spring.gson.serialize-nulls</code></td><td></td><td>Whether to serialize null fields.</td></tr><tr><td><code>spring.influx.password</code></td><td></td><td>Influx ç™»å½•ç”¨æˆ·åå¯†ç </td></tr><tr><td><code>spring.influx.url</code></td><td></td><td>InfluxDB æ•°æ®åº“ URL</td></tr><tr><td><code>spring.influx.user</code></td><td></td><td>Influx ç™»å½•ç”¨æˆ·å</td></tr><tr><td><code>spring.integration.jdbc.initialize-schema</code></td><td><code>embedded</code></td><td>Database schema initialization mode.</td></tr><tr><td><code>spring.integration.jdbc.schema</code></td><td><code>classpath:org/springframework/ integration/jdbc/schema-@@platform@@.sql</code></td><td>Path to the SQL file to use to initialize the database schema.</td></tr><tr><td><code>spring.jdbc.template.fetch-size</code></td><td><code>-1</code></td><td>Number of rows that should be fetched from the database when more rows are needed.</td></tr><tr><td><code>spring.jdbc.template.max-rows</code></td><td><code>-1</code></td><td>Maximum number of rows.</td></tr><tr><td><code>spring.jdbc.template.query-timeout</code></td><td></td><td>Query timeout.</td></tr><tr><td><code>spring.jpa.mapping-resources</code></td><td></td><td>Mapping resources (equivalent to â€œmapping-fileâ€ entries in persistence.xml).</td></tr><tr><td><code>spring.jta.atomikos.datasource.concurrent-connection-validation</code></td><td></td><td></td></tr><tr><td><code>spring.jta.atomikos.properties.allow-sub-transactions</code></td><td><code>true</code></td><td>Specify whether sub-transactions are allowed.</td></tr><tr><td><code>spring.jta.atomikos.properties.default-max-wait-time-on-shutdown</code></td><td></td><td>How long should normal shutdown (no-force) wait for transactions to complete.</td></tr><tr><td><code>spring.jta.atomikos.properties.recovery.delay</code></td><td><code>10000ms</code></td><td>Delay between two recovery scans.</td></tr><tr><td><code>spring.jta.atomikos.properties.recovery.forget-orphaned-log-entries-delay</code></td><td><code>86400000ms</code></td><td>Delay after which recovery can cleanup pending (â€˜orphanedâ€™) log entries.</td></tr><tr><td><code>spring.jta.atomikos.properties.recovery.max-retries</code></td><td><code>5</code></td><td>Number of retry attempts to commit the transaction before throwing an exception.</td></tr><tr><td><code>spring.jta.atomikos.properties.recovery.retry-interval</code></td><td><code>10000ms</code></td><td>Delay between retry attempts.</td></tr><tr><td><code>spring.kafka.admin.client-id</code></td><td></td><td>ID to pass to the server when making requests.</td></tr><tr><td><code>spring.kafka.admin.fail-fast</code></td><td><code>false</code></td><td>Whether to fail fast if the broker is not available on startup.</td></tr><tr><td><code>spring.kafka.admin.properties</code></td><td></td><td>Additional admin-specific properties used to configure the client.</td></tr><tr><td><code>spring.kafka.admin.ssl.key-password</code></td><td></td><td>Password of the private key in the key store file.</td></tr><tr><td><code>spring.kafka.admin.ssl.keystore-location</code></td><td></td><td>Location of the key store file.</td></tr><tr><td><code>spring.kafka.admin.ssl.keystore-password</code></td><td></td><td>Store password for the key store file.</td></tr><tr><td><code>spring.kafka.admin.ssl.truststore-location</code></td><td></td><td>Location of the trust store file.</td></tr><tr><td><code>spring.kafka.admin.ssl.truststore-password</code></td><td></td><td>Store password for the trust store file.</td></tr><tr><td><code>spring.kafka.consumer.properties</code></td><td></td><td>Additional consumer-specific properties used to configure the client.</td></tr><tr><td><code>spring.kafka.consumer.ssl.key-password</code></td><td></td><td>Password of the private key in the key store file.</td></tr><tr><td><code>spring.kafka.consumer.ssl.keystore-location</code></td><td></td><td>Location of the key store file.</td></tr><tr><td><code>spring.kafka.consumer.ssl.keystore-password</code></td><td></td><td>Store password for the key store file.</td></tr><tr><td><code>spring.kafka.consumer.ssl.truststore-location</code></td><td></td><td>Location of the trust store file.</td></tr><tr><td><code>spring.kafka.consumer.ssl.truststore-password</code></td><td></td><td>Store password for the trust store file.</td></tr><tr><td><code>spring.kafka.jaas.control-flag</code></td><td><code>required</code></td><td>Control flag for login configuration.</td></tr><tr><td><code>spring.kafka.jaas.enabled</code></td><td><code>false</code></td><td>Whether to enable JAAS configuration.</td></tr><tr><td><code>spring.kafka.jaas.login-module</code></td><td><code>com.sun.security.auth           .module.Krb5LoginModule</code></td><td>Login module.</td></tr><tr><td><code>spring.kafka.jaas.options</code></td><td></td><td>Additional JAAS options.</td></tr><tr><td><code>spring.kafka.listener.client-id</code></td><td></td><td>Prefix for the listenerâ€™s consumer client.id property.</td></tr><tr><td><code>spring.kafka.listener.idle-event-interval</code></td><td></td><td>Time between publishing idle consumer events (no data received).</td></tr><tr><td><code>spring.kafka.listener.log-container-config</code></td><td></td><td>Whether to log the container configuration during initialization (INFO level).</td></tr><tr><td><code>spring.kafka.listener.monitor-interval</code></td><td></td><td>Time between checks for non-responsive consumers.</td></tr><tr><td><code>spring.kafka.listener.no-poll-threshold</code></td><td></td><td>Multiplier applied to â€œpollTimeoutâ€ to determine if a consumer is non-responsive.</td></tr><tr><td><code>spring.kafka.listener.type</code></td><td><code>single</code></td><td>Listener type.</td></tr><tr><td><code>spring.kafka.producer.properties</code></td><td></td><td>Additional producer-specific properties used to configure the client.</td></tr><tr><td><code>spring.kafka.producer.ssl.key-password</code></td><td></td><td>Password of the private key in the key store file.</td></tr><tr><td><code>spring.kafka.producer.ssl.keystore-location</code></td><td></td><td>Location of the key store file.</td></tr><tr><td><code>spring.kafka.producer.ssl.keystore-password</code></td><td></td><td>Store password for the key store file.</td></tr><tr><td><code>spring.kafka.producer.ssl.truststore-location</code></td><td></td><td>Location of the trust store file.</td></tr><tr><td><code>spring.kafka.producer.ssl.truststore-password</code></td><td></td><td>Store password for the trust store file.</td></tr><tr><td><code>spring.kafka.producer.transaction-id-prefix</code></td><td></td><td>When non empty, enables transaction support for producer.</td></tr><tr><td><code>spring.ldap.anonymous-read-only</code></td><td><code>false</code></td><td>Whether read-only operations should use an anonymous environment.</td></tr><tr><td><code>spring.liquibase.change-log</code></td><td><code>classpath:/db/changelog/     db.changelog-master.yaml</code></td><td>Change log configuration path.</td></tr><tr><td><code>spring.liquibase.check-change-log-location</code></td><td><code>true</code></td><td>Whether to check that the change log location exists.</td></tr><tr><td><code>spring.liquibase.contexts</code></td><td></td><td>Comma-separated list of runtime contexts to use.</td></tr><tr><td><code>spring.liquibase.default-schema</code></td><td></td><td>Default database schema.</td></tr><tr><td><code>spring.liquibase.drop-first</code></td><td><code>false</code></td><td>Whether to first drop the database schema.</td></tr><tr><td><code>spring.liquibase.enabled</code></td><td><code>true</code></td><td>Whether to enable Liquibase support.</td></tr><tr><td><code>spring.liquibase.labels</code></td><td></td><td>Comma-separated list of runtime labels to use.</td></tr><tr><td><code>spring.liquibase.parameters</code></td><td></td><td>Change log parameters.</td></tr><tr><td><code>spring.liquibase.password</code></td><td></td><td>Login password of the database to migrate.</td></tr><tr><td><code>spring.liquibase.rollback-file</code></td><td></td><td>File to which rollback SQL is written when an update is performed.</td></tr><tr><td><code>spring.liquibase.url</code></td><td></td><td>JDBC URL of the database to migrate.</td></tr><tr><td><code>spring.liquibase.user</code></td><td></td><td>Login user of the database to migrate.</td></tr><tr><td><code>spring.main.web-application-type</code></td><td></td><td>Flag to explicitly request a specific type of web application.</td></tr><tr><td><code>spring.messages.cache-duration</code></td><td></td><td>Loaded resource bundle files cache duration.</td></tr><tr><td><code>spring.messages.use-code-as-default-message</code></td><td><code>false</code></td><td>Whether to use the message code as the default message instead of throwing a â€œNoSuchMessageExceptionâ€.</td></tr><tr><td><code>spring.mvc.contentnegotiation.favor-parameter</code></td><td><code>false</code></td><td>Whether a request parameter (â€œformatâ€ by default) should be used to determine the requested media type.</td></tr><tr><td><code>spring.mvc.contentnegotiation.favor-path-extension</code></td><td><code>false</code></td><td>Whether the path extension in the URL path should be used to determine the requested media type.</td></tr><tr><td><code>spring.mvc.contentnegotiation.media-types</code></td><td></td><td>Map file extensions to media types for content negotiation.</td></tr><tr><td><code>spring.mvc.contentnegotiation.parameter-name</code></td><td></td><td>Query parameter name to use when â€œfavor-parameterâ€ is enabled.</td></tr><tr><td><code>spring.mvc.pathmatch.use-registered-suffix-pattern</code></td><td><code>false</code></td><td>Whether suffix pattern matching should work only against extensions registered with â€œspring.mvc.contentnegotiation.media-types.*â€.</td></tr><tr><td><code>spring.mvc.pathmatch.use-suffix-pattern</code></td><td><code>false</code></td><td>Whether to use suffix pattern match (â€œ.*â€) when matching patterns to requests.</td></tr><tr><td><code>spring.quartz.jdbc.initialize-schema</code></td><td><code>embedded</code></td><td>Database schema initialization mode.</td></tr><tr><td><code>spring.quartz.jdbc.schema</code></td><td><code>classpath:org/quartz/impl/ jdbcjobstore/ tables_@@platform@@.sql</code></td><td>Path to the SQL file to use to initialize the database schema.</td></tr><tr><td><code>spring.quartz.job-store-type</code></td><td><code>memory</code></td><td>Quartz job store type.</td></tr><tr><td><code>spring.quartz.properties</code></td><td></td><td>Additional Quartz Scheduler properties.</td></tr><tr><td><code>spring.rabbitmq.listener.direct.acknowledge-mode</code></td><td></td><td>Acknowledge mode of container.</td></tr><tr><td><code>spring.rabbitmq.listener.direct.auto-startup</code></td><td><code>true</code></td><td>Whether to start the container automatically on startup.</td></tr><tr><td><code>spring.rabbitmq.listener.direct.consumers-per-queue</code></td><td></td><td>Number of consumers per queue.</td></tr><tr><td><code>spring.rabbitmq.listener.direct.default-requeue-rejected</code></td><td></td><td>Whether rejected deliveries are re-queued by default.</td></tr><tr><td><code>spring.rabbitmq.listener.direct.idle-event-interval</code></td><td></td><td>How often idle container events should be published.</td></tr><tr><td><code>spring.rabbitmq.listener.direct.prefetch</code></td><td></td><td>Number of messages to be handled in a single request.</td></tr><tr><td><code>spring.rabbitmq.listener.direct.retry.enabled</code></td><td><code>false</code></td><td>Whether publishing retries are enabled.</td></tr><tr><td><code>spring.rabbitmq.listener.direct.retry.initial-interval</code></td><td><code>1000ms</code></td><td>Duration between the first and second attempt to deliver a message.</td></tr><tr><td><code>spring.rabbitmq.listener.direct.retry.max-attempts</code></td><td><code>3</code></td><td>Maximum number of attempts to deliver a message.</td></tr><tr><td><code>spring.rabbitmq.listener.direct.retry.max-interval</code></td><td><code>10000ms</code></td><td>Maximum duration between attempts.</td></tr><tr><td><code>spring.rabbitmq.listener.direct.retry.multiplier</code></td><td><code>1</code></td><td>Multiplier to apply to the previous retry interval.</td></tr><tr><td><code>spring.rabbitmq.listener.direct.retry.stateless</code></td><td><code>true</code></td><td>Whether retries are stateless or stateful.</td></tr><tr><td><code>spring.rabbitmq.listener.type</code></td><td><code>simple</code></td><td>Listener container type.</td></tr><tr><td><code>spring.rabbitmq.ssl.key-store-type</code></td><td><code>PKCS12</code></td><td>Key store type.</td></tr><tr><td><code>spring.rabbitmq.ssl.trust-store-type</code></td><td><code>JKS</code></td><td>Trust store type.</td></tr><tr><td><code>spring.rabbitmq.template.exchange</code></td><td>``</td><td>Name of the default exchange to use for send operations.</td></tr><tr><td><code>spring.rabbitmq.template.routing-key</code></td><td>``</td><td>Value of a default routing key to use for send operations.</td></tr><tr><td><code>spring.reactor.stacktrace-mode.enabled</code></td><td><code>false</code></td><td>Whether Reactor should collect stacktrace information at runtime.</td></tr><tr><td><code>spring.redis.jedis.pool.max-active</code></td><td><code>8</code></td><td>Maximum number of connections that can be allocated by the pool at a given time.</td></tr><tr><td><code>spring.redis.jedis.pool.max-idle</code></td><td><code>8</code></td><td>Maximum number of â€œidleâ€ connections in the pool.</td></tr><tr><td><code>spring.redis.jedis.pool.max-wait</code></td><td><code>-1ms</code></td><td>Maximum amount of time a connection allocation should block before throwing an exception when the pool is exhausted.</td></tr><tr><td><code>spring.redis.jedis.pool.min-idle</code></td><td><code>0</code></td><td>Target for the minimum number of idle connections to maintain in the pool.</td></tr><tr><td><code>spring.redis.lettuce.pool.max-active</code></td><td><code>8</code></td><td>Maximum number of connections that can be allocated by the pool at a given time.</td></tr><tr><td><code>spring.redis.lettuce.pool.max-idle</code></td><td><code>8</code></td><td>Maximum number of â€œidleâ€ connections in the pool.</td></tr><tr><td><code>spring.redis.lettuce.pool.max-wait</code></td><td><code>-1ms</code></td><td>Maximum amount of time a connection allocation should block before throwing an exception when the pool is exhausted.</td></tr><tr><td><code>spring.redis.lettuce.pool.min-idle</code></td><td><code>0</code></td><td>Target for the minimum number of idle connections to maintain in the pool.</td></tr><tr><td><code>spring.redis.lettuce.shutdown-timeout</code></td><td><code>100ms</code></td><td>Shutdown timeout.</td></tr><tr><td><code>spring.resources.cache.cachecontrol.cache-private</code></td><td></td><td>Indicate that the response message is intended for a single user and must not be stored by a shared cache.</td></tr><tr><td><code>spring.resources.cache.cachecontrol.cache-public</code></td><td></td><td>Indicate that any cache may store the response.</td></tr><tr><td><code>spring.resources.cache.cachecontrol.max-age</code></td><td></td><td>Maximum time the response should be cached, in seconds if no duration suffix is not specified.</td></tr><tr><td><code>spring.resources.cache.cachecontrol.must-revalidate</code></td><td></td><td>Indicate that once it has become stale, a cache must not use the response without re-validating it with the server.</td></tr><tr><td><code>spring.resources.cache.cachecontrol.no-cache</code></td><td></td><td>Indicate that the cached response can be reused only if re-validated with the server.</td></tr><tr><td><code>spring.resources.cache.cachecontrol.no-store</code></td><td></td><td>Indicate to not cache the response in any case.</td></tr><tr><td><code>spring.resources.cache.cachecontrol.no-transform</code></td><td></td><td>Indicate intermediaries (caches and others) that they should not transform the response content.</td></tr><tr><td><code>spring.resources.cache.cachecontrol.proxy-revalidate</code></td><td></td><td>Same meaning as the â€œmust-revalidateâ€ directive, except that it does not apply to private caches.</td></tr><tr><td><code>spring.resources.cache.cachecontrol.s-max-age</code></td><td></td><td>Maximum time the response should be cached by shared caches, in seconds if no duration suffix is not specified.</td></tr><tr><td><code>spring.resources.cache.cachecontrol.stale-if-error</code></td><td></td><td>Maximum time the response may be used when errors are encountered, in seconds if no duration suffix is not specified.</td></tr><tr><td><code>spring.resources.cache.cachecontrol.stale-while-revalidate</code></td><td></td><td>Maximum time the response can be served after it becomes stale, in seconds if no duration suffix is not specified.</td></tr><tr><td><code>spring.resources.cache.period</code></td><td></td><td>Cache period for the resources served by the resource handler.</td></tr><tr><td><code>spring.security.filter.dispatcher-types</code></td><td><code>async,error,request</code></td><td>Security filter chain dispatcher types.</td></tr><tr><td><code>spring.security.filter.order</code></td><td><code>-100</code></td><td>Security filter chain order.</td></tr><tr><td><code>spring.security.oauth2.client.provider</code></td><td></td><td>OAuth provider details.</td></tr><tr><td><code>spring.security.oauth2.client.registration</code></td><td></td><td>OAuth client registrations.</td></tr><tr><td><code>spring.security.user.name</code></td><td><code>user</code></td><td>Default user name.</td></tr><tr><td><code>spring.security.user.password</code></td><td></td><td>Password for the default user name.</td></tr><tr><td><code>spring.security.user.roles</code></td><td></td><td>Granted roles for the default user name.</td></tr><tr><td><code>spring.servlet.multipart.enabled</code></td><td><code>true</code></td><td>Whether to enable support of multipart uploads.</td></tr><tr><td><code>spring.servlet.multipart.file-size-threshold</code></td><td><code>0</code></td><td>Threshold after which files are written to disk.</td></tr><tr><td><code>spring.servlet.multipart.location</code></td><td></td><td>Intermediate location of uploaded files.</td></tr><tr><td><code>spring.servlet.multipart.max-file-size</code></td><td><code>1MB</code></td><td>Max file size.</td></tr><tr><td><code>spring.servlet.multipart.max-request-size</code></td><td><code>10MB</code></td><td>Max request size.</td></tr><tr><td><code>spring.servlet.multipart.resolve-lazily</code></td><td><code>false</code></td><td>Whether to resolve the multipart request lazily at the time of file or parameter access.</td></tr><tr><td><code>spring.session.jdbc.cleanup-cron</code></td><td><code>0 * * * * *</code></td><td>Cron expression for expired session cleanup job.</td></tr><tr><td><code>spring.session.jdbc.initialize-schema</code></td><td><code>embedded</code></td><td>Database schema initialization mode.</td></tr><tr><td><code>spring.session.mongodb.collection-name</code></td><td><code>sessions</code></td><td>Collection name used to store sessions.</td></tr><tr><td><code>spring.session.redis.cleanup-cron</code></td><td><code>0 * * * * *</code></td><td>Cron expression for expired session cleanup job.</td></tr><tr><td><code>spring.session.servlet.filter-dispatcher-types</code></td><td><code>async,error,request</code></td><td>Session repository filter dispatcher types.</td></tr><tr><td><code>spring.session.servlet.filter-order</code></td><td></td><td>Session repository filter order.</td></tr><tr><td><code>spring.thymeleaf.enable-spring-el-compiler</code></td><td><code>false</code></td><td>Enable the SpringEL compiler in SpringEL expressions.</td></tr><tr><td><code>spring.thymeleaf.reactive.chunked-mode-view-names</code></td><td></td><td>Comma-separated list of view names (patterns allowed) that should be the only ones executed in CHUNKED mode when a max chunk size is set.</td></tr><tr><td><code>spring.thymeleaf.reactive.full-mode-view-names</code></td><td></td><td>Comma-separated list of view names (patterns allowed) that should be executed in FULL mode even if a max chunk size is set.</td></tr><tr><td><code>spring.thymeleaf.reactive.max-chunk-size</code></td><td><code>0</code></td><td>Maximum size of data buffers used for writing to the response, in bytes.</td></tr><tr><td><code>spring.thymeleaf.reactive.media-types</code></td><td></td><td>Media types supported by the view technology.</td></tr><tr><td><code>spring.thymeleaf.servlet.content-type</code></td><td><code>text/html</code></td><td>Content-Type value written to HTTP responses.</td></tr><tr><td><code>spring.webflux.date-format</code></td><td></td><td>Date format to use.</td></tr><tr><td><code>spring.webflux.static-path-pattern</code></td><td><code>/**</code></td><td>Path pattern used for static resources.</td></tr><tr><td><code>spring.webservices.wsdl-locations</code></td><td></td><td>Comma-separated list of locations of WSDLs and accompanying XSDs to be exposed as beans.</td></tr></tbody></table><table><thead><tr><th>Key</th><th>Replacementï¼ˆæ›¿ä»£ï¼‰</th><th>åŸå› </th></tr></thead><tbody><tr><td><code>banner.charset</code></td><td><code>spring.banner.charset</code></td><td></td></tr><tr><td><code>banner.image.height</code></td><td><code>spring.banner.image.height</code></td><td></td></tr><tr><td><code>banner.image.invert</code></td><td><code>spring.banner.image.invert</code></td><td></td></tr><tr><td><code>banner.image.location</code></td><td><code>spring.banner.image.location</code></td><td></td></tr><tr><td><code>banner.image.margin</code></td><td><code>spring.banner.image.margin</code></td><td></td></tr><tr><td><code>banner.image.width</code></td><td><code>spring.banner.image.width</code></td><td></td></tr><tr><td><code>banner.location</code></td><td><code>spring.banner.location</code></td><td></td></tr><tr><td><code>endpoints.actuator.enabled</code></td><td></td><td>actuator  ç«¯ç‚¹ä¸å†å¯ç”¨</td></tr><tr><td><code>endpoints.actuator.path</code></td><td></td><td>actuator  ç«¯ç‚¹ä¸å†å¯ç”¨</td></tr><tr><td><code>endpoints.actuator.sensitive</code></td><td></td><td>actuator  ç«¯ç‚¹ä¸å†å¯ç”¨</td></tr><tr><td><code>endpoints.auditevents.enabled</code></td><td><code>management.endpoint.  auditevents.enabled</code></td><td></td></tr><tr><td><code>endpoints.auditevents.path</code></td><td><code>management.endpoints.web.path-mapping.auditevents</code></td><td></td></tr><tr><td><code>endpoints.auditevents.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.autoconfig.enabled</code></td><td><code>management.endpoint.   conditions.enabled</code></td><td></td></tr><tr><td><code>endpoints.autoconfig.id</code></td><td></td><td>ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>endpoints.autoconfig.path</code></td><td><code>management.endpoints.web.path-mapping.conditions</code></td><td></td></tr><tr><td><code>endpoints.autoconfig.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.beans.enabled</code></td><td><code>management.endpoint.beans.enabled</code></td><td></td></tr><tr><td><code>endpoints.beans.id</code></td><td></td><td>ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>endpoints.beans.path</code></td><td><code>management.endpoints.web.path-mapping.beans</code></td><td></td></tr><tr><td><code>endpoints.beans.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.configprops.enabled</code></td><td><code>management.endpoint.   configprops.enabled</code></td><td></td></tr><tr><td><code>endpoints.configprops.id</code></td><td></td><td>ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>endpoints.configprops.keys-to-sanitize</code></td><td><code>management.endpoint.     configprops.keys-to-sanitize</code></td><td></td></tr><tr><td><code>endpoints.configprops.path</code></td><td><code>management.endpoints.web.path-mapping.configprops</code></td><td></td></tr><tr><td><code>endpoints.configprops.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.cors.allow-credentials</code></td><td><code>management.endpoints.      web.cors.allow-credentials</code></td><td></td></tr><tr><td><code>endpoints.cors.allowed-headers</code></td><td><code>management.endpoints.    web.cors.allowed-headers</code></td><td></td></tr><tr><td><code>endpoints.cors.allowed-methods</code></td><td><code>management.endpoints.    web.cors.allowed-methods</code></td><td></td></tr><tr><td><code>endpoints.cors.allowed-origins</code></td><td><code>management.endpoints.    web.cors.allowed-origins</code></td><td></td></tr><tr><td><code>endpoints.cors.exposed-headers</code></td><td><code>management.endpoints.    web.cors.exposed-headers</code></td><td></td></tr><tr><td><code>endpoints.cors.max-age</code></td><td><code>management.endpoints.        web.cors.max-age</code></td><td></td></tr><tr><td><code>endpoints.docs.curies.enabled</code></td><td></td><td>docs ç«¯ç‚¹ä¸å†å¯ç”¨</td></tr><tr><td><code>endpoints.docs.enabled</code></td><td></td><td>docs ç«¯ç‚¹ä¸å†å¯ç”¨</td></tr><tr><td><code>endpoints.docs.path</code></td><td></td><td>docs ç«¯ç‚¹ä¸å†å¯ç”¨</td></tr><tr><td><code>endpoints.docs.sensitive</code></td><td></td><td>docs ç«¯ç‚¹ä¸å†å¯ç”¨</td></tr><tr><td><code>endpoints.dump.enabled</code></td><td><code>management.endpoint.    threaddump.enabled</code></td><td></td></tr><tr><td><code>endpoints.dump.id</code></td><td></td><td>ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>endpoints.dump.path</code></td><td><code>management.endpoints.web.path-mapping.dump</code></td><td></td></tr><tr><td><code>endpoints.dump.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.enabled</code></td><td><code>management.endpoints.             enabled-by-default</code></td><td></td></tr><tr><td><code>endpoints.env.enabled</code></td><td><code>management.endpoint.env.enabled</code></td><td></td></tr><tr><td><code>endpoints.env.id</code></td><td></td><td>ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>endpoints.env.keys-to-sanitize</code></td><td><code>management.endpoint.             env.keys-to-sanitize</code></td><td></td></tr><tr><td><code>endpoints.env.path</code></td><td><code>management.endpoints.            web.path-mapping.env</code></td><td></td></tr><tr><td><code>endpoints.env.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.flyway.enabled</code></td><td><code>management.endpoint.flyway.enabled</code></td><td></td></tr><tr><td><code>endpoints.flyway.id</code></td><td></td><td>ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>endpoints.flyway.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.health.enabled</code></td><td><code>management.endpoint.health.enabled</code></td><td></td></tr><tr><td><code>endpoints.health.id</code></td><td></td><td>ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>endpoints.health.mapping</code></td><td><code>management.health.status.http-mapping</code></td><td></td></tr><tr><td><code>endpoints.health.path</code></td><td><code>management.endpoints.web.path-mapping.health</code></td><td></td></tr><tr><td><code>endpoints.health.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.health.time-to-live</code></td><td><code>management.endpoint.    health.cache.time-to-live</code></td><td></td></tr><tr><td><code>endpoints.heapdump.enabled</code></td><td><code>management.endpoint.heapdump.enabled</code></td><td></td></tr><tr><td><code>endpoints.heapdump.path</code></td><td><code>management.endpoints.web.path-mapping.heapdump</code></td><td></td></tr><tr><td><code>endpoints.heapdump.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.hypermedia.enabled</code></td><td></td><td>Actuator ä¸­çš„ Hypermedia ä¸å†å¯ç”¨</td></tr><tr><td><code>endpoints.info.enabled</code></td><td><code>management.endpoint.info.enabled</code></td><td></td></tr><tr><td><code>endpoints.info.id</code></td><td></td><td>ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>endpoints.info.path</code></td><td><code>management.endpoints.web.path-mapping.info</code></td><td></td></tr><tr><td><code>endpoints.info.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.jmx.domain</code></td><td><code>management.endpoints.jmx.domain</code></td><td></td></tr><tr><td><code>endpoints.jmx.enabled</code></td><td><code>management.endpoints. jmx.exposure.exclude</code></td><td></td></tr><tr><td><code>endpoints.jmx.static-names</code></td><td><code>management.endpoints.        jmx.static-names</code></td><td></td></tr><tr><td><code>endpoints.jmx.unique-names</code></td><td><code>management.endpoints.        jmx.unique-names</code></td><td></td></tr><tr><td><code>endpoints.jolokia.enabled</code></td><td><code>management.endpoint.     jolokia.enabled</code></td><td></td></tr><tr><td><code>endpoints.jolokia.path</code></td><td><code>management.endpoints.web.path-mapping.jolokia</code></td><td></td></tr><tr><td><code>endpoints.jolokia.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.liquibase.enabled</code></td><td><code>management.endpoint.   liquibase.enabled</code></td><td></td></tr><tr><td><code>endpoints.liquibase.id</code></td><td></td><td>ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>endpoints.liquibase.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.logfile.enabled</code></td><td><code>management.endpoint.     logfile.enabled</code></td><td></td></tr><tr><td><code>endpoints.logfile.external-file</code></td><td><code>management.endpoint.     logfile.external-file</code></td><td></td></tr><tr><td><code>endpoints.logfile.path</code></td><td><code>management.endpoints.web.path-mapping.logfile</code></td><td></td></tr><tr><td><code>endpoints.logfile.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.loggers.enabled</code></td><td><code>management.endpoint.      loggers.enabled</code></td><td></td></tr><tr><td><code>endpoints.loggers.id</code></td><td></td><td>ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>endpoints.loggers.path</code></td><td><code>management.endpoints.web.path-mapping.loggers</code></td><td></td></tr><tr><td><code>endpoints.loggers.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.mappings.enabled</code></td><td><code>management.endpoint.     mappings.enabled</code></td><td></td></tr><tr><td><code>endpoints.mappings.id</code></td><td></td><td>ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>endpoints.mappings.path</code></td><td><code>management.endpoints.web.path-mapping.mappings</code></td><td></td></tr><tr><td><code>endpoints.mappings.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.metrics.enabled</code></td><td><code>management.endpoint.metrics.enabled</code></td><td></td></tr><tr><td><code>endpoints.metrics.filter.counter-submissions</code></td><td></td><td>Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º</td></tr><tr><td><code>endpoints.metrics.filter.enabled</code></td><td></td><td>Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º</td></tr><tr><td><code>endpoints.metrics.filter.gauge-submissions</code></td><td></td><td>Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º</td></tr><tr><td><code>endpoints.metrics.id</code></td><td></td><td>ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>endpoints.metrics.path</code></td><td><code>management.endpoints.web.path-mapping.metrics</code></td><td></td></tr><tr><td><code>endpoints.metrics.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.shutdown.enabled</code></td><td><code>management.endpoint.     shutdown.enabled</code></td><td></td></tr><tr><td><code>endpoints.shutdown.id</code></td><td></td><td>ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>endpoints.shutdown.path</code></td><td><code>management.endpoints.web.path-mapping.shutdown</code></td><td></td></tr><tr><td><code>endpoints.shutdown.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>endpoints.trace.enabled</code></td><td><code>management.endpoint.     httptrace.enabled</code></td><td></td></tr><tr><td><code>endpoints.trace.filter.enabled</code></td><td><code>management.trace.http.enabled</code></td><td></td></tr><tr><td><code>endpoints.trace.id</code></td><td></td><td>ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>endpoints.trace.path</code></td><td><code>management.endpoints.web.path-mapping.httptrace</code></td><td></td></tr><tr><td><code>endpoints.trace.sensitive</code></td><td></td><td>ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>error.path</code></td><td></td><td>Path of the error controller.</td></tr><tr><td><code>flyway.baseline-description</code></td><td><code>spring.flyway.baseline-description</code></td><td></td></tr><tr><td><code>flyway.baseline-on-migrate</code></td><td><code>spring.flyway.baseline-on-migrate</code></td><td></td></tr><tr><td><code>flyway.baseline-version</code></td><td><code>spring.flyway.baseline-version</code></td><td></td></tr><tr><td><code>flyway.check-location</code></td><td><code>spring.flyway.check-location</code></td><td></td></tr><tr><td><code>flyway.clean-on-validation-error</code></td><td><code>spring.flyway.                    clean-on-validation-error</code></td><td></td></tr><tr><td><code>flyway.enabled</code></td><td><code>spring.flyway.enabled</code></td><td></td></tr><tr><td><code>flyway.encoding</code></td><td><code>spring.flyway.encoding</code></td><td></td></tr><tr><td><code>flyway.ignore-failed-future-migration</code></td><td></td><td></td></tr><tr><td><code>flyway.init-sqls</code></td><td><code>spring.flyway.init-sqls</code></td><td></td></tr><tr><td><code>flyway.locations</code></td><td><code>spring.flyway.locations</code></td><td></td></tr><tr><td><code>flyway.out-of-order</code></td><td><code>spring.flyway.out-of-order</code></td><td></td></tr><tr><td><code>flyway.password</code></td><td><code>spring.flyway.password</code></td><td></td></tr><tr><td><code>flyway.placeholder-prefix</code></td><td><code>spring.flyway.placeholder-prefix</code></td><td></td></tr><tr><td><code>flyway.placeholder-replacement</code></td><td><code>spring.flyway.placeholder-replacement</code></td><td></td></tr><tr><td><code>flyway.placeholder-suffix</code></td><td><code>spring.flyway.placeholder-suffix</code></td><td></td></tr><tr><td><code>flyway.placeholders</code></td><td><code>spring.flyway.placeholders</code></td><td></td></tr><tr><td><code>flyway.schemas</code></td><td><code>spring.flyway.schemas</code></td><td></td></tr><tr><td><code>flyway.sql-migration-prefix</code></td><td><code>spring.flyway.sql-migration-prefix</code></td><td></td></tr><tr><td><code>flyway.sql-migration-separator</code></td><td><code>spring.flyway.sql-migration-separator</code></td><td></td></tr><tr><td><code>flyway.sql-migration-suffix</code></td><td><code>spring.flyway.sql-migration-suffixes</code></td><td></td></tr><tr><td><code>flyway.table</code></td><td><code>spring.flyway.table</code></td><td></td></tr><tr><td><code>flyway.target</code></td><td><code>spring.flyway.target</code></td><td></td></tr><tr><td><code>flyway.url</code></td><td><code>spring.flyway.url</code></td><td></td></tr><tr><td><code>flyway.user</code></td><td><code>spring.flyway.user</code></td><td></td></tr><tr><td><code>flyway.validate-on-migrate</code></td><td><code>spring.flyway.validate-on-migrate</code></td><td></td></tr><tr><td><code>jolokia.config</code></td><td><code>management.endpoint.jolokia.config</code></td><td></td></tr><tr><td><code>liquibase.change-log</code></td><td><code>spring.liquibase.change-log</code></td><td></td></tr><tr><td><code>liquibase.check-change-log-location</code></td><td><code>spring.liquibase.check-change-log-location</code></td><td></td></tr><tr><td><code>liquibase.contexts</code></td><td><code>spring.liquibase.contexts</code></td><td></td></tr><tr><td><code>liquibase.default-schema</code></td><td><code>spring.liquibase.default-schema</code></td><td></td></tr><tr><td><code>liquibase.drop-first</code></td><td><code>spring.liquibase.drop-first</code></td><td></td></tr><tr><td><code>liquibase.enabled</code></td><td><code>spring.liquibase.enabled</code></td><td></td></tr><tr><td><code>liquibase.labels</code></td><td><code>spring.liquibase.labels</code></td><td></td></tr><tr><td><code>liquibase.parameters</code></td><td><code>spring.liquibase.parameters</code></td><td></td></tr><tr><td><code>liquibase.password</code></td><td><code>spring.liquibase.password</code></td><td></td></tr><tr><td><code>liquibase.rollback-file</code></td><td><code>spring.liquibase.rollback-file</code></td><td></td></tr><tr><td><code>liquibase.url</code></td><td><code>spring.liquibase.url</code></td><td></td></tr><tr><td><code>liquibase.user</code></td><td><code>spring.liquibase.user</code></td><td></td></tr><tr><td><code>management.add-application-context-header</code></td><td><code>management.server.add-application-context-header</code></td><td></td></tr><tr><td><code>management.address</code></td><td><code>management.server.address</code></td><td></td></tr><tr><td><code>management.context-path</code></td><td><code>management.server.       servlet.context-path</code></td><td></td></tr><tr><td><code>management.port</code></td><td><code>management.server.port</code></td><td></td></tr><tr><td><code>management.security.enabled</code></td><td></td><td>ç°åœ¨æä¾›å…¨å±€ security è‡ªåŠ¨é…ç½®ã€‚</td></tr><tr><td><code>management.security.roles</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>management.security.sessions</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>management.shell.auth.jaas.domain</code></td><td></td><td>CRaSH æ”¯æŒä¸å†å¯ç”¨</td></tr><tr><td><code>management.shell.auth.key.path</code></td><td></td><td>CRaSH æ”¯æŒä¸å†å¯ç”¨</td></tr><tr><td><code>management.shell.auth.simple.user.name</code></td><td></td><td>CRaSH æ”¯æŒä¸å†å¯ç”¨</td></tr><tr><td><code>management.shell.auth.simple.user.password</code></td><td></td><td>CRaSH æ”¯æŒä¸å†å¯ç”¨</td></tr><tr><td><code>management.shell.auth.spring.roles</code></td><td></td><td>CRaSH æ”¯æŒä¸å†å¯ç”¨</td></tr><tr><td><code>management.shell.auth.type</code></td><td></td><td>CRaSH æ”¯æŒä¸å†å¯ç”¨</td></tr><tr><td><code>management.shell.ssh.auth-timeout</code></td><td></td><td>CRaSH æ”¯æŒä¸å†å¯ç”¨</td></tr><tr><td><code>management.shell.ssh.enabled</code></td><td></td><td>CRaSH æ”¯æŒä¸å†å¯ç”¨</td></tr><tr><td><code>management.shell.ssh.idle-timeout</code></td><td></td><td>CRaSH æ”¯æŒä¸å†å¯ç”¨</td></tr><tr><td><code>management.shell.ssh.key-path</code></td><td></td><td>CRaSH æ”¯æŒä¸å†å¯ç”¨</td></tr><tr><td><code>management.shell.ssh.port</code></td><td></td><td>CRaSH æ”¯æŒä¸å†å¯ç”¨</td></tr><tr><td><code>management.shell.telnet.enabled</code></td><td></td><td>CRaSH æ”¯æŒä¸å†å¯ç”¨</td></tr><tr><td><code>management.shell.telnet.port</code></td><td></td><td>CRaSH æ”¯æŒä¸å†å¯ç”¨</td></tr><tr><td><code>management.ssl.ciphers</code></td><td><code>management.server.ssl.ciphers</code></td><td></td></tr><tr><td><code>management.ssl.client-auth</code></td><td><code>management.server.ssl.client-auth</code></td><td></td></tr><tr><td><code>management.ssl.enabled</code></td><td><code>management.server.ssl.enabled</code></td><td></td></tr><tr><td><code>management.ssl.enabled-protocols</code></td><td><code>management.server.ssl.enabled-protocols</code></td><td></td></tr><tr><td><code>management.ssl.key-alias</code></td><td><code>management.server.ssl.key-alias</code></td><td></td></tr><tr><td><code>management.ssl.key-password</code></td><td><code>management.server.ssl.key-password</code></td><td></td></tr><tr><td><code>management.ssl.key-store</code></td><td><code>management.server.ssl.key-store</code></td><td></td></tr><tr><td><code>management.ssl.key-store-password</code></td><td><code>management.server.ssl.key-store-password</code></td><td></td></tr><tr><td><code>management.ssl.key-store-provider</code></td><td><code>management.server.ssl.key-store-provider</code></td><td></td></tr><tr><td><code>management.ssl.key-store-type</code></td><td><code>management.server.ssl.key-store-type</code></td><td></td></tr><tr><td><code>management.ssl.protocol</code></td><td><code>management.server.ssl.protocol</code></td><td></td></tr><tr><td><code>management.ssl.trust-store</code></td><td><code>management.server.ssl.trust-store</code></td><td></td></tr><tr><td><code>management.ssl.trust-store-password</code></td><td><code>management.server.ssl.trust-store-password</code></td><td></td></tr><tr><td><code>management.ssl.trust-store-provider</code></td><td><code>management.server.ssl.trust-store-provider</code></td><td></td></tr><tr><td><code>management.ssl.trust-store-type</code></td><td><code>management.server.ssl.trust-store-type</code></td><td></td></tr><tr><td><code>management.trace.include</code></td><td><code>management.trace.http.include</code></td><td></td></tr><tr><td><code>security.basic.authorize-mode</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.basic.enabled</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.basic.path</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.basic.realm</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.enable-csrf</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.filter-dispatcher-types</code></td><td><code>spring.security.         filter.dispatcher-types</code></td><td></td></tr><tr><td><code>security.filter-order</code></td><td><code>spring.security.filter.order</code></td><td></td></tr><tr><td><code>security.headers.cache</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.headers.content-security-policy</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.headers.content-security-policy-mode</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.headers.content-type</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.headers.frame</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.headers.hsts</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.headers.xss</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.ignored</code></td><td></td><td>security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.oauth2.                authorization.check-token-access</code></td><td></td><td>Spring Security è®¿é—®è§„åˆ™ç”¨äºæ£€æŸ¥ä»¤ç‰Œç«¯ç‚¹ï¼ˆä¾‹å¦‚ï¼ŒSpELè¡¨è¾¾å¼ï¼Œå¦‚â€œisAuthenticatedï¼ˆï¼‰â€ï¼‰</td></tr><tr><td><code>security.oauth2.authorization.realm</code></td><td></td><td>å®¢æˆ·ç«¯èº«ä»½éªŒè¯çš„é¢†åŸŸåç§°</td></tr><tr><td><code>security.oauth2.authorization.token-key-access</code></td><td></td><td>Spring Securityè®¿é—®è§„åˆ™ç”¨äºæ£€æŸ¥ä»¤ç‰Œç«¯ç‚¹ï¼ˆä¾‹å¦‚ï¼ŒSpELè¡¨è¾¾å¼ï¼Œå¦‚â€œisAuthenticatedï¼ˆï¼‰â€ï¼‰</td></tr><tr><td><code>security.oauth2.client.access-token-uri</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.access-token-validity-seconds</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.additional-information</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.authentication-scheme</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.authorities</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.authorized-grant-types</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.auto-approve-scopes</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.client-authentication-scheme</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.client-id</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.client-secret</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.grant-type</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.id</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.pre-            established-redirect-uri</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.refresh-token-validity-seconds</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.registered-redirect-uri</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.resource-ids</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.scope</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.token-name</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.use-current-uri</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.client.user-authorization-uri</code></td><td></td><td></td></tr><tr><td><code>security.oauth2.resource.filter-order</code></td><td><code>0</code></td><td>ç”¨äºéªŒè¯ä»¤ç‰Œçš„è¿‡æ»¤å™¨é“¾çš„é¡ºåºã€‚</td></tr><tr><td><code>security.oauth2.resource.id</code></td><td></td><td>èµ„æºçš„æ ‡è¯†ç¬¦</td></tr><tr><td><code>security.oauth2.resource.jwk.key-set-uri</code></td><td></td><td>è·å–éªŒè¯å¯†é’¥ä»¥éªŒè¯ JWT ä»¤ç‰Œçš„ URI</td></tr><tr><td><code>security.oauth2.resource.jwt.key-uri</code></td><td></td><td>JWT ä»¤ç‰Œçš„ URI</td></tr><tr><td><code>security.oauth2.resource.jwt.key-value</code></td><td></td><td>JWT ä»¤ç‰Œçš„éªŒè¯å¯†é’¥</td></tr><tr><td><code>security.oauth2.resource.prefer-token-info</code></td><td><code>true</code></td><td>ä½¿ç”¨ä»¤ç‰Œä¿¡æ¯ï¼Œå¯ä»¥è®¾ç½®ä¸º falseä»¥ä½¿ç”¨ç”¨æˆ·ä¿¡æ¯</td></tr><tr><td><code>security.oauth2.resource.service-id</code></td><td><code>resource</code></td><td></td></tr><tr><td><code>security.oauth2.resource.token-info-uri</code></td><td></td><td>token decoding ç«¯ç‚¹çš„ URI</td></tr><tr><td><code>security.oauth2.resource.token-type</code></td><td></td><td>ä½¿ç”¨ userInfoUri æ—¶è¦å‘é€çš„ä»¤ç‰Œç±»å‹ã€‚</td></tr><tr><td><code>security.oauth2.resource.user-info-uri</code></td><td></td><td>ç”¨æˆ·ç«¯ç‚¹çš„ URI</td></tr><tr><td><code>security.oauth2.sso.filter-order</code></td><td></td><td>å¦‚æœä¸æä¾›æ˜¾å¼çš„WebSecurityConfigurerAdapterï¼Œåˆ™åº”ç”¨è¿‡æ»¤å™¨é¡ºåºï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ”¹ä¸ºæä¾›é¡ºåºï¼‰ã€‚</td></tr><tr><td><code>security.oauth2.sso.login-path</code></td><td><code>/login</code></td><td>ç™»å½•é¡µé¢çš„è·¯å¾„ï¼Œå³è§¦å‘é‡å®šå‘åˆ° OAuth2 æˆæƒæœåŠ¡å™¨çš„é¡µé¢ã€‚</td></tr><tr><td><code>security.require-ssl</code></td><td></td><td>security è‡ªåŠ¨é…ç½®å·²ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.sessions</code></td><td></td><td>security è‡ªåŠ¨é…ç½®å·²ä¸å†å¯å®šåˆ¶</td></tr><tr><td><code>security.user.name</code></td><td><code>spring.security.user.name</code></td><td></td></tr><tr><td><code>security.user.password</code></td><td><code>spring.security.user.password</code></td><td></td></tr><tr><td><code>security.user.role</code></td><td><code>spring.security.user.roles</code></td><td></td></tr><tr><td><code>server.context-parameters</code></td><td><code>server.servlet.context-parameters</code></td><td></td></tr><tr><td><code>server.context-path</code></td><td><code>server.servlet.context-path</code></td><td></td></tr><tr><td><code>server.display-name</code></td><td><code>server.servlet.             application-display-name</code></td><td></td></tr><tr><td><code>server.jsp-servlet.class-name</code></td><td><code>server.servlet.jsp.class-name</code></td><td></td></tr><tr><td><code>server.jsp-servlet.init-parameters</code></td><td><code>server.servlet.jsp.init-parameters</code></td><td></td></tr><tr><td><code>server.jsp-servlet.registered</code></td><td><code>server.servlet.jsp.registered</code></td><td></td></tr><tr><td><code>server.servlet-path</code></td><td><code>server.servlet.path</code></td><td></td></tr><tr><td><code>server.session.cookie.comment</code></td><td><code>server.servlet.session.cookie.comment</code></td><td></td></tr><tr><td><code>server.session.cookie.domain</code></td><td><code>server.servlet.session.cookie.domain</code></td><td></td></tr><tr><td><code>server.session.cookie.http-only</code></td><td><code>server.servlet.       session.cookie.http-only</code></td><td></td></tr><tr><td><code>server.session.cookie.max-age</code></td><td><code>server.servlet.session.cookie.max-age</code></td><td></td></tr><tr><td><code>server.session.cookie.name</code></td><td><code>server.servlet.session.cookie.name</code></td><td></td></tr><tr><td><code>server.session.cookie.path</code></td><td><code>server.servlet.session.cookie.path</code></td><td></td></tr><tr><td><code>server.session.cookie.secure</code></td><td><code>server.servlet.session.cookie.secure</code></td><td></td></tr><tr><td><code>server.session.persistent</code></td><td><code>server.servlet.session.persistent</code></td><td></td></tr><tr><td><code>server.session.store-dir</code></td><td><code>server.servlet.session.store-dir</code></td><td></td></tr><tr><td><code>server.session.timeout</code></td><td><code>server.servlet.session.timeout</code></td><td></td></tr><tr><td><code>server.session.tracking-modes</code></td><td><code>server.servlet.session.tracking-modes</code></td><td></td></tr><tr><td><code>spring.activemq.pool.configuration.block-if-session-pool-is-full</code></td><td></td><td></td></tr><tr><td><code>spring.activemq.pool.configuration.block-if-session-pool-is-full-timeout</code></td><td></td><td></td></tr><tr><td><code>spring.activemq.pool.configuration.connection-factory</code></td><td></td><td></td></tr><tr><td><code>spring.activemq.pool.configuration.create-connection-on-startup</code></td><td></td><td></td></tr><tr><td><code>spring.activemq.pool.configuration.expiry-timeout</code></td><td></td><td></td></tr><tr><td><code>spring.activemq.pool.configuration.idle-timeout</code></td><td></td><td></td></tr><tr><td><code>spring.activemq.pool.configuration.max-connections</code></td><td></td><td></td></tr><tr><td><code>spring.activemq.pool.configuration.maximum-active-session-per-connection</code></td><td></td><td></td></tr><tr><td><code>spring.activemq.pool.configuration.properties</code></td><td></td><td></td></tr><tr><td><code>spring.activemq.pool.configuration.reconnect-on-exception</code></td><td></td><td></td></tr><tr><td><code>spring.activemq.pool.configuration.time-between-expiration-check-millis</code></td><td></td><td></td></tr><tr><td><code>spring.activemq.pool.configuration.use-anonymous-producers</code></td><td></td><td></td></tr><tr><td><code>spring.application.index</code></td><td></td><td>åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ ID é»˜è®¤æƒ…å†µä¸‹æ˜¯å”¯ä¸€çš„</td></tr><tr><td><code>spring.batch.initializer.enabled</code></td><td><code>spring.batch.initialize-schema</code></td><td></td></tr><tr><td><code>spring.cache.guava.spec</code></td><td></td><td>ç”¨äºåˆ›å»ºç¼“å­˜çš„è§„èŒƒ</td></tr><tr><td><code>spring.cache.hazelcast.config</code></td><td></td><td>ç”¨äºåˆå§‹åŒ– Hazelcast çš„é…ç½®æ–‡ä»¶çš„ä½ç½®</td></tr><tr><td><code>spring.data.cassandra.connect-timeout-millis</code></td><td><code>spring.data.          cassandra.connect-timeout</code></td><td></td></tr><tr><td><code>spring.data.cassandra.read-timeout-millis</code></td><td><code>spring.data.cassandra.read-timeout</code></td><td></td></tr><tr><td><code>spring.data.cassandra.repositories.enabled</code></td><td><code>spring.data.cassandra.    repositories.type</code></td><td></td></tr><tr><td><code>spring.data.couchbase.repositories.enabled</code></td><td><code>spring.data.couchbase.    repositories.type</code></td><td></td></tr><tr><td><code>spring.data.mongodb.repositories.enabled</code></td><td><code>spring.data.mongodb.    repositories.type</code></td><td></td></tr><tr><td><code>spring.data.neo4j.compiler</code></td><td></td><td>ä» Neo4j 3 å¼€å§‹ä¸å†æ”¯æŒ</td></tr><tr><td><code>spring.datasource.dbcp.access-to-underlying-connection-allowed</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.connection-init-sqls</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.default-auto-commit</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.default-catalog</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.default-read-only</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.default-transaction-isolation</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.driver-class-name</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.initial-size</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.log-abandoned</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.login-timeout</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.max-active</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.max-idle</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.max-open-prepared-statements</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.max-wait</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.min-evictable-idle-time-millis</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.min-idle</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.num-tests-per-eviction-run</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.password</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.pool-prepared-statements</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.remove-abandoned</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.remove-abandoned-timeout</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.test-on-borrow</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.test-on-return</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.test-while-idle</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.time-between-eviction-runs-millis</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.url</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.username</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.validation-query</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.dbcp.validation-query-timeout</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.hikari.connection-customizer-class-name</code></td><td></td><td></td></tr><tr><td><code>spring.datasource.initialize</code></td><td><code>spring.datasource.       initialization-mode</code></td><td></td></tr><tr><td><code>spring.devtools.remote.debug.enabled</code></td><td></td><td>è¿œç¨‹ debug å·²ä¸å†æ”¯æŒ</td></tr><tr><td><code>spring.devtools.remote.debug.local-port</code></td><td></td><td>è¿œç¨‹ debug å·²ä¸å†æ”¯æŒ</td></tr><tr><td><code>spring.http.multipart.enabled</code></td><td><code>spring.servlet.multipart.enabled</code></td><td></td></tr><tr><td><code>spring.http.multipart.file-size-threshold</code></td><td><code>spring.servlet.multipart.file-size-threshold</code></td><td></td></tr><tr><td><code>spring.http.multipart.location</code></td><td><code>spring.servlet.multipart.location</code></td><td></td></tr><tr><td><code>spring.http.multipart.max-file-size</code></td><td><code>spring.servlet.multipart.max-file-size</code></td><td></td></tr><tr><td><code>spring.http.multipart.max-request-size</code></td><td><code>spring.servlet.           multipart.max-request-size</code></td><td></td></tr><tr><td><code>spring.http.multipart.resolve-lazily</code></td><td><code>spring.servlet.multipart.resolve-lazily</code></td><td></td></tr><tr><td><code>spring.jpa.hibernate.naming.strategy</code></td><td></td><td>Hibernate 4 çš„è‡ªåŠ¨é…ç½®å·²ä¸å†æä¾›</td></tr><tr><td><code>spring.jta.atomikos.properties.console-log-level</code></td><td><code>warn</code></td><td></td></tr><tr><td><code>spring.messages.cache-seconds</code></td><td><code>spring.messages.cache-duration</code></td><td></td></tr><tr><td><code>spring.metrics.export.aggregate.key-pattern</code></td><td></td><td>Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º</td></tr><tr><td><code>spring.metrics.export.aggregate.prefix</code></td><td></td><td>Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º</td></tr><tr><td><code>spring.metrics.export.delay-millis</code></td><td></td><td>Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º</td></tr><tr><td><code>spring.metrics.export.enabled</code></td><td></td><td>Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º</td></tr><tr><td><code>spring.metrics.export.excludes</code></td><td></td><td>Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º</td></tr><tr><td><code>spring.metrics.export.includes</code></td><td></td><td>Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º</td></tr><tr><td><code>spring.metrics.export.redis.key</code></td><td></td><td>Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º</td></tr><tr><td><code>spring.metrics.export.redis.prefix</code></td><td></td><td>Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º</td></tr><tr><td><code>spring.metrics.export.send-latest</code></td><td></td><td>Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º</td></tr><tr><td><code>spring.metrics.export.statsd.host</code></td><td><code>management.metrics.    export.statsd.host</code></td><td></td></tr><tr><td><code>spring.metrics.export.statsd.port</code></td><td><code>management.metrics.   export.statsd.port</code></td><td></td></tr><tr><td><code>spring.metrics.export.statsd.prefix</code></td><td></td><td>Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º</td></tr><tr><td><code>spring.metrics.export.triggers</code></td><td></td><td>Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º</td></tr><tr><td><code>spring.mobile.devicedelegatingviewresolver.enable-fallback</code></td><td><code>false</code></td><td>å¯ç”¨å¯¹å›é€€è§£å†³æ–¹æ¡ˆçš„æ”¯æŒ</td></tr><tr><td><code>spring.mobile.devicedelegatingviewresolver.enabled</code></td><td><code>false</code></td><td>å¯ç”¨ device è§†å›¾è§£æå™¨</td></tr><tr><td><code>spring.mobile.devicedelegatingviewresolver.mobile-prefix</code></td><td><code>mobile/</code></td><td>ç”¨äºæŸ¥çœ‹ç§»åŠ¨è®¾å¤‡åç§°çš„å‰ç¼€</td></tr><tr><td><code>spring.mobile.devicedelegatingviewresolver.mobile-suffix</code></td><td>``</td><td>é™„åŠ åç¼€ä»¥æŸ¥çœ‹ç§»åŠ¨è®¾å¤‡çš„åç§°</td></tr><tr><td><code>spring.mobile.devicedelegatingviewresolver.normal-prefix</code></td><td>``</td><td>ç”¨äºæŸ¥çœ‹æ™®é€šè®¾å¤‡åç§°çš„å‰ç¼€.</td></tr><tr><td><code>spring.mobile.devicedelegatingviewresolver.normal-suffix</code></td><td>``</td><td>é™„åŠ åç¼€ä»¥æŸ¥çœ‹æ™®é€šè®¾å¤‡çš„åç§°</td></tr><tr><td><code>spring.mobile.devicedelegatingviewresolver.tablet-prefix</code></td><td><code>tablet/</code></td><td>å‰ç¼€é¢„è®¾ä¸ºæŸ¥çœ‹å¹³æ¿ç”µè„‘è®¾å¤‡çš„åç§°</td></tr><tr><td><code>spring.mobile.devicedelegatingviewresolver.tablet-suffix</code></td><td>``</td><td>é™„åŠ åç¼€ä»¥æŸ¥çœ‹å¹³æ¿ç”µè„‘è®¾å¤‡çš„åç§°</td></tr><tr><td><code>spring.mobile.sitepreference.enabled</code></td><td><code>true</code></td><td>å¯ç”¨ SitePreferenceHandler.</td></tr><tr><td><code>spring.mvc.media-types</code></td><td><code>spring.mvc.    contentnegotiation.media-types</code></td><td></td></tr><tr><td><code>spring.rabbitmq.listener.acknowledge-mode</code></td><td></td><td></td></tr><tr><td><code>spring.rabbitmq.listener.auto-startup</code></td><td></td><td></td></tr><tr><td><code>spring.rabbitmq.listener.concurrency</code></td><td></td><td></td></tr><tr><td><code>spring.rabbitmq.listener.default-requeue-rejected</code></td><td></td><td></td></tr><tr><td><code>spring.rabbitmq.listener.idle-event-interval</code></td><td></td><td></td></tr><tr><td><code>spring.rabbitmq.listener.max-concurrency</code></td><td></td><td></td></tr><tr><td><code>spring.rabbitmq.listener.prefetch</code></td><td></td><td></td></tr><tr><td><code>spring.rabbitmq.listener.retry.enabled</code></td><td><code>false</code></td><td>æ˜¯å¦å¯ç”¨å‘å¸ƒé‡è¯•</td></tr><tr><td><code>spring.rabbitmq.listener.retry.initial-interval</code></td><td><code>1000</code></td><td>ç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡å°è¯•å‘å¸ƒæˆ–ä¼ é€’è®¯æ¯çš„æ—¶é—´é—´éš”</td></tr><tr><td><code>spring.rabbitmq.listener.retry.max-attempts</code></td><td><code>3</code></td><td>å°è¯•å‘å¸ƒæˆ–ä¼ é€’é‚®ä»¶çš„æœ€å¤§æ¬¡æ•°</td></tr><tr><td><code>spring.rabbitmq.listener.retry.max-interval</code></td><td><code>10000</code></td><td>å°è¯•ä¹‹é—´çš„æœ€å¤§é—´éš”</td></tr><tr><td><code>spring.rabbitmq.listener.retry.multiplier</code></td><td><code>1</code></td><td>äºå…ˆå‰é‡è¯•é—´éš”çš„å€æ•°</td></tr><tr><td><code>spring.rabbitmq.listener.retry.stateless</code></td><td><code>true</code></td><td>æ— è®ºé‡è¯•æ˜¯æ— çŠ¶æ€è¿˜æ˜¯æœ‰çŠ¶æ€</td></tr><tr><td><code>spring.rabbitmq.listener.transaction-size</code></td><td></td><td></td></tr><tr><td><code>spring.redis.pool.max-active</code></td><td><code>spring.redis.jedis.pool.max-idle</code></td><td></td></tr><tr><td><code>spring.redis.pool.max-idle</code></td><td><code>spring.redis.jedis.pool.max-idle</code></td><td></td></tr><tr><td><code>spring.redis.pool.max-wait</code></td><td><code>spring.redis.jedis.pool.max-wait</code></td><td></td></tr><tr><td><code>spring.redis.pool.min-idle</code></td><td><code>spring.redis.jedis.pool.min-idle</code></td><td></td></tr><tr><td><code>spring.resources.cache-period</code></td><td><code>spring.resources.cache.period</code></td><td></td></tr><tr><td><code>spring.sendgrid.password</code></td><td></td><td>ä¸å†æ”¯æŒä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç  ( ä½¿ç”¨ spring.sendgrid.api-key ä»£æ›¿ )</td></tr><tr><td><code>spring.sendgrid.username</code></td><td></td><td>ä¸å†æ”¯æŒä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç  ( ä½¿ç”¨ spring.sendgrid.api-key ä»£æ›¿ )</td></tr><tr><td><code>spring.session.jdbc.initializer.enabled</code></td><td><code>spring.session.         jdbc.initialize-schema</code></td><td></td></tr><tr><td><code>spring.session.mongo.collection-name</code></td><td><code>spring.session.mongodb.collection-name</code></td><td></td></tr><tr><td><code>spring.social.auto-connection-views</code></td><td><code>false</code></td><td>ä¸ºæ”¯æŒçš„ç”Ÿäº§è€…å¯ç”¨è¿æ¥çŠ¶æ€è§†å›¾</td></tr><tr><td><code>spring.social.facebook.app-id</code></td><td></td><td>Application id.</td></tr><tr><td><code>spring.social.facebook.app-secret</code></td><td></td><td>Application secret.</td></tr><tr><td><code>spring.social.linkedin.app-id</code></td><td></td><td>Application id.</td></tr><tr><td><code>spring.social.linkedin.app-secret</code></td><td></td><td>Application secret.</td></tr><tr><td><code>spring.social.twitter.app-id</code></td><td></td><td>Application id.</td></tr><tr><td><code>spring.social.twitter.app-secret</code></td><td></td><td>Application secret.</td></tr><tr><td><code>spring.thymeleaf.content-type</code></td><td><code>spring.thymeleaf.      servlet.content-type</code></td></tr></tbody></table><h3 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h3><h3 id="ç›¸å…³æ–‡ç« -1"><a href="#ç›¸å…³æ–‡ç« -1" class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h3><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-Migration-Guide/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å—</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-new-features/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2018/04/13/Spring_Boot_2.0_Configuration_Changelog/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2018/04/15/springboot2_code/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º</a></p><p>5ã€<a href="http://www.54tianzhisheng.cn/2018/04/18/spring_boot2_project/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ</a></p><p>6ã€<a href="http://www.54tianzhisheng.cn/2018/04/19/SpringBootApplication-annotation/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring boot 2.0 ä¸­ SpringBootApplication æ³¨è§£è¯¦è§£</a></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>è‹±æ–‡å‚è€ƒï¼š<a href="">https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Configuration-Changelog</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws2.sinaimg.cn/large/006tKfTcgy1fqc4n57tj4j31hc0zktmm.jpg&quot; alt=&quot;pocket-watch-3156771_1920&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>å†™è¿™ä¹ˆå¤šç³»åˆ—åšå®¢ï¼Œæ€ªä¸å¾—æ‰¾ä¸åˆ°å¥³æœ‹å‹</title>
    <link href="http://yoursite.com/2018/03/27/blogs/"/>
    <id>http://yoursite.com/2018/03/27/blogs/</id>
    <published>2018-03-26T16:00:00.000Z</published>
    <updated>2018-03-27T15:18:02.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fprrv5n1p2j31hc0u0tm6.jpg" alt="nature-3054445_1920"></p><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>å¥½å‡ å‘¨æ²¡æ›´æ–°åšå®¢äº†ï¼Œå¯¹ä¸æ–­æ”¯æŒæˆ‘åšå®¢çš„ç«¥é‹ä»¬è¯´å£°ï¼šâ€œæŠ±æ­‰äº†ï¼â€ã€‚è‡ªå·±è¿™æ®µæ—¶é—´ç¡®å®æ¯”è¾ƒå¿™ï¼Œè€Œä¸”è¿˜åœ¨æŠ½ç©ºå®Œæˆå­¦æ ¡çš„æ¯•ä¸šè®¾è®¡ã€‚ä»Šå¤©æ™šä¸ŠæŠ½ç©ºæŠŠå¤§å­¦æœŸé—´å†™è¿‡çš„åšå®¢å¼„ä¸€ä¸ªç³»åˆ—æ–‡ç« åˆé›†ï¼Œç®—æ˜¯å¯¹å¤§å­¦è¿™å››å¹´çš„ä¸€ä¸ªæ€»ç»“ï¼Œè¯æ˜è‡ªå·±æ²¡ç™½è¿‡ã€‚</p><a id="more"></a><p>ç†Ÿæ‚‰æˆ‘çš„äººéƒ½çŸ¥é“æˆ‘å†™åšå®¢çš„æ—¶é—´æ¯”è¾ƒæ—©ï¼Œè€Œä¸”åšæŒçš„æ—¶é—´ä¹Ÿæ¯”è¾ƒä¹…ï¼Œä¸€ç›´åˆ°ç°åœ¨ä¹Ÿæ˜¯ä¸€ç›´ä¿æŒç€æ›´æ–°çŠ¶æ€ã€‚æœ€æ—©æœ€æ—©å¼€å§‹å†™åšå®¢æ˜¯åœ¨ CSDN ä¸Šå†™çš„ï¼Œç„¶ååœ¨ç®€ä¹¦ä¹Ÿå†™è¿‡ä¸€æ®µæ—¶é—´ï¼Œåæ¥æ”¾å¼ƒäº†ç®€ä¹¦è½¬æˆ˜äº†æ˜é‡‘ï¼Œä»¥ä¸‹å›¾ç‰‡æ˜¯è‡ªå·±åœ¨æ˜é‡‘è¿™ä¸€å¹´çš„æˆæœï¼Œå¿« <strong>1.5 ä¸‡</strong>å…³æ³¨äº†ï¼Œå“ˆå“ˆå“ˆã€‚</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fprrv4ovhqj31kw0iaadw.jpg" alt="21"></p><p>å»å¹´è¿‡å¹´å‰è¿˜æ”¶åˆ°æ˜é‡‘é€æ¥çš„ä¸“å±ç¤¼ç‰©ï¼ŒçœŸæ˜¯æ¿€åŠ¨ï¼Œæ„Ÿè°¢æ˜é‡‘ï¼Œå¸Œæœ›è¶ŠåŠè¶Šå¥½ï¼</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fprrv2qhutj31kw23vu0x.jpg" alt="IMG_20180206_125142"></p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fprrv7e4wvj31kw23vb29.jpg" alt="IMG_20180206_125159"></p><p>ç»†æ•°æ–‡ç« åï¼Œå‘ç°è‡ªå·±åœ¨å®ä¹ çš„è¿™æ®µæ—¶é—´å†™çš„åšå®¢ä¹ŸæŒºå¤šçš„ï¼Œè€Œä¸”è´¨é‡è¿˜æ¯”è¾ƒé«˜ï¼Œç»å¸¸ä¸Šå¼€å‘è€…å¤´æ¡ã€æ˜é‡‘ç­‰å¹³å°çš„é¦–é¡µæ¨èã€‚åœ¨æ­¤ï¼Œæ„Ÿè°¢å®ä¹ æœŸé—´ç»„å†…å¤§ä½¬ä»¬çš„å„ç§å¸®åŠ©ï¼</p><p>è¿™é‡Œå†æ¬¡è¯´ä¸‹å†™åšå®¢çš„å¥½å¤„ï¼š</p><ul><li>å¾ˆå¥½çš„ç”¨æ¥æ€»ç»“è‡ªå·±æ‰€å­¦çš„çŸ¥è¯†</li><li>é‡åˆ°é‚£ä¹ˆä¸€ç¾¤ä¹Ÿå†™åšå®¢çš„å¤§ä½¬ï¼Œæœ‰å…±åŒè¯é¢˜èŠäº†</li><li>é¢è¯•åŠ åˆ†ï¼ˆåœ¨ç®€å†ä¸Šæ”¾ä¸Šè‡ªå·±çš„ä¸ªäººç½‘ç«™é“¾æ¥ï¼Œé¢è¯•å®˜å°±å¯ä»¥æ›´å¥½çš„äº†è§£ä½ ï¼ŒçŸ¥é“ä½ æ‰€å­¦çŸ¥è¯†çš„æ·±åº¦å’Œå¹¿åº¦ï¼‰</li></ul><p>ä¸è¦å°çœ‹ä½ çš„æ¯ä¸€ç¯‡ä¸èµ·çœ¼åšå®¢ï¼Œç”¨ä¸€ä¸ªèš‚èšé‡‘æœå¤§ä½¬è·Ÿæˆ‘è¯´çš„è¯å«åšï¼š<strong>åšç§¯è–„å‘</strong>ï¼</p><p>ä¸å¤šè¯´äº†ï¼Œå¦‚æœæƒ³å’Œæˆ‘äº¤æµçš„å¯ä»¥åŠ æˆ‘ qq ç¾¤ï¼š<strong>528776268</strong>    å’Œæˆ‘çš„å¾®ä¿¡ï¼š<strong>zhisheng_tian</strong></p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/03/27/blogs/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/03/27/blogs/</a></p><h3 id="ç³»åˆ—æ–‡ç« åˆé›†"><a href="#ç³»åˆ—æ–‡ç« åˆé›†" class="headerlink" title="ç³»åˆ—æ–‡ç« åˆé›†"></a>ç³»åˆ—æ–‡ç« åˆé›†</h3><h4 id="Spring-Boot-ç³»åˆ—æ–‡ç« "><a href="#Spring-Boot-ç³»åˆ—æ–‡ç« " class="headerlink" title="Spring Boot ç³»åˆ—æ–‡ç« "></a><strong>Spring Boot ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/01/05/SpringBoot-Kafka/" target="_blank" rel="noopener">Spring Bootç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šSpringBoot Kafka æ•´åˆä½¿ç”¨</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/01/17/SpringBoot-Admin/" target="_blank" rel="noopener">Spring Bootç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šSpringBoot Admin ä½¿ç”¨æŒ‡å—</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2018/01/26/SpringBoot-RabbitMQ/" target="_blank" rel="noopener">Spring Bootç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šSpringBoot RabbitMQ æ•´åˆä½¿ç”¨</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2018/01/27/SpringBoot-ActiveMQ/" target="_blank" rel="noopener">Spring Bootç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šSpringBoot ActiveMQ æ•´åˆä½¿ç”¨</a></p><p>5ã€<a href="http://www.54tianzhisheng.cn/2018/01/28/RabbitMQ/" target="_blank" rel="noopener">Spring Bootç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šSpringBoot RabbitMQ æ•´åˆè¿›é˜¶ç‰ˆ</a></p><p>6ã€<a href="http://www.54tianzhisheng.cn/2018/02/07/SpringBoot-RocketMQ/" target="_blank" rel="noopener">Spring Bootç³»åˆ—æ–‡ç« ï¼ˆå…­ï¼‰ï¼šSpringBoot RocketMQ æ•´åˆä½¿ç”¨å’Œç›‘æ§</a></p><p>7ã€æ›´å¤šè¯·æœŸå¾…</p><h4 id="Spring-Boot-2-0-ç³»åˆ—æ–‡ç« "><a href="#Spring-Boot-2-0-ç³»åˆ—æ–‡ç« " class="headerlink" title="Spring Boot 2.0 ç³»åˆ—æ–‡ç« "></a><strong>Spring Boot 2.0 ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-Migration-Guide/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å—</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-new-features/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£</a></p><p>3ã€åé¢ç»å¯¹æœ‰æ›´å¤šæ–‡ç« å‡ºç°çš„</p><h4 id="Docker-ç³»åˆ—æ–‡ç« "><a href="#Docker-ç³»åˆ—æ–‡ç« " class="headerlink" title="Docker ç³»åˆ—æ–‡ç« "></a><strong>Docker ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2017/11/26/Docker-harbor/" target="_blank" rel="noopener">Dockerç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šåŸºäº Harbor æ­å»º Docker ç§æœ‰é•œåƒä»“åº“</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/01/25/Docker-install/" target="_blank" rel="noopener">Dockerç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šMac å®‰è£… Docker åŠå¸¸ç”¨å‘½ä»¤</a></p><p>3ã€åŒæ ·ï¼Œåé¢ä¹Ÿä¼šæŒç»­æ›´æ–°</p><h4 id="ElasticSearch-ç³»åˆ—æ–‡ç« "><a href="#ElasticSearch-ç³»åˆ—æ–‡ç« " class="headerlink" title="ElasticSearch ç³»åˆ—æ–‡ç« "></a><strong>ElasticSearch ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2017/09/08/Elasticsearch-analyzers/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šElasticsearch é»˜è®¤åˆ†è¯å™¨å’Œä¸­åˆ†åˆ†è¯å™¨ä¹‹é—´çš„æ¯”è¾ƒåŠä½¿ç”¨æ–¹æ³•</a></p><p>2ã€ <a href="http://www.54tianzhisheng.cn/2017/09/09/Elasticsearch-install/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šå…¨æ–‡æœç´¢å¼•æ“ Elasticsearch é›†ç¾¤æ­å»ºå…¥é—¨æ•™ç¨‹</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2017/10/15/ElasticSearch-cluster-health-metrics/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šElasticSearch é›†ç¾¤ç›‘æ§</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2017/10/18/ElasticSearch-nodes-metrics/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šElasticSearch å•ä¸ªèŠ‚ç‚¹ç›‘æ§</a></p><p>5ã€<a href="http://www.54tianzhisheng.cn/2017/12/25/ELK/" target="_blank" rel="noopener">Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šELK å®æ—¶æ—¥å¿—åˆ†æå¹³å°ç¯å¢ƒæ­å»º</a></p><p>6ã€ä¹Ÿæœ‰æ›´å¤šæ·±å…¥çš„æ–‡ç« </p><h4 id="æ­å»ºåšå®¢ç³»åˆ—æ–‡ç« "><a href="#æ­å»ºåšå®¢ç³»åˆ—æ–‡ç« " class="headerlink" title="æ­å»ºåšå®¢ç³»åˆ—æ–‡ç« "></a><strong>æ­å»ºåšå®¢ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2017/03/28/%E5%88%A9%E7%94%A8Github%20Page%20%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/" target="_blank" rel="noopener">åˆ©ç”¨Github Page æ­å»ºä¸ªäººåšå®¢ç½‘ç«™</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2017/04/13/Hexo-yilia-changyan/" target="_blank" rel="noopener">Github pages + Hexo åšå®¢ yilia ä¸»é¢˜ä½¿ç”¨ç•…è¨€è¯„è®ºç³»ç»Ÿ</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2017/12/18/hexo-yilia/" target="_blank" rel="noopener">Hexo + yilia æ­å»ºåšå®¢å¯èƒ½ä¼šé‡åˆ°çš„æ‰€æœ‰ç–‘é—®</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/Hexo-yilia-toc/" target="_blank" rel="noopener">Hexo + yilia ä¸»é¢˜å®ç°æ–‡ç« ç›®å½•</a></p><p>5ã€è¿™ä¸ªç³»åˆ—çœ‹æƒ…å†µï¼Œå¯èƒ½è¿˜ä¼šæœ‰</p><h4 id="Java-ç³»åˆ—æ–‡ç« "><a href="#Java-ç³»åˆ—æ–‡ç« " class="headerlink" title="Java ç³»åˆ—æ–‡ç« "></a><strong>Java ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/String-new/" target="_blank" rel="noopener">å…³äºString s = new String(â€œxyzâ€); åˆ›å»ºå‡ ä¸ªå¯¹è±¡çš„é—®é¢˜</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/Java-Thread/" target="_blank" rel="noopener">ã€ŠJava å¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯ã€‹å­¦ä¹ ç¬”è®°åŠæ€»ç»“</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/java-var/" target="_blank" rel="noopener">ä»å¯¹è±¡æ·±å…¥åˆ†æ Java ä¸­å®ä¾‹å˜é‡å’Œç±»å˜é‡çš„åŒºåˆ«</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%A9%B6Java%20%E4%B8%AD%20finally%20%E8%AF%AD%E5%8F%A5%E5%9D%97/" target="_blank" rel="noopener">æ·±åº¦æ¢ç©¶Java ä¸­ finally è¯­å¥å—</a></p><p>5ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/%E8%A7%A3%E5%86%B3jdk1.8%E4%B8%AD%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%E5%A4%B1%E8%B4%A5%EF%BC%88handshake_failure%EF%BC%89%E9%97%AE%E9%A2%98/" target="_blank" rel="noopener">è§£å†³jdk1.8ä¸­å‘é€é‚®ä»¶å¤±è´¥ï¼ˆhandshake_failureï¼‰é—®é¢˜</a></p><p>6ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90%20Java%20Web%20%E4%B8%AD%E7%9A%84%E4%B8%AD%E6%96%87%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98/" target="_blank" rel="noopener">æ·±å…¥åˆ†æ Java Web ä¸­çš„ä¸­æ–‡ç¼–ç é—®é¢˜</a></p><p>7ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/%E5%A5%87%E6%80%AA%E7%9A%84Java%E9%A2%98%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88128%20==%20128%E8%BF%94%E5%9B%9E%E4%B8%BAFalse%EF%BC%8C%E8%80%8C127%20==%20127%E4%BC%9A%E8%BF%94%E5%9B%9E%E4%B8%BATrue-/" target="_blank" rel="noopener">å¥‡æ€ªçš„Javaé¢˜ï¼šä¸ºä»€ä¹ˆ128 == 128è¿”å›ä¸ºFalseï¼Œè€Œ127 == 127ä¼šè¿”å›ä¸ºTrue?</a></p><p>8ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/java%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6/" target="_blank" rel="noopener">Javaè¯»å–æ–‡ä»¶</a></p><p>9ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/HashMap-Hashtable/" target="_blank" rel="noopener">HashMapã€Hashtableã€HashSet å’Œ ConcurrentHashMap çš„æ¯”è¾ƒ</a></p><p>10ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/Java%E8%BF%9E%E6%8E%A5Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%89%E7%A7%8D%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F/" target="_blank" rel="noopener">Javaè¿æ¥Oracleæ•°æ®åº“çš„ä¸‰ç§è¿æ¥æ–¹å¼</a></p><p>11ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/Java%20NIO%20%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/" target="_blank" rel="noopener">Java NIO ç³»åˆ—æ•™ç¨‹</a></p><p>12ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/Java-16-lession/" target="_blank" rel="noopener">ã€Šç–¯ç‹‚ Java çªç ´ç¨‹åºå‘˜åŸºæœ¬åŠŸçš„ 16 è¯¾ã€‹è¯»ä¹¦ç¬”è®°</a></p><p>13ã€<a href="http://www.54tianzhisheng.cn/2017/06/17/%E8%AF%A6%E7%BB%86%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90%20Java%20ClassLoader%20%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/" target="_blank" rel="noopener">è¯¦ç»†æ·±å…¥åˆ†æ Java ClassLoader å·¥ä½œæœºåˆ¶</a></p><p>14ã€<a href="http://www.54tianzhisheng.cn/2017/06/17/%E8%AF%A6%E8%A7%A3%20Filter%20%E8%BF%87%E6%BB%A4%E5%99%A8/" target="_blank" rel="noopener">è¯¦è§£ Filter è¿‡æ»¤å™¨</a></p><p>15ã€<a href="http://www.54tianzhisheng.cn/2017/06/23/java-io/" target="_blank" rel="noopener">Java IOæµå­¦ä¹ è¶…è¯¦ç»†æ€»ç»“ï¼ˆå›¾æ–‡å¹¶èŒ‚ï¼‰</a></p><p>16ã€<a href="http://www.54tianzhisheng.cn/2017/07/09/servlet/" target="_blank" rel="noopener">é€šè¿‡æºç è¯¦è§£ Servlet</a></p><p>17ã€<a href="http://www.54tianzhisheng.cn/2017/07/25/Java-performance-tuning/" target="_blank" rel="noopener">Java æ€§èƒ½è°ƒä¼˜éœ€è¦æ ¼å¤–æ³¨æ„çš„ç»†èŠ‚</a></p><p>18ã€<a href="http://www.54tianzhisheng.cn/2017/07/29/ThreadPool/" target="_blank" rel="noopener">Java çº¿ç¨‹æ± è‰ºæœ¯æ¢ç´¢</a></p><p>19ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/JVM%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7jps%E3%80%81jstack%E3%80%81jmap%E3%80%81jhat%E3%80%81jstat%E7%AD%89%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/" target="_blank" rel="noopener">JVMæ€§èƒ½è°ƒä¼˜ç›‘æ§å·¥å…·jpsã€jstackã€jmapã€jhatã€jstatç­‰ä½¿ç”¨è¯¦è§£</a></p><p>20ã€è¿™ä¸ªå¿…é¡»çš„æŒç»­æ›´æ–°ä¸‹å»</p><h4 id="Maven-ç³»åˆ—æ–‡ç« "><a href="#Maven-ç³»åˆ—æ–‡ç« " class="headerlink" title="Maven  ç³»åˆ—æ–‡ç« "></a><strong>Maven  ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2017/10/14/Nexus3-Maven/" target="_blank" rel="noopener">Centos7 æ­å»ºæœ€æ–° Nexus3 Maven ç§æœ</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2017/11/11/Maven-dependencies-dependencyManagement/" target="_blank" rel="noopener">Maven ä¸­ dependencies ä¸ dependencyManagement çš„åŒºåˆ«</a></p><h4 id="Kafka-ç³»åˆ—æ–‡ç« "><a href="#Kafka-ç³»åˆ—æ–‡ç« " class="headerlink" title="Kafka ç³»åˆ—æ–‡ç« "></a><strong>Kafka ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/01/04/Kafka/" target="_blank" rel="noopener">Kafka å®‰è£…åŠå¿«é€Ÿå…¥é—¨</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/01/05/SpringBoot-Kafka/" target="_blank" rel="noopener">Spring Bootç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šSpringBoot Kafka æ•´åˆä½¿ç”¨</a></p><h4 id="Mybatis-ç³»åˆ—æ–‡ç« "><a href="#Mybatis-ç³»åˆ—æ–‡ç« " class="headerlink" title="Mybatis ç³»åˆ—æ–‡ç« "></a><strong>Mybatis ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://blog.csdn.net/tzs_1041218129/article/details/53404326" target="_blank" rel="noopener">é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis&lt;ä¸€&gt;</a></p><p>2ã€<a href="http://blog.csdn.net/tzs_1041218129/article/details/53449052" target="_blank" rel="noopener">é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis&lt;äºŒ&gt;</a></p><p>3ã€<a href="http://blog.csdn.net/tzs_1041218129/article/details/53456677" target="_blank" rel="noopener">é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis&lt;ä¸‰&gt;</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2017/06/15/%E9%80%9A%E8%BF%87%E9%A1%B9%E7%9B%AE%E9%80%90%E6%AD%A5%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Mybatis(%E5%9B%9B" target="_blank" rel="noopener">é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatisï¼ˆå››)</a>/)</p><p>5ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/MyBatis-foreach/" target="_blank" rel="noopener">MyBatisçš„foreachè¯­å¥è¯¦è§£</a></p><p>6ã€æœŸå¾…å®ƒçš„æºç è§£ææ–‡ç« å—ï¼Ÿ</p><h4 id="Nginx-ç³»åˆ—æ–‡ç« "><a href="#Nginx-ç³»åˆ—æ–‡ç« " class="headerlink" title="Nginx ç³»åˆ—æ–‡ç« "></a><strong>Nginx ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2017/08/18/Ubuntu-install-Nginx/" target="_blank" rel="noopener">Ubuntu16.10 å®‰è£… Nginx</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2017/08/05/Nginx/" target="_blank" rel="noopener">Nginx åŸºæœ¬çŸ¥è¯†å¿«é€Ÿå…¥é—¨</a></p><h4 id="Python-çˆ¬è™«ç³»åˆ—æ–‡ç« "><a href="#Python-çˆ¬è™«ç³»åˆ—æ–‡ç« " class="headerlink" title="Python çˆ¬è™«ç³»åˆ—æ–‡ç« "></a><strong>Python çˆ¬è™«ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/Python%E7%88%AC%E8%99%AB%E5%AE%9E%E6%88%98%E4%B9%8B%E7%88%AC%E5%8F%96%E7%99%BE%E5%BA%A6%E8%B4%B4%E5%90%A7%E5%B8%96%E5%AD%90/" target="_blank" rel="noopener">Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å–ç™¾åº¦è´´å§å¸–å­</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/Pyspider%E6%A1%86%E6%9E%B6%20%E2%80%94%E2%80%94%20Python%E7%88%AC%E8%99%AB%E5%AE%9E%E6%88%98%E4%B9%8B%E7%88%AC%E5%8F%96%20V2EX%20%E7%BD%91%E7%AB%99%E5%B8%96%E5%AD%90/" target="_blank" rel="noopener">Pyspideræ¡†æ¶ â€”â€” Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å– V2EX ç½‘ç«™å¸–å­</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/Python%E7%88%AC%E8%99%AB%E5%AE%9E%E6%88%98%E4%B9%8B%E7%88%AC%E5%8F%96%E7%B3%97%E4%BA%8B%E7%99%BE%E7%A7%91%E6%AE%B5%E5%AD%90/" target="_blank" rel="noopener">Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å–ç³—äº‹ç™¾ç§‘æ®µå­</a></p><p>4ã€è¿™ä¸ªä¼°è®¡å¾—ç­‰æœ‰æœºä¼šå†æ¬¡å­¦ Python æ—¶å†å†™</p><h4 id="RocketMQ-ç³»åˆ—æ–‡ç« "><a href="#RocketMQ-ç³»åˆ—æ–‡ç« " class="headerlink" title="RocketMQ ç³»åˆ—æ–‡ç« "></a><strong>RocketMQ ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/02/05/RocketMQ/" target="_blank" rel="noopener">RocketMQç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šRocketMQ åˆæ¢</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/02/06/RocketMQ-install/" target="_blank" rel="noopener">RocketMQç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šRocketMQ å®‰è£…åŠå¿«é€Ÿå…¥é—¨</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2018/02/07/rocketmq-example/" target="_blank" rel="noopener">RocketMQç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šRocketMQ ç®€å•çš„æ¶ˆæ¯ç¤ºä¾‹</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2018/02/07/SpringBoot-RocketMQ/" target="_blank" rel="noopener">Spring Bootç³»åˆ—æ–‡ç« ï¼ˆå…­ï¼‰ï¼šSpringBoot RocketMQ æ•´åˆä½¿ç”¨å’Œç›‘æ§</a></p><h4 id="Spring-MVC-ç³»åˆ—æ–‡ç« "><a href="#Spring-MVC-ç³»åˆ—æ–‡ç« " class="headerlink" title="Spring MVC ç³»åˆ—æ–‡ç« "></a><strong>Spring MVC ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/Spring%20MVC%20+%20Hibernate%20JPA%20+%20Bootstrap%20%E6%90%AD%E5%BB%BA%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/" target="_blank" rel="noopener">Spring MVCç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šSpring MVC + Hibernate JPA + Bootstrap æ­å»ºçš„åšå®¢ç³»ç»Ÿ Demo</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2017/06/13/Spring%20MVC+Hibernate%20JPA%E6%90%AD%E5%BB%BA%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E4%B8%AD%E6%89%80%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/" target="_blank" rel="noopener">Spring MVCç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šSpring MVC+Hibernate JPAæ­å»ºçš„åšå®¢ç³»ç»Ÿé¡¹ç›®ä¸­æ‰€é‡åˆ°çš„å‘</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2017/07/14/Spring-MVC01/" target="_blank" rel="noopener">Spring MVCç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šçœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€” ç½‘ç«™åŸºç¡€çŸ¥è¯†</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2017/07/14/Spring-MVC02/" target="_blank" rel="noopener">Spring MVCç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šçœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€” ä¿¯è§† Spring MVC</a></p><p>5ã€<a href="http://www.54tianzhisheng.cn/2017/07/21/Spring-MVC03/" target="_blank" rel="noopener">Spring MVCç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šçœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€” Spring MVC ç»„ä»¶åˆ†æ</a></p><p>6ã€<a href="http://www.54tianzhisheng.cn/2017/06/16/%E9%80%9A%E8%BF%87%E9%A1%B9%E7%9B%AE%E9%80%90%E6%AD%A5%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Spring%20MVC%EF%BC%88%E4%B8%80%EF%BC%89/" target="_blank" rel="noopener">é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Spring MVCï¼ˆä¸€ï¼‰</a></p><h4 id="Netty-ç³»åˆ—æ–‡ç« "><a href="#Netty-ç³»åˆ—æ–‡ç« " class="headerlink" title="Netty ç³»åˆ—æ–‡ç« "></a><strong>Netty ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2017/12/08/netty-01-env/" target="_blank" rel="noopener">Nettyç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šNetty æºç é˜…è¯»ä¹‹åˆå§‹ç¯å¢ƒæ­å»º</a></p><p>2ã€è¿™ä¸ªç³»åˆ—è¿Ÿæ—©ä¼šæ›´æ–°çš„ã€‚</p><h4 id="å‰ç«¯ç³»åˆ—æ–‡ç« "><a href="#å‰ç«¯ç³»åˆ—æ–‡ç« " class="headerlink" title="å‰ç«¯ç³»åˆ—æ–‡ç« "></a><strong>å‰ç«¯ç³»åˆ—æ–‡ç« </strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2017/06/18/Bootstrap%E5%85%A5%E9%97%A8%E9%9C%80%E6%8E%8C%E6%8F%A1%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%88%E4%B8%80%EF%BC%89/" target="_blank" rel="noopener">Bootstrapå…¥é—¨éœ€æŒæ¡çš„çŸ¥è¯†ç‚¹ï¼ˆä¸€ï¼‰</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2017/06/18/Bootstrap%E5%85%A5%E9%97%A8%E9%9C%80%E6%8E%8C%E6%8F%A1%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%88%E4%BA%8C%EF%BC%89/" target="_blank" rel="noopener">Bootstrapå…¥é—¨éœ€æŒæ¡çš„çŸ¥è¯†ç‚¹ï¼ˆäºŒï¼‰</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2017/12/09/CodeMirror/" target="_blank" rel="noopener">ä½¿ç”¨ CodeMirror æ‰“é€ å±äºè‡ªå·±çš„åœ¨çº¿ä»£ç ç¼–è¾‘å™¨</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2017/06/23/AJAX/" target="_blank" rel="noopener">AJAX å­¦ä¹ </a></p><p>5ã€å‰ç«¯æ¸£æ¸£è¿™ä¸ªä¹Ÿè¦æ…¢æ…¢å­¦ä¹ è¿™å—</p><h4 id="é¢è¯•ç»éªŒç³»åˆ—"><a href="#é¢è¯•ç»éªŒç³»åˆ—" class="headerlink" title="é¢è¯•ç»éªŒç³»åˆ—"></a><strong>é¢è¯•ç»éªŒç³»åˆ—</strong></h4><p>1ã€<a href="http://www.54tianzhisheng.cn/2017/08/04/yaxin/" target="_blank" rel="noopener">ç§‹æ‹›ç¬¬ä¸€ç«™ â€”â€” äºšä¿¡ç§‘æŠ€</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2017/08/04/iqiyi/" target="_blank" rel="noopener">ç§‹æ‹›ç¬¬äºŒç«™ â€”â€” å†…æ¨çˆ±å¥‡è‰ºï¼ˆä¸€é¢äºŒé¢ï¼‰</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2017/08/04/alibaba/" target="_blank" rel="noopener">ç§‹æ‹›ç¬¬ä¸‰ç«™ â€”â€” å†…æ¨é˜¿é‡Œï¼ˆä¸€é¢ï¼‰</a></p><p>4ã€ <a href="http://www.54tianzhisheng.cn/2017/09/17/Interview-summary/" target="_blank" rel="noopener">é¢è¯•è¿‡é˜¿é‡Œç­‰äº’è”ç½‘å¤§å…¬å¸ï¼Œæˆ‘çŸ¥é“äº†è¿™äº›å¥—è·¯</a></p><p>5ã€<a href="http://www.54tianzhisheng.cn/2017/08/28/recommend-books/" target="_blank" rel="noopener">é‚£äº›å¹´æˆ‘çœ‹è¿‡çš„ä¹¦ â€”â€” è‡´æ•¬æˆ‘çš„å¤§å­¦ç”Ÿæ´» â€”â€” Say Good Bye ï¼</a></p><h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a><strong>å…¶ä»–</strong></h4><p>è¿˜æœ‰ä¸€äº›å…¶ä»–æ–¹é¢çš„æŠ€æœ¯æ–‡ç« ï¼Œç®—ä¸æ˜¯ç³»åˆ—æ–‡ç« ï¼Œæ¯”è¾ƒé›¶æ•£ï¼Œè¿˜æœ‰å°±æ˜¯ä¸€äº›éšç¬”æ–‡ç« ï¼Œå°±ä¸æŠŠå®ƒä»¬æ”¾åœ¨åˆé›†é‡Œäº†ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ç”¨è‡ªå·±çš„ä¸€å¥è¯ï¼š<strong>å‘è¦ä¸€ä¸ªä¸ªå¡«ï¼Œè·¯è¦ä¸€æ­¥æ­¥èµ°ï¼å‰äººæ ½æ ‘ï¼Œåäººä¹˜å‡‰ï¼Œå­¦ä¼šæ„Ÿæ©ï¼</strong></p><p>å»ºäº†ä¸ªä¸é”™çš„å¾®ä¿¡ç¾¤ï¼Œå¦‚æœæœ‰æ„Ÿå…´è¶£çš„å¯ä»¥åŠ æˆ‘å¾®ä¿¡ï¼Œå¯¹æˆ‘å›å¤  <strong>åŠ ç¾¤</strong> ï¼Œç„¶åä¼šæ‹‰ä½ è¿›ç¾¤äº¤æµã€‚</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fp0t1jn6s4j30qi0z10x1.jpg" alt="1520091522031"></p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fp3jkmizmpj30o00didgn.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws2.sinaimg.cn/large/006tKfTcgy1fprrv5n1p2j31hc0u0tm6.jpg&quot; alt=&quot;nature-3054445_1920&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‰æ&quot;&gt;&lt;a href=&quot;#å‰æ&quot; class=&quot;headerlink&quot; title=&quot;å‰æ&quot;&gt;&lt;/a&gt;å‰æ&lt;/h3&gt;&lt;p&gt;å¥½å‡ å‘¨æ²¡æ›´æ–°åšå®¢äº†ï¼Œå¯¹ä¸æ–­æ”¯æŒæˆ‘åšå®¢çš„ç«¥é‹ä»¬è¯´å£°ï¼šâ€œæŠ±æ­‰äº†ï¼â€ã€‚è‡ªå·±è¿™æ®µæ—¶é—´ç¡®å®æ¯”è¾ƒå¿™ï¼Œè€Œä¸”è¿˜åœ¨æŠ½ç©ºå®Œæˆå­¦æ ¡çš„æ¯•ä¸šè®¾è®¡ã€‚ä»Šå¤©æ™šä¸ŠæŠ½ç©ºæŠŠå¤§å­¦æœŸé—´å†™è¿‡çš„åšå®¢å¼„ä¸€ä¸ªç³»åˆ—æ–‡ç« åˆé›†ï¼Œç®—æ˜¯å¯¹å¤§å­¦è¿™å››å¹´çš„ä¸€ä¸ªæ€»ç»“ï¼Œè¯æ˜è‡ªå·±æ²¡ç™½è¿‡ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="åšå®¢åˆé›†" scheme="http://yoursite.com/tags/%E5%8D%9A%E5%AE%A2%E5%90%88%E9%9B%86/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å—</title>
    <link href="http://yoursite.com/2018/03/06/SpringBoot2-Migration-Guide/"/>
    <id>http://yoursite.com/2018/03/06/SpringBoot2-Migration-Guide/</id>
    <published>2018-03-05T16:00:00.000Z</published>
    <updated>2018-05-02T13:29:08.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fp3h0820m2j31hc0zkwxr.jpg" alt=""></p><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>å¸Œæœ›æœ¬æ–‡æ¡£å°†å¸®åŠ©æ‚¨æŠŠåº”ç”¨ç¨‹åºè¿ç§»åˆ° Spring Boot 2.0ã€‚</p><a id="more"></a><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-Migration-Guide/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-Migration-Guide/</a></p><h3 id="åœ¨ä½ å¼€å§‹ä¹‹å‰"><a href="#åœ¨ä½ å¼€å§‹ä¹‹å‰" class="headerlink" title="åœ¨ä½ å¼€å§‹ä¹‹å‰"></a>åœ¨ä½ å¼€å§‹ä¹‹å‰</h3><p>é¦–å…ˆï¼Œ<strong>Spring Boot 2.0 éœ€è¦ Java 8 æˆ–æ›´é«˜ç‰ˆæœ¬</strong>ã€‚ä¸å†æ”¯æŒ Java 6 å’Œ 7 äº†ã€‚</p><p>åœ¨ Spring Boot 2.0 ä¸­ï¼Œè®¸å¤šé…ç½®å±æ€§è¢«é‡æ–°å‘½å/åˆ é™¤ï¼Œå¼€å‘äººå‘˜éœ€è¦æ›´æ–°<code>application.properties</code>/ <code>application.yml</code>ç›¸åº”çš„é…ç½®ã€‚ä¸ºäº†å¸®åŠ©ä½ è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒSpring Boot å‘å¸ƒäº†ä¸€ä¸ªæ–°<code>spring-boot-properties-migrator</code>æ¨¡å—ã€‚ä¸€æ—¦ä½œä¸ºè¯¥æ¨¡å—ä½œä¸ºä¾èµ–è¢«æ·»åŠ åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œå®ƒä¸ä»…ä¼šåˆ†æåº”ç”¨ç¨‹åºçš„ç¯å¢ƒï¼Œè€Œä¸”è¿˜ä¼šåœ¨å¯åŠ¨æ—¶æ‰“å°è¯Šæ–­ä¿¡æ¯ï¼Œè€Œä¸”è¿˜ä¼šåœ¨è¿è¡Œæ—¶ä¸ºæ‚¨æš‚æ—¶è¿ç§»å±æ€§ã€‚åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºè¿ç§»æœŸé—´ï¼Œè¿™ä¸ªæ¨¡å—æ˜¯å¿…å¤‡çš„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-properties-migrator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå®Œæˆè¿ç§»åï¼Œè¯·ç¡®ä¿ä»é¡¹ç›®çš„ä¾èµ–å…³ç³»ä¸­åˆ é™¤æ­¤æ¨¡å—ã€‚</p><h3 id="æ„å»ºæ‚¨çš„-Spring-Boot-åº”ç”¨ç¨‹åº"><a href="#æ„å»ºæ‚¨çš„-Spring-Boot-åº”ç”¨ç¨‹åº" class="headerlink" title="æ„å»ºæ‚¨çš„ Spring Boot åº”ç”¨ç¨‹åº"></a>æ„å»ºæ‚¨çš„ Spring Boot åº”ç”¨ç¨‹åº</h3><h4 id="Spring-Boot-Maven-æ’ä»¶"><a href="#Spring-Boot-Maven-æ’ä»¶" class="headerlink" title="Spring Boot Maven æ’ä»¶"></a>Spring Boot Maven æ’ä»¶</h4><p>ä¸ºäº†ä¿æŒäº†ä¸€è‡´æ€§ï¼Œå¹¶ä¸”é¿å…ä¸å…¶ä»–æ’ä»¶å‘ç”Ÿå†²çªï¼Œç°åœ¨æš´éœ²çš„æ’ä»¶é…ç½®å±æ€§éƒ½ä»¥ä¸€ä¸ª<code>spring-boot</code>å‰ç¼€å¼€å§‹ã€‚</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤<code>prod</code>ä½¿ç”¨å‘½ä»¤è¡Œå¯ç”¨é…ç½®æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn spring-boot:run -Dspring-boot.run.profiles=prod</span><br></pre></td></tr></table></figure><h5 id="Surefire-é»˜è®¤å€¼"><a href="#Surefire-é»˜è®¤å€¼" class="headerlink" title="Surefire é»˜è®¤å€¼"></a>Surefire é»˜è®¤å€¼</h5><p>ä»¥å‰çš„ <code>include/exclude</code> æ¨¡å¼å·²ä¸æœ€æ–°çš„ Surefire é»˜è®¤è®¾ç½®ä¿æŒä¸€è‡´ã€‚å¦‚æœä¾èµ–äºæ­¤æ’ä»¶ï¼Œéœ€è¦ç›¸åº”åœ°æ›´æ–°æ’ä»¶é…ç½®ã€‚ä¹‹å‰å¯¹åº”çš„é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*Tests.java<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*Test.java<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/Abstract*.java<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure><p>PS: å¦‚æœæ‚¨ä½¿ç”¨ JUnit 5ï¼Œåˆ™åº”å°† Surefire é™çº§åˆ° <code>2.19.1</code>ã€‚è¯¥<code>**/*Tests.java</code>ç‰ˆæœ¬ä¸åŒ…å«æ­¤æ¨¡å¼ï¼Œå› æ­¤å¦‚æœæ‚¨ä¾èµ–è¯¥æ¨¡å¼ï¼Œè¯·ç¡®ä¿å°†å…¶æ·»åŠ åˆ°æ‚¨çš„é…ç½®ä¸­ã€‚</p><h4 id="Spring-Boot-Gradle-æ’ä»¶"><a href="#Spring-Boot-Gradle-æ’ä»¶" class="headerlink" title="Spring Boot Gradle æ’ä»¶"></a>Spring Boot Gradle æ’ä»¶</h4><p>Spring Boot çš„ Gradle æ’ä»¶åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå·²è¢«é‡å†™ï¼Œæœ‰äº†é‡å¤§çš„æ”¹è¿›ã€‚æ‚¨å¯ä»¥åœ¨å…¶<a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/gradle-plugin/reference" target="_blank" rel="noopener">å‚è€ƒæ–‡çŒ®</a>å’Œ<a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/gradle-plugin/api" target="_blank" rel="noopener">API</a>æ–‡æ¡£ä¸­é˜…è¯»å…³äºæ’ä»¶åŠŸèƒ½çš„æ›´å¤šä¿¡æ¯ã€‚</p><h5 id="ä¾èµ–ç®¡ç†"><a href="#ä¾èµ–ç®¡ç†" class="headerlink" title="ä¾èµ–ç®¡ç†"></a>ä¾èµ–ç®¡ç†</h5><p>Spring Boot çš„ Gradle æ’ä»¶ä¸å†è‡ªåŠ¨åº”ç”¨ä¾èµ–ç®¡ç†æ’ä»¶ã€‚ç›¸åï¼ŒSpring Boot çš„æ’ä»¶ç°åœ¨å¯ä»¥é€šè¿‡å¯¼å…¥æ­£ç¡®ç‰ˆæœ¬çš„spring-boot-dependencies BOM æ¥åº”ç”¨ä¾èµ–ç®¡ç†æ’ä»¶ã€‚å½“ä¾èµ–ç®¡ç†è¢«é…ç½®çš„æ—¶å€™ï¼Œè¿™ä¸€ç‚¹ä¼šè®©ä½ æœ‰æ›´å¤šçš„æ§åˆ¶æƒã€‚</p><p>å¯¹äºå¤§å¤šæ•°åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨åº”ç”¨ä¾èµ–ç®¡ç†æ’ä»¶å°±è¶³å¤Ÿäº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &apos;org.springframework.boot&apos;</span><br><span class="line">apply plugin: &apos;io.spring.dependency-management&apos; // &lt;-- add this to your build.gradle</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šä¾èµ–ç®¡ç†æ’ä»¶ä»ç„¶æ˜¯ spring-boot-gradle-plugin çš„ä¼ é€’ä¾èµ–é¡¹ï¼Œæ‰€ä»¥ä¸éœ€è¦åœ¨ buildscript é…ç½®ä¸­å°†å…¶åˆ—ä¸ºç±»è·¯å¾„ä¾èµ–é¡¹ã€‚</p><h5 id="å»ºç«‹å¯æ‰§è¡Œçš„-Jars-å’Œ-Wars"><a href="#å»ºç«‹å¯æ‰§è¡Œçš„-Jars-å’Œ-Wars" class="headerlink" title="å»ºç«‹å¯æ‰§è¡Œçš„ Jars å’Œ Wars"></a>å»ºç«‹å¯æ‰§è¡Œçš„ Jars å’Œ Wars</h5><p> <code>bootRepackage</code> ä»»åŠ¡å·²ç»è¢«æ›¿æ¢æˆ <code>bootJar</code> å’Œ <code>bootWar</code> ä»»åŠ¡ï¼Œåˆ†åˆ«ç”¨äºæ„å»ºå¯æ‰§è¡Œçš„ <code>jar</code> åŒ…å’Œ <code>war</code>åŒ…ã€‚</p><h5 id="é…ç½®æ›´æ–°"><a href="#é…ç½®æ›´æ–°" class="headerlink" title="é…ç½®æ›´æ–°"></a>é…ç½®æ›´æ–°</h5><p><code>BootRun</code>ï¼Œ<code>BootJar</code>å’Œ<code>BootWar</code>ä»»åŠ¡ç°åœ¨éƒ½ä½¿ç”¨<code>mainClassName</code>çš„å±æ€§æ¥é…ç½®ä¸»ç±»çš„åç§°ã€‚è¿™ä½¿å¾—ä¸‰ä¸ªç‰¹å®šäºå¼•å¯¼çš„ä»»åŠ¡ç›¸äº’ä¸€è‡´ï¼Œå¹¶å°†å…¶ä¸ Gradle è‡ªå·±çš„åº”ç”¨ç¨‹åºæ’ä»¶è¿›è¡Œå¯¹é½ã€‚</p><h3 id="Spring-Boot-ç‰¹æ€§"><a href="#Spring-Boot-ç‰¹æ€§" class="headerlink" title="Spring Boot ç‰¹æ€§"></a>Spring Boot ç‰¹æ€§</h3><h4 id="é»˜è®¤åŠ¨æ€ä»£ç†ç­–ç•¥"><a href="#é»˜è®¤åŠ¨æ€ä»£ç†ç­–ç•¥" class="headerlink" title="é»˜è®¤åŠ¨æ€ä»£ç†ç­–ç•¥"></a>é»˜è®¤åŠ¨æ€ä»£ç†ç­–ç•¥</h4><p>Spring Boot é»˜è®¤ä½¿ç”¨ CGLIB åšåŠ¨æ€ä»£ç†ä»£ç†(åŸºäºç±»çš„åŠ¨æ€ä»£ç†)ï¼ŒåŒ…æ‹¬å¯¹ AOP çš„æ”¯æŒã€‚å¦‚æœä½ éœ€è¦åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†ï¼Œä½ éœ€è¦å°†<code>spring.aop.proxy-target-class</code> è®¾ç½®ä¸º<code>false</code>ã€‚</p><h4 id="SpringApplication"><a href="#SpringApplication" class="headerlink" title="SpringApplication"></a>SpringApplication</h4><h5 id="Web-ç¯å¢ƒ"><a href="#Web-ç¯å¢ƒ" class="headerlink" title="Web ç¯å¢ƒ"></a>Web ç¯å¢ƒ</h5><p>Spring Boot åº”ç”¨ç¨‹åºç°åœ¨å¯ä»¥åœ¨æ›´å¤šæ¨¡å¼ä¸‹è¿è¡Œï¼Œå› æ­¤<code>spring.main.web-environment</code>ç°åœ¨ä¸æ¨èä½¿ç”¨ï¼Œ<code>spring.main.web-application-type</code>å±æ€§å¯ä»¥æä¾›æ›´å¤šçš„æ”¯æŒã€‚</p><p>å¦‚æœæ‚¨æƒ³ç¡®ä¿åº”ç”¨ç¨‹åºä¸å¯åŠ¨ Web æœåŠ¡å™¨ï¼Œåˆ™å¿…é¡»å°†è¯¥å±æ€§æ›´æ”¹ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.main.web-application-type=none</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¯ä»¥é€šè¿‡  <code>SpringApplication</code> çš„ <code>setWebApplicationType</code> æ–¹æ³•å®ç°ã€‚</p><h5 id="Spring-Boot-åº”ç”¨ç¨‹åºäº‹ä»¶æ›´æ”¹"><a href="#Spring-Boot-åº”ç”¨ç¨‹åºäº‹ä»¶æ›´æ”¹" class="headerlink" title="Spring Boot åº”ç”¨ç¨‹åºäº‹ä»¶æ›´æ”¹"></a>Spring Boot åº”ç”¨ç¨‹åºäº‹ä»¶æ›´æ”¹</h5><p>æˆ‘ä»¬å·²ç»æ·»åŠ äº†ä¸€ä¸ªæ–°äº‹ä»¶<code>ApplicationStartedEvent</code>ã€‚ <code>ApplicationStartedEvent</code>åœ¨ä¸Šä¸‹æ–‡åˆ·æ–°ä¹‹åä½†åœ¨ä»»ä½•åº”ç”¨ç¨‹åºå’Œå‘½ä»¤è¡Œå‚æ•°è¢«è°ƒç”¨ä¹‹å‰å‘é€ã€‚ <code>ApplicationReadyEvent</code>åœ¨ä»»ä½•åº”ç”¨ç¨‹åºå’Œå‘½ä»¤è¡Œå‚æ•°è¢«è°ƒç”¨åå‘é€ã€‚å®ƒè¡¨ç¤ºåº”ç”¨ç¨‹åºå·²å‡†å¤‡å¥½ä¸ºè¯·æ±‚æä¾›æœåŠ¡ã€‚</p><p>è¯·å‚é˜…<a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-application-events-and-listeners" target="_blank" rel="noopener">æ›´æ–°çš„å‚è€ƒæ–‡æ¡£</a>ã€‚</p><h5 id="Banner"><a href="#Banner" class="headerlink" title="Banner"></a>Banner</h5><p>åœ¨æˆ‘ä»¬é™åˆ¶ Spring Boot ä½¿ç”¨çš„æ ¹åç§°ç©ºé—´çš„æ•°é‡çš„è¿‡ç¨‹ä¸­ï¼Œä¸æ ‡å¿—ç›¸å…³çš„å±æ€§å·²è¢«é‡å®šä½åˆ°<code>spring.banner</code>ã€‚</p><h4 id="å¤–éƒ¨åŒ–é…ç½®"><a href="#å¤–éƒ¨åŒ–é…ç½®" class="headerlink" title="å¤–éƒ¨åŒ–é…ç½®"></a>å¤–éƒ¨åŒ–é…ç½®</h4><h5 id="è½»æ¾çš„ç»‘å®š"><a href="#è½»æ¾çš„ç»‘å®š" class="headerlink" title="è½»æ¾çš„ç»‘å®š"></a>è½»æ¾çš„ç»‘å®š</h5><p>æœ‰å…³å®½æ¾ç»‘å®šçš„è§„åˆ™å·²ç»æ”¶ç´§ã€‚æˆ‘ä»¬å‡è®¾ä¸€ä¸ªç°æœ‰çš„<code>acme.my-project.my-name</code>å±æ€§ï¼š</p><ol><li>æ‰€æœ‰å‰ç¼€å¿…é¡»æ˜¯ kebabæ ¼å¼ï¼ˆå°å†™ï¼Œè¿å­—ç¬¦åˆ†éš”ï¼‰<code>acme.myProject</code>æˆ–<code>acme.my_project</code>æ— æ•ˆ - æ‚¨å¿…é¡»<code>acme.my-project</code>åœ¨æ­¤å¤„ä½¿ç”¨ã€‚</li><li>å±æ€§åç§°å¯ä»¥ä½¿ç”¨ kebab-caseï¼ˆ<code>my-name</code>ï¼‰ï¼Œcamel-caseï¼ˆ<code>myName</code>ï¼‰æˆ– snake-caseï¼ˆ<code>my_name</code>ï¼‰ã€‚</li><li>ç¯å¢ƒå±æ€§ï¼ˆæ¥è‡ªæ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡ï¼‰<em>å¿…é¡»ä½¿ç”¨</em>é€šå¸¸çš„å¤§å†™ä¸‹åˆ’çº¿æ ¼å¼ï¼Œä¸‹åˆ’çº¿<em>åªèƒ½</em>ç”¨äºåˆ†éš”é”®çš„å„ä¸ªéƒ¨åˆ†<code>ACME_MYPROJECT_MYNAME</code>ã€‚</li></ol><p>è¿™ç§æ–°çš„æ”¾æ¾ç»‘å®šå…·æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹ï¼š</p><ul><li>æ— éœ€æ‹…å¿ƒå¯†é’¥çš„ç»“æ„<code>@ConditionalOnProperty</code>ï¼šåªè¦å¯†é’¥æ˜¯ä»¥è§„èŒƒæ ¼å¼å®šä¹‰çš„ï¼Œæ”¯æŒçš„æ¾æ•£å˜ä½“å°±å¯ä»¥é€æ˜åœ°å·¥ä½œã€‚å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨è¯¥<code>prefix</code>å±æ€§ï¼Œåˆ™ç°åœ¨åªéœ€ä½¿ç”¨<code>name</code>æˆ–<code>value</code>å±æ€§å³å¯æ”¾ç½®å®Œæ•´å¯†é’¥ã€‚</li><li><code>RelaxedPropertyResolver</code>ä¸å†å¯ä»¥<code>Environment</code>è‡ªåŠ¨å¤„ç†ï¼š<code>env.getProperty(&quot;com.foo.my-bar&quot;)</code>å°†æ‰¾åˆ°ä¸€ä¸ª<code>com.foo.myBar</code>å±æ€§ã€‚</li></ul><p>è¯¥<code>org.springframework.boot.bind</code>è½¯ä»¶åŒ…ä¸å†å¯ç”¨ï¼Œå¹¶è¢«<a href="https://github.com/spring-projects/spring-boot/wiki/Relaxed-Binding-2.0" target="_blank" rel="noopener">æ–°çš„å®½æ¾ç»‘å®šè§„åˆ™</a>æ‰€å–ä»£ã€‚ç‰¹åˆ«æ˜¯ï¼Œ<code>RelaxedDataBinder</code>æœ‹å‹å·²è¢«æ–°çš„<code>Binder</code>API å–ä»£ã€‚ä»¥ä¸‹æ ·å“<code>MyProperties</code>ä»<code>app.acme</code>å‰ç¼€ä¸­è¿›è¡Œç»‘å®šã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MyProperties target = Binder.get(environment)</span><br><span class="line">.bind(<span class="string">"app.acme"</span>, MyProperties.class)</span><br><span class="line">.orElse(<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure><p>ç”±äºç°åœ¨å†…ç½®äº†è½»æ¾ç»‘å®šï¼Œå› æ­¤åªè¦ä½¿ç”¨å…¶ä¸­ä¸€ç§æ”¯æŒçš„æ ¼å¼ï¼Œå°±å¯ä»¥è¯·æ±‚ä»»ä½•å±æ€§è€Œä¸å¿…å…³å¿ƒæ¡ˆä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FlagType flagType = Binder.get(environment)</span><br><span class="line">.bind(<span class="string">"acme.app.my-flag"</span>, FlagType.class)</span><br><span class="line">.orElse(FlagType.DEFAULT);</span><br></pre></td></tr></table></figure><h5 id="ConfigurationProperties-éªŒè¯"><a href="#ConfigurationProperties-éªŒè¯" class="headerlink" title="@ConfigurationProperties éªŒè¯"></a><code>@ConfigurationProperties</code> éªŒè¯</h5><p>å¦‚æœæ‚¨æƒ³æ‰“å¼€éªŒè¯ï¼Œç°åœ¨å¿…é¡»ä¸ºæ‚¨çš„<code>@ConfigurationProperties</code>å¯¹è±¡æ·»åŠ æ³¨é‡Š<code>@Validated</code>ã€‚</p><h5 id="é…ç½®ä½ç½®"><a href="#é…ç½®ä½ç½®" class="headerlink" title="é…ç½®ä½ç½®"></a>é…ç½®ä½ç½®</h5><p><code>spring.config.location</code>é…ç½®çš„æ–¹å¼å·²è¢«ä¿®å¤; å®ƒæå‰å°†ä¸€ä¸ªä½ç½®æ·»åŠ åˆ°é»˜è®¤ä½ç½®åˆ—è¡¨ä¸­ï¼Œç°åœ¨å®ƒå°†æ›¿æ¢é»˜è®¤ä½ç½®ã€‚å¦‚æœä½ æ˜¯æŒ‰ç…§ä»¥å‰çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œç°åœ¨åº”è¯¥ä½¿ç”¨å®ƒ<code>spring.config.additional-location</code>è¿›è¡Œæ›¿æ¢ã€‚</p><h4 id="å¼€å‘-Web-åº”ç”¨ç¨‹åº"><a href="#å¼€å‘-Web-åº”ç”¨ç¨‹åº" class="headerlink" title="å¼€å‘ Web åº”ç”¨ç¨‹åº"></a>å¼€å‘ Web åº”ç”¨ç¨‹åº</h4><h5 id="åµŒå…¥å¼å®¹å™¨åŒ…è£…ç»“æ„"><a href="#åµŒå…¥å¼å®¹å™¨åŒ…è£…ç»“æ„" class="headerlink" title="åµŒå…¥å¼å®¹å™¨åŒ…è£…ç»“æ„"></a>åµŒå…¥å¼å®¹å™¨åŒ…è£…ç»“æ„</h5><p>ä¸ºäº†æ”¯æŒå“åº”å¼ç”¨ä¾‹ï¼ŒåµŒå…¥å¼å®¹å™¨åŒ…ç»“æ„å·²ç»è¢«å¤§å¹…åº¦çš„é‡æ„ã€‚ <code>EmbeddedServletContainer</code>å·²è¢«é‡æ–°å‘½åä¸ºï¼Œ<code>WebServer</code>å¹¶ä¸”è¯¥<code>org.springframework.boot.context.embedded</code>åŒ…å·²è¢«é‡æ–°å®šä½åˆ°<code>org.springframework.boot.web.embedded</code>ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä½¿ç”¨<code>TomcatEmbeddedServletContainerFactory</code>å›è°ƒæ¥å£å®šåˆ¶åµŒå…¥å¼ Tomcat å®¹å™¨ï¼Œåˆ™åº”è¯¥ä½¿ç”¨<code>TomcatServletWebServerFactory</code>ã€‚</p><h5 id="ç‰¹å®šäº-Servlet-çš„æœåŠ¡å™¨å±æ€§"><a href="#ç‰¹å®šäº-Servlet-çš„æœåŠ¡å™¨å±æ€§" class="headerlink" title="ç‰¹å®šäº Servlet çš„æœåŠ¡å™¨å±æ€§"></a>ç‰¹å®šäº Servlet çš„æœåŠ¡å™¨å±æ€§</h5><p>è®¸å¤š<code>server.*</code> å±æ€§ ( Servlet ç‰¹æœ‰çš„) å·²ç»è½¬ç§»åˆ°<code>server.servlet</code>ï¼š</p><table><thead><tr><th style="text-align:center">æ—§çš„å±æ€§</th><th style="text-align:center">æ–°çš„å±æ€§</th></tr></thead><tbody><tr><td style="text-align:center">server.context-parameters.*</td><td style="text-align:center">server.servlet.context-parameters.*</td></tr><tr><td style="text-align:center">server.context-path</td><td style="text-align:center">server.servlet.context-path</td></tr><tr><td style="text-align:center">server.jsp.class-name</td><td style="text-align:center">server.servlet.jsp.class-name</td></tr><tr><td style="text-align:center">server.jsp.init-parameters.*</td><td style="text-align:center">server.servlet.jsp.init-parameters.*</td></tr><tr><td style="text-align:center">server.jsp.registered</td><td style="text-align:center">server.servlet.jsp.registered</td></tr><tr><td style="text-align:center">server.servlet-path</td><td style="text-align:center">server.servlet.path</td></tr></tbody></table><h5 id="Web-Starter-ä½œä¸ºä¼ é€’ä¾èµ–"><a href="#Web-Starter-ä½œä¸ºä¼ é€’ä¾èµ–" class="headerlink" title="Web Starter ä½œä¸ºä¼ é€’ä¾èµ–"></a>Web Starter ä½œä¸ºä¼ é€’ä¾èµ–</h5><p>ä»¥å‰æœ‰å‡ ä¸ª Spring Boot starter æ˜¯ä¾èµ–äº Spring MVC è€Œä¼ é€’çš„<code>spring-boot-starter-web</code>ã€‚åœ¨ <code>Spring WebFlux</code> æ–°çš„æ”¯æŒä¸‹ï¼Œ<code>spring-boot-starter-mustache</code>ï¼Œ<code>spring-boot-starter-freemarker</code>å¹¶<code>spring-boot-starter-thymeleaf</code>ä¸å†ä¾èµ–å®ƒã€‚å¼€å‘è€…æœ‰è´£ä»»é€‰æ‹©å’Œæ·»åŠ <code>spring-boot-starter-web</code>æˆ–<code>spring-boot-starter-webflux</code>ã€‚</p><h5 id="æ¨¡æ¿å¼•æ“"><a href="#æ¨¡æ¿å¼•æ“" class="headerlink" title="æ¨¡æ¿å¼•æ“"></a>æ¨¡æ¿å¼•æ“</h5><p>Mustache æ¨¡æ¿æ›¾ç»çš„æ–‡ä»¶æ‰©å±•åæ˜¯<code>.html</code>ï¼Œç°åœ¨çš„æ‰©å±•åä¸º <code>.mustache</code> ï¼Œä¸å®˜æ–¹è§„èŒƒå’Œå¤§å¤šæ•° IDE æ’ä»¶ä¸€è‡´ã€‚æ‚¨å¯ä»¥é€šè¿‡æ›´æ”¹<code>spring.mustache.suffix</code>é…ç½®é”®æ¥è¦†ç›–æ­¤æ–°çš„é»˜è®¤å€¼ã€‚</p><h5 id="Jackson-JSON-æ”¯æŒ"><a href="#Jackson-JSON-æ”¯æŒ" class="headerlink" title="Jackson / JSON æ”¯æŒ"></a>Jackson / JSON æ”¯æŒ</h5><p>åœ¨ 2.0 ä¸­ï¼Œæˆ‘ä»¬æ”¹å˜äº† Jackson é…ç½®çš„é»˜è®¤å€¼ï¼Œå°† ISO-8601 å­—ç¬¦ä¸² å†™ä¸º JSR-310 æ—¥æœŸ ã€‚å¦‚æœä½ æƒ³å›åˆ°ä»¥å‰çš„è¡Œä¸ºï¼Œä½ å¯ä»¥æ·»åŠ <code>spring.jackson.serialization.write-dates-as-timestamps=true</code>åˆ°ä½ çš„é…ç½®ã€‚</p><p>æ–°çš„<code>spring-boot-starter-json</code> starter æ”¶é›†äº†å¿…è¦çš„ä½å»è¯»å†™ JSONã€‚å®ƒä¸ä»…æä¾›äº†<code>jackson-databind</code>ï¼Œè€Œä¸”æä¾›äº†å’Œ Java8 ä¸€èµ·è¿ä½œçš„æ—¶å€™ç›¸å½“æœ‰ç”¨çš„ç»„ä»¶ï¼š<code>jackson-datatype-jdk8</code>,  <code>jackson-datatype-jsr310</code> å’Œ <code>jackson-module-parameter-names</code>ã€‚å¦‚æœä½ æ›¾ç»æ‰‹åŠ¨åœ°ä¾èµ–è¿™äº›ç»„ä»¶ï¼Œç°åœ¨å¯ä»¥ä¾èµ–è¿™ä¸ªæ–°çš„ starter å–ä»£ã€‚</p><h5 id="Spring-MVC-è·¯å¾„åŒ¹é…é»˜è®¤è¡Œä¸ºæ›´æ”¹"><a href="#Spring-MVC-è·¯å¾„åŒ¹é…é»˜è®¤è¡Œä¸ºæ›´æ”¹" class="headerlink" title="Spring MVC è·¯å¾„åŒ¹é…é»˜è®¤è¡Œä¸ºæ›´æ”¹"></a>Spring MVC è·¯å¾„åŒ¹é…é»˜è®¤è¡Œä¸ºæ›´æ”¹</h5><p>æˆ‘ä»¬å·²å†³å®šåœ¨ Spring MVC åº”ç”¨ç¨‹åºä¸­æ›´æ”¹åç¼€è·¯å¾„åŒ¹é…çš„é»˜è®¤å€¼ï¼ˆè¯·å‚é˜…<a href="https://github.com/spring-projects/spring-boot/issues/11105" target="_blank" rel="noopener">ï¼ƒ11105</a>ï¼‰ã€‚æŒ‰ç…§ Spring Framework ä¸­è®°å½•çš„<a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-ann-requestmapping-suffix-pattern-match" target="_blank" rel="noopener">æœ€ä½³å®è·µ</a>ï¼Œæ­¤åŠŸèƒ½ä¸å†é»˜è®¤å¯ç”¨ã€‚</p><p>å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºå¸Œæœ›å°†è¯·æ±‚<code>&quot;GET /projects/spring-boot.json&quot;</code>æ˜ å°„åˆ°<code>@GetMapping(&quot;/projects/spring-boot&quot;)</code>æ˜ å°„ï¼Œåˆ™æ­¤æ›´æ”¹ä¼šå½±å“æ‚¨ã€‚</p><p>æœ‰å…³æ­¤æ›´å¤šä¿¡æ¯ä»¥åŠå¦‚ä½•å‡è½»æ­¤æ›´æ”¹ï¼Œè¯·æŸ¥é˜…<a href="https://docs.spring.io/spring-boot/docs/2.0.0.RC1/reference/html/boot-features-developing-web-applications.html#boot-features-spring-mvc-pathmatch" target="_blank" rel="noopener">Spring Bootä¸­æœ‰å…³è·¯å¾„åŒ¹é…å’Œå†…å®¹åå•†çš„å‚è€ƒæ–‡æ¡£</a>ã€‚</p><h5 id="Servlet-è¿‡æ»¤å™¨"><a href="#Servlet-è¿‡æ»¤å™¨" class="headerlink" title="Servlet è¿‡æ»¤å™¨"></a>Servlet è¿‡æ»¤å™¨</h5><p>Servlet è¿‡æ»¤å™¨çš„é»˜è®¤è°ƒåº¦ç¨‹åºç±»å‹ç°åœ¨æ˜¯<code>DipatcherType.REQUEST</code>; è¿™ä½¿ Spring Boot çš„é»˜è®¤å€¼ä¸ Servlet è§„èŒƒçš„é»˜è®¤å€¼ä¸€è‡´ã€‚å¦‚æœæ‚¨å¸Œæœ›å°†è¿‡æ»¤å™¨æ˜ å°„åˆ°å…¶ä»–è°ƒåº¦ç¨‹åºç±»å‹ï¼Œè¯·ä½¿ç”¨<code>FilterRegistrationBean</code>æ³¨å†Œæ‚¨çš„è¿‡æ»¤å™¨ã€‚</p><p>æ³¨æ„ï¼šSpring Security å’Œ Spring Session è¿‡æ»¤å™¨é…ç½®  <code>ASYNC</code>, <code>ERROR</code>ä»¥åŠ <code>REQUEST</code> è°ƒåº¦ç±»å‹ã€‚</p><h5 id="RestTemplateBuilder"><a href="#RestTemplateBuilder" class="headerlink" title="RestTemplateBuilder"></a>RestTemplateBuilder</h5><p>è¯¥<code>requestFactory(ClientHttpRequestFactory)</code>æ–¹æ³•å·²è¢«æ–°<code>requestFactory(Supplier&lt;ClientHttpRequestFactory&gt; requestFactorySupplier)</code>æ–¹æ³•æ‰€å–ä»£ã€‚<code>Supplier</code>å…è®¸æ„å»ºå™¨ç”Ÿæˆçš„æ¯ä¸ªæ¨¡æ¿ä½¿ç”¨å®ƒè‡ªå·±çš„è¯·æ±‚å·¥å‚ï¼Œä»è€Œé¿å…å…±äº«å·¥å‚å¯èƒ½å¯¼è‡´çš„å‰¯ä½œç”¨ã€‚è§<a href="https://github.com/spring-projects/spring-boot/issues/11255" target="_blank" rel="noopener">ï¼ƒ11255</a>ã€‚</p><h5 id="WebJars-å®šä½å™¨"><a href="#WebJars-å®šä½å™¨" class="headerlink" title="WebJars å®šä½å™¨"></a>WebJars å®šä½å™¨</h5><p>Spring Boot 1.x ä½¿ç”¨å¹¶æä¾›ä¾èµ–å…³ç³»ç®¡ç†<code>org.webjars:webjars-locator</code>ã€‚<code>webjars-locator</code>æ˜¯ä¸€ä¸ª<a href="https://github.com/webjars/webjars-locator/tree/ec6b793f2d6f031f6aa384a06c059ff499055652" target="_blank" rel="noopener">â€œå‘½åä¸ä½³çš„åº“â€¦â€¦åŒ…è£…<code>webjars-locator-core</code>é¡¹ç›®â€</a>ã€‚<code>org.webjars:webjars-locator</code>åº”è¯¥æ›´æ–°ä¾èµ–é¡¹æ¥<code>org.webjars:webjars-locator-core</code>ä»£æ›¿ä½¿ç”¨ã€‚</p><h4 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h4><p>Spring Boot 2 æå¤§åœ°ç®€åŒ–äº†é»˜è®¤çš„å®‰å…¨é…ç½®ï¼Œå¹¶ä½¿æ·»åŠ å®šåˆ¶å®‰å…¨å˜å¾—ç®€å•ã€‚Spring Boot ç°åœ¨å…·æœ‰ä¸€ç§è¡Œä¸ºï¼Œåªè¦æ‚¨æ·»åŠ è‡ªå·±çš„ <code>WebSecurityConfigurerAdapter</code> å°±ä¼šé€€å‡ºï¼Œè€Œä¸æ˜¯è¿›è¡Œå¤šç§ä¸å®‰å…¨æ€§ç›¸å…³çš„è‡ªåŠ¨é…ç½®ã€‚</p><p>å¦‚æœæ‚¨ä½¿ç”¨ä»¥ä¸‹ä»»ä½•å±æ€§ï¼Œåˆ™ä¼šå—åˆ°å½±å“ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">security.basic.authorize-mode</span><br><span class="line">security.basic.enabled</span><br><span class="line">security.basic.path</span><br><span class="line">security.basic.realm</span><br><span class="line">security.enable-csrf</span><br><span class="line">security.headers.cache</span><br><span class="line">security.headers.content-security-policy</span><br><span class="line">security.headers.content-security-policy-mode</span><br><span class="line">security.headers.content-type</span><br><span class="line">security.headers.frame</span><br><span class="line">security.headers.hsts</span><br><span class="line">security.headers.xss</span><br><span class="line">security.ignored</span><br><span class="line">security.require-ssl</span><br><span class="line">security.sessions</span><br></pre></td></tr></table></figure><h5 id="é»˜è®¤å®‰å…¨"><a href="#é»˜è®¤å®‰å…¨" class="headerlink" title="é»˜è®¤å®‰å…¨"></a>é»˜è®¤å®‰å…¨</h5><p>å®‰å…¨è‡ªåŠ¨é…ç½®ä¸å†å…¬å¼€é€‰é¡¹ï¼Œå¹¶å°½å¯èƒ½ä½¿ç”¨ Spring Security é»˜è®¤å€¼ã€‚ä¸€ä¸ªæ˜æ˜¾çš„å‰¯ä½œç”¨æ˜¯ä½¿ç”¨ Spring Security çš„å†…å®¹åå•†è¿›è¡Œæˆæƒï¼ˆè¡¨å•ç™»å½•ï¼‰ã€‚</p><h5 id="é»˜è®¤ç”¨æˆ·"><a href="#é»˜è®¤ç”¨æˆ·" class="headerlink" title="é»˜è®¤ç”¨æˆ·"></a>é»˜è®¤ç”¨æˆ·</h5><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring Boot ä½¿ç”¨ç”Ÿæˆçš„å¯†ç é…ç½®å•ä¸ªç”¨æˆ·ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨ <code>spring.security.user.*</code> å±æ€§è¿›è¡Œé…ç½®ã€‚è¦è¿›ä¸€æ­¥å®šåˆ¶ç”¨æˆ·æˆ–æ·»åŠ å…¶ä»–ç”¨æˆ·ï¼Œæ‚¨å°†ä¸å¾—ä¸å…¬å¼€ä¸€ä¸ª<code>UserDetailsService</code>beanã€‚</p><h5 id="AuthenticationManager-Bean"><a href="#AuthenticationManager-Bean" class="headerlink" title="AuthenticationManager Bean"></a>AuthenticationManager Bean</h5><p>å¦‚æœæ‚¨æƒ³å°† Spring Security <code>AuthenticationManager</code>ä½œä¸º bean å…¬å¼€ï¼Œè¯·è¦†ç›–<code>authenticationManagerBean</code>æ‚¨çš„æ–¹æ³•<code>WebSecurityConfigurerAdapter</code>å¹¶ä¸ºå…¶æ·»åŠ æ³¨é‡Š<code>@Bean</code>ã€‚</p><h5 id="OAuth2"><a href="#OAuth2" class="headerlink" title="OAuth2"></a>OAuth2</h5><p>ä»åŠŸèƒ½çš„ <a href="http://projects.spring.io/spring-security-oauth/" target="_blank" rel="noopener">Spring Security OAuth é¡¹ç›®</a> è¿ç§»åˆ°æ ¸å¿ƒ <a href="https://projects.spring.io/spring-security/" target="_blank" rel="noopener">Spring Security</a>ã€‚ä¸å†ä¸ºä¾èµ–å…³ç³»æä¾›ä¾èµ–ç®¡ç†ï¼ŒSpring Boot 2 é€šè¿‡ Spring Security 5 æä¾› <a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security-oauth2" target="_blank" rel="noopener">OAuth 2.0 å®¢æˆ·ç«¯æ”¯æŒ</a>ã€‚</p><p>å¦‚æœæ‚¨ä¾èµ–å°šæœªè¿ç§»çš„ Spring Security OAuth åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨å…¶ä»– jar ä¸Šæ·»åŠ ä¾èµ–é¡¹ï¼Œè¯·æŸ¥çœ‹<a href="https://docs.spring.io/spring-security-oauth2-boot/docs/current/reference/htmlsingle/" target="_blank" rel="noopener">æ–‡æ¡£</a>ä»¥è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚æˆ‘ä»¬è¿˜ç»§ç»­æ”¯æŒ Spring Boot 1.5ï¼Œä»¥ä¾¿æ—§ç‰ˆåº”ç”¨ç¨‹åºå¯ä»¥ç»§ç»­ä½¿ç”¨å®ƒï¼Œç›´åˆ°æä¾›å‡çº§è·¯å¾„ã€‚</p><h5 id="æ‰§è¡Œå™¨å®‰å…¨"><a href="#æ‰§è¡Œå™¨å®‰å…¨" class="headerlink" title="æ‰§è¡Œå™¨å®‰å…¨"></a>æ‰§è¡Œå™¨å®‰å…¨</h5><p>æ‰§è¡Œå™¨ä¸å†æœ‰å•ç‹¬çš„å®‰å…¨è‡ªåŠ¨é…ç½®ï¼ˆ<code>management.security.*</code>å±æ€§æ¶ˆå¤±ï¼‰ã€‚<code>sensitive</code>æ¯ä¸ªç«¯ç‚¹çš„æ ‡å¿—ä¹Ÿæ²¡æœ‰åœ¨å®‰å…¨é…ç½®ä¸­å˜å¾—æ›´åŠ æ˜ç¡®ã€‚å¦‚æœæ‚¨ä¾èµ–äºæ­¤è¡Œä¸ºï¼Œåˆ™éœ€è¦åˆ›å»ºæˆ–è°ƒæ•´æ‚¨çš„å®‰å…¨é…ç½®ï¼Œä»¥ä¿æŠ¤æ‚¨é€‰æ‹©è§’è‰²çš„ç«¯ç‚¹ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">endpoints.flyway.sensitive=false</span><br><span class="line">endpoints.info.sensitive=true</span><br><span class="line">management.security.roles=MY_ADMIN</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http</span><br><span class="line">.authorizeRequests()</span><br><span class="line">.requestMatchers(EndpointRequest.to(<span class="string">"health"</span>, <span class="string">"flyway"</span>)).permitAll()</span><br><span class="line">.requestMatchers(EndpointRequest.toAnyEndpoint()).hasRole(<span class="string">"MY_ADMIN"</span>)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯åœ¨<code>2.x</code>ï¼Œ<code>health</code>å’Œ<code>info</code>åœ¨é»˜è®¤æƒ…å†µä¸‹å¯ç”¨ï¼ˆä¸<code>health</code>é»˜è®¤æƒ…å†µä¸‹ä¸æ˜¾ç¤ºå…¶ç»†èŠ‚ï¼‰ã€‚ä¸ºäº†ä¸è¿™äº›æ–°çš„é»˜è®¤å€¼ä¸€è‡´ï¼Œ<code>health</code>å·²è¢«æ·»åŠ åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…å™¨ã€‚</p><h4 id="ä½¿ç”¨-SQL-æ•°æ®åº“"><a href="#ä½¿ç”¨-SQL-æ•°æ®åº“" class="headerlink" title="ä½¿ç”¨ SQL æ•°æ®åº“"></a>ä½¿ç”¨ SQL æ•°æ®åº“</h4><h5 id="é…ç½®æ•°æ®æº"><a href="#é…ç½®æ•°æ®æº" class="headerlink" title="é…ç½®æ•°æ®æº"></a>é…ç½®æ•°æ®æº</h5><p>é»˜è®¤è¿æ¥æ± å·²ä» Tomcat åˆ‡æ¢åˆ° HikariCPã€‚å¦‚æœæ‚¨è¿‡å»<code>spring.datasource.type</code>åœ¨åŸºäº Tomcat çš„åº”ç”¨ç¨‹åºä¸­å¼ºåˆ¶ä½¿ç”¨ Hikariï¼Œç°åœ¨å¯ä»¥åˆ é™¤é‡å†™ã€‚</p><p>ç‰¹åˆ«æ˜¯ï¼Œå¦‚æœä½ æœ‰è¿™æ ·çš„è®¾ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zaxxer<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>HikariCP<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨å¯ä»¥è¿™æ ·ä¿®æ”¹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="WARN-æ¶ˆæ¯éšå«çš„â€™æ‰“å¼€åœ¨è§†å›¾â€™"><a href="#WARN-æ¶ˆæ¯éšå«çš„â€™æ‰“å¼€åœ¨è§†å›¾â€™" class="headerlink" title="WARN æ¶ˆæ¯éšå«çš„â€™æ‰“å¼€åœ¨è§†å›¾â€™"></a>WARN æ¶ˆæ¯éšå«çš„â€™æ‰“å¼€åœ¨è§†å›¾â€™</h5><p>ä»ç°åœ¨èµ·ï¼Œæœªæ˜ç¡®å¯ç”¨çš„åº”ç”¨ç¨‹åº<code>spring.jpa.open-in-view</code>å°†åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­æ”¶åˆ°è­¦å‘Šæ¶ˆæ¯ã€‚è™½ç„¶è¿™ç§è¡Œä¸ºæ˜¯ä¸€ç§å‹å¥½çš„é»˜è®¤è¡Œä¸ºï¼Œä½†å¦‚æœæ‚¨æ²¡æœ‰å®Œå…¨æ„è¯†åˆ°ä¸ºæ‚¨åšäº†ä»€ä¹ˆï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚æ­¤æ¶ˆæ¯å¯ç¡®ä¿æ‚¨äº†è§£å¯åœ¨æŸ¥çœ‹å‘ˆç°æœŸé—´æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢ã€‚å¦‚æœä½ æ²¡æœ‰é—®é¢˜ï¼Œä½ å¯ä»¥æ˜ç¡®åœ°é…ç½®è¿™ä¸ªå±æ€§æ¥æ¶ˆé™¤è­¦å‘Šä¿¡æ¯ã€‚</p><h5 id="JPA-å’Œ-Spring-Data"><a href="#JPA-å’Œ-Spring-Data" class="headerlink" title="JPA å’Œ Spring Data"></a>JPA å’Œ Spring Data</h5><p>åœ¨ Spring Boot 1.x ä¸­ï¼Œä¸€äº›ç”¨æˆ·æ­£åœ¨æ‰©å±•<code>HibernateJpaAutoConfiguration</code>ä»¥å°†é«˜çº§è‡ªå®šä¹‰åº”ç”¨äºè‡ªåŠ¨é…ç½®<code>EntityManagerFactory</code>ã€‚ä¸ºäº†é˜²æ­¢å‘ç”Ÿè¿™ç§é”™è¯¯çš„ç”¨ä¾‹ï¼ŒSpring Boot 2 ä¸­ä¸å†å¯èƒ½æ‰©å±•å®ƒã€‚</p><p>ä¸ºäº†æ”¯æŒè¿™äº›ç”¨ä¾‹ï¼Œç°åœ¨å¯ä»¥å®šä¹‰ä¸€ä¸ª<code>HibernatePropertiesCustomizer</code>beanï¼Œå®ƒå¯ä»¥å®Œå…¨æ§åˆ¶ Hibernate å±æ€§ï¼ŒåŒ…æ‹¬æ³¨å†Œåœ¨ä¸Šä¸‹æ–‡ä¸­å£°æ˜ä¸º bean çš„ Hibernate æ‹¦æˆªå™¨çš„èƒ½åŠ›ã€‚</p><h5 id="Flyway"><a href="#Flyway" class="headerlink" title="Flyway"></a>Flyway</h5><p>Flyway é…ç½®é”®è¢«ç§»åŠ¨åˆ°<code>spring</code>å‘½åç©ºé—´ï¼ˆå³<code>spring.flyway</code>ï¼‰</p><p>å‡çº§åˆ° Spring Boot 2 å°†ä¼šå°† Flyway å‡çº§<code>3.x</code>åˆ°<code>5.x</code>ã€‚ä¸ºç¡®ä¿æ¨¡å¼å‡çº§é¡ºåˆ©è¿›è¡Œï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹è¯´æ˜æ“ä½œï¼š</p><ul><li>é¦–å…ˆå°†æ‚¨çš„<code>1.5.x</code>Spring Boot åº”ç”¨ç¨‹åºå‡çº§åˆ° Flyway 4ï¼Œè¯·å‚é˜…<a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#using-boot-maven-parent-pom" target="_blank" rel="noopener">Maven</a>å’Œ<a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/gradle-plugin/reference/html//#managing-dependencies-customizing" target="_blank" rel="noopener">Gradle</a>çš„è¯´æ˜ã€‚</li><li>ä¸€æ—¦æ‚¨çš„æ¶æ„å‡çº§åˆ°äº† Flyway 4ï¼Œå‡çº§åˆ° Spring Boot 2 å¹¶å†æ¬¡è¿è¡Œè¿ç§»ä»¥å°†æ‚¨çš„åº”ç”¨ç¨‹åºç§»æ¤åˆ° Flyway 5ã€‚</li></ul><h5 id="Liquibase"><a href="#Liquibase" class="headerlink" title="Liquibase"></a>Liquibase</h5><p>Liquibase é…ç½®é”®è¢«ç§»åŠ¨åˆ°<code>spring</code>å‘½åç©ºé—´ï¼ˆå³<code>spring.liquibase</code>ï¼‰</p><h5 id="æ•°æ®åº“åˆå§‹åŒ–"><a href="#æ•°æ®åº“åˆå§‹åŒ–" class="headerlink" title="æ•°æ®åº“åˆå§‹åŒ–"></a>æ•°æ®åº“åˆå§‹åŒ–</h5><p>åŸºæœ¬<code>DataSource</code>åˆå§‹åŒ–ç°åœ¨ä»…é’ˆå¯¹åµŒå…¥å¼æ•°æ®æºå¯ç”¨ï¼Œå¹¶å°†åœ¨æ‚¨ä½¿ç”¨ç”Ÿäº§æ•°æ®åº“æ—¶ç«‹å³å…³é—­ã€‚æ–°çš„<code>spring.datasource.initialization-mode</code>ï¼ˆæ›¿æ¢<code>spring.datasource.initialize</code>ï¼‰æä¾›æ›´å¤šçš„æ§åˆ¶ã€‚</p><h5 id="æ›´æ–°é»˜è®¤çš„â€™åˆ›å»º-åˆ é™¤â€™å¤„ç†"><a href="#æ›´æ–°é»˜è®¤çš„â€™åˆ›å»º-åˆ é™¤â€™å¤„ç†" class="headerlink" title="æ›´æ–°é»˜è®¤çš„â€™åˆ›å»º - åˆ é™¤â€™å¤„ç†"></a>æ›´æ–°é»˜è®¤çš„â€™åˆ›å»º - åˆ é™¤â€™å¤„ç†</h5><p><code>spring.jpa.hibernate.ddl-auto</code> å±æ€§é»˜è®¤ä¸ºåªæœ‰åœ¨æ²¡æœ‰ä½¿ç”¨ Liquibase æˆ– Flyway ç­‰æ¨¡å¼ç®¡ç†å™¨æ—¶æ‰ä½¿ç”¨åµŒå…¥å¼æ•°æ®åº“è¿›è¡Œåˆ›å»ºã€‚ä¸€æ—¦æ£€æµ‹åˆ°æ¨¡å¼ç®¡ç†å™¨ï¼Œé»˜è®¤æ›´æ”¹ä¸º <code>none</code>ã€‚</p><h4 id="æ•´åˆ-NoSQL"><a href="#æ•´åˆ-NoSQL" class="headerlink" title="æ•´åˆ NoSQL"></a>æ•´åˆ NoSQL</h4><h5 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h5><p>ç°åœ¨ä½¿ç”¨çš„æ˜¯ <a href="https://lettuce.io/" target="_blank" rel="noopener">Lettuce</a> è€Œä¸æ˜¯ <a href="https://github.com/xetorthio/jedis" target="_blank" rel="noopener">Jedis</a> ä½œä¸º Redis é©±åŠ¨ç¨‹åº<code>spring-boot-starter-redis</code>ã€‚å¦‚æœæ‚¨ä½¿ç”¨æ›´é«˜çº§åˆ«çš„Spring Data æ„é€ ï¼Œåˆ™åº”è¯¥å‘ç°å˜åŒ–æ˜¯é€æ˜çš„ã€‚æˆ‘ä»¬ä»ç„¶æ”¯æŒ Jedisï¼Œå¦‚æœæ‚¨æ„¿æ„ï¼Œé€šè¿‡æ’é™¤ <code>io.lettuceï¼šlettuce-core</code>å¹¶æ·»åŠ  <code>redis.clientsï¼šjedis</code>ï¼Œåˆ™å¯ä»¥è‡ªç”±åˆ‡æ¢ä¾èµ–é¡¹ã€‚</p><h5 id="Elasticsearch"><a href="#Elasticsearch" class="headerlink" title="Elasticsearch"></a>Elasticsearch</h5><p>Elasticsearch å·²ç»å‡çº§åˆ° 6.0+ã€‚ä¸ <a href="https://www.elastic.co/blog/elasticsearch-the-server" target="_blank" rel="noopener">Elastic å®£å¸ƒåµŒå…¥å¼ Elasticsearch ä¸å†å—æ”¯æŒä¸€è‡´</a>ï¼Œè‡ªåŠ¨é…ç½®<code>NodeClient</code>å·²è¢«åˆ é™¤ã€‚<code>TransportClient</code>å¯ä»¥é€šè¿‡ä½¿ç”¨<code>spring.data.elasticsearch.cluster-nodes</code>æä¾›è¦è¿æ¥çš„ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹çš„åœ°å€æ¥è‡ªåŠ¨é…ç½®ã€‚</p><h4 id="é«˜é€Ÿç¼“å­˜"><a href="#é«˜é€Ÿç¼“å­˜" class="headerlink" title="é«˜é€Ÿç¼“å­˜"></a>é«˜é€Ÿç¼“å­˜</h4><p>ç”¨äºç¼“å­˜çš„ä¸“ç”¨ Hazelcast è‡ªåŠ¨é…ç½®ã€‚</p><p>æ— æ³•è‡ªåŠ¨é…ç½®å¸¸è§„<code>HazelcastInstance</code>å’Œä¸“ç”¨<code>HazelcastInstance</code>ç¼“å­˜ã€‚å› æ­¤ï¼Œè¯¥<code>spring.cache.hazelcast.config</code>å±æ€§å·²ä¸å†å¯ç”¨ã€‚</p><h4 id="æ‰¹é‡"><a href="#æ‰¹é‡" class="headerlink" title="æ‰¹é‡"></a>æ‰¹é‡</h4><p>åœ¨å¯åŠ¨æ—¶æ‰§è¡Œæ‰¹å¤„ç†ä½œä¸šçš„ CommandLineRunner çš„é¡ºåºä¸º 0ã€‚</p><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><h5 id="Mockito-1-x"><a href="#Mockito-1-x" class="headerlink" title="Mockito 1.x"></a>Mockito 1.x</h5><p>Mockito 1.x ä¸å†æ”¯æŒ<code>@MockBean</code>å’Œ<code>@SpyBean</code>ã€‚å¦‚æœä½ ä¸ç”¨<code>spring-boot-starter-test</code>æ¥ç®¡ç†ä½ çš„ä¾èµ–å…³ç³»ï¼Œä½ åº”è¯¥å‡çº§åˆ° Mockito 2.x.</p><h3 id="Spring-Boot-Actuator"><a href="#Spring-Boot-Actuator" class="headerlink" title="Spring Boot Actuator"></a>Spring Boot Actuator</h3><p>Spring Boot 2 ä¸º Actuator å¸¦æ¥äº†é‡è¦å˜åŒ–ï¼Œæ— è®ºæ˜¯å†…éƒ¨è¿˜æ˜¯é¢å‘ç”¨æˆ·ï¼Œè¯·æŸ¥é˜…<a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#production-ready" target="_blank" rel="noopener">å‚è€ƒæŒ‡å—ä¸­</a>çš„<a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#production-ready" target="_blank" rel="noopener">æ›´æ–°éƒ¨åˆ†</a>å’Œ<a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/actuator-api/html" target="_blank" rel="noopener">æ–°çš„Actuator APIæ–‡æ¡£</a>ã€‚</p><p>æ‚¨åº”è¯¥æœŸæœ›ç¼–ç¨‹æ¨¡å‹ï¼Œé…ç½®å¯†é’¥å’ŒæŸäº›ç«¯ç‚¹çš„å“åº”æ ¼å¼å‘ç”Ÿå˜åŒ–ã€‚Actuator ç°åœ¨åœ¨ Spring MVCï¼ŒSpring WebFlux å’ŒJersey ä¸Šå¾—åˆ°æœ¬åœ°æ”¯æŒã€‚</p><h4 id="æ„å»º"><a href="#æ„å»º" class="headerlink" title="æ„å»º"></a>æ„å»º</h4><p>Actuator çš„ä»£ç åˆ†ä¸ºä¸¤ä¸ªæ¨¡å—ï¼šç°æœ‰çš„<code>spring-boot-actuator</code>å’Œæ–°çš„<code>spring-boot-actuator-autoconfigure</code>ã€‚å¦‚æœæ‚¨ä½¿ç”¨åŸå§‹æ¨¡å—ï¼ˆ<code>spring-boot-actuator</code>ï¼‰å¯¼å…¥ actuatorï¼Œè¯·è€ƒè™‘ä½¿ç”¨<code>spring-boot-starter-actuator</code>å¯åŠ¨å™¨æ›¿ä»£å®ƒã€‚</p><h4 id="Keys-çš„é…ç½®ç»“æ„"><a href="#Keys-çš„é…ç½®ç»“æ„" class="headerlink" title="Keys çš„é…ç½®ç»“æ„"></a>Keys çš„é…ç½®ç»“æ„</h4><p>Endpoints åŸºç¡€é…ç½® key å·²ç»ç»Ÿä¸€ï¼š</p><table><thead><tr><th style="text-align:center">æ—§çš„å±æ€§</th><th style="text-align:center">æ–°çš„å±æ€§</th></tr></thead><tbody><tr><td style="text-align:center"><code>endpoints.&lt;id&gt;.*</code></td><td style="text-align:center"><code>management.endpoint.&lt;id&gt;.*</code></td></tr><tr><td style="text-align:center"><code>endpoints.cors.*</code></td><td style="text-align:center"><code>management.endpoints.web.cors.*</code></td></tr><tr><td style="text-align:center"><code>endpoints.jmx.*</code></td><td style="text-align:center"><code>management.endpoints.jmx.*</code></td></tr><tr><td style="text-align:center"><code>management.address</code></td><td style="text-align:center"><code>management.server.address</code></td></tr><tr><td style="text-align:center"><code>management.context-path</code></td><td style="text-align:center"><code>management.server.servlet.context-path</code></td></tr><tr><td style="text-align:center"><code>management.ssl.*</code></td><td style="text-align:center"><code>management.server.ssl.*</code></td></tr><tr><td style="text-align:center"><code>management.port</code></td><td style="text-align:center">management.server.port</td></tr></tbody></table><h4 id="åŸºæœ¬è·¯å¾„"><a href="#åŸºæœ¬è·¯å¾„" class="headerlink" title="åŸºæœ¬è·¯å¾„"></a>åŸºæœ¬è·¯å¾„</h4><p>æ‰€æœ‰ endpoints é»˜è®¤æƒ…å†µä¸‹éƒ½å·²ç§»è‡³ <code>/actuator</code>ã€‚</p><p>æˆ‘ä»¬ä¿®æ”¹äº† <code>management.server.servlet.context-path</code> çš„å«ä¹‰ï¼šå®ƒç°åœ¨æ˜¯ <code>server.servlet.context-path</code> çš„ç«¯ç‚¹ç®¡ç†çš„ç­‰ä»·æ›¿ä»£ï¼ˆåªæœ‰åœ¨è®¾ç½®äº† <code>management.server.port</code> æ—¶æ‰æœ‰æ•ˆï¼‰ã€‚å¦å¤–ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ–°çš„å•ç‹¬å±æ€§ <code>management.endpoints.web.base-path</code> ä¸ºç®¡ç†ç«¯ç‚¹è®¾ç½®åŸºæœ¬è·¯å¾„ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœä½ è®¾ç½®<code>management.server.servlet.context-path=/management</code>å’Œ<code>management.endpoints.web.base-path=/application</code>ï¼Œä½ å°±å¯ä»¥åœ¨ä¸‹é¢çš„è·¯å¾„åˆ°è¾¾ç»ˆç‚¹å¥åº·ï¼š<code>/management/application/health</code>ã€‚</p><p>å¦‚æœä½ æƒ³æ¢å¤ 1.x çš„è¡Œä¸ºï¼ˆå³å…·æœ‰<code>/health</code>ä»£æ›¿<code>/actuator/health</code>ï¼‰ï¼Œè®¾ç½®ä»¥ä¸‹å±æ€§ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">management.endpoints.web.base-path=/</span><br></pre></td></tr></table></figure><h4 id="å®¡è®¡äº‹ä»¶-API-æ›´æ”¹"><a href="#å®¡è®¡äº‹ä»¶-API-æ›´æ”¹" class="headerlink" title="å®¡è®¡äº‹ä»¶ API æ›´æ”¹"></a>å®¡è®¡äº‹ä»¶ API æ›´æ”¹</h4><p><code>AuditEventRepository</code> ç°åœ¨æœ‰ä¸€ä¸ªåŒ…å«æ‰€æœ‰å¯é€‰å‚æ•°çš„å•ä¸€æ–¹æ³•ã€‚</p><h4 id="Endpoints"><a href="#Endpoints" class="headerlink" title="Endpoints"></a>Endpoints</h4><p>è¦é€šè¿‡ HTTP ä½¿æ‰§è¡Œå™¨ç«¯ç‚¹å¯ç”¨ï¼Œå®ƒéœ€è¦åŒæ—¶<strong>å¯ç”¨</strong>å’Œ<strong>å…¬å¼€</strong>ã€‚é»˜è®¤ï¼š</p><ul><li><strong>æ— è®ºæ‚¨çš„åº”ç”¨ç¨‹åºä¸­æ˜¯å¦å­˜åœ¨å’Œé…ç½® Spring Security</strong>ï¼Œåªæœ‰ç«¯ç‚¹<code>/health</code>å’Œ<code>/info</code>ç«¯ç‚¹éƒ½æ˜¯æš´éœ²çš„ã€‚</li><li>æ‰€æœ‰ç«¯ç‚¹ï¼Œä½†<code>/shutdown</code>å·²å¯ç”¨ã€‚</li></ul><p>æ‚¨å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼å…¬å¼€æ‰€æœ‰ç«¯ç‚¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">management.endpoints.web.exposure.include=*</span><br></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ˜¾å¼å¯ç”¨<code>/shutdown</code>ç«¯ç‚¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">management.endpoint.shutdown.enabled=true</span><br></pre></td></tr></table></figure><p>è¦å…¬å¼€æ‰€æœ‰ï¼ˆå·²å¯ç”¨ï¼‰ç½‘ç»œç«¯ç‚¹é™¤<code>env</code>ç«¯ç‚¹ä¹‹å¤–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">management.endpoints.web.exposure.include=*</span><br><span class="line">management.endpoints.web.exposure.exclude=env</span><br></pre></td></tr></table></figure><h5 id="Endpoint-changes"><a href="#Endpoint-changes" class="headerlink" title="Endpoint changes"></a>Endpoint changes</h5><table><thead><tr><th>1.x ç«¯ç‚¹</th><th>2.0 ç«¯ç‚¹ï¼ˆæ”¹å˜ï¼‰</th></tr></thead><tbody><tr><td><code>/actuator</code></td><td>ä¸å†å¯ç”¨ã€‚ ä½†æ˜¯ï¼Œåœ¨ <code>management.endpoints.web.base-path</code> çš„æ ¹ç›®å½•ä¸­æœ‰ä¸€ä¸ªæ˜ å°„ï¼Œå®ƒæä¾›äº†åˆ°æ‰€æœ‰æš´éœ²ç«¯ç‚¹çš„é“¾æ¥ã€‚</td></tr><tr><td><code>/auditevents</code></td><td>è¯¥<code>after</code>å‚æ•°ä¸å†éœ€è¦</td></tr><tr><td><code>/autoconfig</code></td><td>é‡å‘½åä¸º <code>/conditions</code></td></tr><tr><td><code>/docs</code></td><td>ä¸å†å¯ç”¨</td></tr><tr><td><code>/health</code></td><td>ç°åœ¨æœ‰ä¸€ä¸ª <code>management.endpoint.health.show-details</code> é€‰é¡¹  <code>never</code>, <code>always</code>, <code>when-authenticated</code>ï¼Œè€Œä¸æ˜¯ä¾é   <code>sensitive</code> æ ‡å¿—æ¥ç¡®å®š <code>health</code> ç«¯ç‚¹æ˜¯å¦å¿…é¡»æ˜¾ç¤ºå…¨éƒ¨ç»†èŠ‚ã€‚  é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>/actuator/health</code>å…¬å¼€å¹¶ä¸”ä¸æ˜¾ç¤ºç»†èŠ‚ã€‚</td></tr><tr><td><code>/trace</code></td><td>é‡å‘½åä¸º <code>/httptrace</code></td></tr></tbody></table><p>ç«¯ç‚¹å±æ€§å·²æ›´æ”¹å¦‚ä¸‹ï¼š</p><ul><li><code>endpoints.&lt;id&gt;.enabled</code> å·²ç»è½¬ç§»åˆ°äº† <code>management.endpoint.&lt;id&gt;.enabled</code></li><li><code>endpoints.&lt;id&gt;.id</code> æ²¡æœ‰æ›¿æ¢ï¼ˆç«¯ç‚¹çš„ ID ä¸å†å¯é…ç½®ï¼‰</li><li><code>endpoints.&lt;id&gt;.sensitive</code>æ²¡æœ‰æ›¿ä»£å“ï¼ˆè¯·å‚è§<a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Migration-Guide#actuator-security" target="_blank" rel="noopener">æ‰§è¡Œå™¨å®‰å…¨</a>ï¼‰</li><li><code>endpoints.&lt;id&gt;.path</code> å·²ç»è½¬ç§»åˆ°äº† <code>management.endpoints.web.path-mapping.&lt;id&gt;</code></li></ul><h4 id="ç«¯ç‚¹æ ¼å¼"><a href="#ç«¯ç‚¹æ ¼å¼" class="headerlink" title="ç«¯ç‚¹æ ¼å¼"></a>ç«¯ç‚¹æ ¼å¼</h4><h5 id="actuator-mappings-ç«¯ç‚¹å¤§æ”¹å˜"><a href="#actuator-mappings-ç«¯ç‚¹å¤§æ”¹å˜" class="headerlink" title="/actuator/mappings ç«¯ç‚¹å¤§æ”¹å˜"></a><code>/actuator/mappings</code> ç«¯ç‚¹å¤§æ”¹å˜</h5><p>JSON æ ¼å¼å·²ç»æ›´æ”¹ä¸ºç°åœ¨æ­£ç¡®åœ°åŒ…å«æœ‰å…³ä¸Šä¸‹æ–‡å±‚æ¬¡ç»“æ„ï¼Œå¤šä¸ª<code>DispatcherServletsï¼Œ</code>éƒ¨ç½²çš„ Servlet å’Œ Servlet è¿‡æ»¤å™¨çš„ä¿¡æ¯ã€‚è¯¦æƒ…è¯·å‚é˜…<a href="https://github.com/spring-projects/spring-boot/issues/9979#issuecomment-357930821" target="_blank" rel="noopener">ï¼ƒ9979</a>ã€‚</p><p>Actuator API æ–‡æ¡£çš„<a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/actuator-api/html/#mappings" target="_blank" rel="noopener">ç›¸å…³éƒ¨åˆ†</a>æä¾›äº†ä¸€ä¸ªç¤ºä¾‹æ–‡æ¡£ã€‚</p><h5 id="actuator-httptrace-ç«¯ç‚¹å¤§æ”¹å˜"><a href="#actuator-httptrace-ç«¯ç‚¹å¤§æ”¹å˜" class="headerlink" title="/actuator/httptrace ç«¯ç‚¹å¤§æ”¹å˜"></a><code>/actuator/httptrace</code> ç«¯ç‚¹å¤§æ”¹å˜</h5><p>å“åº”çš„ç»“æ„å·²ç»è¿‡æ”¹è¿›ï¼Œä»¥åæ˜ ç«¯ç‚¹å…³æ³¨è·Ÿè¸ª HTTP è¯·æ±‚ - å“åº”äº¤æ¢çš„æƒ…å†µã€‚</p><h4 id="è¿ç§»è‡ªå®šä¹‰ç«¯ç‚¹"><a href="#è¿ç§»è‡ªå®šä¹‰ç«¯ç‚¹" class="headerlink" title="è¿ç§»è‡ªå®šä¹‰ç«¯ç‚¹"></a>è¿ç§»è‡ªå®šä¹‰ç«¯ç‚¹</h4><p>å¦‚æœæ‚¨æœ‰è‡ªå®šä¹‰æ‰§è¡Œå™¨ç«¯ç‚¹ï¼Œè¯·<a href="https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0" target="_blank" rel="noopener">æŸ¥çœ‹ä¸“ç”¨åšå®¢æ–‡ç« </a>ã€‚è¯¥å›¢é˜Ÿè¿˜æ’°å†™äº†ä¸€ä¸ª wiki é¡µé¢ï¼Œä»‹ç»<a href="https://github.com/spring-projects/spring-boot/wiki/Migrating-a-custom-Actuator-endpoint-to-Spring-Boot-2" target="_blank" rel="noopener">å¦‚ä½•å°†ç°æœ‰çš„æ‰§è¡Œå™¨ç«¯ç‚¹è¿ç§»</a>åˆ°æ–°çš„åŸºç¡€æ¶æ„ã€‚</p><h3 id="Metrics"><a href="#Metrics" class="headerlink" title="Metrics"></a>Metrics</h3><p>Spring Boot è‡ªå·±çš„æŒ‡æ ‡å·²è¢«æ”¯æŒå–ä»£ï¼ŒåŒ…æ‹¬è‡ªåŠ¨é…ç½®ï¼Œç”¨äº <a href="https://micrometer.io/" target="_blank" rel="noopener">icrometer</a>  å’Œ dimensional æŒ‡æ ‡ã€‚</p><h4 id="è®¾ç½®-icrometer"><a href="#è®¾ç½®-icrometer" class="headerlink" title="è®¾ç½® icrometer"></a>è®¾ç½® icrometer</h4><p>å¦‚æœæ‚¨çš„ Spring Boot 2.0 åº”ç”¨ç¨‹åºå·²ä¾èµ–äº Actuatorï¼Œåˆ™ icrometer å·²åœ¨æ­¤å¤„å¹¶è‡ªåŠ¨é…ç½®ã€‚å¦‚æœæ‚¨å¸Œæœ›å°†åº¦é‡æ ‡å‡†å¯¼å‡ºåˆ° Prometheusï¼ŒAtlas æˆ– Datadog ç­‰å¤–éƒ¨æ³¨å†Œè¡¨ï¼ŒMicrometer å°†ä¸ºè®¸å¤šæ³¨å†Œè¡¨æä¾›ä¾èµ–å…³ç³»; æ‚¨å¯ä»¥ä½¿ç”¨<code>spring.metrics.*</code>å±æ€§é…ç½®æ‚¨çš„åº”ç”¨ç¨‹åºä»¥å¯¼å‡ºåˆ°ç‰¹å®šçš„æ³¨å†Œè¡¨ã€‚</p><h4 id="è¿ç§»å®šåˆ¶è®¡æ•°å™¨-é‡è¡¨"><a href="#è¿ç§»å®šåˆ¶è®¡æ•°å™¨-é‡è¡¨" class="headerlink" title="è¿ç§»å®šåˆ¶è®¡æ•°å™¨/é‡è¡¨"></a>è¿ç§»å®šåˆ¶è®¡æ•°å™¨/é‡è¡¨</h4><p>æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åˆ›å»ºå„ç§æŒ‡æ ‡ï¼Œè€Œä¸æ˜¯åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­æ³¨å…¥<code>CounterService</code>æˆ–<code>GaugeService</code>çš„å®ä¾‹ï¼š</p><ul><li>æ³¨å…¥<code>MeterRegistry</code>å’Œè°ƒç”¨æ–¹æ³•ã€‚</li><li>ç›´æ¥è°ƒç”¨é™æ€æ–¹æ³•<code>Counter featureCounter = Metrics.counter(&quot;feature&quot;);</code>ã€‚</li></ul><h3 id="å¼€å‘è€…å·¥å…·"><a href="#å¼€å‘è€…å·¥å…·" class="headerlink" title="å¼€å‘è€…å·¥å…·"></a>å¼€å‘è€…å·¥å…·</h3><h4 id="çƒ­æ‹”æ’"><a href="#çƒ­æ‹”æ’" class="headerlink" title="çƒ­æ‹”æ’"></a>çƒ­æ‹”æ’</h4><p>ç”±äº Spring Loaded é¡¹ç›®è¢«æç½®ï¼Œå®ƒåœ¨ Spring Boot çš„æ”¯æŒå·²è¢«åˆ é™¤ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨ Devtoolsã€‚</p><h4 id="Devtools-è¿œç¨‹è°ƒè¯•éš§é“"><a href="#Devtools-è¿œç¨‹è°ƒè¯•éš§é“" class="headerlink" title="Devtools è¿œç¨‹è°ƒè¯•éš§é“"></a>Devtools è¿œç¨‹è°ƒè¯•éš§é“</h4><p>å·²ç»ä» Devtools ä¸­åˆ é™¤äº†å¯¹é€šè¿‡ HTTP è¿›è¡Œéš§é“è¿œç¨‹è°ƒè¯•çš„æ”¯æŒã€‚</p><h3 id="å·²åˆ é™¤çš„åŠŸèƒ½"><a href="#å·²åˆ é™¤çš„åŠŸèƒ½" class="headerlink" title="å·²åˆ é™¤çš„åŠŸèƒ½"></a>å·²åˆ é™¤çš„åŠŸèƒ½</h3><p>ä»¥ä¸‹åŠŸèƒ½ä¸å†å¯ç”¨ï¼š</p><ul><li>CRaSH æ”¯æŒ</li><li>Spring Mobile çš„è‡ªåŠ¨é…ç½®å’Œä¾èµ–å…³ç³»ç®¡ç†ã€‚</li><li>Spring Social çš„è‡ªåŠ¨é…ç½®å’Œä¾èµ–å…³ç³»ç®¡ç†ã€‚</li><li>ä¾èµ–å…³ç³»ç®¡ç†<code>commons-digester</code>ã€‚</li></ul><h3 id="ä¾èµ–ç‰ˆæœ¬"><a href="#ä¾èµ–ç‰ˆæœ¬" class="headerlink" title="ä¾èµ–ç‰ˆæœ¬"></a>ä¾èµ–ç‰ˆæœ¬</h3><p>ä»¥ä¸‹åº“çš„æœ€ä½æ”¯æŒç‰ˆæœ¬å·²æ›´æ”¹ï¼š</p><ul><li>Elasticsearch 5.6</li><li>Gradle 4</li><li>Hibernate 5.2</li><li>Jetty 9.4</li><li>Spring Framework 5</li><li>Spring Security 5</li><li>Tomcat 8.5</li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="">https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Migration-Guide</a></p><h3 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h3><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-Migration-Guide/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å—</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-new-features/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2018/04/13/Spring_Boot_2.0_Configuration_Changelog/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2018/04/15/springboot2_code/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º</a></p><p>5ã€<a href="http://www.54tianzhisheng.cn/2018/04/18/spring_boot2_project/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ</a></p><p>6ã€<a href="http://www.54tianzhisheng.cn/2018/04/19/SpringBootApplication-annotation/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring boot 2.0 ä¸­ SpringBootApplication æ³¨è§£è¯¦è§£</a></p><p>7ã€<a href="http://www.54tianzhisheng.cn/2018/04/30/springboot_SpringApplication/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸ƒ)ï¼šSpringApplication æ·±å…¥æ¢ç´¢</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws4.sinaimg.cn/large/006tNc79gy1fp3h0820m2j31hc0zkwxr.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‰æ&quot;&gt;&lt;a href=&quot;#å‰æ&quot; class=&quot;headerlink&quot; title=&quot;å‰æ&quot;&gt;&lt;/a&gt;å‰æ&lt;/h3&gt;&lt;p&gt;å¸Œæœ›æœ¬æ–‡æ¡£å°†å¸®åŠ©æ‚¨æŠŠåº”ç”¨ç¨‹åºè¿ç§»åˆ° Spring Boot 2.0ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£</title>
    <link href="http://yoursite.com/2018/03/06/SpringBoot2-new-features/"/>
    <id>http://yoursite.com/2018/03/06/SpringBoot2-new-features/</id>
    <published>2018-03-05T16:00:00.000Z</published>
    <updated>2018-05-02T13:28:09.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fp34jn0xb3j31hc140aji.jpg" alt=""></p><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>åœ¨ 3 æœˆ 1 å·ï¼ŒSpring Boot<code>2.0.0.RELEASE</code>æ­£å¼å‘å¸ƒï¼Œè¿™æ˜¯ Spring Boot1.0 å‘å¸ƒ 4 å¹´ä¹‹åç¬¬ä¸€æ¬¡é‡å¤§ä¿®è®¢ï¼Œå› æ­¤æœ‰å¤šçš„æ–°åŠŸèƒ½å’Œç‰¹æ€§å€¼å¾—å¤§å®¶æœŸå¾…ï¼ä¸‹é¢å¸¦å¤§å®¶äº†è§£ä¸‹ Spring Boot 2.0 ä¸­çš„æ–°ç‰¹æ€§ã€‚</p><a id="more"></a><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-new-features/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-new-features/</a></p><h3 id="ä»-Spring-Boot-1-5-å‡çº§"><a href="#ä»-Spring-Boot-1-5-å‡çº§" class="headerlink" title="ä» Spring Boot 1.5 å‡çº§"></a>ä» Spring Boot 1.5 å‡çº§</h3><p>ç”±äº Spring Boot 2.0 çš„æ”¹å˜å¹…åº¦æœ‰ç‚¹å¤§ï¼Œæ‰€ä»¥å‡çº§ç°æœ‰çš„ç¨‹åºå¯èƒ½ä¼šæ¯”å¹³å¸¸æ›´å¤§ä¸€äº›ã€‚</p><p>å¦‚æœä½ è¿˜åœ¨è€ƒè™‘æ˜¯å¦è¦å‡çº§ï¼Œè¿™é‡Œæ¨è DD çš„åšå®¢æ–‡ç« ï¼š<a href="http://blog.didispace.com/spring-boot-2-release/" target="_blank" rel="noopener">Spring Boot 2.0 æ­£å¼å‘å¸ƒï¼Œå‡è¿˜æ˜¯ä¸å‡å‘¢ï¼Ÿ</a></p><p>å¦‚æœè¦å‡çº§å¯ä»¥å‚è€ƒæˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼š<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-Migration-Guide/" target="_blank" rel="noopener">Spring Boot 2.0 è¿ç§»æŒ‡å—</a></p><p>å¦‚æœæ‚¨ç›®å‰æ­£åœ¨è¿è¡Œè¾ƒæ—©ç‰ˆæœ¬çš„ Spring Bootï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨åœ¨è¿ç§»åˆ° Spring Boot 2.0 ä¹‹å‰å…ˆå‡çº§åˆ° Spring Boot 1.5ã€‚</p><h3 id="æ–°çš„å’Œå€¼å¾—æ³¨æ„çš„ç‰¹æ€§"><a href="#æ–°çš„å’Œå€¼å¾—æ³¨æ„çš„ç‰¹æ€§" class="headerlink" title="æ–°çš„å’Œå€¼å¾—æ³¨æ„çš„ç‰¹æ€§"></a>æ–°çš„å’Œå€¼å¾—æ³¨æ„çš„ç‰¹æ€§</h3><p>å°æŠ€å·§ï¼šæ£€æŸ¥ <a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Configuration-Changelog" target="_blank" rel="noopener">é…ç½®æ›´æ”¹æ—¥å¿—</a> æ¥è·å–é…ç½®æ›´æ”¹çš„å®Œæ•´æè¿°ã€‚</p><h3 id="èµ·ç -JDK-8-å’Œæ”¯æŒ-JDK-9"><a href="#èµ·ç -JDK-8-å’Œæ”¯æŒ-JDK-9" class="headerlink" title="èµ·ç  JDK 8 å’Œæ”¯æŒ JDK 9"></a>èµ·ç  JDK 8 å’Œæ”¯æŒ JDK 9</h3><p>Spring Boot 2.0 è¦æ±‚ Java 8 ä½œä¸ºæœ€ä½ç‰ˆæœ¬ã€‚è®¸å¤šç°æœ‰çš„ API å·²æ›´æ–°ï¼Œä»¥åˆ©ç”¨ Java 8 çš„ç‰¹æ€§ï¼Œä¾‹å¦‚ï¼šæ¥å£ä¸Šçš„é»˜è®¤æ–¹æ³•ï¼Œå‡½æ•°å›è°ƒä»¥åŠæ–°çš„ APIï¼Œå¦‚<code>javax.time</code>ã€‚å¦‚æœæ‚¨å½“å‰æ­£åœ¨ä½¿ç”¨ Java 7 æˆ–æ›´æ—©ç‰ˆæœ¬ï¼Œåˆ™åœ¨å¼€å‘ Spring Boot 2.0 åº”ç”¨ç¨‹åºä¹‹å‰ï¼Œæ‚¨éœ€è¦å‡çº§æ‚¨çš„ JDKã€‚</p><p>Spring Boot 2.0 é€šè¿‡äº†åœ¨ JDK 9 ä¸‹çš„æµ‹è¯•ï¼Œå¯ä»¥åœ¨ JDK 9 ä¸‹æ­£å¸¸è¿è¡Œï¼Œã€‚æˆ‘ä»¬æ‰€æœ‰çš„ jar åŒ…éƒ½åœ¨æ¨¡å—ç³»ç»Ÿå…¼å®¹æ€§çš„æ¸…å•ä¸­é™„å¸¦äº†è‡ªåŠ¨æ¨¡å—åç§°æ¡ç›®ã€‚</p><h3 id="ç¬¬ä¸‰æ–¹åº“çš„å‡çº§"><a href="#ç¬¬ä¸‰æ–¹åº“çš„å‡çº§" class="headerlink" title="ç¬¬ä¸‰æ–¹åº“çš„å‡çº§"></a>ç¬¬ä¸‰æ–¹åº“çš„å‡çº§</h3><p>Spring Boot 2.0 å»ºç«‹åœ¨ Spring Framework 5 ä¹‹ä¸Šï¼Œå¹¶ä¸”éœ€è¦ Spring Framework 5 ã€‚ä½ å¯ä»¥é€šè¿‡  <a href="https://github.com/spring-projects/spring-framework/wiki/What%27s-New-in-Spring-Framework-5.x" target="_blank" rel="noopener">Whatâ€™s New in Spring Framework 5.x</a>  äº†è§£ Spring 5 çš„æ–°ç‰¹æ€§ã€‚å¹¶åœ¨ç»§ç»­ä¹‹å‰æŸ¥çœ‹å…¶å‡çº§æŒ‡å— <a href="https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-5.x" target="_blank" rel="noopener">Upgrading to Spring Framework 5.x</a> ã€‚</p><p>æˆ‘ä»¬å·²å°½å¯èƒ½å‡çº§åˆ°å…¶ä»–ç¬¬ä¸‰æ–¹åº“çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬ã€‚ æœ¬ç‰ˆæœ¬ä¸­ä¸€äº›æ˜¾ç€çš„ä¾èµ–æ€§å‡çº§åŒ…æ‹¬ï¼š</p><ul><li>Tomcat 8.5</li><li>Flyway 5</li><li>Hibernate 5.2</li><li>Thymeleaf 3</li></ul><h3 id="Reactive-Spring"><a href="#Reactive-Spring" class="headerlink" title="Reactive Spring"></a>Reactive Spring</h3><p>Spring äº§å“ç»„åˆä¸­çš„è®¸å¤šé¡¹ç›®ç°åœ¨éƒ½ä¸ºå¼€å‘<a href="https://github.com/reactive-streams/reactive-streams-jvm#reactive-streams" target="_blank" rel="noopener">ååº”å¼åº”ç”¨ç¨‹åº</a>æä¾›ä¸€æµçš„æ”¯æŒã€‚ååº”æ€§åº”ç”¨ç¨‹åºæ˜¯å®Œå…¨å¼‚æ­¥å’Œéé˜»å¡çš„ã€‚å®ƒä»¬æ—¨åœ¨ç”¨äºäº‹ä»¶å¾ªç¯æ‰§è¡Œæ¨¡å‹ï¼ˆè€Œä¸æ˜¯æ›´ä¼ ç»Ÿçš„æ¯ä¸ªè¯·æ±‚çº¿ç¨‹æ‰§è¡Œæ¨¡å‹ï¼‰ã€‚Spring æ¡†æ¶å‚è€ƒæ–‡æ¡£ä¸­çš„<a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html" target="_blank" rel="noopener">â€œWeb ååº”å †æ ˆâ€</a>éƒ¨åˆ†ä¸ºè¿™ä¸ªä¸»é¢˜æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„å…¥é—¨ã€‚</p><p>Spring Boot 2.0 é€šè¿‡è‡ªåŠ¨é…ç½®å’Œå¯åŠ¨å™¨ POM å®Œå…¨æ”¯æŒååº”å¼åº”ç”¨ã€‚Spring Boot çš„å†…éƒ¨æœ¬èº«ä¹Ÿåœ¨å¿…è¦æ—¶è¿›è¡Œäº†æ›´æ–°ï¼Œä»¥æä¾›ååº”æ€§çš„ååº”ï¼ˆæœ€æ˜æ˜¾çš„æ˜¯æˆ‘ä»¬çš„åµŒå…¥å¼æœåŠ¡å™¨æ”¯æŒï¼‰ã€‚</p><h4 id="Spring-WebFluxï¼†WebFlux-fn"><a href="#Spring-WebFluxï¼†WebFlux-fn" class="headerlink" title="Spring WebFluxï¼†WebFlux.fn"></a>Spring WebFluxï¼†WebFlux.fn</h4><p>Spring WebFlux æ˜¯ Spring MVC çš„å®Œå…¨éé˜»å¡ååº”å¼æ›¿ä»£æ–¹æ¡ˆã€‚Spring Boot ä¸ºåŸºäºæ³¨é‡Šçš„ Spring WebFlux åº”ç”¨ç¨‹åºä»¥åŠ WebFlux.fn æä¾›äº†è‡ªåŠ¨é…ç½®ï¼ŒWebFlux.fn æä¾›äº†æ›´å®ç”¨çš„æ ·å¼ APIã€‚</p><p>è¦å¼€å§‹ï¼Œè¯·æ·»åŠ  <code>spring-boot-starter-webflux</code> åˆ° POMï¼Œå®ƒå°†æä¾›ç”±åµŒå…¥å¼ Netty æœåŠ¡å™¨æ”¯æŒçš„ Spring WebFluxã€‚</p><h4 id="Reactive-Spring-Data"><a href="#Reactive-Spring-Data" class="headerlink" title="Reactive Spring Data"></a>Reactive Spring Data</h4><p>åœ¨åº•å±‚æŠ€æœ¯æ”¯æŒçš„æƒ…å†µä¸‹ï¼ŒSpring Data è¿˜ä¸ºååº”å¼åº”ç”¨ç¨‹åºæä¾›æ”¯æŒã€‚ç›®å‰ Cassandraï¼ŒMongoDBï¼ŒCouchbase å’Œ Redis éƒ½æœ‰ååº”å¼ API æ”¯æŒã€‚</p><p>Spring Boot åŒ…å«é’ˆå¯¹è¿™äº›æŠ€æœ¯çš„ç‰¹æ®Š starter-POMsï¼Œå¯ä¸ºæ‚¨æä¾›å¯åŠ¨æ‰€éœ€çš„ä¸€åˆ‡ã€‚ä¾‹å¦‚ï¼Œ<code>spring-boot-starter-data-mongodb-reactive</code>åŒ…æ‹¬å¯¹ååº”æ€§ mongo é©±åŠ¨ç¨‹åºå’Œé¡¹ç›®ååº”å †çš„ä¾èµ–æ€§ã€‚</p><h4 id="Reactive-Spring-Security"><a href="#Reactive-Spring-Security" class="headerlink" title="Reactive Spring Security"></a>Reactive Spring Security</h4><p>Spring Boot 2.0 å¯ä»¥å……åˆ†åˆ©ç”¨ Spring Security 5.0 æ¥ä¿æŠ¤æ‚¨çš„ååº”å¼åº”ç”¨ç¨‹åºã€‚å½“ Spring Security ä½äºç±»è·¯å¾„ä¸­æ—¶ï¼Œä¼šä¸º WebFlux åº”ç”¨ç¨‹åºæä¾›è‡ªåŠ¨é…ç½®ã€‚</p><p>ä½¿ç”¨ WebFlux çš„ Spring Security è®¿é—®è§„åˆ™å¯ä»¥é€šè¿‡<code>SecurityWebFilterChain</code>ã€‚å¦‚æœä½ ä¹‹å‰æ•´åˆè¿‡ Spring MVC å’Œ Spring Securityï¼Œåº”è¯¥ä¼šæ„Ÿåˆ°éå¸¸ç†Ÿæ‚‰ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="http://docs.spring.io/spring-boot/docs/2.0.x-SNAPSHOT/reference/htmlsingle/#boot-features-security-webflux" target="_blank" rel="noopener">Spring Boot å‚è€ƒæ–‡æ¡£</a>å’Œ <a href="https://docs.spring.io/spring-security/site/docs/5.0.0.RELEASE/reference/htmlsingle/#jc-webflux" target="_blank" rel="noopener">Spring Security æ–‡æ¡£</a>ã€‚</p><h4 id="åµŒå…¥å¼-Netty-æœåŠ¡å™¨"><a href="#åµŒå…¥å¼-Netty-æœåŠ¡å™¨" class="headerlink" title="åµŒå…¥å¼ Netty æœåŠ¡å™¨"></a>åµŒå…¥å¼ Netty æœåŠ¡å™¨</h4><p>ç”±äº WebFlux ä¸ä¾èµ–äº Servlet APIï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥é¦–æ¬¡ä¸º Netty ä½œä¸ºåµŒå…¥å¼æœåŠ¡å™¨æä¾›æ”¯æŒã€‚è¯¥<code>spring-boot-starter-webflux</code>  å¯åŠ¨ POM å°†æ‹‰å– Netty  4.1 å’Œ <a href="https://github.com/reactor/reactor-netty" target="_blank" rel="noopener">Ractor Netty</a> ã€‚</p><p>æ³¨æ„ï¼šæ‚¨åªèƒ½å°† Netty ç”¨ä½œååº”å¼æœåŠ¡å™¨ã€‚ä¸æä¾›é˜»æ­¢ servlet API æ”¯æŒã€‚</p><h3 id="HTTP-2-æ”¯æŒ"><a href="#HTTP-2-æ”¯æŒ" class="headerlink" title="HTTP/2 æ”¯æŒ"></a>HTTP/2 æ”¯æŒ</h3><p>ä¸º Tomcatï¼ŒUndertow å’Œ Jetty æä¾› HTTP / 2 æ”¯æŒã€‚æ”¯æŒå–å†³äºæ‰€é€‰çš„ Web æœåŠ¡å™¨å’Œåº”ç”¨ç¨‹åºç¯å¢ƒï¼ˆå› ä¸º JDK 8 ä¸æ”¯æŒè¯¥åè®®ï¼‰ã€‚</p><p>å¦‚ä½•é…ç½® HTTPï¼2ï¼Œè¯·å‚è€ƒ <a href="https://docs.spring.io/spring-boot/docs/2.0.x-SNAPSHOT/reference/htmlsingle/#howto-configure-http2" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a> ã€‚</p><h3 id="é…ç½®å±æ€§çš„ç»‘å®š"><a href="#é…ç½®å±æ€§çš„ç»‘å®š" class="headerlink" title="é…ç½®å±æ€§çš„ç»‘å®š"></a>é…ç½®å±æ€§çš„ç»‘å®š</h3><p>åœ¨ Spring Boot 2.0 ä¸­ï¼Œç”¨äºç»‘å®š<code>Environment</code>å±æ€§çš„æœºåˆ¶<code>@ConfigurationProperties</code>å·²ç»å®Œå…¨å½»åº•ä¿®æ”¹ã€‚æˆ‘ä»¬å€Ÿæ­¤æœºä¼šæ”¶ç´§äº†æ¾æ•£ç»‘å®šçš„è§„åˆ™ï¼Œå¹¶ä¿®å¤äº† Spring Boot 1.x ä¸­çš„è®¸å¤šä¸ä¸€è‡´ä¹‹å¤„ã€‚</p><p>æ–°çš„<code>Binder</code>API ä¹Ÿå¯ä»¥<code>@ConfigurationProperties</code>ç›´æ¥åœ¨ä½ è‡ªå·±çš„ä»£ç ä¹‹å¤–ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢å°†ç»“åˆåˆ°<code>List</code>çš„<code>PersonName</code>å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;PersonName&gt; people = Binder.get(environment)</span><br><span class="line">    .bind(<span class="string">"my.property"</span>, Bindable.listOf(PersonName.class))</span><br><span class="line">    .orElseThrow(IllegalStateException::<span class="keyword">new</span>);</span><br></pre></td></tr></table></figure><p>é…ç½®æºå¯ä»¥åƒè¿™æ ·åœ¨ YAML ä¸­è¡¨ç¤ºï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">my:</span></span><br><span class="line"><span class="attr">  property:</span></span><br><span class="line"><span class="attr">  - first-name:</span> <span class="string">zhisheng</span></span><br><span class="line"><span class="attr">    last-name:</span> <span class="string">tian</span></span><br><span class="line"><span class="attr">  - first-name:</span> <span class="string">zhisheng</span></span><br><span class="line"><span class="attr">    last-name:</span> <span class="string">tian</span></span><br></pre></td></tr></table></figure><p>æœ‰å…³æ›´æ–°ç»‘å®šè§„åˆ™çš„æ›´å¤šä¿¡æ¯ï¼Œ<a href="https://github.com/spring-projects/spring-boot/wiki/Relaxed-Binding-2.0" target="_blank" rel="noopener">è¯·å‚é˜…æ­¤Wikié¡µé¢</a>ã€‚</p><h4 id="é…ç½®èµ·æº"><a href="#é…ç½®èµ·æº" class="headerlink" title="é…ç½®èµ·æº"></a>é…ç½®èµ·æº</h4><p>YAML æ–‡ä»¶å’Œè¢« Spring Boot åŠ è½½çš„ Properties æ–‡ä»¶ç°åœ¨åŒ…å«<code>Origin</code>ä¿¡æ¯ï¼Œå¯å¸®åŠ©æ‚¨è·Ÿè¸ªé¡¹ç›®ä»ä½•å¤„åŠ è½½çš„ä¿¡æ¯ã€‚æœ‰äº› Spring Boot ç‰¹æ€§åˆ©ç”¨äº†è¿™ä¸ªä¿¡æ¯å¯ä»¥åœ¨é€‚å½“çš„æ—¶å€™å±•ç¤ºå‡ºæ¥ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>BindException</code>ç»‘å®šå¤±è´¥æ—¶æŠ›å‡ºçš„ç±»æ˜¯ä¸€ä¸ª<code>OriginProvider</code>ã€‚è¿™æ„å‘³ç€åŸå§‹ä¿¡æ¯å¯ä»¥å¾ˆå¥½åœ°ä»æ•…éšœåˆ†æå™¨ä¸­æ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>å¦ä¸€ä¸ªä¾‹å­æ˜¯<code>env</code>æ‰§è¡Œå™¨ç«¯ç‚¹ï¼Œå½“å®ƒæœ‰å¯ç”¨æ—¶åŒ…å«äº†åŸå§‹ä¿¡æ¯ã€‚ä¸‹é¢çš„ä»£ç ç‰‡æ–­æ˜¾ç¤ºè¯¥<code>spring.security.user.name</code>å±æ€§æ¥è‡ª jar åŒ…ä¸­çš„ application.properties æ–‡ä»¶çš„ç¬¬ 1è¡Œï¼Œç¬¬ 27 åˆ—ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"applicationConfig: [classpath:/application.properties]"</span>,</span><br><span class="line">  <span class="attr">"properties"</span>: &#123;</span><br><span class="line">    <span class="attr">"spring.security.user.name"</span>: &#123;</span><br><span class="line">      <span class="attr">"value"</span>: <span class="string">"user"</span>,</span><br><span class="line">      <span class="attr">"origin"</span>: <span class="string">"class path resource [application.properties]:1:27"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è½¬æ¢å™¨æ”¯æŒ"><a href="#è½¬æ¢å™¨æ”¯æŒ" class="headerlink" title="è½¬æ¢å™¨æ”¯æŒ"></a>è½¬æ¢å™¨æ”¯æŒ</h4><p>Binding åˆ©ç”¨äº†ä¸€ä¸ªæ–°çš„ <code>ApplicationConversionService</code> ç±»ï¼Œå®ƒæä¾›äº†ä¸€äº›å¯¹å±æ€§ç»‘å®šç‰¹åˆ«æœ‰ç”¨çš„é¢å¤–è½¬æ¢å™¨ã€‚æœ€å¼•äººæ³¨ç›®çš„æ˜¯è½¬æ¢å™¨çš„<code>Duration</code>ç±»å‹å’Œåˆ†éš”å­—ç¬¦ä¸²ã€‚</p><p>è¯¥<code>Duration</code>è½¬æ¢å™¨å…è®¸åœ¨ä»»ä¸€ ISO-8601 æ ¼å¼ä¸­æŒ‡å®šçš„æŒç»­æ—¶é—´ï¼Œæˆ–ä½œä¸ºä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚<code>10m</code>ï¼Œ10 åˆ†é’Ÿï¼‰ã€‚ç°æœ‰çš„å±æ€§å·²æ›´æ”¹ä¸ºå§‹ç»ˆä½¿ç”¨<code>Duration</code>ã€‚è¯¥<code>@DurationUnit</code>æ³¨é‡Šé€šè¿‡è®¾ç½®å¦‚æœæ²¡æœ‰æŒ‡å®šæ‰€ä½¿ç”¨çš„å•å…ƒç¡®ä¿å‘åå…¼å®¹æ€§ã€‚ä¾‹å¦‚ï¼ŒSpring Boot 1.5 ä¸­éœ€è¦ç§’æ•°çš„å±æ€§ç°åœ¨å¿…é¡»<code>@DurationUnit(ChronoUnit.SECONDS)</code>ç¡®ä¿ä¸€ä¸ªç®€å•çš„å€¼ï¼Œä¾‹å¦‚<code>10</code>å®é™…ä½¿ç”¨çš„å€¼<code>10s</code>ã€‚</p><p>åˆ†éš”å­—ç¬¦ä¸²è½¬æ¢å…è®¸æ‚¨å°†ç®€å•ç»‘å®š<code>String</code>åˆ°<code>Collection</code>æˆ–<code>Array</code>ä¸å¿…åˆ†å‰²é€—å·ã€‚ä¾‹å¦‚ï¼ŒLDAP <code>base-dn</code> å±æ€§ç”¨ <code>@Delimiter(Delimiter.NONE)</code>ï¼Œæ‰€ä»¥ LDAP DNï¼ˆé€šå¸¸åŒ…å«é€—å·ï¼‰ä¸ä¼šè¢«é”™è¯¯è§£é‡Šã€‚</p><h3 id="Gradle-æ’ä»¶"><a href="#Gradle-æ’ä»¶" class="headerlink" title="Gradle æ’ä»¶"></a>Gradle æ’ä»¶</h3><p>Spring Boot çš„ Gradle æ’ä»¶å·²åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šè¿›è¡Œäº†é‡æ–°ç¼–å†™ï¼Œä»¥å®ç°<a href="https://github.com/spring-projects/spring-boot/issues?utf8=%E2%9C%93&amp;q=label%3A%22theme%3A%20gradle-plugin%22%20milestone%3A2.0.0.M1%20" target="_blank" rel="noopener">è®¸å¤šé‡å¤§æ”¹è¿›</a>ã€‚æ‚¨å¯ä»¥åœ¨å…¶<a href="http://docs.spring.io/spring-boot/docs/2.0.x-SNAPSHOT/gradle-plugin/reference" target="_blank" rel="noopener">å‚è€ƒæ–‡çŒ®</a>å’Œ <a href="https://docs.spring.io/spring-boot/docs/2.0.0.BUILD-SNAPSHOT/gradle-plugin/api" target="_blank" rel="noopener">API</a> æ–‡æ¡£ä¸­é˜…è¯»å…³äºæ’ä»¶åŠŸèƒ½çš„æ›´å¤šä¿¡æ¯ã€‚</p><p>Spring Boot ç°åœ¨éœ€è¦ Gradle 4.x. å¦‚æœæ‚¨è¦å‡çº§ä½¿ç”¨ Gradle çš„é¡¹ç›®ï¼Œè¯·æŸ¥çœ‹<a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Migration-Guide" target="_blank" rel="noopener">è¿ç§»æŒ‡å—</a>ã€‚</p><h3 id="Kotlin"><a href="#Kotlin" class="headerlink" title="Kotlin"></a>Kotlin</h3><p>Spring Boot 2.0 ç°åœ¨åŒ…å«å¯¹ Kotlin 1.2.x çš„æ”¯æŒï¼Œå¹¶æä¾›äº†<code>runApplication</code> ï¼Œä¸€ä¸ªä½¿ç”¨ Kotlin è¿è¡Œ Spring Boot åº”ç”¨ç¨‹åºçš„æ–¹æ³•ã€‚æˆ‘ä»¬è¿˜å…¬å¼€å’Œåˆ©ç”¨äº† Kotlin å¯¹å…¶ä»– Spring é¡¹ç›®ï¼ˆå¦‚Spring Frameworkï¼ŒSpring Data å’Œ Reactorï¼‰å·²æ·»åŠ åˆ°å…¶æœ€è¿‘ç‰ˆæœ¬ä¸­çš„æ”¯æŒã€‚</p><p>æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="http://docs.spring.io/spring-boot/docs/2.0.x-SNAPSHOT/reference/htmlsingle/#boot-features-kotlin" target="_blank" rel="noopener">å‚è€ƒæ–‡æ¡£</a>çš„<a href="http://docs.spring.io/spring-boot/docs/2.0.x-SNAPSHOT/reference/htmlsingle/#boot-features-kotlin" target="_blank" rel="noopener">Kotlinæ”¯æŒéƒ¨åˆ†</a>ã€‚</p><h3 id="Actuator-æ”¹è¿›"><a href="#Actuator-æ”¹è¿›" class="headerlink" title="Actuator æ”¹è¿›"></a>Actuator æ”¹è¿›</h3><p>åœ¨ Spring Boot 2.0 ä¸­ Actuator endpoints æœ‰å¾ˆå¤§çš„æ”¹è¿›ã€‚æ‰€æœ‰ HTTP Actuator endpoints ç°åœ¨éƒ½åœ¨è¯¥<code>/actuator</code>è·¯å¾„ä¸‹å…¬å¼€ï¼Œå¹¶ä¸”ç”Ÿæˆçš„ JSON æœ‰æ•ˆè´Ÿè½½å¾—åˆ°äº†æ”¹è¿›ã€‚</p><p>æˆ‘ä»¬ç°åœ¨ä¹Ÿä¸ä¼šåœ¨é»˜è®¤æƒ…å†µä¸‹æš´éœ²å¾ˆå¤šç«¯ç‚¹ã€‚å¦‚æœæ‚¨è¦å‡çº§ç°æœ‰çš„ Spring Boot 1.5 åº”ç”¨ç¨‹åºï¼Œè¯·åŠ¡å¿…æŸ¥çœ‹<a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Migration-Guide" target="_blank" rel="noopener">è¿ç§»æŒ‡å—</a>å¹¶ç‰¹åˆ«æ³¨æ„è¯¥<code>management.endpoints.web.exposure.include</code>å±æ€§ã€‚</p><h4 id="Actuator-JSON"><a href="#Actuator-JSON" class="headerlink" title="Actuator JSON"></a>Actuator JSON</h4><p>Spring Boot 2.0 æ”¹è¿›äº†ä»è®¸å¤šç«¯ç‚¹è¿”å›çš„ JSON æœ‰æ•ˆè´Ÿè½½ã€‚</p><p>ç°åœ¨è®¸å¤šç«¯ç‚¹éƒ½å…·æœ‰æ›´ç²¾ç¡®åœ°åæ˜ åº•å±‚æ•°æ®çš„ JSONã€‚ä¾‹å¦‚ï¼Œ<code>/actuator/conditions</code>ç»ˆç«¯ï¼ˆ<code>/autoconfig</code>åœ¨Spring Boot 1.5ä¸­ï¼‰ç°åœ¨æœ‰ä¸€ä¸ªé¡¶çº§<code>contexts</code>å¯†é’¥æ¥å°†ç»“æœåˆ†ç»„<code>ApplicationContext</code>ã€‚</p><p>ç°åœ¨è¿˜ä½¿ç”¨ <a href="https://projects.spring.io/spring-restdocs/" target="_blank" rel="noopener">Spring REST Docs</a> ç”Ÿæˆäº†å¹¿æ³›çš„ <a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/actuator-api/html/" target="_blank" rel="noopener">REST API </a> <a href="https://projects.spring.io/spring-restdocs/" target="_blank" rel="noopener">æ–‡æ¡£ï¼Œ</a>å¹¶éšæ¯ä¸ªç‰ˆæœ¬å‘å¸ƒã€‚</p><h4 id="Jersey-and-WebFlux-æ”¯æŒ"><a href="#Jersey-and-WebFlux-æ”¯æŒ" class="headerlink" title="Jersey and WebFlux æ”¯æŒ"></a>Jersey and WebFlux æ”¯æŒ</h4><p>é™¤äº†æ”¯æŒ Spring MVC å’Œ JMXï¼Œæ‚¨ç°åœ¨å¯ä»¥åœ¨å¼€å‘ Jersey æˆ– WebFlux åº”ç”¨ç¨‹åºæ—¶è®¿é—®æ‰§è¡Œå™¨ç«¯ç‚¹ã€‚Jersey æ”¯æŒé€šè¿‡è‡ªå®šä¹‰ Jersey æä¾›<code>Resource</code>ï¼ŒWebFlux ä½¿ç”¨è‡ªå®šä¹‰<code>HandlerMapping</code>ã€‚</p><h4 id="Hypermedia-links"><a href="#Hypermedia-links" class="headerlink" title="Hypermedia links"></a>Hypermedia links</h4><p>è¯¥<code>/actuator</code>ç«¯ç‚¹ç°åœ¨æä¾›äº†ä¸€ä¸ª HAL æ ¼å¼çš„å“åº”æä¾›é“¾æ¥åˆ°æ‰€æœ‰æ´»åŠ¨ç«¯ç‚¹ï¼ˆå³ä½¿ä½ æ²¡æœ‰ Spring HATEOAS åœ¨classpathï¼‰ã€‚</p><h4 id="Actuator-Endpoints"><a href="#Actuator-Endpoints" class="headerlink" title="Actuator @Endpoints"></a>Actuator @Endpoints</h4><p>ä¸ºäº†æ”¯æŒ Spring MVCï¼ŒJMXï¼ŒWebFlux å’Œ Jerseyï¼Œæˆ‘ä»¬ä¸º Actuator @Endpoints å¼€å‘äº†ä¸€ç§æ–°çš„ç¼–ç¨‹æ¨¡å‹ã€‚è¯¥<code>@Endpoint</code>æ³¨è§£å¯ä»¥ä¸<code>@ReadOperation</code>ï¼Œ<code>@WriteOperation</code> å’Œ <code>@DeleteOperation</code> ç»„åˆä½¿ç”¨å¼€å‘ endpointsã€‚</p><p>æ‚¨è¿˜å¯ä»¥ä½¿ç”¨<code>@EndpointWebExtension</code>æˆ–<code>@EndpointJmxExtension</code>ç¼–å†™æŠ€æœ¯ç‰¹å®šçš„å¢å¼ºåŠŸèƒ½åˆ° endpointsã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚é˜…<a href="http://docs.spring.io/spring-boot/docs/2.0.x-SNAPSHOT/reference/htmlsingle/#production-ready-endpoints-custom" target="_blank" rel="noopener">æ›´æ–°çš„å‚è€ƒæ–‡æ¡£</a>ã€‚</p><h4 id="Micrometer"><a href="#Micrometer" class="headerlink" title="Micrometer"></a>Micrometer</h4><p>Spring Boot 2.0 ä¸å†æä¾›è‡ªå·±çš„æŒ‡æ ‡ APIã€‚ç›¸åï¼Œæˆ‘ä»¬ä¾é  <a href="https://micrometer.io/" target="_blank" rel="noopener">micrometer.io</a> æ¥æ»¡è¶³æ‰€æœ‰åº”ç”¨ç¨‹åºç›‘è§†éœ€æ±‚ã€‚</p><p>Micrometer åŒ…æ‹¬å°ºå¯¸æŒ‡æ ‡çš„æ”¯æŒï¼Œå½“ä¸å°ºå¯¸ç›‘æµ‹ç³»ç»Ÿé…å¯¹æ—¶ï¼Œå°ºå¯¸æŒ‡æ ‡å¯ä»¥æœ‰æ•ˆè®¿é—®ç‰¹å®šçš„æŒ‡å®šåº¦é‡æ ‡å‡†ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å…¶å°ºå¯¸èŒƒå›´å†…å‘ä¸‹é’»å–ã€‚</p><p>æŒ‡æ ‡å¯ä»¥è¾“å‡ºåˆ°å„ç§ç³»ç»Ÿå’Œå¼€ç®±å³ç”¨çš„ Spring Boot 2.0ï¼Œä¸º Atlasï¼ŒDatadogï¼ŒGangliaï¼ŒGraphiteï¼ŒInfluxï¼ŒJMXï¼ŒNew Relicï¼ŒPrometheusï¼ŒSignalFxï¼ŒStatsD å’Œ Wavefront æä¾›æ”¯æŒã€‚å¦å¤–è¿˜å¯ä»¥ä½¿ç”¨ç®€å•çš„å†…å­˜ä¸­åº¦é‡æ ‡å‡†ã€‚</p><p>é›†æˆéš JVM æŒ‡æ ‡ï¼ˆåŒ…æ‹¬ CPUï¼Œå†…å­˜ï¼Œçº¿ç¨‹å’Œ GCï¼‰ï¼ŒLogbackï¼ŒTomcatï¼ŒSpring MVCï¼†æä¾›<code>RestTemplate</code>ã€‚</p><p>æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…å‚è€ƒæ–‡æ¡£çš„æ›´æ–°<a href="http://docs.spring.io/spring-boot/docs/2.0.x-SNAPSHOT/reference/htmlsingle/#production-ready-metrics" target="_blank" rel="noopener">â€œæŒ‡æ ‡â€éƒ¨åˆ†</a>ã€‚</p><h3 id="æ•°æ®æ”¯æŒ"><a href="#æ•°æ®æ”¯æŒ" class="headerlink" title="æ•°æ®æ”¯æŒ"></a>æ•°æ®æ”¯æŒ</h3><p>é™¤äº†ä¸Šé¢æåˆ°çš„ <code>Reactive Spring Data</code> æ”¯æŒå¤–ï¼Œåœ¨æ•°æ®é¢†åŸŸè¿˜è¿›è¡Œäº†å…¶ä»–ä¸€äº›æ›´æ–°å’Œæ”¹è¿›ã€‚</p><h4 id="HikariCP"><a href="#HikariCP" class="headerlink" title="HikariCP"></a>HikariCP</h4><p>Spring Boot 2.0 ä¸­çš„é»˜è®¤æ•°æ®åº“æ± æŠ€æœ¯å·²ä» Tomcat Pool åˆ‡æ¢åˆ° HikariCPã€‚æˆ‘ä»¬å‘ç° Hakari æä¾›äº†å“è¶Šçš„æ€§èƒ½ï¼Œæˆ‘ä»¬çš„è®¸å¤šç”¨æˆ·æ›´å–œæ¬¢ Tomcat Poolã€‚</p><h4 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h4><p>æ•°æ®åº“åˆå§‹åŒ–é€»è¾‘åœ¨ Spring Boot 2.0 ä¸­å·²ç»åˆç†åŒ–ã€‚Spring Batchï¼ŒSpring Integrationï¼ŒSpring Session å’Œ Quartzçš„åˆå§‹åŒ–ç°åœ¨ä»…åœ¨ä½¿ç”¨åµŒå…¥å¼æ•°æ®åº“æ—¶æ‰ä¼šé»˜è®¤å‘ç”Ÿã€‚è¯¥<code>enabled</code>å±æ€§å·²è¢«æ›¿æ¢ä¸ºæ›´å…·è¡¨ç°åŠ›æšä¸¾ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³ä¸€ç›´æ‰§è¡Œ Spring Batch çš„åˆå§‹åŒ–ï¼Œæ‚¨å¯ä»¥è®¾ç½®<code>spring.batch.initialize-schema=always</code>ã€‚</p><p>å¦‚æœ Flyway æˆ– Liquibase æ­£åœ¨ç®¡ç†æ‚¨çš„ DataSource çš„æ¨¡å¼ï¼Œå¹¶ä¸”æ‚¨æ­£åœ¨ä½¿ç”¨åµŒå…¥å¼æ•°æ®åº“ï¼ŒSpring Boot ç°åœ¨ä¼šè‡ªåŠ¨å…³é—­ Hibernate çš„è‡ªåŠ¨ DDL åŠŸèƒ½ã€‚</p><h4 id="JOOQ"><a href="#JOOQ" class="headerlink" title="JOOQ"></a>JOOQ</h4><p>Spring Boot 2.0 ç°åœ¨åŸºäº DataSource è‡ªåŠ¨æ£€æµ‹ JOOQ æ–¹è¨€ï¼ˆç±»ä¼¼äºä¸º JPA æ–¹è¨€æ‰€åšçš„ï¼‰ã€‚<code>@JooqTest</code>æ˜¯æ–°å¼•å…¥çš„æ³¨è§£ç”¨æ¥ç®€åŒ–é‚£äº›åªæœ‰ JOOQ å¿…é¡»è¢«ä½¿ç”¨çš„æµ‹è¯•ã€‚</p><h4 id="JdbcTemplate"><a href="#JdbcTemplate" class="headerlink" title="JdbcTemplate"></a>JdbcTemplate</h4><p>Spring Boot è‡ªåŠ¨é…ç½®çš„ <code>JdbcTemplate</code> ç°åœ¨å¯ä»¥é€šè¿‡ <code>spring.jdbc.template</code> å±æ€§è¿›è¡Œè‡ªå®šä¹‰ã€‚æ­¤å¤–ï¼Œ<code>NamedParameterJdbcTemplate</code>è‡ªåŠ¨é…ç½®çš„å†…å®¹ä¼šé‡ç”¨<code>JdbcTemplate</code>ã€‚</p><h4 id="Spring-Data-Web-é…ç½®"><a href="#Spring-Data-Web-é…ç½®" class="headerlink" title="Spring Data Web é…ç½®"></a>Spring Data Web é…ç½®</h4><p>Spring Boot å…¬å¼€äº†ä¸€ä¸ªæ–°çš„<code>spring.data.web</code>é…ç½®åç§°ç©ºé—´ï¼Œå¯ä»¥è½»æ¾é…ç½®åˆ†é¡µå’Œæ’åºã€‚</p><h4 id="InfluxDB"><a href="#InfluxDB" class="headerlink" title="InfluxDB"></a>InfluxDB</h4><p>Spring Boot ç°åœ¨è‡ªåŠ¨é…ç½®å¼€æºæ—¶é—´åºåˆ—æ•°æ®åº“ InfluxDBã€‚è¦å¯ç”¨ InfluxDB æ”¯æŒï¼Œæ‚¨éœ€è¦è®¾ç½®ä¸€ä¸ª<code>spring.influx.url</code>å±æ€§ï¼Œå¹¶å°†å…¶åŒ…å«<code>influxdb-java</code>åœ¨æ‚¨çš„ç±»è·¯å¾„ä¸­ã€‚</p><h4 id="Flyway-Liquibase-çµæ´»é…ç½®"><a href="#Flyway-Liquibase-çµæ´»é…ç½®" class="headerlink" title="Flyway/Liquibase çµæ´»é…ç½®"></a>Flyway/Liquibase çµæ´»é…ç½®</h4><p>å¦‚æœä»…æä¾›è‡ªå®šä¹‰<code>url</code>æˆ–<code>user</code>å±æ€§ï¼Œåˆ™ Flyway å’Œ Liquibase çš„è‡ªåŠ¨é…ç½®ç°åœ¨å°†é‡ç”¨æ ‡å‡†æ•°æ®æºå±æ€§ï¼Œè€Œä¸æ˜¯å¿½ç•¥å®ƒä»¬ã€‚è¿™ä½¿æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„æ•°æ®æºï¼Œä»…ç”¨äºæ‰€éœ€ä¿¡æ¯çš„è¿ç§»ã€‚</p><h4 id="Hibernate"><a href="#Hibernate" class="headerlink" title="Hibernate"></a>Hibernate</h4><p>ç°åœ¨æ”¯æŒè‡ªå®šä¹‰ Hibernate å‘½åç­–ç•¥ã€‚å¯¹äºé«˜çº§åœºæ™¯ï¼Œç°åœ¨å¯ä»¥åœ¨ä¸Šä¸‹æ–‡ä¸­å®šä¹‰<code>ImplicitNamingStrategy</code>æˆ–<code>PhysicalNamingStrategy</code>ä½¿ç”¨å¸¸è§„ beanã€‚</p><p>ç°åœ¨ä¹Ÿå¯ä»¥é€šè¿‡å…¬å¼€<code>HibernatePropertiesCustomizer</code>bean æ¥æ›´åŠ ç»†è‡´åœ°å®šåˆ¶ Hibernate ä½¿ç”¨çš„å±æ€§ã€‚</p><h4 id="MongoDB-å®¢æˆ·ç«¯è‡ªå®šä¹‰"><a href="#MongoDB-å®¢æˆ·ç«¯è‡ªå®šä¹‰" class="headerlink" title="MongoDB å®¢æˆ·ç«¯è‡ªå®šä¹‰"></a>MongoDB å®¢æˆ·ç«¯è‡ªå®šä¹‰</h4><p>ç°åœ¨å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ªç±»å‹çš„ bean æ¥ä¸º Spring Boot è‡ªåŠ¨é…ç½®çš„ Mongo å®¢æˆ·ç«¯åº”ç”¨é«˜çº§å®šåˆ¶<code>MongoClientSettingsBuilderCustomizer</code>ã€‚</p><h4 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h4><p>ç°åœ¨å¯ä»¥ä½¿ç”¨<code>spring.cache.redis.*</code>å±æ€§é…ç½® Redis çš„ç¼“å­˜é»˜è®¤å€¼ã€‚</p><h3 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h3><p>é™¤äº†ä¸Šé¢æåˆ°çš„ WebFlux å’Œ WebFlux.fn æ”¯æŒä¹‹å¤–ï¼Œè¿˜åœ¨å¼€å‘ Web åº”ç”¨ç¨‹åºæ—¶è¿›è¡Œäº†ä»¥ä¸‹æ”¹è¿›ã€‚</p><h4 id="ä¸Šä¸‹æ–‡è·¯å¾„è®°å½•"><a href="#ä¸Šä¸‹æ–‡è·¯å¾„è®°å½•" class="headerlink" title="ä¸Šä¸‹æ–‡è·¯å¾„è®°å½•"></a>ä¸Šä¸‹æ–‡è·¯å¾„è®°å½•</h4><p>å½“ä½¿ç”¨åµŒå…¥å¼å®¹å™¨æ—¶ï¼Œå½“æ‚¨çš„åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œä¸Šä¸‹æ–‡è·¯å¾„å°†ä¸ HTTP ç«¯å£ä¸€èµ·è®°å½•ã€‚ä¾‹å¦‚ï¼ŒåµŒå…¥å¼ Tomcat ç°åœ¨çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Tomcat åœ¨ç«¯å£ä¸Šå¯åŠ¨ï¼š8080ï¼ˆhttpï¼‰ï¼Œå…¶ä¸Šä¸‹æ–‡è·¯å¾„ä¸º &apos;/foo&apos;</span><br></pre></td></tr></table></figure><h4 id="Webè¿‡æ»¤å™¨åˆå§‹åŒ–"><a href="#Webè¿‡æ»¤å™¨åˆå§‹åŒ–" class="headerlink" title="Webè¿‡æ»¤å™¨åˆå§‹åŒ–"></a>Webè¿‡æ»¤å™¨åˆå§‹åŒ–</h4><p>Web è¿‡æ»¤å™¨ç°åœ¨åœ¨æ‰€æœ‰æ”¯æŒçš„å®¹å™¨ä¸Šæ€¥åˆ‡åœ°åˆå§‹åŒ–ã€‚</p><h4 id="Thymeleaf"><a href="#Thymeleaf" class="headerlink" title="Thymeleaf"></a>Thymeleaf</h4><p>Thymeleaf åˆå§‹åŒ–ç°åœ¨åŒ…æ‹¬<code>thymeleaf-extras-java8time</code>ï¼Œæä¾›<code>javax.time</code>ç±»å‹æ”¯æŒã€‚</p><h4 id="JSON-æ”¯æŒ"><a href="#JSON-æ”¯æŒ" class="headerlink" title="JSON æ”¯æŒ"></a>JSON æ”¯æŒ</h4><p>æ–°çš„<code>spring-boot-starter-json</code>èµ·å§‹è€…æ”¶é›†å¿…è¦çš„ä½ä»¥è¯»å–å’Œå†™å…¥ JSONã€‚å®ƒä¸ä»…æä¾›äº†<code>jackson-databind</code>ä¸Java8 å·¥ä½œæ—¶ï¼Œä¹Ÿæ˜¯æœ‰ç”¨çš„æ¨¡å—ï¼š<code>jackson-datatype-jdk8</code>ï¼Œ<code>jackson-datatype-jsr310</code>å’Œ<code>jackson-module-parameter-names</code>ã€‚è¿™ä¸ªæ–°çš„èµ·åŠ¨å™¨ç°åœ¨è¢«ç”¨äº<code>jackson-databind</code>ä¹‹å‰å®šä¹‰çš„åœ°æ–¹ã€‚</p><p>å¦‚æœæ‚¨æ›´å–œæ¬¢ Jackson ä¹‹å¤–çš„å…¶ä»–äº§å“ï¼Œæˆ‘ä»¬å¯¹ GSON çš„æ”¯æŒåœ¨ Spring Boot 2.0  å·²ç»å¤§å¤§æé«˜ã€‚æˆ‘ä»¬è¿˜å¼•å…¥äº†å¯¹ JSON-B çš„æ”¯æŒï¼ˆåŒ…æ‹¬ JSON-B æµ‹è¯•æ”¯æŒï¼‰ã€‚</p><h3 id="Quartz"><a href="#Quartz" class="headerlink" title="Quartz"></a>Quartz</h3><p>è‡ªåŠ¨é…ç½®æ”¯æŒç›®å‰åŒ…å«äº†  <a href="http://www.quartz-scheduler.org/" target="_blank" rel="noopener">Quartz Scheduler</a>ã€‚æˆ‘ä»¬è¿˜æ·»åŠ äº†æ–°çš„<code>spring-boot-starter-quartz</code> åˆå§‹åŒ– POMã€‚</p><p>æ‚¨å¯ä»¥ä½¿ç”¨å†…å­˜<code>JobStores</code>ä¸­æˆ–å®Œæ•´çš„åŸºäº JDBC çš„å­˜å‚¨ã€‚æ‰€æœ‰<code>JobDetail</code>ï¼Œ<code>Calendar</code>å¹¶<code>Trigger</code>ä»ä½ çš„ Springåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡è±†å°†è‡ªåŠ¨æ³¨å†Œ<code>Scheduler</code>ã€‚</p><p>æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯»å‚è€ƒæ–‡æ¡£çš„æ–°<a href="http://docs.spring.io/spring-boot/docs/2.0.x-SNAPSHOT/reference/htmlsingle/#boot-features-quartz" target="_blank" rel="noopener">â€œQuartz Schedulerâ€éƒ¨åˆ†</a>ã€‚</p><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>å¯¹ Spring Boot 2.0 ä¸­æä¾›çš„æµ‹è¯•æ”¯æŒè¿›è¡Œäº†ä¸€äº›è¡¥å……å’Œè°ƒæ•´ï¼š</p><ul><li><code>@WebFluxTest</code>å·²æ·»åŠ æ–°æ³¨é‡Šä»¥æ”¯æŒ WebFlux åº”ç”¨ç¨‹åºçš„â€œåˆ‡ç‰‡â€æµ‹è¯•ã€‚</li><li><code>Converter</code>å’Œ<code>GenericConverter</code>è±†ç±»ç°åœ¨è‡ªåŠ¨æ‰«æ<code>@WebMvcTest</code>å’Œ<code>@WebFluxTest</code>ã€‚</li><li><code>@AutoConfigureWebTestClient</code>å·²ç»æ·»åŠ äº†ä¸€ä¸ªæ³¨é‡Šæ¥æä¾›ä¸€ä¸ª<code>WebTestClient</code>bean ä¾›æµ‹è¯•ä½¿ç”¨ã€‚æ³¨é‡Šä¼šè‡ªåŠ¨åº”ç”¨äº<code>@WebFluxTest</code>æµ‹è¯•ã€‚</li><li>å¢åŠ äº†ä¸€ä¸ªæ–°çš„<code>ApplicationContextRunner</code>æµ‹è¯•å®ç”¨ç¨‹åºï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°æµ‹è¯•æ‚¨çš„è‡ªåŠ¨é…ç½®ã€‚æˆ‘ä»¬å·²å°†å¤§éƒ¨åˆ†å†…éƒ¨æµ‹è¯•å¥—ä»¶ç§»è‡³æ­¤æ–°æ¨¡å‹ã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚é˜…<a href="http://docs.spring.io/spring-boot/docs/2.0.x-SNAPSHOT/reference/htmlsingle/#boot-features-test-autoconfig" target="_blank" rel="noopener">æ›´æ–°çš„æ–‡æ¡£</a>ã€‚</li></ul><h3 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h3><p>é™¤äº†ä¸Šé¢åˆ—å‡ºçš„å˜åŒ–å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå°çš„è°ƒæ•´å’Œæ”¹è¿›ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li><code>@ConditionalOnBean</code>ç°åœ¨åœ¨ç¡®å®šæ˜¯å¦æ»¡è¶³æ¡ä»¶æ—¶ä½¿ç”¨é€»è¾‘<code>AND</code>è€Œä¸æ˜¯é€»è¾‘<code>OR</code>ã€‚</li><li>æ— æ¡ä»¶ç±»ç°åœ¨åŒ…å«åœ¨è‡ªåŠ¨é…ç½®æŠ¥å‘Šä¸­ã€‚</li><li>è¯¥<code>spring</code>CLI åº”ç”¨ç¨‹åºç°åœ¨åŒ…æ‹¬<code>encodepassword</code>å¯ç”¨äºåˆ›å»º Spring Security çš„å…¼å®¹æ•£åˆ—å¯†ç å‘½ä»¤ã€‚</li><li>è®¡åˆ’ä»»åŠ¡ï¼ˆå³ <code>@EnableScheduling</code>ï¼‰å¯ä»¥ä½¿ç”¨<code>scheduledtasks</code>æ‰§è¡Œå™¨ç«¯ç‚¹è¿›è¡Œå®¡æŸ¥ã€‚</li><li>è¯¥<code>loggers</code>é©±åŠ¨å™¨ç»ˆç«¯ç°åœ¨å…è®¸ä½ é‡æ–°è®¾ç½®ä¸€ä¸ªè®°å½•å™¨çº§åˆ«ä¸ºå®ƒçš„é»˜è®¤ã€‚</li><li>Spring Session ç”¨æˆ·ç°åœ¨å¯ä»¥é€šè¿‡<code>sessions</code>æ‰§è¡Œå™¨ç«¯ç‚¹æŸ¥æ‰¾å’Œåˆ é™¤ä¼šè¯ã€‚</li><li>ä½¿ç”¨<code>spring-boot-starter-parent</code>ç°åœ¨åŸºäº Maven çš„åº”ç”¨ç¨‹åº<code>-parameters</code>é»˜è®¤ä½¿ç”¨æ ‡å¿—ã€‚</li><li>æˆ‘ä»¬çš„æ„å»ºç°åœ¨ä½¿ç”¨ <a href="http://concourse.ci/" target="_blank" rel="noopener">concourse</a> çš„ CI å’Œæˆ‘ä»¬çš„é¡¹ç›® POM æ–‡ä»¶å·²è¢«é‡æ„ï¼Œä½¿å®ƒä»¬æ›´ç®€å•çš„ã€‚</li></ul><h3 id="åŠ¨ç”»-ASCII-è‰ºæœ¯"><a href="#åŠ¨ç”»-ASCII-è‰ºæœ¯" class="headerlink" title="åŠ¨ç”» ASCII è‰ºæœ¯"></a>åŠ¨ç”» ASCII è‰ºæœ¯</h3><p>æœ€åï¼Œä¸ºäº†å¥½ç©ï¼ŒSpring Boot 2.0 ç°åœ¨æ”¯æŒåŠ¨ç”» GIF æ¨ªå¹…ã€‚</p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fp34jnoouij30dc093dfp.jpg" alt="animated-ascii-art"></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="">https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Release-Notes</a></p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fp3jkmizmpj30o00didgn.jpg" alt=""></p><h3 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h3><p>1ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-Migration-Guide/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å—</a></p><p>2ã€<a href="http://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-new-features/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£</a></p><p>3ã€<a href="http://www.54tianzhisheng.cn/2018/04/13/Spring_Boot_2.0_Configuration_Changelog/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜</a></p><p>4ã€<a href="http://www.54tianzhisheng.cn/2018/04/15/springboot2_code/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º</a></p><p>5ã€<a href="http://www.54tianzhisheng.cn/2018/04/18/spring_boot2_project/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ</a></p><p>6ã€<a href="http://www.54tianzhisheng.cn/2018/04/19/SpringBootApplication-annotation/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring boot 2.0 ä¸­ SpringBootApplication æ³¨è§£è¯¦è§£</a></p><p>7ã€<a href="http://www.54tianzhisheng.cn/2018/04/30/springboot_SpringApplication/" target="_blank" rel="noopener">Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸ƒ)ï¼šSpringApplication æ·±å…¥æ¢ç´¢</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws2.sinaimg.cn/large/006tKfTcgy1fp34jn0xb3j31hc140aji.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h3&gt;&lt;p&gt;åœ¨ 3 æœˆ 1 å·ï¼ŒSpring Boot&lt;code&gt;2.0.0.RELEASE&lt;/code&gt;æ­£å¼å‘å¸ƒï¼Œè¿™æ˜¯ Spring Boot1.0 å‘å¸ƒ 4 å¹´ä¹‹åç¬¬ä¸€æ¬¡é‡å¤§ä¿®è®¢ï¼Œå› æ­¤æœ‰å¤šçš„æ–°åŠŸèƒ½å’Œç‰¹æ€§å€¼å¾—å¤§å®¶æœŸå¾…ï¼ä¸‹é¢å¸¦å¤§å®¶äº†è§£ä¸‹ Spring Boot 2.0 ä¸­çš„æ–°ç‰¹æ€§ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>å°é©¬å“¥ ã€ŠJava å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ã€‹å¼ºçƒˆæ¨è</title>
    <link href="http://yoursite.com/2018/03/04/springcloud-vedio/"/>
    <id>http://yoursite.com/2018/03/04/springcloud-vedio/</id>
    <published>2018-03-03T16:00:00.000Z</published>
    <updated>2018-03-06T16:22:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fp0tsq2q8vj30dc07idg8.jpg" alt="u=1933229855,2353978820&amp;fm=27&amp;gp=0"></p><h3 id="è§†é¢‘å†…å®¹"><a href="#è§†é¢‘å†…å®¹" class="headerlink" title="è§†é¢‘å†…å®¹"></a>è§†é¢‘å†…å®¹</h3><p>Spring Cloud ç³»åˆ—è¯¾ç¨‹è‡´åŠ›äºä»¥å®æˆ˜çš„æ–¹å¼è¦†ç›–æ‰€æœ‰åŠŸèƒ½ç‰¹æ€§ï¼Œç»“åˆå°é©¬å“¥åä½™å¹´çš„å­¦ä¹ æ–¹æ³•å’Œå·¥ä½œç»éªŒï¼Œä½“ä¼šä½œè€…è®¾è®¡æ„å›¾ã€‚ç»“åˆæºç åŠ æ·±ç†è§£ï¼Œæœ€ç»ˆè¾¾åˆ°å½¢æˆç³»ç»Ÿæ€§çš„çŸ¥è¯†å’ŒæŠ€æœ¯ä½“ç³»çš„ç›®çš„ã€‚</p><a id="more"></a><h3 id="è®²å¸ˆä»‹ç»"><a href="#è®²å¸ˆä»‹ç»" class="headerlink" title="è®²å¸ˆä»‹ç»"></a>è®²å¸ˆä»‹ç»</h3><blockquote><p><strong>å°é©¬å“¥</strong>ï¼Œä¸€çº¿äº’è”ç½‘å…¬å¸æŠ€æœ¯ä¸“å®¶ï¼Œåä½™å¹´ Java EE ä»ä¸šç»éªŒï¼Œæ¶æ„å¸ˆã€å¾®æœåŠ¡å¸ƒé“å¸ˆã€‚ç›®å‰ä¸»è¦è´Ÿè´£å¾®æœåŠ¡æŠ€æœ¯å®æ–½ã€æ¶æ„è¡è¿›ã€åŸºç¡€è®¾æ–½æ„å»ºç­‰ã€‚é‡ç‚¹å…³æ³¨äº‘è®¡ç®—ã€å¾®æœåŠ¡ä»¥åŠè½¯ä»¶æ¶æ„ç­‰é¢†åŸŸã€‚é€šè¿‡ SUN Javaï¼ˆSCJPã€SCWCDã€SCBCDï¼‰ä»¥åŠ Oracle OCA ç­‰çš„è®¤è¯ã€‚</p></blockquote><h3 id="è§†é¢‘åˆ—è¡¨"><a href="#è§†é¢‘åˆ—è¡¨" class="headerlink" title="è§†é¢‘åˆ—è¡¨"></a>è§†é¢‘åˆ—è¡¨</h3><p>1ã€<a href="https://segmentfault.com/l/1500000011384570" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆä¸€ï¼‰äº‘åŸç”Ÿåº”ç”¨</a></p><p>2ã€<a href="https://segmentfault.com/l/1500000011385195" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆäºŒï¼‰é…ç½®å®¢æˆ·ç«¯</a></p><p>3ã€<a href="https://segmentfault.com/l/1500000011385904" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆä¸‰ï¼‰é…ç½®æœåŠ¡å™¨</a></p><p>4ã€<a href="https://segmentfault.com/l/1500000011386051" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆå››ï¼‰æœåŠ¡å‘ç°/æ³¨å†Œ</a></p><p>5ã€<a href="https://segmentfault.com/l/1500000011386082" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆäº”ï¼‰é«˜å¯ç”¨æœåŠ¡æ²»ç†</a></p><p>6ã€<a href="https://segmentfault.com/l/1500000011386110" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆå…­ï¼‰è´Ÿè½½å‡è¡¡</a></p><p>7ã€<a href="https://segmentfault.com/l/1500000011386180" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆä¸ƒï¼‰Ribbon æºç </a></p><p>8ã€<a href="https://segmentfault.com/l/1500000011386237" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆå…«ï¼‰æœåŠ¡çŸ­è·¯</a></p><p>9ã€<a href="https://segmentfault.com/l/1500000011386273" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆä¹ï¼‰Hystrixæºç </a></p><p>10ã€<a href="https://segmentfault.com/l/1500000011386274" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆåï¼‰æœåŠ¡è°ƒç”¨</a></p><p>11ã€<a href="https://segmentfault.com/l/1500000011386451" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆåä¸€ï¼‰æœåŠ¡ç½‘å…³</a></p><p>12ã€<a href="https://segmentfault.com/l/1500000011386642" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆåäºŒï¼‰æ¶ˆæ¯é©±åŠ¨æ•´åˆ</a></p><p>13ã€<a href="https://segmentfault.com/l/1500000011386655" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆåä¸‰ï¼‰Binderå®ç°</a></p><p>14ã€<a href="https://segmentfault.com/l/1500000011386685" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆåå››ï¼‰æ¶ˆæ¯æ€»çº¿</a></p><p>15ã€<a href="https://segmentfault.com/l/1500000011386721" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆåäº”ï¼‰åˆ†å¸ƒå¼åº”ç”¨è·Ÿè¸ª</a></p><p>16ã€<a href="https://segmentfault.com/l/1500000011386751" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆåå…­ï¼‰ç³»åˆ—å›é¡¾</a></p><h3 id="è´­ä¹°é“¾æ¥"><a href="#è´­ä¹°é“¾æ¥" class="headerlink" title="è´­ä¹°é“¾æ¥"></a>è´­ä¹°é“¾æ¥</h3><p>ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢é“¾æ¥è´­ä¹°ï¼ˆæœ‰ä¼˜æƒ çš„å“¦ï¼‰</p><p><strong><a href="https://segmentfault.com/ls/1650000011386794?r=bPrFW3" target="_blank" rel="noopener">https://segmentfault.com/ls/1650000011386794?r=bPrFW3</a></strong></p><p>æˆ–è€…ä½ ä¹Ÿå¯ä»¥æ‰«æä¸‹é¢çš„äºŒç»´ç è´­ä¹°ï¼ˆåŒæ ·ä¹Ÿæœ‰ä¼˜æƒ çš„å“¦ï¼‰</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fp0td2936xj308c0aujsd.jpg" alt="scè§†é¢‘"></p><h3 id="è¯¾ç¨‹è¯„ä»·"><a href="#è¯¾ç¨‹è¯„ä»·" class="headerlink" title="è¯¾ç¨‹è¯„ä»·"></a>è¯¾ç¨‹è¯„ä»·</h3><blockquote><p>1ã€å°é©¬å“¥è®²çš„å¾ˆå¥½ï¼Œå®è·µå’ŒåŸç†ä¸€èµ·ç»“åˆè®²ï¼Œç†è§£çš„å¾ˆæ·±åˆ»ã€‚<br>æœŸå¾…å°é©¬å“¥çš„ä¸‹ä¸€ä¸ªé«˜å¹¶å‘çš„ç³»åˆ—è®²åº§ï¼Œè¿˜æœ‰é‚£æœ¬ä¸‡ä¼—ç©ç›®çš„æ–°ä¹¦<br>2ã€<br>è¿™äº›ç³»åˆ—è¯¾ç¨‹æ€ä¹ˆè¯´å‘¢ï¼Œå°±æˆ‘æ¥è¯´å…¶å®å­¦çš„ä¸æ˜¯çŸ¥è¯†ï¼Œæ˜¯å­¦ä¹ æ–¹æ³•ã€‚å°é©¬å“¥å‰å®³çš„ï¼Œç»™ä¸ªèµã€‚<br>3ã€æ»¡æ»¡çš„èµï¼Œç¤¾ä¼šå¥—è·¯å¤ªå¤šï¼Œé¡»åŠ å¼ºå­¦ä¹ ï¼ŒæœŸå¾…ä¸‹æœŸä¸å°é©¬å“¥ç›¸é€¢<br>4ã€åŸºæœ¬æ˜¯éƒ½æ˜¯å®ˆè€…ç›´æ’­æ—¶é—´ï¼Œè·Ÿç€ Spring Boot ç³»åˆ—å’Œ Spring Cloud ç³»åˆ—çš„è¯¾ç¨‹ï¼Œå°é©¬å“¥è®²å¾—å¾ˆæœ‰å¯å‘æ€§ã€‚è®²ä¸€ç§æŠ€æœ¯çš„ä»å“ªé‡Œæ¥ï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œä»¥åŠä¼˜ç¼ºç‚¹ã€‚è®²æºç åˆä¸ä»…é™åˆ¶äºæºç ã€‚æ€»çš„æ¥è¯´å€¼å¾—èŠ±æ—¶é—´æ¥å­¦ä¹ å’Œè®¨è®ºçš„ã€‚å€¼å¾—æ¨èï¼Œäº”æ˜Ÿå¥½è¯„ã€‚<br>5ã€å¯ä»¥çš„ï¼Œè§£ç­”é—®é¢˜å¾ˆè€å¿ƒã€‚ä»ä½ è¿™å­¦åˆ°äº†æµè§ˆJSRç­‰ä¹‹ç±»çš„è§„èŒƒï¼Œåœ¨ç”¨ä¸€äº›æ¡†æ¶çš„æ—¶å€™å‘ç°å›½å¤–çš„ï¼Œå¾ˆå¤šéƒ½å®ç°äº†JSRï¼Œæ¯”å¦‚spring batchï¼Œè€Œå›½å†…çš„è¯ï¼Œä¸ªäººè§‰å¾—è¿™æ–¹é¢ç¨å¾®å·®äº†ç‚¹ï¼Œè¿™æ–¹é¢æˆ‘ä»¬è¿˜è¦åŠªåŠ›ï¼ŒåŠ æ²¹ï¼</p></blockquote><p>ä»¥ä¸Šè¯„ä»·æ‘˜è‡ª segmentfault</p><h3 id="ç›¸å…³è¯¾ç¨‹"><a href="#ç›¸å…³è¯¾ç¨‹" class="headerlink" title="ç›¸å…³è¯¾ç¨‹"></a>ç›¸å…³è¯¾ç¨‹</h3><p><strong>Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—</strong></p><p>ä¼˜æƒ åœ°å€ï¼š<strong><a href="https://segmentfault.com/ls/1650000011063780?r=bPrFW3" target="_blank" rel="noopener">https://segmentfault.com/ls/1650000011063780?r=bPrFW3</a></strong></p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fp0td375okj308c0augml.jpg" alt="sbè§†é¢‘"></p><p>å¦å¤–ï¼šè¿˜æœ‰è¿™ä¸ª <strong>Java å¾®æœåŠ¡å®è·µ - Spring Boot / Spring Cloud</strong>ï¼Œç®—æ˜¯ä¸¤ä¸ªçš„åˆé›†äº†ï¼Œåˆä¹°çš„è¯ä¼˜æƒ æ›´å¤§ã€‚</p><p>ä¼˜æƒ åœ°å€ï¼š<strong><a href="https://segmentfault.com/ls/1650000011387052?r=bPrFW3" target="_blank" rel="noopener">https://segmentfault.com/ls/1650000011387052?r=bPrFW3</a></strong></p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fp0td1fomnj308c0au75b.jpg" alt="sb-scåˆé›†"></p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fp0t1k9vd8j3076076mxo.jpg" alt="C6LG3mGa12"></p><p>å»ºäº†ä¸ªä¸é”™çš„å¾®ä¿¡ç¾¤ï¼Œå¦‚æœæœ‰æ„Ÿå…´è¶£çš„å¯ä»¥åŠ æˆ‘å¾®ä¿¡ï¼Œç„¶åæ‹‰ä½ è¿›ç¾¤äº¤æµã€‚</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fp0t1jn6s4j30qi0z10x1.jpg" alt="1520091522031"></p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fp3jkmizmpj30o00didgn.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws4.sinaimg.cn/large/006tNc79gy1fp0tsq2q8vj30dc07idg8.jpg&quot; alt=&quot;u=1933229855,2353978820&amp;amp;fm=27&amp;amp;gp=0&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;è§†é¢‘å†…å®¹&quot;&gt;&lt;a href=&quot;#è§†é¢‘å†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;è§†é¢‘å†…å®¹&quot;&gt;&lt;/a&gt;è§†é¢‘å†…å®¹&lt;/h3&gt;&lt;p&gt;Spring Cloud ç³»åˆ—è¯¾ç¨‹è‡´åŠ›äºä»¥å®æˆ˜çš„æ–¹å¼è¦†ç›–æ‰€æœ‰åŠŸèƒ½ç‰¹æ€§ï¼Œç»“åˆå°é©¬å“¥åä½™å¹´çš„å­¦ä¹ æ–¹æ³•å’Œå·¥ä½œç»éªŒï¼Œä½“ä¼šä½œè€…è®¾è®¡æ„å›¾ã€‚ç»“åˆæºç åŠ æ·±ç†è§£ï¼Œæœ€ç»ˆè¾¾åˆ°å½¢æˆç³»ç»Ÿæ€§çš„çŸ¥è¯†å’ŒæŠ€æœ¯ä½“ç³»çš„ç›®çš„ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="å¾®æœåŠ¡" scheme="http://yoursite.com/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
      <category term="SpringCloud" scheme="http://yoursite.com/tags/SpringCloud/"/>
    
  </entry>
  
  <entry>
    <title>å°é©¬å“¥ ã€ŠJava å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ã€‹å¼ºçƒˆæ¨è</title>
    <link href="http://yoursite.com/2018/03/04/springboot-vedio/"/>
    <id>http://yoursite.com/2018/03/04/springboot-vedio/</id>
    <published>2018-03-03T16:00:00.000Z</published>
    <updated>2018-03-06T16:20:40.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fp0ts4i1hfj30id08t3yn.jpg" alt="timg"></p><h3 id="è§†é¢‘å†…å®¹"><a href="#è§†é¢‘å†…å®¹" class="headerlink" title="è§†é¢‘å†…å®¹"></a>è§†é¢‘å†…å®¹</h3><p>Java å¾®æœåŠ¡å®è·µ - Spring Boot ä¸ºç³»åˆ—è®²åº§ï¼ŒäºŒåèŠ‚ä¸“é¢˜ç›´æ’­ï¼Œæ—¶é•¿é«˜è¾¾50ä¸ªå°æ—¶ï¼ŒåŒ…æ‹¬ç›®å‰æœ€æµè¡ŒæŠ€æœ¯ï¼Œæ·±å…¥æºç åˆ†æï¼Œæˆäººä»¥æ¸”çš„æ–¹å¼ï¼Œå¸®åŠ©åˆå­¦è€…æ·±å…¥æµ…å‡ºåœ°æŒæ¡ï¼Œä¸ºé«˜é˜¶ä»ä¸šäººå‘˜æŠ›ç –å¼•ç‰ã€‚</p><a id="more"></a><h3 id="è®²å¸ˆä»‹ç»"><a href="#è®²å¸ˆä»‹ç»" class="headerlink" title="è®²å¸ˆä»‹ç»"></a>è®²å¸ˆä»‹ç»</h3><blockquote><p><strong>å°é©¬å“¥</strong>ï¼Œä¸€çº¿äº’è”ç½‘å…¬å¸æŠ€æœ¯ä¸“å®¶ï¼Œåä½™å¹´ Java EE ä»ä¸šç»éªŒï¼Œæ¶æ„å¸ˆã€å¾®æœåŠ¡å¸ƒé“å¸ˆã€‚ç›®å‰ä¸»è¦è´Ÿè´£å¾®æœåŠ¡æŠ€æœ¯å®æ–½ã€æ¶æ„è¡è¿›ã€åŸºç¡€è®¾æ–½æ„å»ºç­‰ã€‚é‡ç‚¹å…³æ³¨äº‘è®¡ç®—ã€å¾®æœåŠ¡ä»¥åŠè½¯ä»¶æ¶æ„ç­‰é¢†åŸŸã€‚é€šè¿‡ SUN Javaï¼ˆSCJPã€SCWCDã€SCBCDï¼‰ä»¥åŠ Oracle OCA ç­‰çš„è®¤è¯ã€‚</p></blockquote><h3 id="è§†é¢‘åˆ—è¡¨"><a href="#è§†é¢‘åˆ—è¡¨" class="headerlink" title="è§†é¢‘åˆ—è¡¨"></a>è§†é¢‘åˆ—è¡¨</h3><p>1ã€<a href="https://segmentfault.com/l/1500000009515571" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆä¸€ï¼‰åˆä½“éªŒ</a></p><p>2ã€<a href="https://segmentfault.com/l/1500000009659111" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆäºŒï¼‰ Webç¯‡ï¼ˆä¸Šï¼‰</a></p><p>3ã€<a href="https://segmentfault.com/l/1500000009767025" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆä¸‰ï¼‰Webç¯‡ï¼ˆä¸­ï¼‰</a></p><p>4ã€<a href="https://segmentfault.com/l/1500000009830944" target="_blank" rel="noopener"> Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆå››ï¼‰Webç¯‡ï¼ˆä¸‹ï¼‰</a></p><p>5ã€<a href="https://segmentfault.com/l/1500000009844304" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆäº”ï¼‰åµŒå…¥å¼Webå®¹å™¨</a></p><p>6ã€<a href="https://segmentfault.com/l/1500000009904190" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆå…­ï¼‰æ•°æ®åº“ JDBC</a></p><p>7ã€<a href="https://segmentfault.com/l/1500000009952220" target="_blank" rel="noopener"> Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆä¸ƒï¼‰MyBatis</a></p><p>8ã€<a href="https://segmentfault.com/l/1500000009952527" target="_blank" rel="noopener"> Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆå…«ï¼‰JPA</a></p><p>9ã€<a href="https://segmentfault.com/l/1500000009957330" target="_blank" rel="noopener"> Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆä¹ï¼‰NoSQL</a></p><p>10ã€<a href="https://segmentfault.com/l/1500000009970812" target="_blank" rel="noopener"> Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåï¼‰ç¼“å­˜</a></p><p>11ã€<a href="https://segmentfault.com/l/1500000009971600" target="_blank" rel="noopener"> Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåä¸€ï¼‰æ¶ˆæ¯</a></p><p>12ã€<a href="https://segmentfault.com/l/1500000009971716" target="_blank" rel="noopener"> Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåäºŒï¼‰éªŒè¯</a></p><p>13ã€<a href="https://segmentfault.com/l/1500000009971764" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåä¸‰ï¼‰WebSocket</a></p><p>14ã€<a href="https://segmentfault.com/l/1500000009978309" target="_blank" rel="noopener"> Java å¾®æœåŠ¡å®è·µ- Spring Boot ç³»åˆ—ï¼ˆåå››ï¼‰WebService</a></p><p>15ã€<a href="https://segmentfault.com/l/1500000009978481" target="_blank" rel="noopener"> Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåäº”ï¼‰å®‰å…¨</a></p><p>16ã€<a href="https://segmentfault.com/l/1500000009978585" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåå…­ï¼‰æ—¥å¿—</a></p><p>17ã€<a href="https://segmentfault.com/l/1500000009978661" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåä¸ƒï¼‰ç›‘ç®¡</a></p><p>18ã€<a href="https://segmentfault.com/l/1500000009978729" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåå…«ï¼‰é…ç½®</a></p><p>19ã€<a href="https://segmentfault.com/l/1500000009978826" target="_blank" rel="noopener"> Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåä¹ï¼‰æµ‹è¯•</a></p><p>20ã€<a href="https://segmentfault.com/l/1500000009978904" target="_blank" rel="noopener">Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆäºŒåï¼‰è‡ªå®šä¹‰å¯åŠ¨å™¨</a></p><h3 id="è´­ä¹°é“¾æ¥"><a href="#è´­ä¹°é“¾æ¥" class="headerlink" title="è´­ä¹°é“¾æ¥"></a>è´­ä¹°é“¾æ¥</h3><p>ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢é“¾æ¥è´­ä¹°ï¼ˆæœ‰ä¼˜æƒ çš„å“¦ï¼‰</p><p><strong><a href="https://segmentfault.com/ls/1650000011063780?r=bPrFW3" target="_blank" rel="noopener">https://segmentfault.com/ls/1650000011063780?r=bPrFW3</a></strong></p><p>æˆ–è€…ä½ ä¹Ÿå¯ä»¥æ‰«æä¸‹é¢çš„äºŒç»´ç è´­ä¹°ï¼ˆåŒæ ·ä¹Ÿæœ‰ä¼˜æƒ çš„å“¦ï¼‰</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fp0t6idjt0j308c0augml.jpg" alt="sbè§†é¢‘"></p><h3 id="è¯¾ç¨‹è¯„ä»·"><a href="#è¯¾ç¨‹è¯„ä»·" class="headerlink" title="è¯¾ç¨‹è¯„ä»·"></a>è¯¾ç¨‹è¯„ä»·</h3><blockquote><p>1ã€å°é©¬å“¥è®²çš„å¥½è¯¦ç»†ï¼Œä»¥å‰ä¼¼æ˜¯è€Œéçš„ä¸œä¸œï¼Œç°åœ¨éƒ½æ‡‚äº†<br>2ã€å­¦åˆ°äº†æ€ä¹ˆä½¿ç”¨ï¼Œä¹Ÿå­¦åˆ°äº†æ€ä¹ˆè‡ªå®šä¹‰æ ¡éªŒï¼ŒçŸ¥å…¶ç„¶ä¹ŸçŸ¥å…¶æ‰€ä»¥ç„¶<br>3ã€6666 èµ·é£äº† websocket ä¹‹å‰çœ‹äº†å†™ è¿™æ¬¡æ›´åŠ æ·±å…¥å’Œæ ‡å‡†åŒ– æ„Ÿè°¢å°é©¬å“¥å¸¦æ¥çš„å¹²è´§<br>4ã€æ·±å…¥æµ…å‡ºï¼Œæ€è·¯æ¸…æ™°ã€‚<br>5ã€æ·±å…¥æµ…å‡ºå•Šã€‚éå¸¸å¥½ï¼Œè€Œä¸”å¦‚æœæœ‰é—®é¢˜ï¼Œä¸ç®¡ç®€å•è¿˜æ˜¯éš¾çš„ï¼Œéƒ½ä»ä¸åŒçš„è§’åº¦å’Œå±‚æ¬¡æ¥è§£ç­”äº†ã€‚å­¦åˆ°çš„ä¸œè¥¿éå¸¸å¤šã€‚è°¢è°¢ã€‚</p></blockquote><p>ä»¥ä¸Šè¯„ä»·æ‘˜è‡ª segmentfault</p><h3 id="ç›¸å…³è¯¾ç¨‹"><a href="#ç›¸å…³è¯¾ç¨‹" class="headerlink" title="ç›¸å…³è¯¾ç¨‹"></a>ç›¸å…³è¯¾ç¨‹</h3><p><strong>Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—</strong></p><p>ä¼˜æƒ åœ°å€ï¼š<strong><a href="https://segmentfault.com/ls/1650000011386794?r=bPrFW3" target="_blank" rel="noopener">https://segmentfault.com/ls/1650000011386794?r=bPrFW3</a></strong></p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fp0tc1p3e1j308c0aujsd.jpg" alt="scè§†é¢‘"></p><p>å¦å¤–ï¼šè¿˜æœ‰è¿™ä¸ª <strong>Java å¾®æœåŠ¡å®è·µ - Spring Boot / Spring Cloud</strong>ï¼Œç®—æ˜¯ä¸¤ä¸ªçš„åˆé›†äº†ï¼Œåˆä¹°çš„è¯ä¼˜æƒ æ›´å¤§ã€‚</p><p>ä¼˜æƒ åœ°å€ï¼š<strong><a href="https://segmentfault.com/ls/1650000011387052?r=bPrFW3" target="_blank" rel="noopener">https://segmentfault.com/ls/1650000011387052?r=bPrFW3</a></strong></p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fp0tc1df8vj308c0au75b.jpg" alt="sb-scåˆé›†"></p><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fp0t1k9vd8j3076076mxo.jpg" alt="C6LG3mGa12"></p><p>å»ºäº†ä¸ªä¸é”™çš„å¾®ä¿¡ç¾¤ï¼Œå¦‚æœæœ‰æ„Ÿå…´è¶£çš„å¯ä»¥åŠ æˆ‘å¾®ä¿¡ï¼Œç„¶åæ‹‰ä½ è¿›ç¾¤äº¤æµã€‚</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fp0t1jn6s4j30qi0z10x1.jpg" alt="1520091522031"></p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fp3jkmizmpj30o00didgn.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws3.sinaimg.cn/large/006tNc79gy1fp0ts4i1hfj30id08t3yn.jpg&quot; alt=&quot;timg&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;è§†é¢‘å†…å®¹&quot;&gt;&lt;a href=&quot;#è§†é¢‘å†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;è§†é¢‘å†…å®¹&quot;&gt;&lt;/a&gt;è§†é¢‘å†…å®¹&lt;/h3&gt;&lt;p&gt;Java å¾®æœåŠ¡å®è·µ - Spring Boot ä¸ºç³»åˆ—è®²åº§ï¼ŒäºŒåèŠ‚ä¸“é¢˜ç›´æ’­ï¼Œæ—¶é•¿é«˜è¾¾50ä¸ªå°æ—¶ï¼ŒåŒ…æ‹¬ç›®å‰æœ€æµè¡ŒæŠ€æœ¯ï¼Œæ·±å…¥æºç åˆ†æï¼Œæˆäººä»¥æ¸”çš„æ–¹å¼ï¼Œå¸®åŠ©åˆå­¦è€…æ·±å…¥æµ…å‡ºåœ°æŒæ¡ï¼Œä¸ºé«˜é˜¶ä»ä¸šäººå‘˜æŠ›ç –å¼•ç‰ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
      <category term="å¾®æœåŠ¡" scheme="http://yoursite.com/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šæ·±å…¥ç†è§£ Java å†…å­˜æ¨¡å‹ã€‹è¯»ä¹¦ç¬”è®°</title>
    <link href="http://yoursite.com/2018/02/28/Java-Memory-Model/"/>
    <id>http://yoursite.com/2018/02/28/Java-Memory-Model/</id>
    <published>2018-02-27T16:00:00.000Z</published>
    <updated>2018-04-23T14:14:52.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fow7l5mj64j31hc0zbh9n.jpg" alt="fairyland-canyon-1632749_1920"></p><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>ã€Šæ·±å…¥ç†è§£ Java å†…å­˜æ¨¡å‹ã€‹ç¨‹æ™“æ˜è‘—ï¼Œè¯¥ä¹¦åœ¨ä»¥å‰çœ‹è¿‡ä¸€éï¼Œç°åœ¨å­¦çš„ä¸œè¥¿è¶Šå¤šï¼Œæ„Ÿè§‰é‚£å—è¶Šé‡è¦ï¼Œäºæ˜¯åˆå†ç»†çœ‹ä¸€éï¼Œäºæ˜¯ä¾¿æœ‰äº†ä¸‹é¢çš„è¯»ä¹¦ç¬”è®°æ€»ç»“ã€‚å…¨ä¹¦é¡µæ•°è™½ä¸å¤šï¼Œå†…å®¹è®²å¾—æŒºæ·±çš„ã€‚ç»†çœ‹çš„è¯ï¼Œä¹Ÿæ˜¯æŒºèŠ±æ—¶é—´çš„ï¼Œçœ‹å®Œæ”¶è·ç»å¯¹æŒºå¤§çš„ã€‚ä¹Ÿå»ºè®® Java å¼€å‘è€…éƒ½å»çœ‹çœ‹ã€‚é‡Œé¢ä¸»è¦æœ‰ Java å†…å­˜æ¨¡å‹çš„åŸºç¡€ã€é‡æ’åºã€é¡ºåºä¸€è‡´æ€§ã€Volatile å…³é”®å­—ã€é”ã€finalã€‚æœ¬æ–‡å‚è€ƒä¹¦ä¸­å†…å®¹ã€‚</p><a id="more"></a><h3 id="å…³æ³¨æˆ‘"><a href="#å…³æ³¨æˆ‘" class="headerlink" title="å…³æ³¨æˆ‘"></a>å…³æ³¨æˆ‘</h3><p>å¦‚æœä½ æƒ³æŸ¥çœ‹è¿™æœ¬ä¹¦å¯ä»¥å…³æ³¨æˆ‘çš„å…¬ä¼—å·: <strong>zhisheng</strong> ï¼Œç„¶åé‡Œé¢å›å¤å…³é”®å­— <strong>JMM</strong> å¯ä»¥æŸ¥çœ‹æˆ‘åˆ†äº«çš„ç™¾åº¦äº‘é“¾æ¥ã€‚</p><p><img src="http://ohfk1r827.bkt.clouddn.com/blog/180103/C6LG3mGa12.jpg" alt="mark"></p><p>è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼š<a href="http://www.54tianzhisheng.cn/2018/02/28/Java-Memory-Model/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/02/28/Java-Memory-Model/</a></p><h3 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h3><h4 id="å¹¶å‘ç¼–ç¨‹çš„æ¨¡å‹åˆ†ç±»"><a href="#å¹¶å‘ç¼–ç¨‹çš„æ¨¡å‹åˆ†ç±»" class="headerlink" title="å¹¶å‘ç¼–ç¨‹çš„æ¨¡å‹åˆ†ç±»"></a>å¹¶å‘ç¼–ç¨‹çš„æ¨¡å‹åˆ†ç±»</h4><p>åœ¨å¹¶å‘ç¼–ç¨‹éœ€è¦å¤„ç†çš„ä¸¤ä¸ªå…³é”®é—®é¢˜æ˜¯ï¼š<strong>çº¿ç¨‹ä¹‹é—´å¦‚ä½•é€šä¿¡</strong> å’Œ <strong>çº¿ç¨‹ä¹‹é—´å¦‚ä½•åŒæ­¥</strong>ã€‚</p><h5 id="é€šä¿¡"><a href="#é€šä¿¡" class="headerlink" title="é€šä¿¡"></a>é€šä¿¡</h5><p><strong>é€šä¿¡</strong> æ˜¯æŒ‡çº¿ç¨‹ä¹‹é—´ä»¥ä½•ç§æœºåˆ¶æ¥äº¤æ¢ä¿¡æ¯ã€‚åœ¨å‘½ä»¤å¼ç¼–ç¨‹ä¸­ï¼Œçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æœºåˆ¶æœ‰ä¸¤ç§ï¼š<strong>å…±äº«å†…å­˜</strong> å’Œ <strong>æ¶ˆæ¯ä¼ é€’</strong>ã€‚</p><p>åœ¨<strong>å…±äº«å†…å­˜</strong>çš„å¹¶å‘æ¨¡å‹é‡Œï¼Œçº¿ç¨‹ä¹‹é—´å…±äº«ç¨‹åºçš„å…¬å…±çŠ¶æ€ï¼Œçº¿ç¨‹ä¹‹é—´é€šè¿‡å†™-è¯»å†…å­˜ä¸­çš„<strong>å…¬å…±çŠ¶æ€</strong>æ¥<strong>éšå¼</strong>è¿›è¡Œé€šä¿¡ã€‚</p><p>åœ¨<strong>æ¶ˆæ¯ä¼ é€’</strong>çš„å¹¶å‘æ¨¡å‹é‡Œï¼Œçº¿ç¨‹ä¹‹é—´æ²¡æœ‰å…¬å…±çŠ¶æ€ï¼Œçº¿ç¨‹ä¹‹é—´å¿…é¡»é€šè¿‡æ˜ç¡®çš„<strong>å‘é€æ¶ˆæ¯</strong>æ¥<strong>æ˜¾å¼</strong>è¿›è¡Œé€šä¿¡ã€‚</p><h5 id="åŒæ­¥"><a href="#åŒæ­¥" class="headerlink" title="åŒæ­¥"></a>åŒæ­¥</h5><p><strong>åŒæ­¥</strong> æ˜¯æŒ‡ç¨‹åºç”¨äºæ§åˆ¶ä¸åŒçº¿ç¨‹ä¹‹é—´æ“ä½œå‘ç”Ÿç›¸å¯¹é¡ºåºçš„æœºåˆ¶ã€‚</p><p>åœ¨<strong>å…±äº«å†…å­˜</strong>çš„å¹¶å‘æ¨¡å‹é‡Œï¼ŒåŒæ­¥æ˜¯<strong>æ˜¾å¼</strong>è¿›è¡Œçš„ã€‚ç¨‹åºå‘˜å¿…é¡»æ˜¾å¼æŒ‡å®šæŸä¸ªæ–¹æ³•æˆ–æŸæ®µä»£ç éœ€è¦åœ¨çº¿ç¨‹ä¹‹é—´<strong>äº’æ–¥æ‰§è¡Œ</strong>ã€‚</p><p>åœ¨<strong>æ¶ˆæ¯ä¼ é€’</strong>çš„å¹¶å‘æ¨¡å‹é‡Œï¼Œç”±äºæ¶ˆæ¯çš„å‘é€å¿…é¡»åœ¨æ¶ˆæ¯çš„æ¥æ”¶ä¹‹å‰ï¼Œå› æ­¤åŒæ­¥æ˜¯<strong>éšå¼</strong>è¿›è¡Œçš„ã€‚</p><p>Java çš„å¹¶å‘é‡‡ç”¨çš„æ˜¯å…±äº«å†…å­˜æ¨¡å‹ï¼ŒJava çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æ€»æ˜¯éšå¼è¿›è¡Œï¼Œæ•´ä¸ªé€šä¿¡è¿‡ç¨‹å¯¹ç¨‹åºå‘˜å®Œå…¨é€æ˜ã€‚</p><h4 id="Java-å†…å­˜æ¨¡å‹çš„æŠ½è±¡"><a href="#Java-å†…å­˜æ¨¡å‹çš„æŠ½è±¡" class="headerlink" title="Java å†…å­˜æ¨¡å‹çš„æŠ½è±¡"></a>Java å†…å­˜æ¨¡å‹çš„æŠ½è±¡</h4><p>åœ¨ Java ä¸­ï¼Œæ‰€æœ‰å®ä¾‹åŸŸã€é™æ€åŸŸ å’Œ æ•°ç»„å…ƒç´ å­˜å‚¨åœ¨å †å†…å­˜ä¸­ï¼Œå †å†…å­˜åœ¨çº¿ç¨‹ä¹‹é—´å…±äº«ã€‚å±€éƒ¨å˜é‡ã€æ–¹æ³•å®šä¹‰å‚æ•° å’Œ å¼‚å¸¸å¤„ç†å™¨å‚æ•° ä¸ä¼šåœ¨çº¿ç¨‹ä¹‹é—´å…±äº«ï¼Œå®ƒä»¬ä¸ä¼šæœ‰å†…å­˜å¯è§æ€§é—®é¢˜ï¼Œä¹Ÿä¸å—å†…å­˜æ¨¡å‹çš„å½±å“ã€‚</p><p>Java çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ç”± Java å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰æ§åˆ¶ã€‚JMM å†³å®šäº†ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„å†™å…¥ä½•æ—¶å¯¹å¦ä¸€ä¸ªçº¿ç¨‹å¯è§ã€‚ä»æŠ½è±¡çš„è§’åº¦æ¥çœ‹ï¼ŒJMM å®šä¹‰äº†çº¿ç¨‹ä¸ä¸»å†…å­˜ä¹‹é—´çš„æŠ½è±¡å…³ç³»ï¼šçº¿ç¨‹ä¹‹é—´çš„å…±äº«å˜é‡å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªè‡ªå·±ç§æœ‰çš„æœ¬åœ°å†…å­˜ï¼Œæœ¬åœ°å†…å­˜ä¸­å­˜å‚¨äº†è¯¥å˜é‡ä»¥è¯»ï¼å†™å…±äº«å˜é‡çš„å‰¯æœ¬ã€‚æœ¬åœ°å†…å­˜æ˜¯ JMM çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå¹¶ä¸çœŸå®å­˜åœ¨ã€‚</p><p>JMM æŠ½è±¡ç¤ºæ„å›¾ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fow7l9q3hsj30zi0rq41t.jpg" alt="jmm"></p><p>ä»ä¸Šå›¾æ¥çœ‹ï¼Œå¦‚æœçº¿ç¨‹ A å’Œçº¿ç¨‹ B è¦é€šä¿¡çš„è¯ï¼Œè¦å¦‚ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š</p><p>1ã€çº¿ç¨‹ A éœ€è¦å°†æœ¬åœ°å†…å­˜ A ä¸­çš„å…±äº«å˜é‡å‰¯æœ¬åˆ·æ–°åˆ°ä¸»å†…å­˜å»</p><p>2ã€çº¿ç¨‹ B å»ä¸»å†…å­˜è¯»å–çº¿ç¨‹ A ä¹‹å‰å·²æ›´æ–°è¿‡çš„å…±äº«å˜é‡</p><p>æ­¥éª¤ç¤ºæ„å›¾ï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fow7lh7qm2j30wo0ocq58.jpg" alt="tongxin"></p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><p>æœ¬åœ°å†…å­˜ A å’Œ B æœ‰ä¸»å†…å­˜å…±äº«å˜é‡ X çš„å‰¯æœ¬ã€‚å‡è®¾ä¸€å¼€å§‹æ—¶ï¼Œè¿™ä¸‰ä¸ªå†…å­˜ä¸­ X çš„å€¼éƒ½æ˜¯ 0ã€‚çº¿ç¨‹ A æ­£æ‰§è¡Œæ—¶ï¼ŒæŠŠæ›´æ–°åçš„ X å€¼ï¼ˆå‡è®¾ä¸º 1ï¼‰ä¸´æ—¶å­˜æ”¾åœ¨è‡ªå·±çš„æœ¬åœ°å†…å­˜ A ä¸­ã€‚å½“çº¿ç¨‹ A å’Œ B éœ€è¦é€šä¿¡æ—¶ï¼Œçº¿ç¨‹ A é¦–å…ˆä¼šæŠŠè‡ªå·±æœ¬åœ°å†…å­˜ A ä¸­ä¿®æ”¹åçš„ X å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜å»ï¼Œæ­¤æ—¶ä¸»å†…å­˜ä¸­çš„ X å€¼å˜ä¸ºäº† 1ã€‚éšåï¼Œçº¿ç¨‹ B åˆ°ä¸»å†…å­˜ä¸­è¯»å–çº¿ç¨‹ A æ›´æ–°åçš„å…±äº«å˜é‡ X çš„å€¼ï¼Œæ­¤æ—¶çº¿ç¨‹ B çš„æœ¬åœ°å†…å­˜çš„ X å€¼ä¹Ÿå˜æˆäº† 1ã€‚</p><p>æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸¤ä¸ªæ­¥éª¤å®è´¨ä¸Šæ˜¯çº¿ç¨‹ A å†å‘çº¿ç¨‹ B å‘é€æ¶ˆæ¯ï¼Œè€Œè¿™ä¸ªé€šä¿¡è¿‡ç¨‹å¿…é¡»ç»è¿‡ä¸»å†…å­˜ã€‚JMM é€šè¿‡æ§åˆ¶ä¸»å†…å­˜ä¸æ¯ä¸ªçº¿ç¨‹çš„æœ¬åœ°å†…å­˜ä¹‹é—´çš„äº¤äº’ï¼Œæ¥ä¸º Java ç¨‹åºå‘˜æä¾›å†…å­˜å¯è§æ€§ä¿è¯ã€‚</p><h3 id="é‡æ’åº"><a href="#é‡æ’åº" class="headerlink" title="é‡æ’åº"></a>é‡æ’åº</h3><p>åœ¨æ‰§è¡Œç¨‹åºæ—¶ä¸ºäº†æé«˜æ€§èƒ½ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤åšé‡æ’åºã€‚é‡æ’åºåˆ†ä¸‰ç±»ï¼š</p><p>1ã€<strong>ç¼–è¯‘å™¨ä¼˜åŒ–çš„é‡æ’åº</strong>ã€‚ç¼–è¯‘å™¨åœ¨ä¸æ”¹å˜å•çº¿ç¨‹ç¨‹åºè¯­ä¹‰çš„å‰æä¸‹ï¼Œå¯ä»¥é‡æ–°å®‰æ’è¯­å¥çš„æ‰§è¡Œé¡ºåºã€‚</p><p>2ã€<strong>æŒ‡ä»¤çº§å¹¶è¡Œçš„é‡æ’åº</strong>ã€‚ç°ä»£å¤„ç†å™¨é‡‡ç”¨äº†æŒ‡ä»¤çº§å¹¶è¡ŒæŠ€æœ¯æ¥å°†å¤šæ¡æŒ‡ä»¤é‡å æ‰§è¡Œã€‚å¦‚æœä¸å­˜åœ¨æ•°æ®ä¾èµ–æ€§ï¼Œå¤„ç†å™¨å¯ä»¥æ”¹å˜è¯­å¥å¯¹åº”æœºå™¨æŒ‡ä»¤çš„æ‰§è¡Œé¡ºåºã€‚</p><p>3ã€<strong>å†…å­˜ç³»ç»Ÿçš„é‡æ’åº</strong>ã€‚ç”±äºå¤„ç†å™¨ä½¿ç”¨ç¼“å­˜å’Œè¯»ï¼å†™ç¼“å†²åŒºï¼Œè¿™ä½¿å¾—åŠ è½½å’Œå­˜å‚¨æ“ä½œçœ‹ä¸Šå»å¯èƒ½æ˜¯åœ¨ä¹±åºæ‰§è¡Œã€‚</p><p>ä» Java æºä»£ç åˆ°æœ€ç»ˆå®é™…æ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—ï¼Œä¼šåˆ†åˆ«ç»å†ä¸‹é¢ä¸‰ç§é‡æ’åºï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fow7l4iv44j313e07wmyw.jpg" alt="sort-again"></p><p>ä¸Šé¢çš„è¿™äº›é‡æ’åºéƒ½å¯èƒ½å¯¼è‡´å¤šçº¿ç¨‹ç¨‹åºå‡ºç°å†…å­˜å¯è§æ€§é—®é¢˜ã€‚å¯¹äºç¼–è¯‘å™¨ï¼ŒJMM çš„ç¼–è¯‘å™¨é‡æ’åºè§„åˆ™ä¼šç¦æ­¢ç‰¹å®šç±»å‹çš„ç¼–è¯‘å™¨é‡æ’åºï¼ˆä¸æ˜¯æ‰€æœ‰çš„ç¼–è¯‘å™¨é‡æ’åºéƒ½è¦ç¦æ­¢ï¼‰ã€‚å¯¹äºå¤„ç†å™¨é‡æ’åºï¼ŒJMM çš„å¤„ç†å™¨é‡æ’åºè§„åˆ™ä¼šè¦æ±‚ Java ç¼–è¯‘å™¨åœ¨ç”ŸæˆæŒ‡ä»¤åºåˆ—æ—¶ï¼Œæ’å…¥ç‰¹å®šç±»å‹çš„å†…å­˜å±éšœæŒ‡ä»¤ï¼Œé€šè¿‡å†…å­˜å±éšœæŒ‡ä»¤æ¥ç¦æ­¢ç‰¹å®šç±»å‹çš„å¤„ç†å™¨é‡æ’åºï¼ˆä¸æ˜¯æ‰€æœ‰çš„å¤„ç†å™¨é‡æ’åºéƒ½è¦ç¦æ­¢ï¼‰ã€‚</p><p>JMM å±äºè¯­è¨€çº§çš„å†…å­˜æ¨¡å‹ï¼Œå®ƒç¡®ä¿åœ¨ä¸åŒçš„ç¼–è¯‘å™¨å’Œä¸åŒçš„å¤„ç†å™¨å¹³å°ä¹‹ä¸Šï¼Œé€šè¿‡ç¦æ­¢ç‰¹å®šç±»å‹çš„ç¼–è¯‘å™¨é‡æ’åºå’Œå¤„ç†å™¨é‡æ’åºï¼Œä¸ºç¨‹åºå‘˜æä¾›ä¸€è‡´çš„å†…å­˜å¯è§æ€§ä¿è¯ã€‚</p><h4 id="å¤„ç†å™¨é‡æ’åº"><a href="#å¤„ç†å™¨é‡æ’åº" class="headerlink" title="å¤„ç†å™¨é‡æ’åº"></a>å¤„ç†å™¨é‡æ’åº</h4><p>ç°ä»£çš„å¤„ç†å™¨ä½¿ç”¨<strong>å†™ç¼“å†²åŒº</strong>æ¥ä¸´æ—¶ä¿å­˜å‘å†…å­˜å†™å…¥çš„æ•°æ®ã€‚å†™ç¼“å†²åŒºå¯ä»¥ä¿è¯æŒ‡ä»¤æµæ°´çº¿æŒç»­è¿è¡Œï¼Œå®ƒå¯ä»¥é¿å…ç”±äºå¤„ç†å™¨åœé¡¿ä¸‹æ¥ç­‰å¾…å‘å†…å­˜å†™å…¥æ•°æ®è€Œäº§ç”Ÿçš„å»¶è¿Ÿã€‚åŒæ—¶ï¼Œé€šè¿‡ä»¥æ‰¹å¤„ç†çš„æ–¹å¼åˆ·æ–°å†™ç¼“å†²åŒºï¼Œä»¥åŠåˆå¹¶å†™ç¼“å†²åŒºä¸­å¯¹åŒä¸€å†…å­˜åœ°å€çš„å¤šæ¬¡å†™ï¼Œå¯ä»¥å‡å°‘å¯¹å†…å­˜æ€»çº¿çš„å ç”¨ã€‚è™½ç„¶å†™ç¼“å†²åŒºæœ‰è¿™ä¹ˆå¤šå¥½å¤„ï¼Œä½†æ¯ä¸ªå¤„ç†å™¨ä¸Šçš„å†™ç¼“å†²åŒºï¼Œä»…ä»…å¯¹å®ƒæ‰€åœ¨çš„å¤„ç†å™¨å¯è§ã€‚è¿™ä¸ªç‰¹æ€§ä¼šå¯¹å†…å­˜æ“ä½œçš„æ‰§è¡Œé¡ºåºäº§ç”Ÿé‡è¦çš„å½±å“ï¼šå¤„ç†å™¨å¯¹å†…å­˜çš„è¯»/å†™æ“ä½œçš„æ‰§è¡Œé¡ºåºï¼Œä¸ä¸€å®šä¸å†…å­˜å®é™…å‘ç”Ÿçš„è¯»/å†™æ“ä½œé¡ºåºä¸€è‡´ï¼</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fow7l6udu0j30uc0c8zls.jpg" alt="example1"></p><p>å‡è®¾å¤„ç†å™¨Aå’Œå¤„ç†å™¨BæŒ‰ç¨‹åºçš„é¡ºåºå¹¶è¡Œæ‰§è¡Œå†…å­˜è®¿é—®ï¼Œæœ€ç»ˆå´å¯èƒ½å¾—åˆ° x = y = 0ã€‚å…·ä½“çš„åŸå› å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fow7lftsaxj30wg0mcwgz.jpg" alt="exam1-ans"></p><p>å¤„ç†å™¨ A å’Œ B åŒæ—¶æŠŠå…±äº«å˜é‡å†™å…¥åœ¨å†™ç¼“å†²åŒºä¸­ï¼ˆA1ã€B1ï¼‰ï¼Œç„¶åå†ä»å†…å­˜ä¸­è¯»å–å¦ä¸€ä¸ªå…±äº«å˜é‡ï¼ˆA2ã€B2ï¼‰ï¼Œæœ€åæ‰æŠŠè‡ªå·±å†™ç¼“å†²åŒºä¸­ä¿å­˜çš„è„æ•°æ®åˆ·æ–°åˆ°å†…å­˜ä¸­ï¼ˆA3ã€B3ï¼‰ã€‚å½“ä»¥è¿™ç§æ—¶åºæ‰§è¡Œæ—¶ï¼Œç¨‹åºå°±å¯ä»¥å¾—åˆ° x = y = 0 çš„ç»“æœã€‚</p><p>ä»å†…å­˜æ“ä½œå®é™…å‘ç”Ÿçš„é¡ºåºæ¥çœ‹ï¼Œç›´åˆ°å¤„ç†å™¨ A æ‰§è¡Œ A3 æ¥åˆ·æ–°è‡ªå·±çš„å†™ç¼“å­˜åŒºï¼Œå†™æ“ä½œ A1 æ‰ç®—çœŸæ­£æ‰§è¡Œäº†ã€‚è™½ç„¶å¤„ç†å™¨ A æ‰§è¡Œå†…å­˜æ“ä½œçš„é¡ºåºä¸ºï¼šA1 -&gt; A2ï¼Œä½†å†…å­˜æ“ä½œå®é™…å‘ç”Ÿçš„é¡ºåºå´æ˜¯ï¼šA2 -&gt; A1ã€‚æ­¤æ—¶ï¼Œå¤„ç†å™¨ A çš„å†…å­˜æ“ä½œé¡ºåºè¢«é‡æ’åºäº†ã€‚</p><p>è¿™é‡Œçš„å…³é”®æ˜¯ï¼Œç”±äº<strong>å†™ç¼“å†²åŒºä»…å¯¹è‡ªå·±çš„å¤„ç†å™¨å¯è§ï¼Œå®ƒä¼šå¯¼è‡´å¤„ç†å™¨æ‰§è¡Œå†…å­˜æ“ä½œçš„é¡ºåºå¯èƒ½ä¼šä¸å†…å­˜å®é™…çš„æ“ä½œæ‰§è¡Œé¡ºåºä¸ä¸€è‡´</strong>ã€‚ç”±äºç°ä»£çš„å¤„ç†å™¨éƒ½ä¼šä½¿ç”¨å†™ç¼“å†²åŒºï¼Œå› æ­¤ç°ä»£çš„å¤„ç†å™¨éƒ½ä¼šå…è®¸å¯¹å†™-è¯»æ“ä½œé‡æ’åºã€‚</p><h4 id="å†…å­˜å±éšœæŒ‡ä»¤"><a href="#å†…å­˜å±éšœæŒ‡ä»¤" class="headerlink" title="å†…å­˜å±éšœæŒ‡ä»¤"></a>å†…å­˜å±éšœæŒ‡ä»¤</h4><p>ä¸ºäº†ä¿è¯å†…å­˜å¯è§æ€§ï¼ŒJava ç¼–è¯‘å™¨åœ¨ç”ŸæˆæŒ‡ä»¤åºåˆ—çš„é€‚å½“ä½ç½®ä¼šæ’å…¥<strong>å†…å­˜å±éšœæŒ‡ä»¤</strong>æ¥ç¦æ­¢ç‰¹å®šç±»å‹çš„å¤„ç†å™¨é‡æ’åºã€‚JMM æŠŠå†…å­˜å±éšœæŒ‡ä»¤åˆ†ä¸ºä¸‹åˆ—å››ç±»ï¼š</p><table><thead><tr><th>å±éšœç±»å‹</th><th style="text-align:center">æŒ‡ä»¤ç¤ºä¾‹</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td>LoadLoad Barriers</td><td style="text-align:center">Load1; LoadLoad; Load2</td><td style="text-align:center">ç¡®ä¿ Load1 æ•°æ®çš„è£…è½½ï¼Œä¹‹å‰äº Load2 åŠæ‰€æœ‰åç»­è£…è½½æŒ‡ä»¤çš„è£…è½½ã€‚</td></tr><tr><td>StoreStore Barriers</td><td style="text-align:center">Store1; StoreStore; Store2</td><td style="text-align:center">ç¡®ä¿ Store1 æ•°æ®å¯¹å…¶ä»–å¤„ç†å™¨å¯è§ï¼ˆåˆ·æ–°åˆ°å†…å­˜ï¼‰ï¼Œä¹‹å‰äº Store2 åŠæ‰€æœ‰åç»­å­˜å‚¨æŒ‡ä»¤çš„å­˜å‚¨ã€‚</td></tr><tr><td>LoadStore Barriers</td><td style="text-align:center">Load1; LoadStore; Store2</td><td style="text-align:center">ç¡®ä¿ Load1 æ•°æ®è£…è½½ï¼Œä¹‹å‰äº Store2 åŠæ‰€æœ‰åç»­çš„å­˜å‚¨æŒ‡ä»¤åˆ·æ–°åˆ°å†…å­˜ã€‚</td></tr><tr><td>StoreLoad Barriers</td><td style="text-align:center">Store1; StoreLoad; Load2</td><td style="text-align:center">ç¡®ä¿ Store1 æ•°æ®å¯¹å…¶ä»–å¤„ç†å™¨å˜å¾—å¯è§ï¼ˆæŒ‡åˆ·æ–°åˆ°å†…å­˜ï¼‰ï¼Œä¹‹å‰äº Load2 åŠæ‰€æœ‰åç»­è£…è½½æŒ‡ä»¤çš„è£…è½½ã€‚<strong>StoreLoadBarriers ä¼šä½¿è¯¥å±éšœä¹‹å‰çš„æ‰€æœ‰å†…å­˜è®¿é—®æŒ‡ä»¤ï¼ˆå­˜å‚¨å’Œè£…è½½æŒ‡ä»¤ï¼‰å®Œæˆä¹‹åï¼Œæ‰æ‰§è¡Œè¯¥å±éšœä¹‹åçš„å†…å­˜è®¿é—®æŒ‡ä»¤</strong>ã€‚</td></tr></tbody></table><h4 id="happens-before"><a href="#happens-before" class="headerlink" title="happens-before"></a>happens-before</h4><p>JSR-133 å†…å­˜æ¨¡å‹ä½¿ç”¨ happens-before çš„æ¦‚å¿µæ¥é˜è¿°æ“ä½œä¹‹é—´çš„å†…å­˜å¯è§æ€§ã€‚åœ¨ JMM ä¸­ï¼Œå¦‚æœ<strong>ä¸€ä¸ªæ“ä½œæ‰§è¡Œçš„ç»“æœéœ€è¦å¯¹å¦ä¸€ä¸ªæ“ä½œå¯è§</strong>ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´å¿…é¡»è¦å­˜åœ¨ happens-before å…³ç³»ã€‚è¿™é‡Œæåˆ°çš„ä¸¤ä¸ªæ“ä½œæ—¢å¯ä»¥æ˜¯åœ¨ä¸€ä¸ªçº¿ç¨‹ä¹‹å†…ï¼Œä¹Ÿå¯ä»¥æ˜¯åœ¨ä¸åŒçº¿ç¨‹ä¹‹é—´ã€‚</p><p>ä¸ç¨‹åºå‘˜å¯†åˆ‡ç›¸å…³çš„ happens-before è§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>ç¨‹åºé¡ºåºè§„åˆ™ï¼šä¸€ä¸ªçº¿ç¨‹ä¸­çš„æ¯ä¸ªæ“ä½œï¼Œhappens-before äºè¯¥çº¿ç¨‹ä¸­çš„ä»»æ„åç»­æ“ä½œã€‚</li><li>ç›‘è§†å™¨é”è§„åˆ™ï¼šå¯¹ä¸€ä¸ªç›‘è§†å™¨çš„è§£é”ï¼Œhappens-before äºéšåå¯¹è¿™ä¸ªç›‘è§†å™¨çš„åŠ é”ã€‚</li><li>volatile å˜é‡è§„åˆ™ï¼šå¯¹ä¸€ä¸ª volatile åŸŸçš„å†™ï¼Œhappens-before äºä»»æ„åç»­å¯¹è¿™ä¸ª volatile åŸŸçš„è¯»ã€‚</li><li>ä¼ é€’æ€§ï¼šå¦‚æœ  A happens-before Bï¼Œä¸” B happens-before Cï¼Œé‚£ä¹ˆ A happens-before Cã€‚</li></ul><p>æ³¨æ„ï¼Œä¸¤ä¸ªæ“ä½œä¹‹é—´å…·æœ‰ happens-before å…³ç³»ï¼Œå¹¶ä¸æ„å‘³ç€å‰ä¸€ä¸ªæ“ä½œå¿…é¡»è¦åœ¨åä¸€ä¸ªæ“ä½œä¹‹å‰æ‰§è¡Œï¼happens-before ä»…ä»…è¦æ±‚å‰ä¸€ä¸ªæ“ä½œï¼ˆæ‰§è¡Œçš„ç»“æœï¼‰å¯¹åä¸€ä¸ªæ“ä½œå¯è§ï¼Œä¸”å‰ä¸€ä¸ªæ“ä½œæŒ‰é¡ºåºæ’åœ¨ç¬¬äºŒä¸ªæ“ä½œä¹‹å‰ï¼ˆthe first is visible to and ordered before the secondï¼‰ã€‚</p><p>happens-before ä¸ JMM çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fow7l7e9zij312s0titdo.jpg" alt="happens-before-jmm"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸€ä¸ª happens-before è§„åˆ™å¯¹åº”äºä¸€ä¸ªæˆ–å¤šä¸ªç¼–è¯‘å™¨å’Œå¤„ç†å™¨é‡æ’åºè§„åˆ™ã€‚</p><h4 id="æ•°æ®ä¾èµ–æ€§"><a href="#æ•°æ®ä¾èµ–æ€§" class="headerlink" title="æ•°æ®ä¾èµ–æ€§"></a>æ•°æ®ä¾èµ–æ€§</h4><p>å¦‚æœä¸¤ä¸ªæ“ä½œè®¿é—®åŒä¸€ä¸ªå˜é‡ï¼Œä¸”è¿™ä¸¤ä¸ªæ“ä½œä¸­æœ‰ä¸€ä¸ªä¸ºå†™æ“ä½œï¼Œæ­¤æ—¶è¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´å°±å­˜åœ¨æ•°æ®ä¾èµ–æ€§ã€‚æ•°æ®ä¾èµ–åˆ†ä¸‹åˆ—ä¸‰ç§ç±»å‹ï¼š</p><table><thead><tr><th style="text-align:center">åç§°</th><th style="text-align:center">ä»£ç ç¤ºä¾‹</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">å†™åè¯»</td><td style="text-align:center">a = 1;   b = a;</td><td style="text-align:center">å†™ä¸€ä¸ªå˜é‡ä¹‹åï¼Œå†è¯»è¿™ä¸ªä½ç½®ã€‚</td></tr><tr><td style="text-align:center">å†™åå†™</td><td style="text-align:center">a = 1;  a = 2;</td><td style="text-align:center">å†™ä¸€ä¸ªå˜é‡ä¹‹åï¼Œå†å†™è¿™ä¸ªå˜é‡ã€‚</td></tr><tr><td style="text-align:center">è¯»åå†™</td><td style="text-align:center">a = b;  b = 1;</td><td style="text-align:center">è¯»ä¸€ä¸ªå˜é‡ä¹‹åï¼Œå†å†™è¿™ä¸ªå˜é‡ã€‚</td></tr></tbody></table><p>ä¸Šé¢ä¸‰ç§æƒ…å†µï¼Œåªè¦é‡æ’åºä¸¤ä¸ªæ“ä½œçš„æ‰§è¡Œé¡ºåºï¼Œç¨‹åºçš„æ‰§è¡Œç»“æœå°†ä¼šè¢«æ”¹å˜ã€‚</p><p>å‰é¢æåˆ°è¿‡ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯èƒ½ä¼šå¯¹æ“ä½œåšé‡æ’åºã€‚ç¼–è¯‘å™¨å’Œå¤„ç†å™¨åœ¨é‡æ’åºæ—¶ï¼Œä¼šéµå®ˆæ•°æ®ä¾èµ–æ€§ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ä¼šæ”¹å˜å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„ä¸¤ä¸ªæ“ä½œçš„æ‰§è¡Œé¡ºåºã€‚</p><p>æ³¨æ„ï¼Œè¿™é‡Œæ‰€è¯´çš„æ•°æ®ä¾èµ–æ€§ä»…é’ˆå¯¹å•ä¸ªå¤„ç†å™¨ä¸­æ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—å’Œå•ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œçš„æ“ä½œï¼Œä¸åŒå¤„ç†å™¨ä¹‹é—´å’Œä¸åŒçº¿ç¨‹ä¹‹é—´çš„æ•°æ®ä¾èµ–æ€§ä¸è¢«ç¼–è¯‘å™¨å’Œå¤„ç†å™¨è€ƒè™‘ã€‚</p><h4 id="as-if-serial-è¯­ä¹‰"><a href="#as-if-serial-è¯­ä¹‰" class="headerlink" title="as-if-serial è¯­ä¹‰"></a>as-if-serial è¯­ä¹‰</h4><p>as-if-serial è¯­ä¹‰çš„æ„æ€æŒ‡ï¼š<strong>ä¸ç®¡æ€ä¹ˆé‡æ’åº</strong>ï¼ˆç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ºäº†æé«˜å¹¶è¡Œåº¦ï¼‰ï¼Œï¼ˆå•çº¿ç¨‹ï¼‰<strong>ç¨‹åºçš„æ‰§è¡Œç»“æœä¸èƒ½è¢«æ”¹å˜</strong>ã€‚ç¼–è¯‘å™¨ï¼Œruntime å’Œå¤„ç†å™¨éƒ½å¿…é¡»éµå®ˆ as-if-serial è¯­ä¹‰ã€‚</p><p>ä¸ºäº†éµå®ˆ as-if-serial ç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ä¼šå¯¹å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„æ“ä½œåšé‡æ’åºï¼Œå› ä¸ºè¿™ç§é‡æ’åºä¼šæ”¹å˜æ‰§è¡Œç»“æœã€‚ä½†æ˜¯å¦‚æœæ“ä½œä¹‹é—´æ²¡æœ‰æ•°æ®ä¾èµ–å…³ç³»ï¼Œè¿™äº›æ“ä½œå°±å¯èƒ½è¢«ç¼–è¯‘å™¨å’Œå¤„ç†å™¨é‡æ’åºã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">double pi = 3.14;     //A</span><br><span class="line">double r  = 1.0;       //B</span><br><span class="line">double area = pi * r * r;     //C</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¸‰ä¸ªæ“ä½œçš„æ•°æ®ä¾èµ–å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fow7l7q6paj30fa0aoq33.jpg" alt="abc"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒA å’Œ C ä¹‹é—´å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»ï¼ŒåŒæ—¶ B å’Œ C ä¹‹é—´ä¹Ÿå­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»ã€‚å› æ­¤åœ¨æœ€ç»ˆæ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—ä¸­ï¼ŒC ä¸èƒ½è¢«é‡æ’åºåˆ° A å’Œ B çš„å‰é¢ï¼ˆC æ’åˆ° A å’Œ B çš„å‰é¢ï¼Œç¨‹åºçš„ç»“æœå°†ä¼šè¢«æ”¹å˜ï¼‰ã€‚ä½† A å’Œ B ä¹‹é—´æ²¡æœ‰æ•°æ®ä¾èµ–å…³ç³»ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯ä»¥é‡æ’åº A å’Œ B ä¹‹é—´çš„æ‰§è¡Œé¡ºåºã€‚ä¸‹å›¾æ˜¯è¯¥ç¨‹åºçš„ä¸¤ç§æ‰§è¡Œé¡ºåºï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fow7l97fx2j30zu0cwdh1.jpg" alt="2018-02-27_16-52-44"></p><p>åœ¨è®¡ç®—æœºä¸­ï¼Œè½¯ä»¶æŠ€æœ¯å’Œç¡¬ä»¶æŠ€æœ¯æœ‰ä¸€ä¸ªå…±åŒçš„ç›®æ ‡ï¼šåœ¨ä¸æ”¹å˜ç¨‹åºæ‰§è¡Œç»“æœçš„å‰æä¸‹ï¼Œå°½å¯èƒ½çš„å¼€å‘å¹¶è¡Œåº¦ã€‚ç¼–è¯‘å™¨å’Œå¤„ç†å™¨éµä»è¿™ä¸€ç›®æ ‡ï¼Œä» happens-before çš„å®šä¹‰æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒJMM åŒæ ·éµä»è¿™ä¸€ç›®æ ‡ã€‚</p><h4 id="é‡æ’åºå¯¹å¤šçº¿ç¨‹çš„å½±å“"><a href="#é‡æ’åºå¯¹å¤šçº¿ç¨‹çš„å½±å“" class="headerlink" title="é‡æ’åºå¯¹å¤šçº¿ç¨‹çš„å½±å“"></a>é‡æ’åºå¯¹å¤šçº¿ç¨‹çš„å½±å“</h4><p>ä¸¾ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    a = <span class="number">1</span>;<span class="comment">//1</span></span><br><span class="line">    flag = <span class="keyword">true</span>;<span class="comment">//2</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(flag) &#123;<span class="comment">//3</span></span><br><span class="line">      <span class="keyword">int</span> i = a * a;<span class="comment">//4</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºæ“ä½œ 1 å’Œ 2 æ²¡æœ‰æ•°æ®ä¾èµ–å…³ç³»ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯ä»¥å¯¹è¿™ä¸¤ä¸ªæ“ä½œé‡æ’åºï¼›æ“ä½œ 3 å’Œæ“ä½œ 4 æ²¡æœ‰æ•°æ®ä¾èµ–å…³ç³»ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¹Ÿå¯ä»¥å¯¹è¿™ä¸¤ä¸ªæ“ä½œé‡æ’åºã€‚</p><p>1ã€å½“æ“ä½œ 1 å’Œæ“ä½œ 2 é‡æ’åºæ—¶ï¼Œå¯èƒ½ä¼šäº§ç”Ÿä»€ä¹ˆæ•ˆæœï¼Ÿ</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fow7lcgkgej30tw0ki3zd.jpg" alt="sort12"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ“ä½œ 1 å’Œæ“ä½œ 2 åšäº†é‡æ’åºã€‚ç¨‹åºæ‰§è¡Œæ—¶ï¼Œçº¿ç¨‹ A é¦–å…ˆå†™æ ‡è®°å˜é‡ flagï¼Œéšåçº¿ç¨‹ B è¯»è¿™ä¸ªå˜é‡ã€‚ç”±äºæ¡ä»¶åˆ¤æ–­ä¸ºçœŸï¼Œçº¿ç¨‹ B å°†è¯»å–å˜é‡ aã€‚æ­¤æ—¶ï¼Œå˜é‡ a è¿˜æ ¹æœ¬æ²¡æœ‰è¢«çº¿ç¨‹ A å†™å…¥ï¼Œåœ¨è¿™é‡Œå¤šçº¿ç¨‹ç¨‹åºçš„è¯­ä¹‰è¢«é‡æ’åºç ´åäº†ï¼</p><p>2ã€å½“æ“ä½œ 3 å’Œæ“ä½œ 4 é‡æ’åºæ—¶ä¼šäº§ç”Ÿä»€ä¹ˆæ•ˆæœï¼ˆå€ŸåŠ©è¿™ä¸ªé‡æ’åºï¼Œå¯ä»¥é¡ºä¾¿è¯´æ˜æ§åˆ¶ä¾èµ–æ€§ï¼‰ã€‚</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fow7l4zjfkj30zy0owq4r.jpg" alt="sort34"></p><p>åœ¨ç¨‹åºä¸­ï¼Œæ“ä½œ 3 å’Œæ“ä½œ 4 å­˜åœ¨<strong>æ§åˆ¶ä¾èµ–å…³ç³»</strong>ã€‚å½“ä»£ç ä¸­å­˜åœ¨æ§åˆ¶ä¾èµ–æ€§æ—¶ï¼Œ<strong>ä¼šå½±å“æŒ‡ä»¤åºåˆ—æ‰§è¡Œçš„å¹¶è¡Œåº¦</strong>ã€‚ä¸ºæ­¤ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¼šé‡‡ç”¨<strong>çŒœæµ‹</strong>ï¼ˆSpeculationï¼‰æ‰§è¡Œæ¥å…‹æœæ§åˆ¶ç›¸å…³æ€§å¯¹å¹¶è¡Œåº¦çš„å½±å“ã€‚ä»¥å¤„ç†å™¨çš„çŒœæµ‹æ‰§è¡Œä¸ºä¾‹ï¼Œæ‰§è¡Œçº¿ç¨‹ B çš„å¤„ç†å™¨å¯ä»¥æå‰è¯»å–å¹¶è®¡ç®— a * aï¼Œç„¶åæŠŠè®¡ç®—ç»“æœä¸´æ—¶ä¿å­˜åˆ°ä¸€ä¸ªåä¸ºé‡æ’åºç¼“å†²ï¼ˆreorder buffer ROBï¼‰çš„ç¡¬ä»¶ç¼“å­˜ä¸­ã€‚å½“æ¥ä¸‹æ¥æ“ä½œ 3 çš„æ¡ä»¶åˆ¤æ–­ä¸ºçœŸæ—¶ï¼Œå°±æŠŠè¯¥è®¡ç®—ç»“æœå†™å…¥å˜é‡ i ä¸­ã€‚</p><p>ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒçŒœæµ‹æ‰§è¡Œå®è´¨ä¸Šå¯¹æ“ä½œ3å’Œ4åšäº†é‡æ’åºã€‚é‡æ’åºåœ¨è¿™é‡Œç ´åäº†å¤šçº¿ç¨‹ç¨‹åºçš„è¯­ä¹‰ï¼</p><p>åœ¨å•çº¿ç¨‹ç¨‹åºä¸­ï¼Œå¯¹å­˜åœ¨æ§åˆ¶ä¾èµ–çš„æ“ä½œé‡æ’åºï¼Œä¸ä¼šæ”¹å˜æ‰§è¡Œç»“æœï¼ˆè¿™ä¹Ÿæ˜¯ as-if-serial è¯­ä¹‰å…è®¸å¯¹å­˜åœ¨æ§åˆ¶ä¾èµ–çš„æ“ä½œåšé‡æ’åºçš„åŸå› ï¼‰ï¼›ä½†åœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­ï¼Œå¯¹å­˜åœ¨æ§åˆ¶ä¾èµ–çš„æ“ä½œé‡æ’åºï¼Œå¯èƒ½ä¼šæ”¹å˜ç¨‹åºçš„æ‰§è¡Œç»“æœã€‚</p><h3 id="é¡ºåºä¸€è‡´æ€§"><a href="#é¡ºåºä¸€è‡´æ€§" class="headerlink" title="é¡ºåºä¸€è‡´æ€§"></a>é¡ºåºä¸€è‡´æ€§</h3><h4 id="é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹"><a href="#é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹" class="headerlink" title="é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹"></a>é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹</h4><p>é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹æœ‰ä¸¤å¤§ç‰¹æ€§ï¼š</p><ul><li>ä¸€ä¸ªçº¿ç¨‹ä¸­çš„æ‰€æœ‰æ“ä½œå¿…é¡»æŒ‰ç…§ç¨‹åºçš„é¡ºåºæ¥æ‰§è¡Œã€‚</li><li>ï¼ˆä¸ç®¡ç¨‹åºæ˜¯å¦åŒæ­¥ï¼‰æ‰€æœ‰çº¿ç¨‹éƒ½åªèƒ½çœ‹åˆ°ä¸€ä¸ªå•ä¸€çš„æ“ä½œæ‰§è¡Œé¡ºåºã€‚åœ¨é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¸­ï¼Œæ¯ä¸ªæ“ä½œéƒ½å¿…é¡»åŸå­æ‰§è¡Œä¸”ç«‹åˆ»å¯¹æ‰€æœ‰çº¿ç¨‹å¯è§ã€‚</li></ul><p>é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¸ºç¨‹åºå‘˜æä¾›çš„è§†å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fow7l6dyuaj30sk0mumyg.jpg" alt="2018-02-27_17-55-09"></p><p>åœ¨æ¦‚å¿µä¸Šï¼Œé¡ºåºä¸€è‡´æ€§æ¨¡å‹æœ‰ä¸€ä¸ªå•ä¸€çš„å…¨å±€å†…å­˜ï¼Œè¿™ä¸ªå†…å­˜é€šè¿‡ä¸€ä¸ªå·¦å³æ‘†åŠ¨çš„å¼€å…³å¯ä»¥è¿æ¥åˆ°ä»»æ„ä¸€ä¸ªçº¿ç¨‹ï¼ŒåŒæ—¶æ¯ä¸€ä¸ªçº¿ç¨‹å¿…é¡»æŒ‰ç…§ç¨‹åºçš„é¡ºåºæ¥æ‰§è¡Œå†…å­˜è¯»/å†™æ“ä½œã€‚ä»ä¸Šé¢çš„ç¤ºæ„å›¾æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œåœ¨ä»»æ„æ—¶é—´ç‚¹æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è¿æ¥åˆ°å†…å­˜ã€‚å½“å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œæ—¶ï¼Œå›¾ä¸­çš„å¼€å…³è£…ç½®èƒ½æŠŠæ‰€æœ‰çº¿ç¨‹çš„æ‰€æœ‰å†…å­˜è¯»/å†™æ“ä½œä¸²è¡ŒåŒ–ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><p>å‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹ A å’Œ B å¹¶å‘æ‰§è¡Œã€‚å…¶ä¸­ A çº¿ç¨‹æœ‰ä¸‰ä¸ªæ“ä½œï¼Œå®ƒä»¬åœ¨ç¨‹åºä¸­çš„é¡ºåºæ˜¯ï¼šA1 -&gt; A2 -&gt; A3ã€‚B çº¿ç¨‹ä¹Ÿæœ‰ä¸‰ä¸ªæ“ä½œï¼Œå®ƒä»¬åœ¨ç¨‹åºä¸­çš„é¡ºåºæ˜¯ï¼šB1 -&gt; B2 -&gt; B3ã€‚</p><p>å‡è®¾è¿™ä¸¤ä¸ªçº¿ç¨‹ä½¿ç”¨ç›‘è§†å™¨é”æ¥æ­£ç¡®åŒæ­¥ï¼šA çº¿ç¨‹çš„ä¸‰ä¸ªæ“ä½œæ‰§è¡Œåé‡Šæ”¾ç›‘è§†å™¨é”ï¼Œéšå B çº¿ç¨‹è·å–åŒä¸€ä¸ªç›‘è§†å™¨é”ã€‚é‚£ä¹ˆç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­çš„æ‰§è¡Œæ•ˆæœå°†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fow7ldkj04j31440paaee.jpg" alt="2018-02-27_18-01-51"></p><p>ç°åœ¨æˆ‘ä»¬å†å‡è®¾è¿™ä¸¤ä¸ªçº¿ç¨‹æ²¡æœ‰åšåŒæ­¥ï¼Œä¸‹é¢æ˜¯è¿™ä¸ªæœªåŒæ­¥ç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­çš„æ‰§è¡Œç¤ºæ„å›¾ï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fow7lefk10j316c0nytd8.jpg" alt="2018-02-27_18-04-20"></p><p>æœªåŒæ­¥ç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­è™½ç„¶æ•´ä½“æ‰§è¡Œé¡ºåºæ˜¯æ— åºçš„ï¼Œä½†æ‰€æœ‰çº¿ç¨‹éƒ½åªèƒ½çœ‹åˆ°ä¸€ä¸ªä¸€è‡´çš„æ•´ä½“æ‰§è¡Œé¡ºåºã€‚ä»¥ä¸Šå›¾ä¸ºä¾‹ï¼Œçº¿ç¨‹ A å’Œ B çœ‹åˆ°çš„æ‰§è¡Œé¡ºåºéƒ½æ˜¯ï¼šB1 -&gt; A1 -&gt; A2 -&gt; B2 -&gt; A3 -&gt; B3ã€‚ä¹‹æ‰€ä»¥èƒ½å¾—åˆ°è¿™ä¸ªä¿è¯æ˜¯å› ä¸ºé¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¸­çš„æ¯ä¸ªæ“ä½œå¿…é¡»ç«‹å³å¯¹ä»»æ„çº¿ç¨‹å¯è§ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨ JMM ä¸­å°±æ²¡æœ‰è¿™ä¸ªä¿è¯ã€‚æœªåŒæ­¥ç¨‹åºåœ¨ JMM ä¸­ä¸ä½†æ•´ä½“çš„æ‰§è¡Œé¡ºåºæ˜¯æ— åºçš„ï¼Œè€Œä¸”æ‰€æœ‰çº¿ç¨‹çœ‹åˆ°çš„æ“ä½œæ‰§è¡Œé¡ºåºä¹Ÿå¯èƒ½ä¸ä¸€è‡´ã€‚æ¯”å¦‚ï¼Œåœ¨å½“å‰çº¿ç¨‹æŠŠå†™è¿‡çš„æ•°æ®ç¼“å­˜åœ¨æœ¬åœ°å†…å­˜ä¸­ï¼Œåœ¨è¿˜æ²¡æœ‰åˆ·æ–°åˆ°ä¸»å†…å­˜ä¹‹å‰ï¼Œè¿™ä¸ªå†™æ“ä½œä»…å¯¹å½“å‰çº¿ç¨‹å¯è§ï¼›ä»å…¶ä»–çº¿ç¨‹çš„è§’åº¦æ¥è§‚å¯Ÿï¼Œä¼šè®¤ä¸ºè¿™ä¸ªå†™æ“ä½œæ ¹æœ¬è¿˜æ²¡æœ‰è¢«å½“å‰çº¿ç¨‹æ‰§è¡Œã€‚åªæœ‰å½“å‰çº¿ç¨‹æŠŠæœ¬åœ°å†…å­˜ä¸­å†™è¿‡çš„æ•°æ®åˆ·æ–°åˆ°ä¸»å†…å­˜ä¹‹åï¼Œè¿™ä¸ªå†™æ“ä½œæ‰èƒ½å¯¹å…¶ä»–çº¿ç¨‹å¯è§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“å‰çº¿ç¨‹å’Œå…¶å®ƒçº¿ç¨‹çœ‹åˆ°çš„æ“ä½œæ‰§è¡Œé¡ºåºå°†ä¸ä¸€è‡´ã€‚</p><h4 id="åŒæ­¥ç¨‹åºçš„é¡ºåºä¸€è‡´æ€§æ•ˆæœ"><a href="#åŒæ­¥ç¨‹åºçš„é¡ºåºä¸€è‡´æ€§æ•ˆæœ" class="headerlink" title="åŒæ­¥ç¨‹åºçš„é¡ºåºä¸€è‡´æ€§æ•ˆæœ"></a>åŒæ­¥ç¨‹åºçš„é¡ºåºä¸€è‡´æ€§æ•ˆæœ</h4><p>ä¸‹é¢æˆ‘ä»¬å¯¹å‰é¢çš„ç¤ºä¾‹ç¨‹åºç”¨é”æ¥åŒæ­¥ï¼Œçœ‹çœ‹æ­£ç¡®åŒæ­¥çš„ç¨‹åºå¦‚ä½•å…·æœ‰é¡ºåºä¸€è‡´æ€§ã€‚</p><p>è¯·çœ‹ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">demo</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">()</span> </span>&#123;<span class="comment">//è·å–é”</span></span><br><span class="line">    a = <span class="number">1</span>;</span><br><span class="line">    flag = <span class="keyword">true</span>;</span><br><span class="line">  &#125;<span class="comment">//é‡Šæ”¾é”</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;<span class="comment">//è·å–é”</span></span><br><span class="line">    <span class="keyword">if</span>(flag) &#123;</span><br><span class="line">      <span class="keyword">int</span> i = a;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;<span class="comment">//é‡Šæ”¾é”</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­ï¼Œå‡è®¾ A çº¿ç¨‹æ‰§è¡Œ write() æ–¹æ³•åï¼ŒB çº¿ç¨‹æ‰§è¡Œ reade() æ–¹æ³•ã€‚è¿™æ˜¯ä¸€ä¸ªæ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºã€‚æ ¹æ®JMMè§„èŒƒï¼Œè¯¥ç¨‹åºçš„æ‰§è¡Œç»“æœå°†ä¸è¯¥ç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­çš„æ‰§è¡Œç»“æœç›¸åŒã€‚ä¸‹é¢æ˜¯è¯¥ç¨‹åºåœ¨ä¸¤ä¸ªå†…å­˜æ¨¡å‹ä¸­çš„æ‰§è¡Œæ—¶åºå¯¹æ¯”å›¾ï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fow7ld04ffj312s0tq432.jpg" alt="2018-02-27_22-01-59"></p><p>åœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­ï¼Œæ‰€æœ‰æ“ä½œå®Œå…¨æŒ‰ç¨‹åºçš„é¡ºåºæ‰§è¡Œã€‚è€Œåœ¨ JMM ä¸­ï¼Œä¸´ç•ŒåŒºå†…çš„ä»£ç å¯ä»¥é‡æ’åºï¼ˆä½† JMM ä¸å…è®¸ä¸´ç•ŒåŒºå†…çš„ä»£ç â€œé€¸å‡ºâ€åˆ°ä¸´ç•ŒåŒºä¹‹å¤–ï¼Œé‚£æ ·ä¼šç ´åç›‘è§†å™¨çš„è¯­ä¹‰ï¼‰ã€‚JMM ä¼šåœ¨é€€å‡ºä¸´ç•ŒåŒºå’Œè¿›å…¥ä¸´ç•ŒåŒºè¿™ä¸¤ä¸ªå…³é”®æ—¶é—´ç‚¹åšä¸€äº›ç‰¹åˆ«å¤„ç†ï¼Œä½¿å¾—çº¿ç¨‹åœ¨è¿™ä¸¤ä¸ªæ—¶é—´ç‚¹å…·æœ‰ä¸é¡ºåºä¸€è‡´æ€§æ¨¡å‹ç›¸åŒçš„å†…å­˜è§†å›¾ã€‚è™½ç„¶çº¿ç¨‹ A åœ¨ä¸´ç•ŒåŒºå†…åšäº†é‡æ’åºï¼Œä½†ç”±äºç›‘è§†å™¨çš„äº’æ–¥æ‰§è¡Œçš„ç‰¹æ€§ï¼Œè¿™é‡Œçš„çº¿ç¨‹ B æ ¹æœ¬æ— æ³•â€œè§‚å¯Ÿâ€åˆ°çº¿ç¨‹ A åœ¨ä¸´ç•ŒåŒºå†…çš„é‡æ’åºã€‚è¿™ç§é‡æ’åºæ—¢æé«˜äº†æ‰§è¡Œæ•ˆç‡ï¼Œåˆæ²¡æœ‰æ”¹å˜ç¨‹åºçš„æ‰§è¡Œç»“æœã€‚</p><p>ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° JMM åœ¨å…·ä½“å®ç°ä¸Šçš„åŸºæœ¬æ–¹é’ˆï¼šåœ¨ä¸æ”¹å˜ï¼ˆæ­£ç¡®åŒæ­¥çš„ï¼‰ç¨‹åºæ‰§è¡Œç»“æœçš„å‰æä¸‹ï¼Œå°½å¯èƒ½çš„ä¸ºç¼–è¯‘å™¨å’Œå¤„ç†å™¨çš„ä¼˜åŒ–æ‰“å¼€æ–¹ä¾¿ä¹‹é—¨ã€‚</p><h4 id="æœªåŒæ­¥ç¨‹åºçš„æ‰§è¡Œç‰¹æ€§"><a href="#æœªåŒæ­¥ç¨‹åºçš„æ‰§è¡Œç‰¹æ€§" class="headerlink" title="æœªåŒæ­¥ç¨‹åºçš„æ‰§è¡Œç‰¹æ€§"></a>æœªåŒæ­¥ç¨‹åºçš„æ‰§è¡Œç‰¹æ€§</h4><p>æœªåŒæ­¥ç¨‹åºåœ¨ JMM ä¸­çš„æ‰§è¡Œæ—¶ï¼Œæ•´ä½“ä¸Šæ˜¯æ— åºçš„ï¼Œå…¶æ‰§è¡Œç»“æœæ— æ³•é¢„çŸ¥ã€‚æœªåŒæ­¥ç¨‹åºåœ¨ä¸¤ä¸ªæ¨¡å‹ä¸­çš„æ‰§è¡Œç‰¹æ€§æœ‰ä¸‹é¢å‡ ä¸ªå·®å¼‚ï¼š</p><ol><li>é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¿è¯å•çº¿ç¨‹å†…çš„æ“ä½œä¼šæŒ‰ç¨‹åºçš„é¡ºåºæ‰§è¡Œï¼Œè€Œ JMM  ä¸ä¿è¯å•çº¿ç¨‹å†…çš„æ“ä½œä¼šæŒ‰ç¨‹åºçš„é¡ºåºæ‰§è¡Œï¼ˆæ¯”å¦‚ä¸Šé¢æ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºåœ¨ä¸´ç•ŒåŒºå†…çš„é‡æ’åºï¼‰ã€‚</li><li>é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¿è¯æ‰€æœ‰çº¿ç¨‹åªèƒ½çœ‹åˆ°ä¸€è‡´çš„æ“ä½œæ‰§è¡Œé¡ºåºï¼Œè€Œ JMM ä¸ä¿è¯æ‰€æœ‰çº¿ç¨‹èƒ½çœ‹åˆ°ä¸€è‡´çš„æ“ä½œæ‰§è¡Œé¡ºåºã€‚</li><li><strong>JMM ä¸ä¿è¯å¯¹ 64 ä½çš„ long å‹å’Œ double å‹å˜é‡çš„è¯»/å†™æ“ä½œå…·æœ‰åŸå­æ€§</strong>ï¼Œè€Œ<strong>é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¿è¯å¯¹æ‰€æœ‰çš„å†…å­˜è¯»/å†™æ“ä½œéƒ½å…·æœ‰åŸå­</strong> ã€‚</li></ol><p>ç¬¬ä¸‰ä¸ªå·®å¼‚ä¸å¤„ç†å™¨æ€»çº¿çš„å·¥ä½œæœºåˆ¶å¯†åˆ‡ç›¸å…³ã€‚åœ¨è®¡ç®—æœºä¸­ï¼Œæ•°æ®é€šè¿‡æ€»çº¿åœ¨å¤„ç†å™¨å’Œå†…å­˜ä¹‹é—´ä¼ é€’ã€‚æ¯æ¬¡å¤„ç†å™¨å’Œå†…å­˜ä¹‹é—´çš„æ•°æ®ä¼ é€’éƒ½æ˜¯é€šè¿‡<strong>æ€»çº¿äº‹åŠ¡</strong>æ¥å®Œæˆçš„ã€‚æ€»çº¿äº‹åŠ¡åŒ…æ‹¬è¯»äº‹åŠ¡å’Œå†™äº‹åŠ¡ã€‚è¯»äº‹åŠ¡ä»å†…å­˜ä¼ é€æ•°æ®åˆ°å¤„ç†å™¨ï¼Œå†™äº‹åŠ¡ä»å¤„ç†å™¨ä¼ é€’æ•°æ®åˆ°å†…å­˜ï¼Œæ¯ä¸ªäº‹åŠ¡ä¼šè¯»ï¼å†™å†…å­˜ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªç‰©ç†ä¸Šè¿ç»­çš„å­—ã€‚æ€»çº¿ä¼šåŒæ­¥è¯•å›¾å¹¶å‘ä½¿ç”¨æ€»çº¿çš„äº‹åŠ¡ã€‚åœ¨ä¸€ä¸ªå¤„ç†å™¨æ‰§è¡Œæ€»çº¿äº‹åŠ¡æœŸé—´ï¼Œæ€»çº¿ä¼šç¦æ­¢å…¶å®ƒæ‰€æœ‰çš„å¤„ç†å™¨å’Œ Iï¼O è®¾å¤‡æ‰§è¡Œå†…å­˜çš„è¯»ï¼å†™ã€‚</p><p>æ€»çº¿çš„å·¥ä½œæœºåˆ¶ï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fow7levu1fj30zm0rgmzu.jpg" alt="2018-02-27_22-53-53"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‡è®¾å¤„ç†å™¨ Aã€Bã€å’Œ C  åŒæ—¶å‘æ€»çº¿å‘èµ·æ€»çº¿äº‹åŠ¡ï¼Œè¿™æ—¶æ€»çº¿ä»²è£ä¼šå¯¹ç«äº‰ä½œå‡ºè£å†³ï¼Œå‡è®¾æ€»çº¿åœ¨ä»²è£ååˆ¤å®šå¤„ç†å™¨ A åœ¨ç«äº‰ä¸­è·èƒœï¼ˆæ€»çº¿ä»²è£ä¼šç¡®ä¿æ‰€æœ‰å¤„ç†å™¨éƒ½èƒ½å…¬å¹³çš„è®¿é—®å†…å­˜ï¼‰ã€‚æ­¤æ—¶å¤„ç†å™¨ A ç»§ç»­å®ƒçš„æ€»çº¿äº‹åŠ¡ï¼Œè€Œå…¶å®ƒä¸¤ä¸ªå¤„ç†å™¨åˆ™è¦ç­‰å¾…å¤„ç†å™¨ A çš„æ€»çº¿äº‹åŠ¡å®Œæˆåæ‰èƒ½å¼€å§‹å†æ¬¡æ‰§è¡Œå†…å­˜è®¿é—®ã€‚å‡è®¾åœ¨å¤„ç†å™¨ A æ‰§è¡Œæ€»çº¿äº‹åŠ¡æœŸé—´ï¼ˆä¸ç®¡è¿™ä¸ªæ€»çº¿äº‹åŠ¡æ˜¯è¯»äº‹åŠ¡è¿˜æ˜¯å†™äº‹åŠ¡ï¼‰ï¼Œå¤„ç†å™¨ D å‘æ€»çº¿å‘èµ·äº†æ€»çº¿äº‹åŠ¡ï¼Œæ­¤æ—¶å¤„ç†å™¨ D çš„è¿™ä¸ªè¯·æ±‚ä¼šè¢«æ€»çº¿ç¦æ­¢ã€‚</p><p>æ€»çº¿çš„è¿™äº›å·¥ä½œæœºåˆ¶å¯ä»¥<strong>æŠŠæ‰€æœ‰å¤„ç†å™¨å¯¹å†…å­˜çš„è®¿é—®ä»¥ä¸²è¡ŒåŒ–çš„æ–¹å¼æ¥æ‰§è¡Œ</strong>ï¼›<strong>åœ¨ä»»æ„æ—¶é—´ç‚¹ï¼Œæœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªå¤„ç†å™¨èƒ½è®¿é—®å†…å­˜</strong>ã€‚è¿™ä¸ªç‰¹æ€§<strong>ç¡®ä¿äº†å•ä¸ªæ€»çº¿äº‹åŠ¡ä¹‹ä¸­çš„å†…å­˜è¯»/å†™æ“ä½œå…·æœ‰åŸå­æ€§</strong>ã€‚</p><p>åœ¨ä¸€äº› 32 ä½çš„å¤„ç†å™¨ä¸Šï¼Œå¦‚æœè¦æ±‚å¯¹ 64 ä½æ•°æ®çš„å†™æ“ä½œå…·æœ‰åŸå­æ€§ï¼Œä¼šæœ‰æ¯”è¾ƒå¤§çš„å¼€é”€ã€‚ä¸ºäº†ç…§é¡¾è¿™ç§å¤„ç†å™¨ï¼ŒJava è¯­è¨€è§„èŒƒé¼“åŠ±ä½†ä¸å¼ºæ±‚ JVM å¯¹ 64 ä½çš„ long å‹å˜é‡å’Œ double å‹å˜é‡çš„å†™å…·æœ‰åŸå­æ€§ã€‚å½“ JVM åœ¨è¿™ç§å¤„ç†å™¨ä¸Šè¿è¡Œæ—¶ï¼Œä¼šæŠŠä¸€ä¸ª 64 ä½ long/ double å‹å˜é‡çš„å†™æ“ä½œæ‹†åˆ†ä¸ºä¸¤ä¸ª 32 ä½çš„å†™æ“ä½œæ¥æ‰§è¡Œã€‚è¿™ä¸¤ä¸ª 32 ä½çš„å†™æ“ä½œå¯èƒ½ä¼šè¢«åˆ†é…åˆ°ä¸åŒçš„æ€»çº¿äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œæ­¤æ—¶å¯¹è¿™ä¸ª 64 ä½å˜é‡çš„å†™å°†ä¸å…·æœ‰åŸå­æ€§ã€‚</p><p>å½“å•ä¸ªå†…å­˜æ“ä½œä¸å…·æœ‰åŸå­æ€§ï¼Œå°†å¯èƒ½ä¼šäº§ç”Ÿæ„æƒ³ä¸åˆ°åæœã€‚è¯·çœ‹ä¸‹é¢ç¤ºæ„å›¾ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fow7l88o2aj312i0l8jt0.jpg" alt="2018-02-27_23-06-59"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‡è®¾å¤„ç†å™¨ A å†™ä¸€ä¸ª long å‹å˜é‡ï¼ŒåŒæ—¶å¤„ç†å™¨ B è¦è¯»è¿™ä¸ª long å‹å˜é‡ã€‚å¤„ç†å™¨ A ä¸­ 64 ä½çš„å†™æ“ä½œè¢«æ‹†åˆ†ä¸ºä¸¤ä¸ª 32 ä½çš„å†™æ“ä½œï¼Œä¸”è¿™ä¸¤ä¸ª 32 ä½çš„å†™æ“ä½œè¢«åˆ†é…åˆ°ä¸åŒçš„å†™äº‹åŠ¡ä¸­æ‰§è¡Œã€‚åŒæ—¶å¤„ç†å™¨ B ä¸­ 64 ä½çš„è¯»æ“ä½œè¢«åˆ†é…åˆ°å•ä¸ªçš„è¯»äº‹åŠ¡ä¸­æ‰§è¡Œã€‚å½“å¤„ç†å™¨ A å’Œ B æŒ‰ä¸Šå›¾çš„æ—¶åºæ¥æ‰§è¡Œæ—¶ï¼Œå¤„ç†å™¨ B å°†çœ‹åˆ°ä»…ä»…è¢«å¤„ç†å™¨ A â€œå†™äº†ä¸€åŠâ€œçš„æ— æ•ˆå€¼ã€‚</p><p>æ³¨æ„ï¼Œåœ¨ JSR -133 ä¹‹å‰çš„æ—§å†…å­˜æ¨¡å‹ä¸­ï¼Œä¸€ä¸ª 64 ä½ long/ double å‹å˜é‡çš„<strong>è¯»/å†™</strong>æ“ä½œå¯ä»¥è¢«æ‹†åˆ†ä¸ºä¸¤ä¸ª 32 ä½çš„è¯»/å†™æ“ä½œæ¥æ‰§è¡Œã€‚ä» JSR -133 å†…å­˜æ¨¡å‹å¼€å§‹ï¼ˆå³ä»JDK5å¼€å§‹ï¼‰ï¼Œä»…ä»…åªå…è®¸æŠŠä¸€ä¸ª 64 ä½ long/ double å‹å˜é‡çš„<strong>å†™</strong>æ“ä½œæ‹†åˆ†ä¸ºä¸¤ä¸ª 32 ä½çš„å†™æ“ä½œæ¥æ‰§è¡Œï¼Œ<strong>ä»»æ„çš„è¯»æ“ä½œåœ¨JSR -133ä¸­éƒ½å¿…é¡»å…·æœ‰åŸå­æ€§</strong>ï¼ˆå³ä»»æ„è¯»æ“ä½œå¿…é¡»è¦åœ¨å•ä¸ªè¯»äº‹åŠ¡ä¸­æ‰§è¡Œï¼‰ã€‚</p><h3 id="Volatile"><a href="#Volatile" class="headerlink" title="Volatile"></a>Volatile</h3><h4 id="Volatile-ç‰¹æ€§"><a href="#Volatile-ç‰¹æ€§" class="headerlink" title="Volatile ç‰¹æ€§"></a>Volatile ç‰¹æ€§</h4><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VolatileTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">long</span> a = <span class="number">1L</span>; <span class="comment">// ä½¿ç”¨ volatile å£°æ˜ 64 ä½çš„ long å‹</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(<span class="keyword">long</span> l)</span> </span>&#123;</span><br><span class="line">        a = l;                  <span class="comment">//å•ä¸ª volatile å˜é‡çš„å†™</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a;               <span class="comment">//å•ä¸ª volatile å˜é‡çš„è¯»</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getAndIncreament</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        a++;                    <span class="comment">// å¤åˆï¼ˆå¤šä¸ªï¼‰ volatile å˜é‡çš„è¯» /å†™</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡è®¾æœ‰å¤šä¸ªçº¿ç¨‹åˆ†åˆ«è°ƒç”¨ä¸Šé¢ç¨‹åºçš„ä¸‰ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªç¨‹åºåœ¨è¯­ä¹‰ä¸Šå’Œä¸‹é¢ç¨‹åºç­‰ä»·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VolatileTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> a = <span class="number">1L</span>; <span class="comment">// 64 ä½çš„ long å‹æ™®é€šå˜é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(<span class="keyword">long</span> l)</span> </span>&#123;<span class="comment">//å¯¹å•ä¸ªæ™®é€šå˜é‡çš„å†™ç”¨åŒä¸€ä¸ªé”åŒæ­¥</span></span><br><span class="line">        a = l;                </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">long</span> <span class="title">get</span><span class="params">()</span> </span>&#123;<span class="comment">//å¯¹å•ä¸ªæ™®é€šå˜é‡çš„è¯»ç”¨åŒä¸€ä¸ªé”åŒæ­¥</span></span><br><span class="line">        <span class="keyword">return</span> a;           </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getAndIncreament</span><span class="params">()</span> </span>&#123;<span class="comment">//æ™®é€šæ–¹æ³•è°ƒç”¨</span></span><br><span class="line">      <span class="keyword">long</span> temp = get();<span class="comment">//è°ƒç”¨å·²åŒæ­¥çš„è¯»æ–¹æ³•</span></span><br><span class="line">        temp += <span class="number">1L</span>;<span class="comment">//æ™®é€šå†™æ“ä½œ</span></span><br><span class="line">      set(temp);<span class="comment">//è°ƒç”¨å·²åŒæ­¥çš„å†™æ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šé¢ç¤ºä¾‹ç¨‹åºæ‰€ç¤ºï¼Œå¯¹ä¸€ä¸ª volatile å˜é‡çš„å•ä¸ªè¯»/å†™æ“ä½œï¼Œä¸å¯¹ä¸€ä¸ªæ™®é€šå˜é‡çš„è¯»/å†™æ“ä½œä½¿ç”¨åŒä¸€ä¸ªé”æ¥åŒæ­¥ï¼Œå®ƒä»¬ä¹‹é—´çš„æ‰§è¡Œæ•ˆæœç›¸åŒã€‚</p><p>é”çš„ happens-before è§„åˆ™ä¿è¯é‡Šæ”¾é”å’Œè·å–é”çš„ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´çš„å†…å­˜å¯è§æ€§ï¼Œè¿™æ„å‘³ç€<strong>å¯¹ä¸€ä¸ª volatile å˜é‡çš„è¯»ï¼Œæ€»æ˜¯èƒ½çœ‹åˆ°ï¼ˆä»»æ„çº¿ç¨‹ï¼‰å¯¹è¿™ä¸ª volatile å˜é‡æœ€åçš„å†™å…¥</strong>ã€‚</p><p>é”çš„è¯­ä¹‰å†³å®šäº†ä¸´ç•ŒåŒºä»£ç çš„æ‰§è¡Œå…·æœ‰åŸå­æ€§ã€‚è¿™æ„å‘³ç€å³ä½¿æ˜¯ 64 ä½çš„ long å‹å’Œ double å‹å˜é‡ï¼Œåªè¦å®ƒæ˜¯ volatileå˜é‡ï¼Œå¯¹è¯¥å˜é‡çš„è¯»å†™å°±å°†å…·æœ‰åŸå­æ€§ã€‚<strong>å¦‚æœæ˜¯å¤šä¸ª volatile æ“ä½œæˆ–ç±»ä¼¼äº volatile++ è¿™ç§å¤åˆæ“ä½œï¼Œè¿™äº›æ“ä½œæ•´ä½“ä¸Šä¸å…·æœ‰åŸå­æ€§</strong>ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼Œvolatile å˜é‡è‡ªèº«å…·æœ‰ä¸‹åˆ—ç‰¹æ€§ï¼š</p><ul><li>å¯è§æ€§ã€‚å¯¹ä¸€ä¸ª volatile å˜é‡çš„è¯»ï¼Œæ€»æ˜¯èƒ½çœ‹åˆ°ï¼ˆä»»æ„çº¿ç¨‹ï¼‰å¯¹è¿™ä¸ª volatile å˜é‡æœ€åçš„å†™å…¥ã€‚</li><li>åŸå­æ€§ï¼šå¯¹ä»»æ„å•ä¸ª volatile å˜é‡çš„è¯»/å†™å…·æœ‰åŸå­æ€§ï¼Œä½†ç±»ä¼¼äº volatile++ è¿™ç§å¤åˆæ“ä½œä¸å…·æœ‰åŸå­æ€§ã€‚</li></ul><h4 id="volatile-å†™-è¯»çš„å†…å­˜å®šä¹‰"><a href="#volatile-å†™-è¯»çš„å†…å­˜å®šä¹‰" class="headerlink" title="volatile å†™-è¯»çš„å†…å­˜å®šä¹‰"></a>volatile å†™-è¯»çš„å†…å­˜å®šä¹‰</h4><ul><li>å½“<strong>å†™</strong>ä¸€ä¸ª volatile å˜é‡æ—¶ï¼ŒJMM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ä¸­çš„å…±äº«å˜é‡å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ã€‚</li><li>å½“<strong>è¯»</strong>ä¸€ä¸ª volatile å˜é‡æ—¶ï¼ŒJMM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ç½®ä¸ºæ— æ•ˆã€‚çº¿ç¨‹æ¥ä¸‹æ¥å°†ä»ä¸»å†…å­˜ä¸­è¯»å–å…±äº«å˜é‡ã€‚</li></ul><p>å‡è®¾ä¸Šé¢çš„ç¨‹åº flag å˜é‡ç”¨ volatile ä¿®é¥°</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fow7lak6kvj30xc0qc76l.jpg" alt="2018-02-28_10-13-39"></p><h4 id="volatile-å†…å­˜è¯­ä¹‰çš„å®ç°"><a href="#volatile-å†…å­˜è¯­ä¹‰çš„å®ç°" class="headerlink" title="volatile å†…å­˜è¯­ä¹‰çš„å®ç°"></a>volatile å†…å­˜è¯­ä¹‰çš„å®ç°</h4><p>ä¸‹é¢æ˜¯ JMM é’ˆå¯¹ç¼–è¯‘å™¨åˆ¶å®šçš„ volatile é‡æ’åºè§„åˆ™è¡¨ï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fow7lg83wdj313u0ckmz8.jpg" alt="2018-02-28_10-26-43"></p><p>ä¸ºäº†å®ç° volatile çš„å†…å­˜è¯­ä¹‰ï¼Œç¼–è¯‘å™¨åœ¨ç”Ÿæˆå­—èŠ‚ç æ—¶ï¼Œä¼šåœ¨æŒ‡ä»¤åºåˆ—ä¸­æ’å…¥å†…å­˜å±éšœæ¥ç¦æ­¢ç‰¹å®šç±»å‹çš„å¤„ç†å™¨é‡æ’åºã€‚</p><p>ä¸‹é¢æ˜¯åŸºäºä¿å®ˆç­–ç•¥çš„ JMM å†…å­˜å±éšœæ’å…¥ç­–ç•¥ï¼š</p><ul><li>åœ¨æ¯ä¸ª volatile å†™æ“ä½œçš„å‰é¢æ’å…¥ä¸€ä¸ª StoreStore å±éšœã€‚</li><li>åœ¨æ¯ä¸ª volatile å†™æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ª StoreLoad å±éšœã€‚</li><li>åœ¨æ¯ä¸ª volatile è¯»æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ª LoadLoad å±éšœã€‚</li><li>åœ¨æ¯ä¸ª volatile è¯»æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ª LoadStore å±éšœã€‚</li></ul><p>ä¸‹é¢æ˜¯ä¿å®ˆç­–ç•¥ä¸‹ï¼Œvolatile å†™æ“ä½œ æ’å…¥å†…å­˜å±éšœåç”Ÿæˆçš„æŒ‡ä»¤åºåˆ—ç¤ºæ„å›¾ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fow7la65xnj31100lc76r.jpg" alt="2018-02-28_10-31-14"></p><p>ä¸‹é¢æ˜¯åœ¨ä¿å®ˆç­–ç•¥ä¸‹ï¼Œvolatile è¯»æ“ä½œ æ’å…¥å†…å­˜å±éšœåç”Ÿæˆçš„æŒ‡ä»¤åºåˆ—ç¤ºæ„å›¾ï¼š</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fow7l35uyuj310w0myju1.jpg" alt="2018-02-28_10-38-12"></p><p>ä¸Šè¿° volatile å†™æ“ä½œå’Œ volatile è¯»æ“ä½œçš„å†…å­˜å±éšœæ’å…¥ç­–ç•¥éå¸¸ä¿å®ˆã€‚åœ¨å®é™…æ‰§è¡Œæ—¶ï¼Œåªè¦ä¸æ”¹å˜ volatile å†™-è¯»çš„å†…å­˜è¯­ä¹‰ï¼Œç¼–è¯‘å™¨å¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µçœç•¥ä¸å¿…è¦çš„å±éšœã€‚</p><h3 id="é”"><a href="#é”" class="headerlink" title="é”"></a>é”</h3><h4 id="é”é‡Šæ”¾å’Œè·å–çš„å†…å­˜è¯­ä¹‰"><a href="#é”é‡Šæ”¾å’Œè·å–çš„å†…å­˜è¯­ä¹‰" class="headerlink" title="é”é‡Šæ”¾å’Œè·å–çš„å†…å­˜è¯­ä¹‰"></a>é”é‡Šæ”¾å’Œè·å–çš„å†…å­˜è¯­ä¹‰</h4><p>å½“çº¿ç¨‹é‡Šæ”¾é”æ—¶ï¼ŒJMM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ä¸­çš„å…±äº«å˜é‡åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­ã€‚</p><p>å½“çº¿ç¨‹è·å–é”æ—¶ï¼ŒJMM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ç½®ä¸ºæ— æ•ˆã€‚ä»è€Œä½¿å¾—è¢«ç›‘è§†å™¨ä¿æŠ¤çš„ä¸´ç•ŒåŒºä»£ç å¿…é¡»è¦ä»ä¸»å†…å­˜ä¸­å»è¯»å–å…±äº«å˜é‡ã€‚</p><h4 id="é”å†…å­˜è¯­ä¹‰çš„å®ç°"><a href="#é”å†…å­˜è¯­ä¹‰çš„å®ç°" class="headerlink" title="é”å†…å­˜è¯­ä¹‰çš„å®ç°"></a>é”å†…å­˜è¯­ä¹‰çš„å®ç°</h4><p>å€ŸåŠ© ReentrantLock æ¥è®²è§£ï¼ŒPSï¼š åé¢ä¸“é—¨è®²ä¸‹è¿™å—ï¼ˆReentrantLockã€Synchronizedã€å…¬å¹³é”ã€éå…¬å¹³é”ã€AQSç­‰ï¼‰ï¼Œå¯ä»¥çœ‹çœ‹å¤§æ˜å“¥çš„åšå®¢ï¼š<a href="">http://cmsblogs.com/?p=2210</a></p><h4 id="concurrent-åŒ…çš„å®ç°"><a href="#concurrent-åŒ…çš„å®ç°" class="headerlink" title="concurrent åŒ…çš„å®ç°"></a>concurrent åŒ…çš„å®ç°</h4><p>å¦‚æœæˆ‘ä»¬ä»”ç»†åˆ†æ concurrent åŒ…çš„æºä»£ç å®ç°ï¼Œä¼šå‘ç°ä¸€ä¸ªé€šç”¨åŒ–çš„å®ç°æ¨¡å¼ï¼š</p><ol><li>é¦–å…ˆï¼Œå£°æ˜å…±äº«å˜é‡ä¸º volatileï¼›</li><li>ç„¶åï¼Œä½¿ç”¨ CAS çš„åŸå­æ¡ä»¶æ›´æ–°æ¥å®ç°çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥ï¼›</li><li>åŒæ—¶ï¼Œé…åˆä»¥ volatile çš„è¯»/å†™å’Œ CAS æ‰€å…·æœ‰çš„ volatile è¯»å’Œå†™çš„å†…å­˜è¯­ä¹‰æ¥å®ç°çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚</li></ol><p>AQSï¼Œéé˜»å¡æ•°æ®ç»“æ„å’ŒåŸå­å˜é‡ç±»ï¼ˆjava.util.concurrent.atomic åŒ…ä¸­çš„ç±»ï¼‰ï¼Œè¿™äº› concurrent åŒ…ä¸­çš„åŸºç¡€ç±»éƒ½æ˜¯ä½¿ç”¨è¿™ç§æ¨¡å¼æ¥å®ç°çš„ï¼Œè€Œ concurrent åŒ…ä¸­çš„é«˜å±‚ç±»åˆæ˜¯ä¾èµ–äºè¿™äº›åŸºç¡€ç±»æ¥å®ç°çš„ã€‚ä»æ•´ä½“æ¥çœ‹ï¼Œconcurrent åŒ…çš„å®ç°ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fow7l42rbpj31160qa77a.jpg" alt="2018-02-28_14-58-32"></p><h3 id="final"><a href="#final" class="headerlink" title="final"></a>final</h3><p>å¯¹äº final åŸŸï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨è¦éµå®ˆä¸¤ä¸ªé‡æ’åºè§„åˆ™ï¼š</p><ol><li>åœ¨æ„é€ å‡½æ•°å†…å¯¹ä¸€ä¸ª final åŸŸçš„å†™å…¥ï¼Œä¸éšåæŠŠè¿™ä¸ªè¢«æ„é€ å¯¹è±¡çš„å¼•ç”¨èµ‹å€¼ç»™ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œè¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´ä¸èƒ½é‡æ’åºã€‚</li><li>åˆæ¬¡è¯»ä¸€ä¸ªåŒ…å« final åŸŸçš„å¯¹è±¡çš„å¼•ç”¨ï¼Œä¸éšååˆæ¬¡è¯»è¿™ä¸ª final åŸŸï¼Œè¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´ä¸èƒ½é‡æ’åºã€‚</li></ol><h4 id="å†™-final-åŸŸçš„é‡æ’åºè§„åˆ™"><a href="#å†™-final-åŸŸçš„é‡æ’åºè§„åˆ™" class="headerlink" title="å†™ final åŸŸçš„é‡æ’åºè§„åˆ™"></a>å†™ final åŸŸçš„é‡æ’åºè§„åˆ™</h4><p>å†™ final åŸŸçš„é‡æ’åºè§„åˆ™ç¦æ­¢æŠŠ final åŸŸçš„å†™é‡æ’åºåˆ°æ„é€ å‡½æ•°ä¹‹å¤–ã€‚è¿™ä¸ªè§„åˆ™çš„å®ç°åŒ…å«ä¸‹é¢2ä¸ªæ–¹é¢ï¼š</p><ul><li>JMM ç¦æ­¢ç¼–è¯‘å™¨æŠŠ final åŸŸçš„å†™é‡æ’åºåˆ°æ„é€ å‡½æ•°ä¹‹å¤–ã€‚</li><li>ç¼–è¯‘å™¨ä¼šåœ¨ final åŸŸçš„å†™ä¹‹åï¼Œæ„é€ å‡½æ•° return ä¹‹å‰ï¼Œæ’å…¥ä¸€ä¸ª StoreStore å±éšœã€‚è¿™ä¸ªå±éšœç¦æ­¢å¤„ç†å™¨æŠŠ final åŸŸçš„å†™é‡æ’åºåˆ°æ„é€ å‡½æ•°ä¹‹å¤–ã€‚</li></ul><h4 id="è¯»-final-åŸŸçš„é‡æ’åºè§„åˆ™"><a href="#è¯»-final-åŸŸçš„é‡æ’åºè§„åˆ™" class="headerlink" title="è¯» final åŸŸçš„é‡æ’åºè§„åˆ™"></a>è¯» final åŸŸçš„é‡æ’åºè§„åˆ™</h4><p>åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œåˆæ¬¡è¯»å¯¹è±¡å¼•ç”¨ä¸åˆæ¬¡è¯»è¯¥å¯¹è±¡åŒ…å«çš„ final åŸŸï¼ŒJMM ç¦æ­¢å¤„ç†å™¨é‡æ’åºè¿™ä¸¤ä¸ªæ“ä½œï¼ˆæ³¨æ„ï¼Œè¿™ä¸ªè§„åˆ™ä»…ä»…é’ˆå¯¹å¤„ç†å™¨ï¼‰ã€‚ç¼–è¯‘å™¨ä¼šåœ¨è¯» final åŸŸæ“ä½œçš„å‰é¢æ’å…¥ä¸€ä¸ª LoadLoad å±éšœã€‚</p><h4 id="final-åŸŸæ˜¯å¼•ç”¨ç±»å‹"><a href="#final-åŸŸæ˜¯å¼•ç”¨ç±»å‹" class="headerlink" title="final åŸŸæ˜¯å¼•ç”¨ç±»å‹"></a>final åŸŸæ˜¯å¼•ç”¨ç±»å‹</h4><p>å¯¹äºå¼•ç”¨ç±»å‹ï¼Œå†™ final åŸŸçš„é‡æ’åºè§„åˆ™å¯¹ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¢åŠ äº†å¦‚ä¸‹çº¦æŸï¼š</p><p>åœ¨æ„é€ å‡½æ•°å†…å¯¹ä¸€ä¸ª final å¼•ç”¨çš„å¯¹è±¡çš„æˆå‘˜åŸŸçš„å†™å…¥ï¼Œä¸éšååœ¨æ„é€ å‡½æ•°å¤–æŠŠè¿™ä¸ªè¢«æ„é€ å¯¹è±¡çš„å¼•ç”¨èµ‹å€¼ç»™ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œè¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´ä¸èƒ½é‡æ’åºã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><h4 id="JMMï¼Œå¤„ç†å™¨å†…å­˜æ¨¡å‹ä¸é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¹‹é—´çš„å…³ç³»"><a href="#JMMï¼Œå¤„ç†å™¨å†…å­˜æ¨¡å‹ä¸é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¹‹é—´çš„å…³ç³»" class="headerlink" title="JMMï¼Œå¤„ç†å™¨å†…å­˜æ¨¡å‹ä¸é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¹‹é—´çš„å…³ç³»"></a>JMMï¼Œå¤„ç†å™¨å†…å­˜æ¨¡å‹ä¸é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¹‹é—´çš„å…³ç³»</h4><p>JMM æ˜¯ä¸€ä¸ªè¯­è¨€çº§çš„å†…å­˜æ¨¡å‹ï¼Œå¤„ç†å™¨å†…å­˜æ¨¡å‹æ˜¯ç¡¬ä»¶çº§çš„å†…å­˜æ¨¡å‹ï¼Œé¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹æ˜¯ä¸€ä¸ªç†è®ºå‚è€ƒæ¨¡å‹ã€‚ä¸‹é¢æ˜¯è¯­è¨€å†…å­˜æ¨¡å‹ï¼Œå¤„ç†å™¨å†…å­˜æ¨¡å‹å’Œé¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹çš„å¼ºå¼±å¯¹æ¯”ç¤ºæ„å›¾ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fow7l8rgjej30ys0r6n05.jpg" alt="2018-02-28_15-34-39"></p><h4 id="JMM-çš„è®¾è®¡ç¤ºæ„å›¾"><a href="#JMM-çš„è®¾è®¡ç¤ºæ„å›¾" class="headerlink" title="JMM çš„è®¾è®¡ç¤ºæ„å›¾"></a>JMM çš„è®¾è®¡ç¤ºæ„å›¾</h4><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fow7lb5c5kj310y0z4q7w.jpg" alt="jmm-"></p><h4 id="JMM-çš„å†…å­˜å¯è§æ€§ä¿è¯"><a href="#JMM-çš„å†…å­˜å¯è§æ€§ä¿è¯" class="headerlink" title="JMM çš„å†…å­˜å¯è§æ€§ä¿è¯"></a>JMM çš„å†…å­˜å¯è§æ€§ä¿è¯</h4><p>Java ç¨‹åºçš„å†…å­˜å¯è§æ€§ä¿è¯æŒ‰ç¨‹åºç±»å‹å¯ä»¥åˆ†ä¸ºä¸‹åˆ—ä¸‰ç±»ï¼š</p><p>1.å•çº¿ç¨‹ç¨‹åºã€‚å•çº¿ç¨‹ç¨‹åºä¸ä¼šå‡ºç°å†…å­˜å¯è§æ€§é—®é¢˜ã€‚ç¼–è¯‘å™¨ï¼Œruntime å’Œå¤„ç†å™¨ä¼šå…±åŒç¡®ä¿å•çº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¯¥ç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­çš„æ‰§è¡Œç»“æœç›¸åŒã€‚</p><p>2.æ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºã€‚æ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œå°†å…·æœ‰é¡ºåºä¸€è‡´æ€§ï¼ˆç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¯¥ç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¸­çš„æ‰§è¡Œç»“æœç›¸åŒï¼‰ã€‚è¿™æ˜¯ JMM å…³æ³¨çš„é‡ç‚¹ï¼ŒJMMé€šè¿‡é™åˆ¶ç¼–è¯‘å™¨å’Œå¤„ç†å™¨çš„é‡æ’åºæ¥ä¸ºç¨‹åºå‘˜æä¾›å†…å­˜å¯è§æ€§ä¿è¯ã€‚</p><p>3.æœªåŒæ­¥/æœªæ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºã€‚JMM ä¸ºå®ƒä»¬æä¾›äº†æœ€å°å®‰å…¨æ€§ä¿éšœï¼šçº¿ç¨‹æ‰§è¡Œæ—¶è¯»å–åˆ°çš„å€¼ï¼Œè¦ä¹ˆæ˜¯ä¹‹å‰æŸä¸ªçº¿ç¨‹å†™å…¥çš„å€¼ï¼Œè¦ä¹ˆæ˜¯é»˜è®¤å€¼ï¼ˆ0ï¼Œnullï¼Œfalseï¼‰ã€‚</p><p>ä¸‹å›¾å±•ç¤ºäº†è¿™ä¸‰ç±»ç¨‹åºåœ¨ JMM ä¸­ä¸åœ¨é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¸­çš„æ‰§è¡Œç»“æœçš„å¼‚åŒï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fow7lgmupij311m0sqtcg.jpg" alt="2018-02-28_15-43-10"></p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fp3jkmizmpj30o00didgn.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ws3.sinaimg.cn/large/006tNc79gy1fow7l5mj64j31hc0zbh9n.jpg&quot; alt=&quot;fairyland-canyon-1632749_1920&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‰æ&quot;&gt;&lt;a href=&quot;#å‰æ&quot; class=&quot;headerlink&quot; title=&quot;å‰æ&quot;&gt;&lt;/a&gt;å‰æ&lt;/h3&gt;&lt;p&gt;ã€Šæ·±å…¥ç†è§£ Java å†…å­˜æ¨¡å‹ã€‹ç¨‹æ™“æ˜è‘—ï¼Œè¯¥ä¹¦åœ¨ä»¥å‰çœ‹è¿‡ä¸€éï¼Œç°åœ¨å­¦çš„ä¸œè¥¿è¶Šå¤šï¼Œæ„Ÿè§‰é‚£å—è¶Šé‡è¦ï¼Œäºæ˜¯åˆå†ç»†çœ‹ä¸€éï¼Œäºæ˜¯ä¾¿æœ‰äº†ä¸‹é¢çš„è¯»ä¹¦ç¬”è®°æ€»ç»“ã€‚å…¨ä¹¦é¡µæ•°è™½ä¸å¤šï¼Œå†…å®¹è®²å¾—æŒºæ·±çš„ã€‚ç»†çœ‹çš„è¯ï¼Œä¹Ÿæ˜¯æŒºèŠ±æ—¶é—´çš„ï¼Œçœ‹å®Œæ”¶è·ç»å¯¹æŒºå¤§çš„ã€‚ä¹Ÿå»ºè®® Java å¼€å‘è€…éƒ½å»çœ‹çœ‹ã€‚é‡Œé¢ä¸»è¦æœ‰ Java å†…å­˜æ¨¡å‹çš„åŸºç¡€ã€é‡æ’åºã€é¡ºåºä¸€è‡´æ€§ã€Volatile å…³é”®å­—ã€é”ã€finalã€‚æœ¬æ–‡å‚è€ƒä¹¦ä¸­å†…å®¹ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="JMM" scheme="http://yoursite.com/tags/JMM/"/>
    
  </entry>
  
</feed>
